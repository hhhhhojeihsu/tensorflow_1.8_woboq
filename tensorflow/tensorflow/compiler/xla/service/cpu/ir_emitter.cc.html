<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ir_emitter.cc source code [tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc'; var root_path = '../../../../../..'; var data_path = 'https://code.woboq.org/data';</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>tensorflow</a>/<a href='../../../..'>tensorflow</a>/<a href='../../..'>compiler</a>/<a href='../..'>xla</a>/<a href='..'>service</a>/<a href='./'>cpu</a>/<a href='ir_emitter.cc.html'>ir_emitter.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* Copyright 2017 The TensorFlow Authors. All Rights Reserved.</i></td></tr>
<tr><th id="2">2</th><td><i></i></td></tr>
<tr><th id="3">3</th><td><i>Licensed under the Apache License, Version 2.0 (the "License");</i></td></tr>
<tr><th id="4">4</th><td><i>you may not use this file except in compliance with the License.</i></td></tr>
<tr><th id="5">5</th><td><i>You may obtain a copy of the License at</i></td></tr>
<tr><th id="6">6</th><td><i></i></td></tr>
<tr><th id="7">7</th><td><i>    <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></i></td></tr>
<tr><th id="8">8</th><td><i></i></td></tr>
<tr><th id="9">9</th><td><i>Unless required by applicable law or agreed to in writing, software</i></td></tr>
<tr><th id="10">10</th><td><i>distributed under the License is distributed on an "AS IS" BASIS,</i></td></tr>
<tr><th id="11">11</th><td><i>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</i></td></tr>
<tr><th id="12">12</th><td><i>See the License for the specific language governing permissions and</i></td></tr>
<tr><th id="13">13</th><td><i>limitations under the License.</i></td></tr>
<tr><th id="14">14</th><td><i>==============================================================================*/</i></td></tr>
<tr><th id="15">15</th><td></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="ir_emitter.h.html">"tensorflow/compiler/xla/service/cpu/ir_emitter.h"</a></u></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><u>#include &lt;stddef.h&gt;</u></td></tr>
<tr><th id="19">19</th><td><u>#include &lt;stdint.h&gt;</u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../../../../include/c++/5/algorithm.html">&lt;algorithm&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../../../../../include/c++/5/iterator.html">&lt;iterator&gt;</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../../../../../include/c++/5/limits.html">&lt;limits&gt;</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../../../../../include/c++/5/memory.html">&lt;memory&gt;</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../../../../../../include/c++/5/utility.html">&lt;utility&gt;</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../../../../../../include/c++/5/vector.html">&lt;vector&gt;</a></u></td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="../../../../core/lib/math/math_util.h.html">"tensorflow/core/lib/math/math_util.h"</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../../../../core/platform/logging.h.html">"tensorflow/core/platform/logging.h"</a></u></td></tr>
<tr><th id="29">29</th><td><i>// IWYU pragma: no_include "llvm/IR/Intrinsics.gen.inc"</i></td></tr>
<tr><th id="30">30</th><td><u>#include "llvm/CodeGen/TargetRegisterInfo.h"</u></td></tr>
<tr><th id="31">31</th><td><u>#include "llvm/CodeGen/TargetSubtargetInfo.h"</u></td></tr>
<tr><th id="32">32</th><td><u>#include "llvm/IR/BasicBlock.h"</u></td></tr>
<tr><th id="33">33</th><td><u>#include "llvm/IR/Constants.h"</u></td></tr>
<tr><th id="34">34</th><td><u>#include "llvm/IR/GlobalVariable.h"</u></td></tr>
<tr><th id="35">35</th><td><u>#include "llvm/IR/Instructions.h"</u></td></tr>
<tr><th id="36">36</th><td><u>#include "llvm/IR/Intrinsics.h"</u></td></tr>
<tr><th id="37">37</th><td><u>#include "llvm/IR/LLVMContext.h"</u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../layout_util.h.html">"tensorflow/compiler/xla/layout_util.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../map_util.h.html">"tensorflow/compiler/xla/map_util.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../buffer_assignment.h.html">"tensorflow/compiler/xla/service/buffer_assignment.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="cpu_options.h.html">"tensorflow/compiler/xla/service/cpu/cpu_options.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="cpu_runtime.h.html">"tensorflow/compiler/xla/service/cpu/cpu_runtime.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="dot_op_emitter.h.html">"tensorflow/compiler/xla/service/cpu/dot_op_emitter.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="elemental_ir_emitter.h.html">"tensorflow/compiler/xla/service/cpu/elemental_ir_emitter.h"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="ir_emission_utils.h.html">"tensorflow/compiler/xla/service/cpu/ir_emission_utils.h"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="ir_function.h.html">"tensorflow/compiler/xla/service/cpu/ir_function.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="parallel_loop_emitter.h.html">"tensorflow/compiler/xla/service/cpu/parallel_loop_emitter.h"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="shape_partition.h.html">"tensorflow/compiler/xla/service/cpu/shape_partition.h"</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="simple_orc_jit.h.html">"tensorflow/compiler/xla/service/cpu/simple_orc_jit.h"</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../elemental_ir_emitter.h.html">"tensorflow/compiler/xla/service/elemental_ir_emitter.h"</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../hlo_opcode.h.html">"tensorflow/compiler/xla/service/hlo_opcode.h"</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="../llvm_ir/fused_ir_emitter.h.html">"tensorflow/compiler/xla/service/llvm_ir/fused_ir_emitter.h"</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../llvm_ir/llvm_loop.h.html">"tensorflow/compiler/xla/service/llvm_ir/llvm_loop.h"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../llvm_ir/llvm_util.h.html">"tensorflow/compiler/xla/service/llvm_ir/llvm_util.h"</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../llvm_ir/ops.h.html">"tensorflow/compiler/xla/service/llvm_ir/ops.h"</a></u></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../llvm_ir/tuple_ops.h.html">"tensorflow/compiler/xla/service/llvm_ir/tuple_ops.h"</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../../shape_util.h.html">"tensorflow/compiler/xla/shape_util.h"</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="../../status_macros.h.html">"tensorflow/compiler/xla/status_macros.h"</a></u></td></tr>
<tr><th id="59">59</th><td><u>#include <a href="../../types.h.html">"tensorflow/compiler/xla/types.h"</a></u></td></tr>
<tr><th id="60">60</th><td><u>#include <a href="../../util.h.html">"tensorflow/compiler/xla/util.h"</a></u></td></tr>
<tr><th id="61">61</th><td><u>#include <a href="../../window_util.h.html">"tensorflow/compiler/xla/window_util.h"</a></u></td></tr>
<tr><th id="62">62</th><td><u>#include <a href="../../../../core/lib/core/bits.h.html">"tensorflow/core/lib/core/bits.h"</a></u></td></tr>
<tr><th id="63">63</th><td><u>#include <a href="../../../../core/lib/core/errors.h.html">"tensorflow/core/lib/core/errors.h"</a></u></td></tr>
<tr><th id="64">64</th><td><u>#include <a href="../../../../core/lib/gtl/array_slice.h.html">"tensorflow/core/lib/gtl/array_slice.h"</a></u></td></tr>
<tr><th id="65">65</th><td><u>#include <a href="../../../../core/lib/gtl/flatmap.h.html">"tensorflow/core/lib/gtl/flatmap.h"</a></u></td></tr>
<tr><th id="66">66</th><td><u>#include <a href="../../../../core/lib/gtl/flatset.h.html">"tensorflow/core/lib/gtl/flatset.h"</a></u></td></tr>
<tr><th id="67">67</th><td><u>#include <a href="../../../../core/lib/strings/strcat.h.html">"tensorflow/core/lib/strings/strcat.h"</a></u></td></tr>
<tr><th id="68">68</th><td><u>#include <a href="../../../../core/lib/strings/stringprintf.h.html">"tensorflow/core/lib/strings/stringprintf.h"</a></u></td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><b>namespace</b> <span class="namespace">xla</span> {</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><b>namespace</b> {</td></tr>
<tr><th id="73">73</th><td><b>using</b> <span class="namespace">llvm_ir::</span>AsStringRef;</td></tr>
<tr><th id="74">74</th><td><b>using</b> <span class="namespace">llvm_ir::</span>IrName;</td></tr>
<tr><th id="75">75</th><td><b>using</b> <span class="namespace">llvm_ir::</span>SetToFirstInsertPoint;</td></tr>
<tr><th id="76">76</th><td><b>namespace</b> <span class="namespace">gtl</span> = <span class="namespace">tensorflow::</span><span class="namespace">gtl</span>;</td></tr>
<tr><th id="77">77</th><td>}  <i>// namespace</i></td></tr>
<tr><th id="78">78</th><td></td></tr>
<tr><th id="79">79</th><td><b>namespace</b> <span class="namespace">cpu</span> {</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitterC1ERKNS_9HloModuleERKNS_16BufferAssignmentEPN4llvm6ModuleESt13unordered_mapIPKNS_14HloInstructionExSt4hashISE_ESt8equal_toISE_ESa3683279" title='xla::cpu::IrEmitter::IrEmitter' data-ref="_ZN3xla3cpu9IrEmitterC1ERKNS_9HloModuleERKNS_16BufferAssignmentEPN4llvm6ModuleESt13unordered_mapIPKNS_14HloInstructionExSt4hashISE_ESt8equal_toISE_ESa3683279">IrEmitter</dfn>(</td></tr>
<tr><th id="82">82</th><td>    <em>const</em> <a class="type" href="../hlo_module.h.html#xla::HloModule" title='xla::HloModule' data-ref="xla::HloModule">HloModule</a>&amp; <dfn class="local col2 decl" id="62hlo_module" title='hlo_module' data-type='const xla::HloModule &amp;' data-ref="62hlo_module">hlo_module</dfn>, <em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAssignment" title='xla::BufferAssignment' data-ref="xla::BufferAssignment">BufferAssignment</a>&amp; <dfn class="local col3 decl" id="63assignment" title='assignment' data-type='const xla::BufferAssignment &amp;' data-ref="63assignment">assignment</dfn>,</td></tr>
<tr><th id="83">83</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Module' data-ref="llvm::Module">Module</span>* <dfn class="local col4 decl" id="64llvm_module" title='llvm_module' data-type='llvm::Module *' data-ref="64llvm_module">llvm_module</dfn>,</td></tr>
<tr><th id="84">84</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/unordered_map.h.html#std::unordered_map" title='std::unordered_map' data-ref="std::unordered_map">unordered_map</a>&lt;<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col5 decl" id="65instruction_to_profile_idx" title='instruction_to_profile_idx' data-type='std::unordered_map&lt;const HloInstruction *, int64&gt;' data-ref="65instruction_to_profile_idx">instruction_to_profile_idx</dfn>,</td></tr>
<tr><th id="85">85</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/unordered_map.h.html#std::unordered_map" title='std::unordered_map' data-ref="std::unordered_map">unordered_map</a>&lt;<em>const</em> <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>*, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col6 decl" id="66computation_to_profile_idx" title='computation_to_profile_idx' data-type='std::unordered_map&lt;const HloComputation *, int64&gt;' data-ref="66computation_to_profile_idx">computation_to_profile_idx</dfn>,</td></tr>
<tr><th id="86">86</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::TargetMachine' data-ref="llvm::TargetMachine">TargetMachine</span>* <dfn class="local col7 decl" id="67target_machine" title='target_machine' data-type='llvm::TargetMachine *' data-ref="67target_machine">target_machine</dfn>,</td></tr>
<tr><th id="87">87</th><td>    <a class="type" href="external_constant_pool.h.html#xla::cpu::ExternalConstantPool" title='xla::cpu::ExternalConstantPool' data-ref="xla::cpu::ExternalConstantPool">ExternalConstantPool</a>* <dfn class="local col8 decl" id="68external_constant_pool" title='external_constant_pool' data-type='xla::cpu::ExternalConstantPool *' data-ref="68external_constant_pool">external_constant_pool</dfn>)</td></tr>
<tr><th id="88">88</th><td>    : <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>(<a class="local col3 ref" href="#63assignment" title='assignment' data-ref="63assignment">assignment</a>),</td></tr>
<tr><th id="89">89</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>(<a class="local col4 ref" href="#64llvm_module" title='llvm_module' data-ref="64llvm_module">llvm_module</a>),</td></tr>
<tr><th id="90">90</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::arch_type_" title='xla::cpu::IrEmitter::arch_type_' data-ref="xla::cpu::IrEmitter::arch_type_">arch_type_</a>(<span class="namespace">llvm::</span><span class='type' title='llvm::Triple' data-ref="llvm::Triple">Triple</span><span class='ref' title='llvm::Triple::Triple' data-ref="_ZN4llvm6TripleC1ERKNS_5TwineE">(</span><span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKSs"></span><a class="local col4 ref" href="#64llvm_module" title='llvm_module' data-ref="64llvm_module">llvm_module</a>-&gt;<span class='ref' title='llvm::Module::getTargetTriple' data-ref="_ZNK4llvm6Module15getTargetTripleEv">getTargetTriple</span>()).<span class='ref' title='llvm::Triple::getArch' data-ref="_ZNK4llvm6Triple7getArchEv">getArch</span>()),</td></tr>
<tr><th id="91">91</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a><span class='ref' title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1ERNS_11LLVMContextEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</span><a class="local col4 ref" href="#64llvm_module" title='llvm_module' data-ref="64llvm_module">llvm_module</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()),</td></tr>
<tr><th id="92">92</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::instruction_to_profile_idx_" title='xla::cpu::IrEmitter::instruction_to_profile_idx_' data-ref="xla::cpu::IrEmitter::instruction_to_profile_idx_">instruction_to_profile_idx_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapC1EOSt13unordered_mapIT_T0_T1_T2_T3_E" title='std::unordered_map::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;' data-ref="_ZNSt13unordered_mapC1EOSt13unordered_mapIT_T0_T1_T2_T3_E">(</a><span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/move.h.html#_ZSt4moveOT_" title='std::move' data-ref="_ZSt4moveOT_">move</a>(<span class='refarg'><a class="local col5 ref" href="#65instruction_to_profile_idx" title='instruction_to_profile_idx' data-ref="65instruction_to_profile_idx">instruction_to_profile_idx</a></span>)),</td></tr>
<tr><th id="93">93</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::computation_to_profile_idx_" title='xla::cpu::IrEmitter::computation_to_profile_idx_' data-ref="xla::cpu::IrEmitter::computation_to_profile_idx_">computation_to_profile_idx_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapC1EOSt13unordered_mapIT_T0_T1_T2_T3_E" title='std::unordered_map::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;' data-ref="_ZNSt13unordered_mapC1EOSt13unordered_mapIT_T0_T1_T2_T3_E">(</a><span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/move.h.html#_ZSt4moveOT_" title='std::move' data-ref="_ZSt4moveOT_">move</a>(<span class='refarg'><a class="local col6 ref" href="#66computation_to_profile_idx" title='computation_to_profile_idx' data-ref="66computation_to_profile_idx">computation_to_profile_idx</a></span>)),</td></tr>
<tr><th id="94">94</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::alias_analysis_" title='xla::cpu::IrEmitter::alias_analysis_' data-ref="xla::cpu::IrEmitter::alias_analysis_">alias_analysis_</a><a class="ref" href="../llvm_ir/alias_analysis.h.html#_ZN3xla7llvm_ir13AliasAnalysisC1ERKNS_9HloModuleERKNS_16BufferAssignmentEPN4llvm11LLVMContextE" title='xla::llvm_ir::AliasAnalysis::AliasAnalysis' data-ref="_ZN3xla7llvm_ir13AliasAnalysisC1ERKNS_9HloModuleERKNS_16BufferAssignmentEPN4llvm11LLVMContextE">(</a><a class="local col2 ref" href="#62hlo_module" title='hlo_module' data-ref="62hlo_module">hlo_module</a>, <a class="local col3 ref" href="#63assignment" title='assignment' data-ref="63assignment">assignment</a>, &amp;<a class="local col4 ref" href="#64llvm_module" title='llvm_module' data-ref="64llvm_module">llvm_module</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()),</td></tr>
<tr><th id="95">95</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>(<a class="local col2 ref" href="#62hlo_module" title='hlo_module' data-ref="62hlo_module">hlo_module</a>.<a class="ref" href="../hlo_module.h.html#_ZNK3xla9HloModule6configEv" title='xla::HloModule::config' data-ref="_ZNK3xla9HloModule6configEv">config</a>()),</td></tr>
<tr><th id="96">96</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::parallel_cpu_backend_" title='xla::cpu::IrEmitter::parallel_cpu_backend_' data-ref="xla::cpu::IrEmitter::parallel_cpu_backend_">parallel_cpu_backend_</a>(</td></tr>
<tr><th id="97">97</th><td>          <span class="namespace">options::</span><a class="ref" href="cpu_options.h.html#_ZN3xla3cpu7options27CpuParallelBackendRequestedERKNS_15HloModuleConfigE" title='xla::cpu::options::CpuParallelBackendRequested' data-ref="_ZN3xla3cpu7options27CpuParallelBackendRequestedERKNS_15HloModuleConfigE">CpuParallelBackendRequested</a>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>)),</td></tr>
<tr><th id="98">98</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a>(<b>false</b>),</td></tr>
<tr><th id="99">99</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a><a class="ref" href="target_machine_features.h.html#_ZN3xla3cpu21TargetMachineFeaturesC1EPN4llvm13TargetMachineE" title='xla::cpu::TargetMachineFeatures::TargetMachineFeatures' data-ref="_ZN3xla3cpu21TargetMachineFeaturesC1EPN4llvm13TargetMachineE">(</a><a class="local col7 ref" href="#67target_machine" title='target_machine' data-ref="67target_machine">target_machine</a>),</td></tr>
<tr><th id="100">100</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::external_constant_pool_" title='xla::cpu::IrEmitter::external_constant_pool_' data-ref="xla::cpu::IrEmitter::external_constant_pool_">external_constant_pool_</a>(<a class="local col8 ref" href="#68external_constant_pool" title='external_constant_pool' data-ref="68external_constant_pool">external_constant_pool</a>) {</td></tr>
<tr><th id="101">101</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::setFastMathFlags' data-ref="_ZN4llvm13IRBuilderBase16setFastMathFlagsENS_13FastMathFlagsE">setFastMathFlags</span>(<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir16GetFastMathFlagsEb" title='xla::llvm_ir::GetFastMathFlags' data-ref="_ZN3xla7llvm_ir16GetFastMathFlagsEb">GetFastMathFlags</a>(</td></tr>
<tr><th id="102">102</th><td>      <i>/*fast_math_enabled=*/</i><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13debug_optionsEv" title='xla::HloModuleConfig::debug_options' data-ref="_ZNK3xla15HloModuleConfig13debug_optionsEv">debug_options</a>()</td></tr>
<tr><th id="103">103</th><td>          .<span class='ref' title='xla::DebugOptions::xla_enable_fast_math' data-ref="_ZNK3xla12DebugOptions20xla_enable_fast_mathEv">xla_enable_fast_math</span>()));</td></tr>
<tr><th id="104">104</th><td>}</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td><a class="type" href="../../statusor.h.html#xla::StatusOr" title='xla::StatusOr' data-ref="xla::StatusOr">StatusOr</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>*&gt; <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter15EmitComputationEPNS_14HloComputationERKSsbPSt6vectorIPKNS_14HloInstructionESaIS9_EE" title='xla::cpu::IrEmitter::EmitComputation' data-ref="_ZN3xla3cpu9IrEmitter15EmitComputationEPNS_14HloComputationERKSsbPSt6vectorIPKNS_14HloInstructionESaIS9_EE">EmitComputation</dfn>(</td></tr>
<tr><th id="107">107</th><td>    <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col9 decl" id="69computation" title='computation' data-type='xla::HloComputation *' data-ref="69computation">computation</dfn>, <em>const</em> <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a>&amp; <dfn class="local col0 decl" id="70function_name_prefix" title='function_name_prefix' data-type='const string &amp;' data-ref="70function_name_prefix">function_name_prefix</dfn>,</td></tr>
<tr><th id="108">108</th><td>    <em>bool</em> <dfn class="local col1 decl" id="71is_top_level_computation" title='is_top_level_computation' data-type='bool' data-ref="71is_top_level_computation">is_top_level_computation</dfn>,</td></tr>
<tr><th id="109">109</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt;* <dfn class="local col2 decl" id="72instruction_order" title='instruction_order' data-type='std::vector&lt;const HloInstruction *&gt; *' data-ref="72instruction_order">instruction_order</dfn>) {</td></tr>
<tr><th id="110">110</th><td>  <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <dfn class="local col3 decl" id="73function_name" title='function_name' data-type='string' data-ref="73function_name">function_name</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::name_uniquer_" title='xla::cpu::IrEmitter::name_uniquer_' data-ref="xla::cpu::IrEmitter::name_uniquer_">name_uniquer_</a>.<a class="ref" href="../name_uniquer.h.html#_ZN3xla11NameUniquer13GetUniqueNameEN10tensorflow11StringPieceE" title='xla::NameUniquer::GetUniqueName' data-ref="_ZN3xla11NameUniquer13GetUniqueNameEN10tensorflow11StringPieceE">GetUniqueName</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="local col0 ref" href="#70function_name_prefix" title='function_name_prefix' data-ref="70function_name_prefix">function_name_prefix</a>);</td></tr>
<tr><th id="111">111</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 111, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Emitting IR for CPU function ["</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col0 ref" href="#70function_name_prefix" title='function_name_prefix' data-ref="70function_name_prefix">function_name_prefix</a></td></tr>
<tr><th id="112">112</th><td>          <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"]; ordered? "</q> <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZNSt13basic_ostreamlsEb" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEb">&lt;&lt;</a> (<a class="local col2 ref" href="#72instruction_order" title='instruction_order' data-ref="72instruction_order">instruction_order</a> != <b>nullptr</b>);</td></tr>
<tr><th id="113">113</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a> = <a class="local col1 ref" href="#71is_top_level_computation" title='is_top_level_computation' data-ref="71is_top_level_computation">is_top_level_computation</a>;</td></tr>
<tr><th id="114">114</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::num_dynamic_loop_bounds_" title='xla::cpu::IrEmitter::num_dynamic_loop_bounds_' data-ref="xla::cpu::IrEmitter::num_dynamic_loop_bounds_">num_dynamic_loop_bounds_</a> = <var>0</var>;</td></tr>
<tr><th id="115">115</th><td>  <b>if</b> (!<a class="local col9 ref" href="#69computation" title='computation' data-ref="69computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction26outer_dimension_partitionsEv" title='xla::HloInstruction::outer_dimension_partitions' data-ref="_ZNK3xla14HloInstruction26outer_dimension_partitionsEv">outer_dimension_partitions</a>().<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector5emptyEv" title='std::vector::empty' data-ref="_ZNKSt6vector5emptyEv">empty</a>()) {</td></tr>
<tr><th id="116">116</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::num_dynamic_loop_bounds_" title='xla::cpu::IrEmitter::num_dynamic_loop_bounds_' data-ref="xla::cpu::IrEmitter::num_dynamic_loop_bounds_">num_dynamic_loop_bounds_</a> =</td></tr>
<tr><th id="117">117</th><td>        <a class="local col9 ref" href="#69computation" title='computation' data-ref="69computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction26outer_dimension_partitionsEv" title='xla::HloInstruction::outer_dimension_partitions' data-ref="_ZNK3xla14HloInstruction26outer_dimension_partitionsEv">outer_dimension_partitions</a>().<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>();</td></tr>
<tr><th id="118">118</th><td>  }</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter20InitializeIrFunctionERKSs" title='xla::cpu::IrEmitter::InitializeIrFunction' data-ref="_ZN3xla3cpu9IrEmitter20InitializeIrFunctionERKSs">InitializeIrFunction</a>(<a class="local col3 ref" href="#73function_name" title='function_name' data-ref="73function_name">function_name</a>);</td></tr>
<tr><th id="121">121</th><td>  <i>// The rdtscp instruction is x86 specific.  We will fallback to LLVM's generic</i></td></tr>
<tr><th id="122">122</th><td><i>  // readcyclecounter if it is unavailable.</i></td></tr>
<tr><th id="123">123</th><td>  <em>bool</em> <dfn class="local col4 decl" id="74use_rdtscp" title='use_rdtscp' data-type='bool' data-ref="74use_rdtscp">use_rdtscp</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::arch_type_" title='xla::cpu::IrEmitter::arch_type_' data-ref="xla::cpu::IrEmitter::arch_type_">arch_type_</a> == <span class="namespace">llvm::</span><span class='type' title='llvm::Triple' data-ref="llvm::Triple">Triple</span>::<span class='type' title='llvm::Triple::ArchType' data-ref="llvm::Triple::ArchType">ArchType</span>::<span class='enum' title='llvm::Triple::ArchType::x86' data-ref="llvm::Triple::ArchType::x86">x86</span> ||</td></tr>
<tr><th id="124">124</th><td>                    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::arch_type_" title='xla::cpu::IrEmitter::arch_type_' data-ref="xla::cpu::IrEmitter::arch_type_">arch_type_</a> == <span class="namespace">llvm::</span><span class='type' title='llvm::Triple' data-ref="llvm::Triple">Triple</span>::<span class='type' title='llvm::Triple::ArchType' data-ref="llvm::Triple::ArchType">ArchType</span>::<span class='enum' title='llvm::Triple::ArchType::x86_64' data-ref="llvm::Triple::ArchType::x86_64">x86_64</span>;</td></tr>
<tr><th id="125">125</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::profiling_state_" title='xla::cpu::IrEmitter::profiling_state_' data-ref="xla::cpu::IrEmitter::profiling_state_">profiling_state_</a> <a class="ref" href="ir_emitter.h.html#449" title='xla::cpu::IrEmitter::ProfilingState::operator=' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingStateaSEOS2_">=</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a><a class="ref" href="ir_emitter.h.html#_ZN3xla3cpu9IrEmitter14ProfilingStateC1EbPN4llvm5ValueE" title='xla::cpu::IrEmitter::ProfilingState::ProfilingState' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingStateC1EbPN4llvm5ValueE">(</a><a class="local col4 ref" href="#74use_rdtscp" title='use_rdtscp' data-ref="74use_rdtscp">use_rdtscp</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv" title='xla::cpu::IrEmitter::GetProfileCountersArgument' data-ref="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv">GetProfileCountersArgument</a>());</td></tr>
<tr><th id="126">126</th><td>  <b>if</b> (<a class="local col2 ref" href="#72instruction_order" title='instruction_order' data-ref="72instruction_order">instruction_order</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="127">127</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (computation-&gt;Accept(this)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col9 ref" href="#69computation" title='computation' data-ref="69computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation6AcceptEPNS_17DfsHloVisitorBaseIT_EE" title='xla::HloComputation::Accept' data-ref="_ZNK3xla14HloComputation6AcceptEPNS_17DfsHloVisitorBaseIT_EE">Accept</a>(<b>this</b>));</td></tr>
<tr><th id="128">128</th><td>  } <b>else</b> {</td></tr>
<tr><th id="129">129</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (computation-&gt;AcceptOrdered(this, *instruction_order)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col9 ref" href="#69computation" title='computation' data-ref="69computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation13AcceptOrderedEPNS_17DfsHloVisitorBaseIT_EERKSt6vectorIPKNS_14HloInstructionESaIS8_EE" title='xla::HloComputation::AcceptOrdered' data-ref="_ZNK3xla14HloComputation13AcceptOrderedEPNS_17DfsHloVisitorBaseIT_EERKSt6vectorIPKNS_14HloInstructionESaIS8_EE">AcceptOrdered</a>(<b>this</b>, *<a class="local col2 ref" href="#72instruction_order" title='instruction_order' data-ref="72instruction_order">instruction_order</a>));</td></tr>
<tr><th id="130">130</th><td>  }</td></tr>
<tr><th id="131">131</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col5 decl" id="75ir_function" title='ir_function' data-type='llvm::Function *' data-ref="75ir_function">ir_function</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction8functionEv" title='xla::cpu::IrFunction::function' data-ref="_ZN3xla3cpu10IrFunction8functionEv">function</a>();</td></tr>
<tr><th id="132">132</th><td>  <a class="ref" href="../../map_util.h.html#_ZN3xla11InsertOrDieEPT_RKNS0_10value_type10first_typeERKNS0_10value_type11second_typeE" title='xla::InsertOrDie' data-ref="_ZN3xla11InsertOrDieEPT_RKNS0_10value_type10first_typeERKNS0_10value_type11second_typeE">InsertOrDie</a>(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a>, <a class="local col9 ref" href="#69computation" title='computation' data-ref="69computation">computation</a>, <a class="local col5 ref" href="#75ir_function" title='ir_function' data-ref="75ir_function">ir_function</a>);</td></tr>
<tr><th id="133">133</th><td>  <i>// Delete 'compute_function', finalizing 'ir_function' and restoring caller</i></td></tr>
<tr><th id="134">134</th><td><i>  // IR insert point.</i></td></tr>
<tr><th id="135">135</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a>.<a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNSt10unique_ptr5resetENNS_8_PointerE4typeE" title='std::unique_ptr::reset' data-ref="_ZNSt10unique_ptr5resetENNS_8_PointerE4typeE">reset</a>();</td></tr>
<tr><th id="136">136</th><td>  <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1ERKT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1ERKT_"></a><a class="local col5 ref" href="#75ir_function" title='ir_function' data-ref="75ir_function">ir_function</a>;</td></tr>
<tr><th id="137">137</th><td>}</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter20InitializeIrFunctionERKSs" title='xla::cpu::IrEmitter::InitializeIrFunction' data-ref="_ZN3xla3cpu9IrEmitter20InitializeIrFunctionERKSs">InitializeIrFunction</dfn>(<em>const</em> <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a>&amp; <dfn class="local col6 decl" id="76function_name" title='function_name' data-type='const string &amp;' data-ref="76function_name">function_name</dfn>) {</td></tr>
<tr><th id="140">140</th><td>  <i>// Functions with local linkage get an inlining bonus.  Because we know</i></td></tr>
<tr><th id="141">141</th><td><i>  // a-priori that embedded functions (non-entry functions) will not have its</i></td></tr>
<tr><th id="142">142</th><td><i>  // name resolved, give it local linkage.</i></td></tr>
<tr><th id="143">143</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>::<span class='type' title='llvm::GlobalValue::LinkageTypes' data-ref="llvm::GlobalValue::LinkageTypes">LinkageTypes</span> <dfn class="local col7 decl" id="77linkage" title='linkage' data-type='llvm::Function::LinkageTypes' data-ref="77linkage">linkage</dfn> =</td></tr>
<tr><th id="144">144</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a> ? <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::LinkageTypes::ExternalLinkage' data-ref="llvm::GlobalValue::LinkageTypes::ExternalLinkage">ExternalLinkage</span></td></tr>
<tr><th id="145">145</th><td>                                : <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::LinkageTypes::InternalLinkage' data-ref="llvm::GlobalValue::LinkageTypes::InternalLinkage">InternalLinkage</span>;</td></tr>
<tr><th id="146">146</th><td>  <i>// Create and initialize new IrFunction.</i></td></tr>
<tr><th id="147">147</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a>.<a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNSt10unique_ptr5resetENNS_8_PointerE4typeE" title='std::unique_ptr::reset' data-ref="_ZNSt10unique_ptr5resetENNS_8_PointerE4typeE">reset</a>(</td></tr>
<tr><th id="148">148</th><td>      <b>new</b> <a class="type" href="ir_function.h.html#xla::cpu::IrFunction" title='xla::cpu::IrFunction' data-ref="xla::cpu::IrFunction">IrFunction</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunctionC1ERKSsN4llvm11GlobalValue12LinkageTypesEbbPNS4_6ModuleEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEx" title='xla::cpu::IrFunction::IrFunction' data-ref="_ZN3xla3cpu10IrFunctionC1ERKSsN4llvm11GlobalValue12LinkageTypesEbbPNS4_6ModuleEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEx">(</a><a class="local col6 ref" href="#76function_name" title='function_name' data-ref="76function_name">function_name</a>, <a class="local col7 ref" href="#77linkage" title='linkage' data-ref="77linkage">linkage</a>,</td></tr>
<tr><th id="149">149</th><td>                     <span class="namespace">options::</span><a class="ref" href="cpu_options.h.html#_ZN3xla3cpu7options24OptimizeForSizeRequestedERKNS_15HloModuleConfigE" title='xla::cpu::options::OptimizeForSizeRequested' data-ref="_ZN3xla3cpu7options24OptimizeForSizeRequestedERKNS_15HloModuleConfigE">OptimizeForSizeRequested</a>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>),</td></tr>
<tr><th id="150">150</th><td>                     <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13debug_optionsEv" title='xla::HloModuleConfig::debug_options' data-ref="_ZNK3xla15HloModuleConfig13debug_optionsEv">debug_options</a>().<span class='ref' title='xla::DebugOptions::xla_enable_fast_math' data-ref="_ZNK3xla12DebugOptions20xla_enable_fast_mathEv">xla_enable_fast_math</span>(),</td></tr>
<tr><th id="151">151</th><td>                     <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::num_dynamic_loop_bounds_" title='xla::cpu::IrEmitter::num_dynamic_loop_bounds_' data-ref="xla::cpu::IrEmitter::num_dynamic_loop_bounds_">num_dynamic_loop_bounds_</a>));</td></tr>
<tr><th id="152">152</th><td>}</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td><a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitterD1Ev" title='xla::cpu::IrEmitter::~IrEmitter' data-ref="_ZN3xla3cpu9IrEmitterD1Ev">~IrEmitter</dfn>() {}</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter13HandleBitcastEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleBitcast' data-ref="_ZN3xla3cpu9IrEmitter13HandleBitcastEPNS_14HloInstructionE">HandleBitcast</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="78bitcast" title='bitcast' data-type='xla::HloInstruction *' data-ref="78bitcast">bitcast</dfn>) {</td></tr>
<tr><th id="157">157</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 157, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleBitcast: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col8 ref" href="#78bitcast" title='bitcast' data-ref="78bitcast">bitcast</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="158">158</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col8 ref" href="#78bitcast" title='bitcast' data-ref="78bitcast">bitcast</a>]</a> =</td></tr>
<tr><th id="159">159</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col8 ref" href="#78bitcast" title='bitcast' data-ref="78bitcast">bitcast</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)),</td></tr>
<tr><th id="160">160</th><td>                                <a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col8 ref" href="#78bitcast" title='bitcast' data-ref="78bitcast">bitcast</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>(),</td></tr>
<tr><th id="161">161</th><td>                                <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col8 ref" href="#78bitcast" title='bitcast' data-ref="78bitcast">bitcast</a>)));</td></tr>
<tr><th id="162">162</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="163">163</th><td>}</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter14HandleConstantEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleConstant' data-ref="_ZN3xla3cpu9IrEmitter14HandleConstantEPNS_14HloInstructionE">HandleConstant</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="79constant" title='constant' data-type='xla::HloInstruction *' data-ref="79constant">constant</dfn>) {</td></tr>
<tr><th id="166">166</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 166, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleConstant: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col9 ref" href="#79constant" title='constant' data-ref="79constant">constant</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="167">167</th><td>  <em>const</em> <a class="type" href="../../literal_util.h.html#xla::Literal" title='xla::Literal' data-ref="xla::Literal">Literal</a>&amp; <dfn class="local col0 decl" id="80literal" title='literal' data-type='const xla::Literal &amp;' data-ref="80literal">literal</dfn> = <a class="local col9 ref" href="#79constant" title='constant' data-ref="79constant">constant</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7literalEv" title='xla::HloInstruction::literal' data-ref="_ZNK3xla14HloInstruction7literalEv">literal</a>();</td></tr>
<tr><th id="168">168</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalVariable' data-ref="llvm::GlobalVariable">GlobalVariable</span>* <dfn class="local col1 decl" id="81global_for_const" title='global_for_const' data-type='llvm::GlobalVariable *' data-ref="81global_for_const">global_for_const</dfn>;</td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td>  <i>// We avoid creating large constants in the LLVM IR since LLVM is not</i></td></tr>
<tr><th id="171">171</th><td><i>  // efficient for large constant arrays.  We still emit "small enough" constant</i></td></tr>
<tr><th id="172">172</th><td><i>  // arrays into the Ir, in the off chance the LLVM optimizer can do something</i></td></tr>
<tr><th id="173">173</th><td><i>  // interesting with it.</i></td></tr>
<tr><th id="174">174</th><td>  <em>const</em> <em>int</em> <dfn class="local col2 decl" id="82kMaxInternalConstantSizeInBytes" title='kMaxInternalConstantSizeInBytes' data-type='const int' data-ref="82kMaxInternalConstantSizeInBytes">kMaxInternalConstantSizeInBytes</dfn> = <var>128</var>;</td></tr>
<tr><th id="175">175</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::external_constant_pool_" title='xla::cpu::IrEmitter::external_constant_pool_' data-ref="xla::cpu::IrEmitter::external_constant_pool_">external_constant_pool_</a> &amp;&amp;</td></tr>
<tr><th id="176">176</th><td>      <a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>.<a class="ref" href="../../literal_util.h.html#_ZNK3xla7Literal5shapeEv" title='xla::Literal::shape' data-ref="_ZNK3xla7Literal5shapeEv">shape</a>()) &gt;= <a class="local col2 ref" href="#82kMaxInternalConstantSizeInBytes" title='kMaxInternalConstantSizeInBytes' data-ref="82kMaxInternalConstantSizeInBytes">kMaxInternalConstantSizeInBytes</a>) {</td></tr>
<tr><th id="177">177</th><td>    <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <dfn class="local col3 decl" id="83global_name" title='global_name' data-type='string' data-ref="83global_name">global_name</dfn> = <span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_" title='tensorflow::strings::StrCat' data-ref="_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_">StrCat</a>(</td></tr>
<tr><th id="178">178</th><td>        <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1EPKc" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1EPKc"></a><q>"constant_global_"</q>, <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1Ex" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1Ex"></a><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::external_global_constant_counter_" title='xla::cpu::IrEmitter::external_global_constant_counter_' data-ref="xla::cpu::IrEmitter::external_global_constant_counter_">external_global_constant_counter_</a>++);</td></tr>
<tr><th id="179">179</th><td>    <a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a> = <b>new</b> <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalVariable' data-ref="llvm::GlobalVariable">GlobalVariable</span><span class='ref' title='llvm::GlobalVariable::GlobalVariable' data-ref="_ZN4llvm14GlobalVariableC1ERNS_6ModuleEPNS_4TypeEbNS_11GlobalValue12LinkageTypesEPNS_8ConstantERKNS_5TwineEPS0_NS5_15ThreadLocalModeEjb">(</span></td></tr>
<tr><th id="180">180</th><td>        <i>/*Module=*/</i>*<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>,</td></tr>
<tr><th id="181">181</th><td>        <i>/*Type=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>.<a class="ref" href="../../literal_util.h.html#_ZNK3xla7Literal5shapeEv" title='xla::Literal::shape' data-ref="_ZNK3xla7Literal5shapeEv">shape</a>()),</td></tr>
<tr><th id="182">182</th><td>        <i>/*isConstant=*/</i><b>true</b>,</td></tr>
<tr><th id="183">183</th><td>        <i>/*Linkage=*/</i><span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::LinkageTypes::ExternalLinkage' data-ref="llvm::GlobalValue::LinkageTypes::ExternalLinkage">ExternalLinkage</span>,</td></tr>
<tr><th id="184">184</th><td>        <i>/*Initializer=*/</i><b>nullptr</b>,</td></tr>
<tr><th id="185">185</th><td>        <i>/*Name=*/</i><span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="local col3 ref" href="#83global_name" title='global_name' data-ref="83global_name">global_name</a>));</td></tr>
<tr><th id="186">186</th><td>    <a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a>-&gt;<span class='ref' title='llvm::GlobalObject::setAlignment' data-ref="_ZN4llvm12GlobalObject12setAlignmentEj">setAlignment</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>.<a class="ref" href="../../literal_util.h.html#_ZNK3xla7Literal5shapeEv" title='xla::Literal::shape' data-ref="_ZNK3xla7Literal5shapeEv">shape</a>()));</td></tr>
<tr><th id="187">187</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::external_constant_pool_" title='xla::cpu::IrEmitter::external_constant_pool_' data-ref="xla::cpu::IrEmitter::external_constant_pool_">external_constant_pool_</a>-&gt;<a class="ref" href="external_constant_pool.h.html#_ZN3xla3cpu20ExternalConstantPool6InsertESsRKNS_7LiteralEx" title='xla::cpu::ExternalConstantPool::Insert' data-ref="_ZN3xla3cpu20ExternalConstantPool6InsertESsRKNS_7LiteralEx">Insert</a>(<a class="ref fake" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringC1ERKSbIT_T0_T1_E" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt12basic_stringC1ERKSbIT_T0_T1_E"></a><a class="local col3 ref" href="#83global_name" title='global_name' data-ref="83global_name">global_name</a>, <a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>,</td></tr>
<tr><th id="188">188</th><td>                                    <a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>.<a class="ref" href="../../literal_util.h.html#_ZNK3xla7Literal5shapeEv" title='xla::Literal::shape' data-ref="_ZNK3xla7Literal5shapeEv">shape</a>()));</td></tr>
<tr><th id="189">189</th><td>  } <b>else</b> {</td></tr>
<tr><th id="190">190</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Constant' data-ref="llvm::Constant">Constant</span>* <dfn class="local col4 decl" id="84initializer" title='initializer' data-type='llvm::Constant *' data-ref="84initializer">initializer</dfn> =</td></tr>
<tr><th id="191">191</th><td>        <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir26ConvertLiteralToIrConstantERKNS_7LiteralEPN4llvm6ModuleE" title='xla::llvm_ir::ConvertLiteralToIrConstant' data-ref="_ZN3xla7llvm_ir26ConvertLiteralToIrConstantERKNS_7LiteralEPN4llvm6ModuleE">ConvertLiteralToIrConstant</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="192">192</th><td>    <a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a> = <b>new</b> <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalVariable' data-ref="llvm::GlobalVariable">GlobalVariable</span><span class='ref' title='llvm::GlobalVariable::GlobalVariable' data-ref="_ZN4llvm14GlobalVariableC1ERNS_6ModuleEPNS_4TypeEbNS_11GlobalValue12LinkageTypesEPNS_8ConstantERKNS_5TwineEPS0_NS5_15ThreadLocalModeEjb">(</span></td></tr>
<tr><th id="193">193</th><td>        <i>/*Module=*/</i>*<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>,</td></tr>
<tr><th id="194">194</th><td>        <i>/*Type=*/</i><a class="local col4 ref" href="#84initializer" title='initializer' data-ref="84initializer">initializer</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>(),</td></tr>
<tr><th id="195">195</th><td>        <i>/*isConstant=*/</i><b>true</b>,</td></tr>
<tr><th id="196">196</th><td>        <i>/*Linkage=*/</i><span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::LinkageTypes::PrivateLinkage' data-ref="llvm::GlobalValue::LinkageTypes::PrivateLinkage">PrivateLinkage</span>,</td></tr>
<tr><th id="197">197</th><td>        <i>/*Initializer=*/</i><a class="local col4 ref" href="#84initializer" title='initializer' data-ref="84initializer">initializer</a>,</td></tr>
<tr><th id="198">198</th><td>        <i>/*Name=*/</i><span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></span><q>""</q>);</td></tr>
<tr><th id="199">199</th><td>    <a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a>-&gt;<span class='ref' title='llvm::GlobalObject::setAlignment' data-ref="_ZN4llvm12GlobalObject12setAlignmentEj">setAlignment</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col0 ref" href="#80literal" title='literal' data-ref="80literal">literal</a>.<a class="ref" href="../../literal_util.h.html#_ZNK3xla7Literal5shapeEv" title='xla::Literal::shape' data-ref="_ZNK3xla7Literal5shapeEv">shape</a>()));</td></tr>
<tr><th id="200">200</th><td>  }</td></tr>
<tr><th id="201">201</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col9 ref" href="#79constant" title='constant' data-ref="79constant">constant</a>]</a> = <a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a>;</td></tr>
<tr><th id="202">202</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 202, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  emitted value: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a>);</td></tr>
<tr><th id="203">203</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 203, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  its type: "</q></td></tr>
<tr><th id="204">204</th><td>          <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col1 ref" href="#81global_for_const" title='global_for_const' data-ref="81global_for_const">global_for_const</a>-&gt;<span class='ref' title='llvm::GlobalValue::getType' data-ref="_ZNK4llvm11GlobalValue7getTypeEv">getType</span>());</td></tr>
<tr><th id="205">205</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="206">206</th><td>}</td></tr>
<tr><th id="207">207</th><td></td></tr>
<tr><th id="208">208</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10HandleCopyEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleCopy' data-ref="_ZN3xla3cpu9IrEmitter10HandleCopyEPNS_14HloInstructionE">HandleCopy</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="85copy" title='copy' data-type='xla::HloInstruction *' data-ref="85copy">copy</dfn>) {</td></tr>
<tr><th id="209">209</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsTuple' data-ref="_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE">IsTuple</a>(<a class="local col5 ref" href="#85copy" title='copy' data-ref="85copy">copy</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="210">210</th><td>    <i>// kCopy shallow copies a tuple so just memcpy the top-level buffer.</i></td></tr>
<tr><th id="211">211</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(copy)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col5 ref" href="#85copy" title='copy' data-ref="85copy">copy</a>));</td></tr>
<tr><th id="212">212</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</a>(*(<a class="local col5 ref" href="#85copy" title='copy' data-ref="85copy">copy</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)), *<a class="local col5 ref" href="#85copy" title='copy' data-ref="85copy">copy</a>);</td></tr>
<tr><th id="213">213</th><td>  } <b>else</b> {</td></tr>
<tr><th id="214">214</th><td>    <i>// Use the elemental emitter for non-tuple shapes.</i></td></tr>
<tr><th id="215">215</th><td>    <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col5 ref" href="#85copy" title='copy' data-ref="85copy">copy</a>);</td></tr>
<tr><th id="216">216</th><td>  }</td></tr>
<tr><th id="217">217</th><td>}</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td><i>// Calculate the alignment of a buffer with a particular size.</i></td></tr>
<tr><th id="220">220</th><td><em>int</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx" title='xla::cpu::IrEmitter::MinimumAlignmentForBufferSize' data-ref="_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx">MinimumAlignmentForBufferSize</dfn>(<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="86buffer_size" title='buffer_size' data-type='int64' data-ref="86buffer_size">buffer_size</dfn>) {</td></tr>
<tr><th id="221">221</th><td>  <i>// GLibc returns a pointer with alignment 8 on 32-bit platforms and 16 on</i></td></tr>
<tr><th id="222">222</th><td><i>  // 64-bit platforms.  TCMalloc returns a pointer with alignment 8 for</i></td></tr>
<tr><th id="223">223</th><td><i>  // allocations smaller than kMallocAlignmentThreshold bytes and at least</i></td></tr>
<tr><th id="224">224</th><td><i>  // alignment 16 for allocations greater than or equal to</i></td></tr>
<tr><th id="225">225</th><td><i>  // kMallocAlignmentThreshold bytes.  N.B. We could improve on this lower bound</i></td></tr>
<tr><th id="226">226</th><td><i>  // by explicitly allocating the memory with posix_memalign.  This is</i></td></tr>
<tr><th id="227">227</th><td><i>  // complicated by our desire to allow parameter buffers created by clients to</i></td></tr>
<tr><th id="228">228</th><td><i>  // be consumed directly by the JIT.</i></td></tr>
<tr><th id="229">229</th><td>  <b>if</b> (<a class="local col6 ref" href="#86buffer_size" title='buffer_size' data-ref="86buffer_size">buffer_size</a> == <var>0</var>) {</td></tr>
<tr><th id="230">230</th><td>    <i>// No need to align empty buffers.</i></td></tr>
<tr><th id="231">231</th><td>    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="232">232</th><td>  }</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="87kMallocAlignmentThreshold" title='kMallocAlignmentThreshold' data-type='const int64' data-ref="87kMallocAlignmentThreshold">kMallocAlignmentThreshold</dfn> = <var>512</var>;</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td>  <em>int</em> <dfn class="local col8 decl" id="88pointer_size" title='pointer_size' data-type='int' data-ref="88pointer_size">pointer_size</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</span>().<span class='ref' title='llvm::DataLayout::getPointerSize' data-ref="_ZNK4llvm10DataLayout14getPointerSizeEj">getPointerSize</span>();</td></tr>
<tr><th id="237">237</th><td>  <em>int</em> <dfn class="local col9 decl" id="89buffer_alignment" title='buffer_alignment' data-type='int' data-ref="89buffer_alignment">buffer_alignment</dfn> = <a class="local col6 ref" href="#86buffer_size" title='buffer_size' data-ref="86buffer_size">buffer_size</a> &gt;= <a class="local col7 ref" href="#87kMallocAlignmentThreshold" title='kMallocAlignmentThreshold' data-ref="87kMallocAlignmentThreshold">kMallocAlignmentThreshold</a></td></tr>
<tr><th id="238">238</th><td>                             ? <var>2</var> * <a class="local col8 ref" href="#88pointer_size" title='pointer_size' data-ref="88pointer_size">pointer_size</a></td></tr>
<tr><th id="239">239</th><td>                             : <a class="local col8 ref" href="#88pointer_size" title='pointer_size' data-ref="88pointer_size">pointer_size</a>;</td></tr>
<tr><th id="240">240</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#288" title="while (false &amp;&amp; ((void)(buffer_alignment), (void)(0), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 240)" data-ref="_M/DCHECK_GT">DCHECK_GT</a>(<a class="local col9 ref" href="#89buffer_alignment" title='buffer_alignment' data-ref="89buffer_alignment">buffer_alignment</a>, <var>0</var>);</td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td>  <b>return</b> <a class="local col9 ref" href="#89buffer_alignment" title='buffer_alignment' data-ref="89buffer_alignment">buffer_alignment</a>;</td></tr>
<tr><th id="243">243</th><td>}</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td><i>// Calculate the alignment of a buffer allocated for a given primitive type.</i></td></tr>
<tr><th id="246">246</th><td><em>int</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</dfn>(<span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col0 decl" id="90primitive_type" title='primitive_type' data-type='xla::PrimitiveType' data-ref="90primitive_type">primitive_type</dfn>) {</td></tr>
<tr><th id="247">247</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="91byte_size" title='byte_size' data-type='int64' data-ref="91byte_size">byte_size</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col0 ref" href="#90primitive_type" title='primitive_type' data-ref="90primitive_type">primitive_type</a>);</td></tr>
<tr><th id="248">248</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#287" title="while (false &amp;&amp; ((void)(byte_size), (void)(0), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 248)" data-ref="_M/DCHECK_GE">DCHECK_GE</a>(<a class="local col1 ref" href="#91byte_size" title='byte_size' data-ref="91byte_size">byte_size</a>, <var>0</var>);</td></tr>
<tr><th id="249">249</th><td>  <i>// Largest scalar is a complex64 so we don't need to worry about the</i></td></tr>
<tr><th id="250">250</th><td><i>  // int64-&gt;int truncation here.</i></td></tr>
<tr><th id="251">251</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#285" title="while (false &amp;&amp; ((void)(byte_size), (void)(8), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 251)" data-ref="_M/DCHECK_LE">DCHECK_LE</a>(<a class="local col1 ref" href="#91byte_size" title='byte_size' data-ref="91byte_size">byte_size</a>, <var>8</var>);</td></tr>
<tr><th id="252">252</th><td>  <b>return</b> <a class="local col1 ref" href="#91byte_size" title='byte_size' data-ref="91byte_size">byte_size</a>;</td></tr>
<tr><th id="253">253</th><td>}</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td><a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</dfn>(<em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col2 decl" id="92shape" title='shape' data-type='const xla::Shape &amp;' data-ref="92shape">shape</dfn>) <em>const</em> {</td></tr>
<tr><th id="256">256</th><td>  <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir10ByteSizeOfERKNS_5ShapeERKN4llvm10DataLayoutE" title='xla::llvm_ir::ByteSizeOf' data-ref="_ZN3xla7llvm_ir10ByteSizeOfERKNS_5ShapeERKN4llvm10DataLayoutE">ByteSizeOf</a>(<a class="local col2 ref" href="#92shape" title='shape' data-ref="92shape">shape</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</span>());</td></tr>
<tr><th id="257">257</th><td>}</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td><i>// Calculate the alignment of a buffer allocated for a given shape.</i></td></tr>
<tr><th id="260">260</th><td><em>int</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</dfn>(<em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="93shape" title='shape' data-type='const xla::Shape &amp;' data-ref="93shape">shape</dfn>) {</td></tr>
<tr><th id="261">261</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col3 ref" href="#93shape" title='shape' data-ref="93shape">shape</a>)) {</td></tr>
<tr><th id="262">262</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col3 ref" href="#93shape" title='shape' data-ref="93shape">shape</a>.<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>());</td></tr>
<tr><th id="263">263</th><td>  }</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="94buffer_size" title='buffer_size' data-type='int64' data-ref="94buffer_size">buffer_size</dfn> = <a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col3 ref" href="#93shape" title='shape' data-ref="93shape">shape</a>);</td></tr>
<tr><th id="266">266</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#287" title="while (false &amp;&amp; ((void)(buffer_size), (void)(0), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 266)" data-ref="_M/DCHECK_GE">DCHECK_GE</a>(<a class="local col4 ref" href="#94buffer_size" title='buffer_size' data-ref="94buffer_size">buffer_size</a>, <var>0</var>);</td></tr>
<tr><th id="267">267</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#285" title="while (false &amp;&amp; ((void)(buffer_size), (void)((18446744073709551615UL)), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 267)" data-ref="_M/DCHECK_LE">DCHECK_LE</a>(<a class="local col4 ref" href="#94buffer_size" title='buffer_size' data-ref="94buffer_size">buffer_size</a>, <a class="macro" href="../../../../../../include/stdint.h.html#261" title="(18446744073709551615UL)" data-ref="_M/SIZE_MAX">SIZE_MAX</a>);</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx" title='xla::cpu::IrEmitter::MinimumAlignmentForBufferSize' data-ref="_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx">MinimumAlignmentForBufferSize</a>(<a class="local col4 ref" href="#94buffer_size" title='buffer_size' data-ref="94buffer_size">buffer_size</a>);</td></tr>
<tr><th id="270">270</th><td>}</td></tr>
<tr><th id="271">271</th><td></td></tr>
<tr><th id="272">272</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE" title='xla::cpu::IrEmitter::AttachAlignmentMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE">AttachAlignmentMetadataForLoad</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col5 decl" id="95load" title='load' data-type='llvm::LoadInst *' data-ref="95load">load</dfn>,</td></tr>
<tr><th id="273">273</th><td>                                               <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col6 decl" id="96shape" title='shape' data-type='const xla::Shape &amp;' data-ref="96shape">shape</dfn>) {</td></tr>
<tr><th id="274">274</th><td>  <em>int</em> <dfn class="local col7 decl" id="97alignment" title='alignment' data-type='int' data-ref="97alignment">alignment</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col6 ref" href="#96shape" title='shape' data-ref="96shape">shape</a>);</td></tr>
<tr><th id="275">275</th><td>  <b>if</b> (<a class="local col7 ref" href="#97alignment" title='alignment' data-ref="97alignment">alignment</a> &gt; <var>1</var>) {</td></tr>
<tr><th id="276">276</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir27SetAlignmentMetadataForLoadEPN4llvm8LoadInstEm" title='xla::llvm_ir::SetAlignmentMetadataForLoad' data-ref="_ZN3xla7llvm_ir27SetAlignmentMetadataForLoadEPN4llvm8LoadInstEm">SetAlignmentMetadataForLoad</a>(<a class="local col5 ref" href="#95load" title='load' data-ref="95load">load</a>, <a class="local col7 ref" href="#97alignment" title='alignment' data-ref="97alignment">alignment</a>);</td></tr>
<tr><th id="277">277</th><td>  }</td></tr>
<tr><th id="278">278</th><td>}</td></tr>
<tr><th id="279">279</th><td></td></tr>
<tr><th id="280">280</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstEx" title='xla::cpu::IrEmitter::AttachAlignmentMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstEx">AttachAlignmentMetadataForLoad</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col8 decl" id="98load" title='load' data-type='llvm::LoadInst *' data-ref="98load">load</dfn>,</td></tr>
<tr><th id="281">281</th><td>                                               <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="99buffer_size" title='buffer_size' data-type='int64' data-ref="99buffer_size">buffer_size</dfn>) {</td></tr>
<tr><th id="282">282</th><td>  <em>int</em> <dfn class="local col0 decl" id="100alignment" title='alignment' data-type='int' data-ref="100alignment">alignment</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx" title='xla::cpu::IrEmitter::MinimumAlignmentForBufferSize' data-ref="_ZN3xla3cpu9IrEmitter29MinimumAlignmentForBufferSizeEx">MinimumAlignmentForBufferSize</a>(<a class="local col9 ref" href="#99buffer_size" title='buffer_size' data-ref="99buffer_size">buffer_size</a>);</td></tr>
<tr><th id="283">283</th><td>  <b>if</b> (<a class="local col0 ref" href="#100alignment" title='alignment' data-ref="100alignment">alignment</a> &gt; <var>1</var>) {</td></tr>
<tr><th id="284">284</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir27SetAlignmentMetadataForLoadEPN4llvm8LoadInstEm" title='xla::llvm_ir::SetAlignmentMetadataForLoad' data-ref="_ZN3xla7llvm_ir27SetAlignmentMetadataForLoadEPN4llvm8LoadInstEm">SetAlignmentMetadataForLoad</a>(<a class="local col8 ref" href="#98load" title='load' data-ref="98load">load</a>, <a class="local col0 ref" href="#100alignment" title='alignment' data-ref="100alignment">alignment</a>);</td></tr>
<tr><th id="285">285</th><td>  }</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE" title='xla::cpu::IrEmitter::AttachDereferenceableMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE">AttachDereferenceableMetadataForLoad</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col1 decl" id="101load" title='load' data-type='llvm::LoadInst *' data-ref="101load">load</dfn>,</td></tr>
<tr><th id="289">289</th><td>                                                     <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col2 decl" id="102shape" title='shape' data-type='const xla::Shape &amp;' data-ref="102shape">shape</dfn>) {</td></tr>
<tr><th id="290">290</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx" title='xla::cpu::IrEmitter::AttachDereferenceableMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx">AttachDereferenceableMetadataForLoad</a>(<a class="local col1 ref" href="#101load" title='load' data-ref="101load">load</a>, <a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col2 ref" href="#102shape" title='shape' data-ref="102shape">shape</a>));</td></tr>
<tr><th id="291">291</th><td>}</td></tr>
<tr><th id="292">292</th><td></td></tr>
<tr><th id="293">293</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx" title='xla::cpu::IrEmitter::AttachDereferenceableMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx">AttachDereferenceableMetadataForLoad</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col3 decl" id="103load" title='load' data-type='llvm::LoadInst *' data-ref="103load">load</dfn>,</td></tr>
<tr><th id="294">294</th><td>                                                     <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="104buffer_size" title='buffer_size' data-type='int64' data-ref="104buffer_size">buffer_size</dfn>) {</td></tr>
<tr><th id="295">295</th><td>  <b>if</b> (<a class="local col4 ref" href="#104buffer_size" title='buffer_size' data-ref="104buffer_size">buffer_size</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="296">296</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir33SetDereferenceableMetadataForLoadEPN4llvm8LoadInstEm" title='xla::llvm_ir::SetDereferenceableMetadataForLoad' data-ref="_ZN3xla7llvm_ir33SetDereferenceableMetadataForLoadEPN4llvm8LoadInstEm">SetDereferenceableMetadataForLoad</a>(<a class="local col3 ref" href="#103load" title='load' data-ref="103load">load</a>, <a class="local col4 ref" href="#104buffer_size" title='buffer_size' data-ref="104buffer_size">buffer_size</a>);</td></tr>
<tr><th id="297">297</th><td>  }</td></tr>
<tr><th id="298">298</th><td>}</td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter21HandleGetTupleElementEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleGetTupleElement' data-ref="_ZN3xla3cpu9IrEmitter21HandleGetTupleElementEPNS_14HloInstructionE">HandleGetTupleElement</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="105get_tuple_element" title='get_tuple_element' data-type='xla::HloInstruction *' data-ref="105get_tuple_element">get_tuple_element</dfn>) {</td></tr>
<tr><th id="301">301</th><td>  <i>// A tuple is an array of pointers, one for each operand. Each pointer points</i></td></tr>
<tr><th id="302">302</th><td><i>  // to the output buffer of its corresponding operand. A GetTupleElement</i></td></tr>
<tr><th id="303">303</th><td><i>  // instruction forwards a pointer to the tuple element buffer at the given</i></td></tr>
<tr><th id="304">304</th><td><i>  // index.</i></td></tr>
<tr><th id="305">305</th><td>  <em>auto</em> <dfn class="local col6 decl" id="106operand" title='operand' data-type='const xla::HloInstruction *' data-ref="106operand">operand</dfn> = <a class="local col5 ref" href="#105get_tuple_element" title='get_tuple_element' data-ref="105get_tuple_element">get_tuple_element</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="306">306</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col7 decl" id="107shape" title='shape' data-type='const xla::Shape &amp;' data-ref="107shape">shape</dfn> = <a class="local col5 ref" href="#105get_tuple_element" title='get_tuple_element' data-ref="105get_tuple_element">get_tuple_element</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="307">307</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col5 ref" href="#105get_tuple_element" title='get_tuple_element' data-ref="105get_tuple_element">get_tuple_element</a>]</a> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir19EmitGetTupleElementERKNS_5ShapeExiPN4llvm5ValueEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEPNS4_6ModuleE" title='xla::llvm_ir::EmitGetTupleElement' data-ref="_ZN3xla7llvm_ir19EmitGetTupleElementERKNS_5ShapeExiPN4llvm5ValueEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEPNS4_6ModuleE">EmitGetTupleElement</a>(</td></tr>
<tr><th id="308">308</th><td>      <a class="local col7 ref" href="#107shape" title='shape' data-ref="107shape">shape</a>, <a class="local col5 ref" href="#105get_tuple_element" title='get_tuple_element' data-ref="105get_tuple_element">get_tuple_element</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction11tuple_indexEv" title='xla::HloInstruction::tuple_index' data-ref="_ZNK3xla14HloInstruction11tuple_indexEv">tuple_index</a>(), <a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col7 ref" href="#107shape" title='shape' data-ref="107shape">shape</a>),</td></tr>
<tr><th id="309">309</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col6 ref" href="#106operand" title='operand' data-ref="106operand">operand</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="310">310</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="311">311</th><td>}</td></tr>
<tr><th id="312">312</th><td></td></tr>
<tr><th id="313">313</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter12HandleSelectEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSelect' data-ref="_ZN3xla3cpu9IrEmitter12HandleSelectEPNS_14HloInstructionE">HandleSelect</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="108select" title='select' data-type='xla::HloInstruction *' data-ref="108select">select</dfn>) {</td></tr>
<tr><th id="314">314</th><td>  <em>auto</em> <dfn class="local col9 decl" id="109pred" title='pred' data-type='const xla::HloInstruction *' data-ref="109pred">pred</dfn> = <a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="315">315</th><td>  <em>auto</em> <dfn class="local col0 decl" id="110on_true" title='on_true' data-type='const xla::HloInstruction *' data-ref="110on_true">on_true</dfn> = <a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="316">316</th><td>  <em>auto</em> <dfn class="local col1 decl" id="111on_false" title='on_false' data-type='const xla::HloInstruction *' data-ref="111on_false">on_false</dfn> = <a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>2</var>);</td></tr>
<tr><th id="317">317</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(pred-&gt;shape().element_type() == PRED), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 317, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;pred-&gt;shape().element_type() == PRED&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="local col9 ref" href="#109pred" title='pred' data-ref="109pred">pred</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>() == <span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>);</td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsTuple' data-ref="_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE">IsTuple</a>(<a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="320">320</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(select)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>));</td></tr>
<tr><th id="321">321</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir15EmitTupleSelectENS0_7IrArrayES1_PN4llvm5ValueES4_PNS2_9IRBuilderINS2_14ConstantFolderENS2_24IRBuilderDefaultInserterEEEPNS2_6ModuleE" title='xla::llvm_ir::EmitTupleSelect' data-ref="_ZN3xla7llvm_ir15EmitTupleSelectENS0_7IrArrayES1_PN4llvm5ValueES4_PNS2_9IRBuilderINS2_14ConstantFolderENS2_24IRBuilderDefaultInserterEEEPNS2_6ModuleE">EmitTupleSelect</a>(</td></tr>
<tr><th id="322">322</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>), <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col9 ref" href="#109pred" title='pred' data-ref="109pred">pred</a>), <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col0 ref" href="#110on_true" title='on_true' data-ref="110on_true">on_true</a>),</td></tr>
<tr><th id="323">323</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col1 ref" href="#111on_false" title='on_false' data-ref="111on_false">on_false</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="324">324</th><td>    <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="325">325</th><td>  }</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td>  <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col8 ref" href="#108select" title='select' data-ref="108select">select</a>);</td></tr>
<tr><th id="328">328</th><td>}</td></tr>
<tr><th id="329">329</th><td></td></tr>
<tr><th id="330">330</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter12HandleInfeedEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleInfeed' data-ref="_ZN3xla3cpu9IrEmitter12HandleInfeedEPNS_14HloInstructionE">HandleInfeed</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="112infeed" title='infeed' data-type='xla::HloInstruction *' data-ref="112infeed">infeed</dfn>) {</td></tr>
<tr><th id="331">331</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 331, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleInfeed: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="113shape" title='shape' data-type='const xla::Shape &amp;' data-ref="113shape">shape</dfn> = <a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td>  <i>// The infeed operation produces data (dequeued from the infeed queue) at this</i></td></tr>
<tr><th id="336">336</th><td><i>  // address, which has been provided by buffer assignment.</i></td></tr>
<tr><th id="337">337</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(infeed)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>));</td></tr>
<tr><th id="338">338</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col4 decl" id="114infeed_array" title='infeed_array' data-type='llvm_ir::IrArray' data-ref="114infeed_array">infeed_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>);</td></tr>
<tr><th id="339">339</th><td></td></tr>
<tr><th id="340">340</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsTuple' data-ref="_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE">IsTuple</a>(<a class="local col3 ref" href="#113shape" title='shape' data-ref="113shape">shape</a>)) {</td></tr>
<tr><th id="341">341</th><td>    <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(!ShapeUtil::IsNestedTuple(shape)), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 341, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;!ShapeUtil::IsNestedTuple(shape)&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil13IsNestedTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsNestedTuple' data-ref="_ZN3xla9ShapeUtil13IsNestedTupleERKNS_5ShapeE">IsNestedTuple</a>(<a class="local col3 ref" href="#113shape" title='shape' data-ref="113shape">shape</a>));</td></tr>
<tr><th id="342">342</th><td></td></tr>
<tr><th id="343">343</th><td>    <i>// For a tuple, we first copy each of the internal elements to</i></td></tr>
<tr><th id="344">344</th><td><i>    // their corresponding target locations. We then construct the</i></td></tr>
<tr><th id="345">345</th><td><i>    // tuple outer buffer containing pointers to the internal</i></td></tr>
<tr><th id="346">346</th><td><i>    // elements.</i></td></tr>
<tr><th id="347">347</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col5 decl" id="115tuple_element_addresses" title='tuple_element_addresses' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="115tuple_element_addresses">tuple_element_addresses</dfn>;</td></tr>
<tr><th id="348">348</th><td>    <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="116i" title='i' data-type='int64' data-ref="116i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#116i" title='i' data-ref="116i">i</a> &lt; <a class="local col3 ref" href="#113shape" title='shape' data-ref="113shape">shape</a>.<span class='ref' title='xla::Shape::tuple_shapes_size' data-ref="_ZNK3xla5Shape17tuple_shapes_sizeEv">tuple_shapes_size</span>(); ++<a class="local col6 ref" href="#116i" title='i' data-ref="116i">i</a>) {</td></tr>
<tr><th id="349">349</th><td>      <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value1 = (assignment_.GetUniqueSlice(infeed, {i})); if ((__builtin_expect(!_status_or_value1.ok(), 0))) { return _status_or_value1.status(); } BufferAllocation::Slice buffer = std::move(_status_or_value1.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a> <dfn class="local col7 decl" id="117buffer" title='buffer' data-type='BufferAllocation::Slice' data-ref="117buffer">buffer</dfn>,</td></tr>
<tr><th id="350">350</th><td>                          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE" title='xla::BufferAssignment::GetUniqueSlice' data-ref="_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE">GetUniqueSlice</a>(<a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>, <a class="ref fake" href="../../shape_util.h.html#_ZN3xla10ShapeIndexC1ESt16initializer_listIxE" title='xla::ShapeIndex::ShapeIndex' data-ref="_ZN3xla10ShapeIndexC1ESt16initializer_listIxE"></a>{<a class="local col6 ref" href="#116i" title='i' data-ref="116i">i</a>}));</td></tr>
<tr><th id="351">351</th><td></td></tr>
<tr><th id="352">352</th><td>      <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col8 decl" id="118tuple_element_shape" title='tuple_element_shape' data-type='const xla::Shape &amp;' data-ref="118tuple_element_shape">tuple_element_shape</dfn> =</td></tr>
<tr><th id="353">353</th><td>          <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil20GetTupleElementShapeERKNS_5ShapeEx" title='xla::ShapeUtil::GetTupleElementShape' data-ref="_ZN3xla9ShapeUtil20GetTupleElementShapeERKNS_5ShapeEx">GetTupleElementShape</a>(<a class="local col3 ref" href="#113shape" title='shape' data-ref="113shape">shape</a>, <a class="local col6 ref" href="#116i" title='i' data-ref="116i">i</a>);</td></tr>
<tr><th id="354">354</th><td></td></tr>
<tr><th id="355">355</th><td>      <i>// Only the outer tuple buffer's target address is obtained from</i></td></tr>
<tr><th id="356">356</th><td><i>      // GetEmittedValueFor, to handle the case when Infeed is the root</i></td></tr>
<tr><th id="357">357</th><td><i>      // instruction. Target addresses for internal elements can be obtained</i></td></tr>
<tr><th id="358">358</th><td><i>      // from EmitTempBufferPointer.</i></td></tr>
<tr><th id="359">359</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="119tuple_element_address" title='tuple_element_address' data-type='llvm::Value *' data-ref="119tuple_element_address">tuple_element_address</dfn> =</td></tr>
<tr><th id="360">360</th><td>          <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE" title='xla::cpu::IrEmitter::EmitTempBufferPointer' data-ref="_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE">EmitTempBufferPointer</a>(<a class="local col7 ref" href="#349" title='buffer' data-ref="117buffer">buffer</a>, <a class="local col8 ref" href="#118tuple_element_shape" title='tuple_element_shape' data-ref="118tuple_element_shape">tuple_element_shape</a>);</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>      <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitXfeedTransfer( XfeedKind::kInfeed, tuple_element_shape, tuple_element_address)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE" title='xla::cpu::IrEmitter::EmitXfeedTransfer' data-ref="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE">EmitXfeedTransfer</a>(</td></tr>
<tr><th id="363">363</th><td>          <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kInfeed" title='xla::cpu::IrEmitter::XfeedKind::kInfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kInfeed">kInfeed</a>, <a class="local col8 ref" href="#118tuple_element_shape" title='tuple_element_shape' data-ref="118tuple_element_shape">tuple_element_shape</a>, <a class="local col9 ref" href="#119tuple_element_address" title='tuple_element_address' data-ref="119tuple_element_address">tuple_element_address</a>));</td></tr>
<tr><th id="364">364</th><td></td></tr>
<tr><th id="365">365</th><td>      <a class="local col5 ref" href="#115tuple_element_addresses" title='tuple_element_addresses' data-ref="115tuple_element_addresses">tuple_element_addresses</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col9 ref" href="#119tuple_element_address" title='tuple_element_address' data-ref="119tuple_element_address">tuple_element_address</a>);</td></tr>
<tr><th id="366">366</th><td>    }</td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE" title='xla::llvm_ir::EmitTuple' data-ref="_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE">EmitTuple</a>(<a class="ref fake" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1ERKS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1ERKS1_"></a><a class="local col4 ref" href="#114infeed_array" title='infeed_array' data-ref="114infeed_array">infeed_array</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col5 ref" href="#115tuple_element_addresses" title='tuple_element_addresses' data-ref="115tuple_element_addresses">tuple_element_addresses</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="369">369</th><td>                       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="370">370</th><td>  } <b>else</b> {</td></tr>
<tr><th id="371">371</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitXfeedTransfer(XfeedKind::kInfeed, shape, GetEmittedValueFor(infeed))); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE" title='xla::cpu::IrEmitter::EmitXfeedTransfer' data-ref="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE">EmitXfeedTransfer</a>(<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kInfeed" title='xla::cpu::IrEmitter::XfeedKind::kInfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kInfeed">kInfeed</a>, <a class="local col3 ref" href="#113shape" title='shape' data-ref="113shape">shape</a>,</td></tr>
<tr><th id="372">372</th><td>                                         <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col2 ref" href="#112infeed" title='infeed' data-ref="112infeed">infeed</a>)));</td></tr>
<tr><th id="373">373</th><td>  }</td></tr>
<tr><th id="374">374</th><td></td></tr>
<tr><th id="375">375</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="376">376</th><td>}</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE" title='xla::cpu::IrEmitter::EmitXfeedTransfer' data-ref="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE">EmitXfeedTransfer</dfn>(<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a> <dfn class="local col0 decl" id="120kind" title='kind' data-type='xla::cpu::IrEmitter::XfeedKind' data-ref="120kind">kind</dfn>, <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col1 decl" id="121shape" title='shape' data-type='const xla::Shape &amp;' data-ref="121shape">shape</dfn>,</td></tr>
<tr><th id="379">379</th><td>                                    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="122program_buffer_address" title='program_buffer_address' data-type='llvm::Value *' data-ref="122program_buffer_address">program_buffer_address</dfn>) {</td></tr>
<tr><th id="380">380</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="123length" title='length' data-type='int64' data-ref="123length">length</dfn> = <a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col1 ref" href="#121shape" title='shape' data-ref="121shape">shape</a>);</td></tr>
<tr><th id="381">381</th><td>  <b>if</b> (<a class="local col3 ref" href="#123length" title='length' data-ref="123length">length</a> &lt;= <var>0</var> || <a class="local col3 ref" href="#123length" title='length' data-ref="123length">length</a> &gt; <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int32" title='tensorflow::int32' data-type='int' data-ref="tensorflow::int32">int32</a>&gt;::<a class="ref" href="../../../../../../include/c++/5/limits.html#_ZNSt14numeric_limitsIiE3maxEv" title='std::numeric_limits&lt;int&gt;::max' data-ref="_ZNSt14numeric_limitsIiE3maxEv">max</a>()) {</td></tr>
<tr><th id="382">382</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla15InvalidArgumentEPKcz" title='xla::InvalidArgument' data-ref="_ZN3xla15InvalidArgumentEPKcz">InvalidArgument</a>(</td></tr>
<tr><th id="383">383</th><td>        <q>"xfeed (infeed or outfeed) buffer length %lld is outside the valid "</q></td></tr>
<tr><th id="384">384</th><td>        <q>"size range"</q>,</td></tr>
<tr><th id="385">385</th><td>        <a class="local col3 ref" href="#123length" title='length' data-ref="123length">length</a>);</td></tr>
<tr><th id="386">386</th><td>  }</td></tr>
<tr><th id="387">387</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int32" title='tensorflow::int32' data-type='int' data-ref="tensorflow::int32">int32</a> <dfn class="local col4 decl" id="124length_32" title='length_32' data-type='int32' data-ref="124length_32">length_32</dfn> = <b>static_cast</b>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int32" title='tensorflow::int32' data-type='int' data-ref="tensorflow::int32">int32</a>&gt;(<a class="local col3 ref" href="#123length" title='length' data-ref="123length">length</a>);</td></tr>
<tr><th id="388">388</th><td></td></tr>
<tr><th id="389">389</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int32" title='tensorflow::int32' data-type='int' data-ref="tensorflow::int32">int32</a> <dfn class="local col5 decl" id="125shape_length" title='shape_length' data-type='int32' data-ref="125shape_length">shape_length</dfn>;</td></tr>
<tr><th id="390">390</th><td>  <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value3 = (llvm_ir::EncodeSelfDescribingShapeConstant( shape, &amp;shape_length, &amp;ir_builder_)); if ((__builtin_expect(!_status_or_value3.ok(), 0))) { return _status_or_value3.status(); } llvm::Value * shape_ptr = std::move(_status_or_value3.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(llvm::<span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span> * <dfn class="local col6 decl" id="126shape_ptr" title='shape_ptr' data-type='llvm::Value *' data-ref="126shape_ptr">shape_ptr</dfn>,</td></tr>
<tr><th id="391">391</th><td>                      llvm_ir::<a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir33EncodeSelfDescribingShapeConstantERKNS_5ShapeEPiPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::EncodeSelfDescribingShapeConstant' data-ref="_ZN3xla7llvm_ir33EncodeSelfDescribingShapeConstantERKNS_5ShapeEPiPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE">EncodeSelfDescribingShapeConstant</a>(</td></tr>
<tr><th id="392">392</th><td>                          <a class="local col1 ref" href="#121shape" title='shape' data-ref="121shape">shape</a>, &amp;<a class="local col5 ref" href="#125shape_length" title='shape_length' data-ref="125shape_length">shape_length</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>));</td></tr>
<tr><th id="393">393</th><td></td></tr>
<tr><th id="394">394</th><td>  <i>// The signature of the acquire infeed buffer function is:</i></td></tr>
<tr><th id="395">395</th><td><i>  //</i></td></tr>
<tr><th id="396">396</th><td><i>  //   (void*)(int32 length);</i></td></tr>
<tr><th id="397">397</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col7 decl" id="127int32_type" title='int32_type' data-type='llvm::Type *' data-ref="127int32_type">int32_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt32TyEv">getInt32Ty</span>();</td></tr>
<tr><th id="398">398</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col8 decl" id="128i8_ptr_type" title='i8_ptr_type' data-type='llvm::Type *' data-ref="128i8_ptr_type">i8_ptr_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>::<span class='ref' title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</span>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()</span>);</td></tr>
<tr><th id="399">399</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>* <dfn class="local col9 decl" id="129acquire_type" title='acquire_type' data-type='llvm::FunctionType *' data-ref="129acquire_type">acquire_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>::<span class='ref' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</span>(</td></tr>
<tr><th id="400">400</th><td>      <a class="local col8 ref" href="#128i8_ptr_type" title='i8_ptr_type' data-ref="128i8_ptr_type">i8_ptr_type</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col7 ref" href="#127int32_type" title='int32_type' data-ref="127int32_type">int32_type</a>, <a class="local col8 ref" href="#128i8_ptr_type" title='i8_ptr_type' data-ref="128i8_ptr_type">i8_ptr_type</a>, <a class="local col7 ref" href="#127int32_type" title='int32_type' data-ref="127int32_type">int32_type</a>},</td></tr>
<tr><th id="401">401</th><td>      <i>/*isVarArg=*/</i><b>false</b>);</td></tr>
<tr><th id="402">402</th><td></td></tr>
<tr><th id="403">403</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col0 decl" id="130acquire_func" title='acquire_func' data-type='llvm::Function *' data-ref="130acquire_func">acquire_func</dfn>;</td></tr>
<tr><th id="404">404</th><td>  <b>if</b> (<a class="local col0 ref" href="#120kind" title='kind' data-ref="120kind">kind</a> == <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kInfeed" title='xla::cpu::IrEmitter::XfeedKind::kInfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kInfeed">kInfeed</a>) {</td></tr>
<tr><th id="405">405</th><td>    <a class="local col0 ref" href="#130acquire_func" title='acquire_func' data-ref="130acquire_func">acquire_func</a> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(</td></tr>
<tr><th id="406">406</th><td>        <span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kAcquireInfeedBufferForDequeueSymbolName" title='xla::cpu::runtime::kAcquireInfeedBufferForDequeueSymbolName' data-ref="xla::cpu::runtime::kAcquireInfeedBufferForDequeueSymbolName">kAcquireInfeedBufferForDequeueSymbolName</a>, <a class="local col9 ref" href="#129acquire_type" title='acquire_type' data-ref="129acquire_type">acquire_type</a>));</td></tr>
<tr><th id="407">407</th><td>  } <b>else</b> {</td></tr>
<tr><th id="408">408</th><td>    <a class="local col0 ref" href="#130acquire_func" title='acquire_func' data-ref="130acquire_func">acquire_func</a> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(</td></tr>
<tr><th id="409">409</th><td>        <span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kAcquireOutfeedBufferForPopulationSymbolName" title='xla::cpu::runtime::kAcquireOutfeedBufferForPopulationSymbolName' data-ref="xla::cpu::runtime::kAcquireOutfeedBufferForPopulationSymbolName">kAcquireOutfeedBufferForPopulationSymbolName</a>, <a class="local col9 ref" href="#129acquire_type" title='acquire_type' data-ref="129acquire_type">acquire_type</a>));</td></tr>
<tr><th id="410">410</th><td>  }</td></tr>
<tr><th id="411">411</th><td>  <a class="local col0 ref" href="#130acquire_func" title='acquire_func' data-ref="130acquire_func">acquire_func</a>-&gt;<span class='ref' title='llvm::Function::setCallingConv' data-ref="_ZN4llvm8Function14setCallingConvEj">setCallingConv</span>(<span class="namespace">llvm::CallingConv::</span><span class='enum' title='llvm::CallingConv::C' data-ref="llvm::CallingConv::C">C</span>);</td></tr>
<tr><th id="412">412</th><td></td></tr>
<tr><th id="413">413</th><td>  <i>// The signature of the release infeed buffer function is:</i></td></tr>
<tr><th id="414">414</th><td><i>  //</i></td></tr>
<tr><th id="415">415</th><td><i>  //   (void)(int32 length, void* buffer);</i></td></tr>
<tr><th id="416">416</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>* <dfn class="local col1 decl" id="131release_type" title='release_type' data-type='llvm::FunctionType *' data-ref="131release_type">release_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>::<span class='ref' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</span>(</td></tr>
<tr><th id="417">417</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getVoidTy' data-ref="_ZN4llvm13IRBuilderBase9getVoidTyEv">getVoidTy</span>(),</td></tr>
<tr><th id="418">418</th><td>      <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col7 ref" href="#127int32_type" title='int32_type' data-ref="127int32_type">int32_type</a>, <a class="local col8 ref" href="#128i8_ptr_type" title='i8_ptr_type' data-ref="128i8_ptr_type">i8_ptr_type</a>, <a class="local col8 ref" href="#128i8_ptr_type" title='i8_ptr_type' data-ref="128i8_ptr_type">i8_ptr_type</a>, <a class="local col7 ref" href="#127int32_type" title='int32_type' data-ref="127int32_type">int32_type</a>},</td></tr>
<tr><th id="419">419</th><td>      <i>/*isVarArg=*/</i><b>false</b>);</td></tr>
<tr><th id="420">420</th><td></td></tr>
<tr><th id="421">421</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="132release_func" title='release_func' data-type='llvm::Function *' data-ref="132release_func">release_func</dfn>;</td></tr>
<tr><th id="422">422</th><td>  <b>if</b> (<a class="local col0 ref" href="#120kind" title='kind' data-ref="120kind">kind</a> == <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kInfeed" title='xla::cpu::IrEmitter::XfeedKind::kInfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kInfeed">kInfeed</a>) {</td></tr>
<tr><th id="423">423</th><td>    <a class="local col2 ref" href="#132release_func" title='release_func' data-ref="132release_func">release_func</a> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(</td></tr>
<tr><th id="424">424</th><td>        <span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kReleaseInfeedBufferAfterDequeueSymbolName" title='xla::cpu::runtime::kReleaseInfeedBufferAfterDequeueSymbolName' data-ref="xla::cpu::runtime::kReleaseInfeedBufferAfterDequeueSymbolName">kReleaseInfeedBufferAfterDequeueSymbolName</a>, <a class="local col1 ref" href="#131release_type" title='release_type' data-ref="131release_type">release_type</a>));</td></tr>
<tr><th id="425">425</th><td>  } <b>else</b> {</td></tr>
<tr><th id="426">426</th><td>    <a class="local col2 ref" href="#132release_func" title='release_func' data-ref="132release_func">release_func</a> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(</td></tr>
<tr><th id="427">427</th><td>        <span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kReleaseOutfeedBufferAfterPopulationSymbolName" title='xla::cpu::runtime::kReleaseOutfeedBufferAfterPopulationSymbolName' data-ref="xla::cpu::runtime::kReleaseOutfeedBufferAfterPopulationSymbolName">kReleaseOutfeedBufferAfterPopulationSymbolName</a>, <a class="local col1 ref" href="#131release_type" title='release_type' data-ref="131release_type">release_type</a>));</td></tr>
<tr><th id="428">428</th><td>  }</td></tr>
<tr><th id="429">429</th><td>  <a class="local col2 ref" href="#132release_func" title='release_func' data-ref="132release_func">release_func</a>-&gt;<span class='ref' title='llvm::Function::setCallingConv' data-ref="_ZN4llvm8Function14setCallingConvEj">setCallingConv</span>(<span class="namespace">llvm::CallingConv::</span><span class='enum' title='llvm::CallingConv::C' data-ref="llvm::CallingConv::C">C</span>);</td></tr>
<tr><th id="430">430</th><td></td></tr>
<tr><th id="431">431</th><td>  <i>// Implementation note: this call informs the runtime that it wants a buffer</i></td></tr>
<tr><th id="432">432</th><td><i>  // of size exactly 'length_32', and the runtime is responsible for</i></td></tr>
<tr><th id="433">433</th><td><i>  // check-failing the process if there is a mismatch, versus passing us back a</i></td></tr>
<tr><th id="434">434</th><td><i>  // buffer that we might overrun.</i></td></tr>
<tr><th id="435">435</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="133acquired_pointer" title='acquired_pointer' data-type='llvm::Value *' data-ref="133acquired_pointer">acquired_pointer</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(</td></tr>
<tr><th id="436">436</th><td>      <a class="local col0 ref" href="#130acquire_func" title='acquire_func' data-ref="130acquire_func">acquire_func</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col4 ref" href="#124length_32" title='length_32' data-ref="124length_32">length_32</a>), <a class="local col6 ref" href="#390" title='shape_ptr' data-ref="126shape_ptr">shape_ptr</a>,</td></tr>
<tr><th id="437">437</th><td>                     <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col5 ref" href="#125shape_length" title='shape_length' data-ref="125shape_length">shape_length</a>)});</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td>  <b>if</b> (<a class="local col0 ref" href="#120kind" title='kind' data-ref="120kind">kind</a> == <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kInfeed" title='xla::cpu::IrEmitter::XfeedKind::kInfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kInfeed">kInfeed</a>) {</td></tr>
<tr><th id="440">440</th><td>    <i>// Copy to the program buffer address from the acquired buffer.</i></td></tr>
<tr><th id="441">441</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::CreateMemCpy' data-ref="_ZN4llvm13IRBuilderBase12CreateMemCpyEPNS_5ValueEjS2_jmbPNS_6MDNodeES4_S4_S4_">CreateMemCpy</span>(<a class="local col2 ref" href="#122program_buffer_address" title='program_buffer_address' data-ref="122program_buffer_address">program_buffer_address</a>, <i>/*DstAlign=*/</i><var>1</var>,</td></tr>
<tr><th id="442">442</th><td>                             <a class="local col3 ref" href="#133acquired_pointer" title='acquired_pointer' data-ref="133acquired_pointer">acquired_pointer</a>,</td></tr>
<tr><th id="443">443</th><td>                             <i>/*SrcAlign=*/</i><var>1</var>, <a class="local col4 ref" href="#124length_32" title='length_32' data-ref="124length_32">length_32</a>);</td></tr>
<tr><th id="444">444</th><td>  } <b>else</b> {</td></tr>
<tr><th id="445">445</th><td>    <i>// Outfeed -- copy from the in-program address to the acquired buffer.</i></td></tr>
<tr><th id="446">446</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::CreateMemCpy' data-ref="_ZN4llvm13IRBuilderBase12CreateMemCpyEPNS_5ValueEjS2_jmbPNS_6MDNodeES4_S4_S4_">CreateMemCpy</span>(<a class="local col3 ref" href="#133acquired_pointer" title='acquired_pointer' data-ref="133acquired_pointer">acquired_pointer</a>, <i>/*DstAlign=*/</i><var>1</var>,</td></tr>
<tr><th id="447">447</th><td>                             <a class="local col2 ref" href="#122program_buffer_address" title='program_buffer_address' data-ref="122program_buffer_address">program_buffer_address</a>,</td></tr>
<tr><th id="448">448</th><td>                             <i>/*SrcAlign=*/</i><var>1</var>, <a class="local col4 ref" href="#124length_32" title='length_32' data-ref="124length_32">length_32</a>);</td></tr>
<tr><th id="449">449</th><td>  }</td></tr>
<tr><th id="450">450</th><td></td></tr>
<tr><th id="451">451</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col2 ref" href="#132release_func" title='release_func' data-ref="132release_func">release_func</a>,</td></tr>
<tr><th id="452">452</th><td>                         <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col4 ref" href="#124length_32" title='length_32' data-ref="124length_32">length_32</a>), <a class="local col3 ref" href="#133acquired_pointer" title='acquired_pointer' data-ref="133acquired_pointer">acquired_pointer</a>,</td></tr>
<tr><th id="453">453</th><td>                          <a class="local col6 ref" href="#390" title='shape_ptr' data-ref="126shape_ptr">shape_ptr</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col5 ref" href="#125shape_length" title='shape_length' data-ref="125shape_length">shape_length</a>)});</td></tr>
<tr><th id="454">454</th><td></td></tr>
<tr><th id="455">455</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="456">456</th><td>}</td></tr>
<tr><th id="457">457</th><td></td></tr>
<tr><th id="458">458</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter13HandleOutfeedEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleOutfeed' data-ref="_ZN3xla3cpu9IrEmitter13HandleOutfeedEPNS_14HloInstructionE">HandleOutfeed</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="134outfeed" title='outfeed' data-type='xla::HloInstruction *' data-ref="134outfeed">outfeed</dfn>) {</td></tr>
<tr><th id="459">459</th><td>  <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="135operand" title='operand' data-type='xla::HloInstruction *' data-ref="135operand">operand</dfn> = <a class="local col4 ref" href="#134outfeed" title='outfeed' data-ref="134outfeed">outfeed</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>()<a class="ref" href="../../../../core/lib/gtl/inlined_vector.h.html#_ZNK10tensorflow3gtl13InlinedVectorixEm" title='tensorflow::gtl::InlinedVector::operator[]' data-ref="_ZNK10tensorflow3gtl13InlinedVectorixEm">[<var>0</var>]</a>;</td></tr>
<tr><th id="460">460</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col6 decl" id="136operand_shape" title='operand_shape' data-type='const xla::Shape &amp;' data-ref="136operand_shape">operand_shape</dfn> = <a class="local col5 ref" href="#135operand" title='operand' data-ref="135operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="461">461</th><td></td></tr>
<tr><th id="462">462</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="137value" title='value' data-type='llvm::Value *' data-ref="137value">value</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col5 ref" href="#135operand" title='operand' data-ref="135operand">operand</a>);</td></tr>
<tr><th id="463">463</th><td>  <b>if</b> (!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsTuple' data-ref="_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE">IsTuple</a>(<a class="local col6 ref" href="#136operand_shape" title='operand_shape' data-ref="136operand_shape">operand_shape</a>)) {</td></tr>
<tr><th id="464">464</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE" title='xla::cpu::IrEmitter::EmitXfeedTransfer' data-ref="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE">EmitXfeedTransfer</a>(<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kOutfeed" title='xla::cpu::IrEmitter::XfeedKind::kOutfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kOutfeed">kOutfeed</a>, <a class="local col6 ref" href="#136operand_shape" title='operand_shape' data-ref="136operand_shape">operand_shape</a>, <a class="local col7 ref" href="#137value" title='value' data-ref="137value">value</a>);</td></tr>
<tr><th id="465">465</th><td>  }</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(!ShapeUtil::IsNestedTuple(operand_shape)), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 467, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;!ShapeUtil::IsNestedTuple(operand_shape)&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil13IsNestedTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsNestedTuple' data-ref="_ZN3xla9ShapeUtil13IsNestedTupleERKNS_5ShapeE">IsNestedTuple</a>(<a class="local col6 ref" href="#136operand_shape" title='operand_shape' data-ref="136operand_shape">operand_shape</a>));</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="138i" title='i' data-type='int64' data-ref="138i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#138i" title='i' data-ref="138i">i</a> &lt; <a class="local col6 ref" href="#136operand_shape" title='operand_shape' data-ref="136operand_shape">operand_shape</a>.<span class='ref' title='xla::Shape::tuple_shapes_size' data-ref="_ZNK3xla5Shape17tuple_shapes_sizeEv">tuple_shapes_size</span>(); ++<a class="local col8 ref" href="#138i" title='i' data-ref="138i">i</a>) {</td></tr>
<tr><th id="470">470</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col9 decl" id="139tuple_element_shape" title='tuple_element_shape' data-type='const xla::Shape &amp;' data-ref="139tuple_element_shape">tuple_element_shape</dfn> =</td></tr>
<tr><th id="471">471</th><td>        <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil20GetTupleElementShapeERKNS_5ShapeEx" title='xla::ShapeUtil::GetTupleElementShape' data-ref="_ZN3xla9ShapeUtil20GetTupleElementShapeERKNS_5ShapeEx">GetTupleElementShape</a>(<a class="local col6 ref" href="#136operand_shape" title='operand_shape' data-ref="136operand_shape">operand_shape</a>, <a class="local col8 ref" href="#138i" title='i' data-ref="138i">i</a>);</td></tr>
<tr><th id="472">472</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="140tuple_element" title='tuple_element' data-type='llvm::Value *' data-ref="140tuple_element">tuple_element</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir19EmitGetTupleElementERKNS_5ShapeExiPN4llvm5ValueEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEPNS4_6ModuleE" title='xla::llvm_ir::EmitGetTupleElement' data-ref="_ZN3xla7llvm_ir19EmitGetTupleElementERKNS_5ShapeExiPN4llvm5ValueEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEEPNS4_6ModuleE">EmitGetTupleElement</a>(</td></tr>
<tr><th id="473">473</th><td>        <a class="local col9 ref" href="#139tuple_element_shape" title='tuple_element_shape' data-ref="139tuple_element_shape">tuple_element_shape</a>, <a class="local col8 ref" href="#138i" title='i' data-ref="138i">i</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col9 ref" href="#139tuple_element_shape" title='tuple_element_shape' data-ref="139tuple_element_shape">tuple_element_shape</a>),</td></tr>
<tr><th id="474">474</th><td>        <a class="local col7 ref" href="#137value" title='value' data-ref="137value">value</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="475">475</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitXfeedTransfer(XfeedKind::kOutfeed, tuple_element_shape, tuple_element)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE" title='xla::cpu::IrEmitter::EmitXfeedTransfer' data-ref="_ZN3xla3cpu9IrEmitter17EmitXfeedTransferENS1_9XfeedKindERKNS_5ShapeEPN4llvm5ValueE">EmitXfeedTransfer</a>(<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind" title='xla::cpu::IrEmitter::XfeedKind' data-ref="xla::cpu::IrEmitter::XfeedKind">XfeedKind</a>::<a class="enum" href="ir_emitter.h.html#xla::cpu::IrEmitter::XfeedKind::kOutfeed" title='xla::cpu::IrEmitter::XfeedKind::kOutfeed' data-ref="xla::cpu::IrEmitter::XfeedKind::kOutfeed">kOutfeed</a>,</td></tr>
<tr><th id="476">476</th><td>                                         <a class="local col9 ref" href="#139tuple_element_shape" title='tuple_element_shape' data-ref="139tuple_element_shape">tuple_element_shape</a>, <a class="local col0 ref" href="#140tuple_element" title='tuple_element' data-ref="140tuple_element">tuple_element</a>));</td></tr>
<tr><th id="477">477</th><td>  }</td></tr>
<tr><th id="478">478</th><td></td></tr>
<tr><th id="479">479</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="480">480</th><td>}</td></tr>
<tr><th id="481">481</th><td></td></tr>
<tr><th id="482">482</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10HandleSortEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSort' data-ref="_ZN3xla3cpu9IrEmitter10HandleSortEPNS_14HloInstructionE">HandleSort</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="141sort" title='sort' data-type='xla::HloInstruction *' data-ref="141sort">sort</dfn>) {</td></tr>
<tr><th id="483">483</th><td>  <i>// TODO(b/26783907): Implement sort on CPU.</i></td></tr>
<tr><th id="484">484</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Sort is not implemented on CPU."</q>);</td></tr>
<tr><th id="485">485</th><td>}</td></tr>
<tr><th id="486">486</th><td></td></tr>
<tr><th id="487">487</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter11HandleTupleEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleTuple' data-ref="_ZN3xla3cpu9IrEmitter11HandleTupleEPNS_14HloInstructionE">HandleTuple</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="142tuple" title='tuple' data-type='xla::HloInstruction *' data-ref="142tuple">tuple</dfn>) {</td></tr>
<tr><th id="488">488</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(tuple)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col2 ref" href="#142tuple" title='tuple' data-ref="142tuple">tuple</a>));</td></tr>
<tr><th id="489">489</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col3 decl" id="143base_ptrs" title='base_ptrs' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="143base_ptrs">base_ptrs</dfn>;</td></tr>
<tr><th id="490">490</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col4 decl" id="144operand" title='operand' data-type='xla::HloInstruction *' data-ref="144operand">operand</dfn> : <a class="local col2 ref" href="#142tuple" title='tuple' data-ref="142tuple">tuple</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>()) {</td></tr>
<tr><th id="491">491</th><td>    <a class="local col3 ref" href="#143base_ptrs" title='base_ptrs' data-ref="143base_ptrs">base_ptrs</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col4 ref" href="#144operand" title='operand' data-ref="144operand">operand</a>));</td></tr>
<tr><th id="492">492</th><td>  }</td></tr>
<tr><th id="493">493</th><td>  <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE" title='xla::llvm_ir::EmitTuple' data-ref="_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE">EmitTuple</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#142tuple" title='tuple' data-ref="142tuple">tuple</a>), <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col3 ref" href="#143base_ptrs" title='base_ptrs' data-ref="143base_ptrs">base_ptrs</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="494">494</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="495">495</th><td>}</td></tr>
<tr><th id="496">496</th><td></td></tr>
<tr><th id="497">497</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter9HandleMapEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleMap' data-ref="_ZN3xla3cpu9IrEmitter9HandleMapEPNS_14HloInstructionE">HandleMap</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="145map" title='map' data-type='xla::HloInstruction *' data-ref="145map">map</dfn>) {</td></tr>
<tr><th id="498">498</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt; <dfn class="local col6 decl" id="146operands" title='operands' data-type='gtl::ArraySlice&lt;HloInstruction *&gt;' data-ref="146operands">operands</dfn><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE">(</a><a class="local col5 ref" href="#145map" title='map' data-ref="145map">map</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>());</td></tr>
<tr><th id="499">499</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col7 decl" id="147function" title='function' data-type='xla::HloComputation *' data-ref="147function">function</dfn> = <a class="local col5 ref" href="#145map" title='map' data-ref="145map">map</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8to_applyEv" title='xla::HloInstruction::to_apply' data-ref="_ZNK3xla14HloInstruction8to_applyEv">to_apply</a>();</td></tr>
<tr><th id="500">500</th><td>  <i>// The called computation should have been emitted previously.</i></td></tr>
<tr><th id="501">501</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col8 decl" id="148mapped_ir_function" title='mapped_ir_function' data-type='llvm::Function *' data-ref="148mapped_ir_function">mapped_ir_function</dfn> = <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col7 ref" href="#147function" title='function' data-ref="147function">function</a>);</td></tr>
<tr><th id="502">502</th><td></td></tr>
<tr><th id="503">503</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(<a class="local col5 ref" href="#145map" title='map' data-ref="145map">map</a>, <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, map, operands, mapped_ir_function](</td></tr>
<tr><th id="504">504</th><td>                                        <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col9 decl" id="149index" title='index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="149index">index</dfn>) {</td></tr>
<tr><th id="505">505</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col0 decl" id="150parameter_addresses" title='parameter_addresses' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="150parameter_addresses">parameter_addresses</dfn>;</td></tr>
<tr><th id="506">506</th><td>    <b>for</b> (<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="151operand" title='operand' data-type='const xla::HloInstruction *' data-ref="151operand">operand</dfn> : <a class="local col6 ref" href="#146operands" title='operands' data-ref="146operands">operands</a>) {</td></tr>
<tr><th id="507">507</th><td>      <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&amp; <dfn class="local col2 decl" id="152array" title='array' data-type='const llvm_ir::IrArray &amp;' data-ref="152array">array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col1 ref" href="#151operand" title='operand' data-ref="151operand">operand</a>);</td></tr>
<tr><th id="508">508</th><td>      <a class="local col0 ref" href="#150parameter_addresses" title='parameter_addresses' data-ref="150parameter_addresses">parameter_addresses</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(</td></tr>
<tr><th id="509">509</th><td>          <a class="local col2 ref" href="#152array" title='array' data-ref="152array">array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col9 ref" href="#149index" title='index' data-ref="149index">index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>));</td></tr>
<tr><th id="510">510</th><td>    }</td></tr>
<tr><th id="511">511</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(<a class="local col8 ref" href="#148mapped_ir_function" title='mapped_ir_function' data-ref="148mapped_ir_function">mapped_ir_function</a>, <a class="local col5 ref" href="#145map" title='map' data-ref="145map">map</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="512">512</th><td>                                   <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col0 ref" href="#150parameter_addresses" title='parameter_addresses' data-ref="150parameter_addresses">parameter_addresses</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"map_function"</q>);</td></tr>
<tr><th id="513">513</th><td>  });</td></tr>
<tr><th id="514">514</th><td>}</td></tr>
<tr><th id="515">515</th><td></td></tr>
<tr><th id="516">516</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter18HandleReduceWindowEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleReduceWindow' data-ref="_ZN3xla3cpu9IrEmitter18HandleReduceWindowEPNS_14HloInstructionE">HandleReduceWindow</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="153reduce_window" title='reduce_window' data-type='xla::HloInstruction *' data-ref="153reduce_window">reduce_window</dfn>) {</td></tr>
<tr><th id="517">517</th><td>  <em>auto</em> <dfn class="local col4 decl" id="154operand" title='operand' data-type='const xla::HloInstruction *' data-ref="154operand">operand</dfn> = <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="518">518</th><td>  <em>const</em> <span class='type' title='xla::Window' data-ref="xla::Window">Window</span>&amp; <dfn class="local col5 decl" id="155window" title='window' data-type='const xla::Window &amp;' data-ref="155window">window</dfn> = <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6windowEv" title='xla::HloInstruction::window' data-ref="_ZNK3xla14HloInstruction6windowEv">window</a>();</td></tr>
<tr><th id="519">519</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col6 decl" id="156function" title='function' data-type='xla::HloComputation *' data-ref="156function">function</dfn> = <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8to_applyEv" title='xla::HloInstruction::to_apply' data-ref="_ZNK3xla14HloInstruction8to_applyEv">to_apply</a>();</td></tr>
<tr><th id="520">520</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ElementTypesSameAndSupported( *reduce_window, {operand}, {F32, BF16})); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</a>(</td></tr>
<tr><th id="521">521</th><td>      <i>/*instruction=*/</i>*<a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>, <i>/*operands=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col4 ref" href="#154operand" title='operand' data-ref="154operand">operand</a>},</td></tr>
<tr><th id="522">522</th><td>      <i>/*supported_types=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<span class='enum' title='xla::PrimitiveType::F32' data-ref="xla::PrimitiveType::F32">F32</span>, <span class='enum' title='xla::PrimitiveType::BF16' data-ref="xla::PrimitiveType::BF16">BF16</span>}));</td></tr>
<tr><th id="523">523</th><td></td></tr>
<tr><th id="524">524</th><td>  <i>// TODO(b/31410564): Implement dilation for reduce-window.</i></td></tr>
<tr><th id="525">525</th><td>  <b>if</b> (<span class="namespace">window_util::</span><a class="ref" href="../../window_util.h.html#_ZN3xla11window_util11HasDilationERKNS_6WindowE" title='xla::window_util::HasDilation' data-ref="_ZN3xla11window_util11HasDilationERKNS_6WindowE">HasDilation</a>(<a class="local col5 ref" href="#155window" title='window' data-ref="155window">window</a>)) {</td></tr>
<tr><th id="526">526</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(</td></tr>
<tr><th id="527">527</th><td>        <q>"Dilation for ReduceWindow is not implemented on CPU."</q>);</td></tr>
<tr><th id="528">528</th><td>  }</td></tr>
<tr><th id="529">529</th><td></td></tr>
<tr><th id="530">530</th><td>  <i>// The called computation should have been emitted previously.</i></td></tr>
<tr><th id="531">531</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col7 decl" id="157reducer_function" title='reducer_function' data-type='llvm::Function *' data-ref="157reducer_function">reducer_function</dfn> = <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col6 ref" href="#156function" title='function' data-ref="156function">function</a>);</td></tr>
<tr><th id="532">532</th><td></td></tr>
<tr><th id="533">533</th><td>  <i>// Pseudo code for reduce window:</i></td></tr>
<tr><th id="534">534</th><td><i>  //</i></td></tr>
<tr><th id="535">535</th><td><i>  //   for (coordinates O in the output)</i></td></tr>
<tr><th id="536">536</th><td><i>  //     value = init_value;</i></td></tr>
<tr><th id="537">537</th><td><i>  //     for (coordinates W in the window)</i></td></tr>
<tr><th id="538">538</th><td><i>  //       for each index i:</i></td></tr>
<tr><th id="539">539</th><td><i>  //         input coordinates I_i = O_i * stride_i + W_i - pad_low_i</i></td></tr>
<tr><th id="540">540</th><td><i>  //       if I within bounds of input:</i></td></tr>
<tr><th id="541">541</th><td><i>  //         value = function(value, input(I));</i></td></tr>
<tr><th id="542">542</th><td><i>  //     output(O) = value;</i></td></tr>
<tr><th id="543">543</th><td><i>  //</i></td></tr>
<tr><th id="544">544</th><td><i>  // This is completely un-optimized and just here to have something</i></td></tr>
<tr><th id="545">545</th><td><i>  // that works.</i></td></tr>
<tr><th id="546">546</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="547">547</th><td>      <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>, <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, reduce_window, operand, window,</td></tr>
<tr><th id="548">548</th><td>                      reducer_function](<em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col8 decl" id="158index" title='index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="158index">index</dfn>) {</td></tr>
<tr><th id="549">549</th><td>        <i>// We fold inputs into the accumulator and initialize it to</i></td></tr>
<tr><th id="550">550</th><td><i>        // the initial value on the reduce_window.</i></td></tr>
<tr><th id="551">551</th><td>        <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col9 decl" id="159operand_element_type" title='operand_element_type' data-type='xla::PrimitiveType' data-ref="159operand_element_type">operand_element_type</dfn> = <a class="local col4 ref" href="#154operand" title='operand' data-ref="154operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="552">552</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="160accumulator_address" title='accumulator_address' data-type='llvm::Value *' data-ref="160accumulator_address">accumulator_address</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="553">553</th><td>            <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col9 ref" href="#159operand_element_type" title='operand_element_type' data-ref="159operand_element_type">operand_element_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>),</td></tr>
<tr><th id="554">554</th><td>            <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"reduce_window_accumulator_address"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="555">555</th><td>            <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col9 ref" href="#159operand_element_type" title='operand_element_type' data-ref="159operand_element_type">operand_element_type</a>));</td></tr>
<tr><th id="556">556</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(</td></tr>
<tr><th id="557">557</th><td>                                    <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>))),</td></tr>
<tr><th id="558">558</th><td>                                <a class="local col0 ref" href="#160accumulator_address" title='accumulator_address' data-ref="160accumulator_address">accumulator_address</a>);</td></tr>
<tr><th id="559">559</th><td></td></tr>
<tr><th id="560">560</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col1 decl" id="161loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="161loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"inner"</q>),</td></tr>
<tr><th id="561">561</th><td>                                   &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="562">562</th><td>        <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col2 decl" id="162window_size" title='window_size' data-type='std::vector&lt;int64&gt;' data-ref="162window_size">window_size</dfn>;</td></tr>
<tr><th id="563">563</th><td>        <b>for</b> (<em>const</em> <em>auto</em>&amp; <dfn class="local col3 decl" id="163dim" title='dim' data-type='const xla::WindowDimension &amp;' data-ref="163dim">dim</dfn> : <a class="local col5 ref" href="#155window" title='window' data-ref="155window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEv">dimensions</span>()) {</td></tr>
<tr><th id="564">564</th><td>          <a class="local col2 ref" href="#162window_size" title='window_size' data-ref="162window_size">window_size</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="local col3 ref" href="#163dim" title='dim' data-ref="163dim">dim</a>.<span class='ref' title='xla::WindowDimension::size' data-ref="_ZNK3xla15WindowDimension4sizeEv">size</span>());</td></tr>
<tr><th id="565">565</th><td>        }</td></tr>
<tr><th id="566">566</th><td>        <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col4 decl" id="164window_index" title='window_index' data-type='const llvm_ir::IrArray::Index' data-ref="164window_index">window_index</dfn> = <a class="local col1 ref" href="#161loops" title='loops' data-ref="161loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShape' data-ref="_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE">AddLoopsForShape</a>(</td></tr>
<tr><th id="567">567</th><td>            <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE" title='xla::ShapeUtil::MakeShape' data-ref="_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE">MakeShape</a>(<a class="local col9 ref" href="#159operand_element_type" title='operand_element_type' data-ref="159operand_element_type">operand_element_type</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col2 ref" href="#162window_size" title='window_size' data-ref="162window_size">window_size</a>), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"window"</q>);</td></tr>
<tr><th id="568">568</th><td>        <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(window_index.size()), ::tensorflow::internal::GetReferenceableValue(index.size()), &quot;window_index.size()&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;index.size()&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 568) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col4 ref" href="#164window_index" title='window_index' data-ref="164window_index">window_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(), <a class="local col8 ref" href="#158index" title='index' data-ref="158index">index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>());</td></tr>
<tr><th id="569">569</th><td></td></tr>
<tr><th id="570">570</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col1 ref" href="#161loops" title='loops' data-ref="161loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="571">571</th><td></td></tr>
<tr><th id="572">572</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col5 decl" id="165input_index" title='input_index' data-type='llvm_ir::IrArray::Index' data-ref="165input_index">input_index</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE">(</a><a class="local col8 ref" href="#158index" title='index' data-ref="158index">index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>());</td></tr>
<tr><th id="573">573</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="166in_bounds_condition" title='in_bounds_condition' data-type='llvm::Value *' data-ref="166in_bounds_condition">in_bounds_condition</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="574">574</th><td>        <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col7 decl" id="167i" title='i' data-type='size_t' data-ref="167i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a> &lt; <a class="local col8 ref" href="#158index" title='index' data-ref="158index">index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(); ++<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>) {</td></tr>
<tr><th id="575">575</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="168strided_index" title='strided_index' data-type='llvm::Value *' data-ref="168strided_index">strided_index</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWMul' data-ref="_ZN4llvm9IRBuilder12CreateNSWMulEPNS_5ValueES2_RKNS_5TwineE">CreateNSWMul</span>(</td></tr>
<tr><th id="576">576</th><td>              <a class="local col8 ref" href="#158index" title='index' data-ref="158index">index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>]</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col5 ref" href="#155window" title='window' data-ref="155window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>).<span class='ref' title='xla::WindowDimension::stride' data-ref="_ZNK3xla15WindowDimension6strideEv">stride</span>()));</td></tr>
<tr><th id="577">577</th><td>          <a class="local col5 ref" href="#165input_index" title='input_index' data-ref="165input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>]</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWSub' data-ref="_ZN4llvm9IRBuilder12CreateNSWSubEPNS_5ValueES2_RKNS_5TwineE">CreateNSWSub</span>(</td></tr>
<tr><th id="578">578</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWAdd' data-ref="_ZN4llvm9IRBuilder12CreateNSWAddEPNS_5ValueES2_RKNS_5TwineE">CreateNSWAdd</span>(<a class="local col8 ref" href="#168strided_index" title='strided_index' data-ref="168strided_index">strided_index</a>, <a class="local col4 ref" href="#164window_index" title='window_index' data-ref="164window_index">window_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>]</a>),</td></tr>
<tr><th id="579">579</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col5 ref" href="#155window" title='window' data-ref="155window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>).<span class='ref' title='xla::WindowDimension::padding_low' data-ref="_ZNK3xla15WindowDimension11padding_lowEv">padding_low</span>()));</td></tr>
<tr><th id="580">580</th><td></td></tr>
<tr><th id="581">581</th><td>          <i>// We need to check if 0 &lt;= input_index[i] &lt; bound, as</i></td></tr>
<tr><th id="582">582</th><td><i>          // otherwise we are in the padding so that we can skip the</i></td></tr>
<tr><th id="583">583</th><td><i>          // computation. That is equivalent to input_index[i] &lt; bound</i></td></tr>
<tr><th id="584">584</th><td><i>          // as an *unsigned* comparison, since a negative value will</i></td></tr>
<tr><th id="585">585</th><td><i>          // wrap to a large positive value.</i></td></tr>
<tr><th id="586">586</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="169index_condition" title='index_condition' data-type='llvm::Value *' data-ref="169index_condition">index_condition</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpULT' data-ref="_ZN4llvm9IRBuilder13CreateICmpULTEPNS_5ValueES2_RKNS_5TwineE">CreateICmpULT</span>(</td></tr>
<tr><th id="587">587</th><td>              <a class="local col5 ref" href="#165input_index" title='input_index' data-ref="165input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>]</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil12GetDimensionERKNS_5ShapeEx" title='xla::ShapeUtil::GetDimension' data-ref="_ZN3xla9ShapeUtil12GetDimensionERKNS_5ShapeEx">GetDimension</a>(</td></tr>
<tr><th id="588">588</th><td>                                  <a class="local col4 ref" href="#154operand" title='operand' data-ref="154operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="local col7 ref" href="#167i" title='i' data-ref="167i">i</a>)));</td></tr>
<tr><th id="589">589</th><td>          <b>if</b> (<a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="590">590</th><td>            <a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a> = <a class="local col9 ref" href="#169index_condition" title='index_condition' data-ref="169index_condition">index_condition</a>;</td></tr>
<tr><th id="591">591</th><td>          } <b>else</b> {</td></tr>
<tr><th id="592">592</th><td>            <a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a> =</td></tr>
<tr><th id="593">593</th><td>                <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</span>(<a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a>, <a class="local col9 ref" href="#169index_condition" title='index_condition' data-ref="169index_condition">index_condition</a>);</td></tr>
<tr><th id="594">594</th><td>          }</td></tr>
<tr><th id="595">595</th><td>        }</td></tr>
<tr><th id="596">596</th><td>        <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(in_bounds_condition != nullptr), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 596) &lt;&lt; &quot;Check failed: &quot; &quot;in_bounds_condition != nullptr&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a> != <b>nullptr</b>);</td></tr>
<tr><th id="597">597</th><td></td></tr>
<tr><th id="598">598</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col0 decl" id="170if_data" title='if_data' data-type='llvm_ir::LlvmIfData' data-ref="170if_data">if_data</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(</td></tr>
<tr><th id="599">599</th><td>            <a class="local col6 ref" href="#166in_bounds_condition" title='in_bounds_condition' data-ref="166in_bounds_condition">in_bounds_condition</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"in-bounds"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="600">600</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#170if_data" title='if_data' data-ref="170if_data">if_data</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::true_block" title='xla::llvm_ir::LlvmIfData::true_block' data-ref="xla::llvm_ir::LlvmIfData::true_block">true_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="601">601</th><td></td></tr>
<tr><th id="602">602</th><td>        <i>// We are not in the padding, so carry out the computation.</i></td></tr>
<tr><th id="603">603</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col1 decl" id="171input_array" title='input_array' data-type='llvm_ir::IrArray' data-ref="171input_array">input_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col4 ref" href="#154operand" title='operand' data-ref="154operand">operand</a>));</td></tr>
<tr><th id="604">604</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="172input_value_address" title='input_value_address' data-type='llvm::Value *' data-ref="172input_value_address">input_value_address</dfn> =</td></tr>
<tr><th id="605">605</th><td>            <a class="local col1 ref" href="#171input_array" title='input_array' data-ref="171input_array">input_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col5 ref" href="#165input_index" title='input_index' data-ref="165input_index">input_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="606">606</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="173result" title='result' data-type='llvm::Value *' data-ref="173result">result</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(</td></tr>
<tr><th id="607">607</th><td>            <a class="local col7 ref" href="#157reducer_function" title='reducer_function' data-ref="157reducer_function">reducer_function</a>, <a class="local col3 ref" href="#153reduce_window" title='reduce_window' data-ref="153reduce_window">reduce_window</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="608">608</th><td>            <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col0 ref" href="#160accumulator_address" title='accumulator_address' data-ref="160accumulator_address">accumulator_address</a>, <a class="local col2 ref" href="#172input_value_address" title='input_value_address' data-ref="172input_value_address">input_value_address</a>}, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"reducer_function"</q>);</td></tr>
<tr><th id="609">609</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col3 ref" href="#173result" title='result' data-ref="173result">result</a>, <a class="local col0 ref" href="#160accumulator_address" title='accumulator_address' data-ref="160accumulator_address">accumulator_address</a>);</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col1 ref" href="#161loops" title='loops' data-ref="161loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="612">612</th><td>        <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col0 ref" href="#160accumulator_address" title='accumulator_address' data-ref="160accumulator_address">accumulator_address</a>);</td></tr>
<tr><th id="613">613</th><td>      });</td></tr>
<tr><th id="614">614</th><td>}</td></tr>
<tr><th id="615">615</th><td></td></tr>
<tr><th id="616">616</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter22HandleSelectAndScatterEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSelectAndScatter' data-ref="_ZN3xla3cpu9IrEmitter22HandleSelectAndScatterEPNS_14HloInstructionE">HandleSelectAndScatter</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="174select_and_scatter" title='select_and_scatter' data-type='xla::HloInstruction *' data-ref="174select_and_scatter">select_and_scatter</dfn>) {</td></tr>
<tr><th id="617">617</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(select_and_scatter-&gt;operand_count()), ::tensorflow::internal::GetReferenceableValue(3), &quot;select_and_scatter-&gt;operand_count()&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;3&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 617) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction13operand_countEv" title='xla::HloInstruction::operand_count' data-ref="_ZNK3xla14HloInstruction13operand_countEv">operand_count</a>(), <var>3</var>);</td></tr>
<tr><th id="618">618</th><td>  <em>const</em> <em>auto</em> <dfn class="local col5 decl" id="175operand" title='operand' data-type='const xla::HloInstruction *const' data-ref="175operand">operand</dfn> = <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="619">619</th><td>  <em>const</em> <em>auto</em> <dfn class="local col6 decl" id="176source" title='source' data-type='const xla::HloInstruction *const' data-ref="176source">source</dfn> = <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="620">620</th><td>  <em>const</em> <em>auto</em> <dfn class="local col7 decl" id="177init_value" title='init_value' data-type='const xla::HloInstruction *const' data-ref="177init_value">init_value</dfn> = <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>2</var>);</td></tr>
<tr><th id="621">621</th><td>  <em>const</em> <span class='type' title='xla::Window' data-ref="xla::Window">Window</span>&amp; <dfn class="local col8 decl" id="178window" title='window' data-type='const xla::Window &amp;' data-ref="178window">window</dfn> = <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6windowEv" title='xla::HloInstruction::window' data-ref="_ZNK3xla14HloInstruction6windowEv">window</a>();</td></tr>
<tr><th id="622">622</th><td>  <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col9 decl" id="179operand_element_type" title='operand_element_type' data-type='xla::PrimitiveType' data-ref="179operand_element_type">operand_element_type</dfn> = <a class="local col5 ref" href="#175operand" title='operand' data-ref="175operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="623">623</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="180rank" title='rank' data-type='const int64' data-ref="180rank">rank</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil4RankERKNS_5ShapeE" title='xla::ShapeUtil::Rank' data-ref="_ZN3xla9ShapeUtil4RankERKNS_5ShapeE">Rank</a>(<a class="local col5 ref" href="#175operand" title='operand' data-ref="175operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="624">624</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(rank), ::tensorflow::internal::GetReferenceableValue(ShapeUtil::Rank(source-&gt;shape())), &quot;rank&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;ShapeUtil::Rank(source-&gt;shape())&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 624) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>, <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil4RankERKNS_5ShapeE" title='xla::ShapeUtil::Rank' data-ref="_ZN3xla9ShapeUtil4RankERKNS_5ShapeE">Rank</a>(<a class="local col6 ref" href="#176source" title='source' data-ref="176source">source</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="625">625</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(rank), ::tensorflow::internal::GetReferenceableValue(window.dimensions_size()), &quot;rank&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;window.dimensions_size()&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 625) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>, <a class="local col8 ref" href="#178window" title='window' data-ref="178window">window</a>.<span class='ref' title='xla::Window::dimensions_size' data-ref="_ZNK3xla6Window15dimensions_sizeEv">dimensions_size</span>());</td></tr>
<tr><th id="626">626</th><td></td></tr>
<tr><th id="627">627</th><td>  <i>// TODO(b/31410564): Implement dilation for select-and-scatter.</i></td></tr>
<tr><th id="628">628</th><td>  <b>if</b> (<span class="namespace">window_util::</span><a class="ref" href="../../window_util.h.html#_ZN3xla11window_util11HasDilationERKNS_6WindowE" title='xla::window_util::HasDilation' data-ref="_ZN3xla11window_util11HasDilationERKNS_6WindowE">HasDilation</a>(<a class="local col8 ref" href="#178window" title='window' data-ref="178window">window</a>)) {</td></tr>
<tr><th id="629">629</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(</td></tr>
<tr><th id="630">630</th><td>        <q>"Dilation for SelectAndScatter is not implemented on CPU. "</q>);</td></tr>
<tr><th id="631">631</th><td>  }</td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td>  <i>// The select and scatter computations should have been emitted previously.</i></td></tr>
<tr><th id="634">634</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col1 decl" id="181select_function" title='select_function' data-type='llvm::Function *' data-ref="181select_function">select_function</dfn> =</td></tr>
<tr><th id="635">635</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6selectEv" title='xla::HloInstruction::select' data-ref="_ZNK3xla14HloInstruction6selectEv">select</a>());</td></tr>
<tr><th id="636">636</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="182scatter_function" title='scatter_function' data-type='llvm::Function *' data-ref="182scatter_function">scatter_function</dfn> =</td></tr>
<tr><th id="637">637</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7scatterEv" title='xla::HloInstruction::scatter' data-ref="_ZNK3xla14HloInstruction7scatterEv">scatter</a>());</td></tr>
<tr><th id="638">638</th><td></td></tr>
<tr><th id="639">639</th><td>  <i>// Pseudo code for select-and-scatter:</i></td></tr>
<tr><th id="640">640</th><td><i>  //</i></td></tr>
<tr><th id="641">641</th><td><i>  // initialized_flag is initially off for every window, and is turned on after</i></td></tr>
<tr><th id="642">642</th><td><i>  // the first iteration is completed and the first operand value is selected.</i></td></tr>
<tr><th id="643">643</th><td><i>  //</i></td></tr>
<tr><th id="644">644</th><td><i>  // output(*) = init_value</i></td></tr>
<tr><th id="645">645</th><td><i>  // for (coordinates S in the source) {</i></td></tr>
<tr><th id="646">646</th><td><i>  //   initialized_flag = false</i></td></tr>
<tr><th id="647">647</th><td><i>  //   for (coordinates W in the window) {</i></td></tr>
<tr><th id="648">648</th><td><i>  //     I = S * stride + W - pad_low</i></td></tr>
<tr><th id="649">649</th><td><i>  //     if I within bounds of operand:</i></td></tr>
<tr><th id="650">650</th><td><i>  //       if !initialized_flag or select(selected_value, operand(I)) == false:</i></td></tr>
<tr><th id="651">651</th><td><i>  //         selected_value = operand(I)</i></td></tr>
<tr><th id="652">652</th><td><i>  //         selected_index = I</i></td></tr>
<tr><th id="653">653</th><td><i>  //         initialized_flag = true</i></td></tr>
<tr><th id="654">654</th><td><i>  //   }</i></td></tr>
<tr><th id="655">655</th><td><i>  //   output(selected_index) = scatter(output(selected_index), source(S))</i></td></tr>
<tr><th id="656">656</th><td><i>  // }</i></td></tr>
<tr><th id="657">657</th><td><i>  //</i></td></tr>
<tr><th id="658">658</th><td><i></i></td></tr>
<tr><th id="659">659</th><td><i>  // Initialize the output array with the given init_value.</i></td></tr>
<tr><th id="660">660</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetElementLoop( select_and_scatter, IrName(select_and_scatter, &quot;init&quot;), [this, init_value](const llvm_ir::IrArray::Index&amp; target_index) { llvm::Value* init_value_addr = GetEmittedValueFor(init_value); return ir_builder_.CreateLoad(init_value_addr); })); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="661">661</th><td>      <a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>, <i>/*desc=*/</i><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"init"</q>),</td></tr>
<tr><th id="662">662</th><td>      <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, init_value](<em>const</em> llvm_ir::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col3 decl" id="183target_index" title='target_index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="183target_index">target_index</dfn>) {</td></tr>
<tr><th id="663">663</th><td>        llvm::<span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="184init_value_addr" title='init_value_addr' data-type='llvm::Value *' data-ref="184init_value_addr">init_value_addr</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col7 ref" href="#177init_value" title='init_value' data-ref="177init_value">init_value</a>);</td></tr>
<tr><th id="664">664</th><td>        <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col4 ref" href="#660" title='init_value_addr' data-ref="184init_value_addr">init_value_addr</a>);</td></tr>
<tr><th id="665">665</th><td>      }));</td></tr>
<tr><th id="666">666</th><td></td></tr>
<tr><th id="667">667</th><td>  <i>// Create a loop to iterate over the source array to scatter to the output.</i></td></tr>
<tr><th id="668">668</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col5 decl" id="185source_loops" title='source_loops' data-type='llvm_ir::ForLoopNest' data-ref="185source_loops">source_loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="669">669</th><td>  <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col6 decl" id="186source_index" title='source_index' data-type='const llvm_ir::IrArray::Index' data-ref="186source_index">source_index</dfn> =</td></tr>
<tr><th id="670">670</th><td>      <a class="local col5 ref" href="#185source_loops" title='source_loops' data-ref="185source_loops">source_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShape' data-ref="_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE">AddLoopsForShape</a>(<a class="local col6 ref" href="#176source" title='source' data-ref="176source">source</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"source"</q>);</td></tr>
<tr><th id="671">671</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col5 ref" href="#185source_loops" title='source_loops' data-ref="185source_loops">source_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(),</td></tr>
<tr><th id="672">672</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="673">673</th><td></td></tr>
<tr><th id="674">674</th><td>  <i>// Allocate space to keep the currently selected value, its index, and</i></td></tr>
<tr><th id="675">675</th><td><i>  // the boolean initialized_flag, which is initially set to false.</i></td></tr>
<tr><th id="676">676</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="187selected_value_address" title='selected_value_address' data-type='llvm::Value *' data-ref="187selected_value_address">selected_value_address</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="677">677</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col9 ref" href="#179operand_element_type" title='operand_element_type' data-ref="179operand_element_type">operand_element_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>),</td></tr>
<tr><th id="678">678</th><td>      <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"selected_value_address"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="679">679</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col9 ref" href="#179operand_element_type" title='operand_element_type' data-ref="179operand_element_type">operand_element_type</a>));</td></tr>
<tr><th id="680">680</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="188selected_index_address" title='selected_index_address' data-type='llvm::Value *' data-ref="188selected_index_address">selected_index_address</dfn> =</td></tr>
<tr><th id="681">681</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675" title='xla::llvm_ir::EmitAllocaAtFunctionEntryWithCount' data-ref="_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675">EmitAllocaAtFunctionEntryWithCount</a>(</td></tr>
<tr><th id="682">682</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt64TyEv">getInt64Ty</span>(), <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>),</td></tr>
<tr><th id="683">683</th><td>          <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"selected_index_address"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="684">684</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="189initialized_flag_address" title='initialized_flag_address' data-type='llvm::Value *' data-ref="189initialized_flag_address">initialized_flag_address</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="685">685</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt1Ty' data-ref="_ZN4llvm13IRBuilderBase9getInt1TyEv">getInt1Ty</span>(), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"initialized_flag_address"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="686">686</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt1' data-ref="_ZN4llvm13IRBuilderBase7getInt1Eb">getInt1</span>(<b>false</b>), <a class="local col9 ref" href="#189initialized_flag_address" title='initialized_flag_address' data-ref="189initialized_flag_address">initialized_flag_address</a>);</td></tr>
<tr><th id="687">687</th><td></td></tr>
<tr><th id="688">688</th><td>  <i>// Create the inner loop to iterate over the window.</i></td></tr>
<tr><th id="689">689</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col0 decl" id="190window_loops" title='window_loops' data-type='llvm_ir::ForLoopNest' data-ref="190window_loops">window_loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"window"</q>),</td></tr>
<tr><th id="690">690</th><td>                                    &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="691">691</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col1 decl" id="191window_size" title='window_size' data-type='std::vector&lt;int64&gt;' data-ref="191window_size">window_size</dfn>;</td></tr>
<tr><th id="692">692</th><td>  <b>for</b> (<em>const</em> <em>auto</em>&amp; <dfn class="local col2 decl" id="192dim" title='dim' data-type='const xla::WindowDimension &amp;' data-ref="192dim">dim</dfn> : <a class="local col8 ref" href="#178window" title='window' data-ref="178window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEv">dimensions</span>()) {</td></tr>
<tr><th id="693">693</th><td>    <a class="local col1 ref" href="#191window_size" title='window_size' data-ref="191window_size">window_size</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="local col2 ref" href="#192dim" title='dim' data-ref="192dim">dim</a>.<span class='ref' title='xla::WindowDimension::size' data-ref="_ZNK3xla15WindowDimension4sizeEv">size</span>());</td></tr>
<tr><th id="694">694</th><td>  }</td></tr>
<tr><th id="695">695</th><td>  <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col3 decl" id="193window_index" title='window_index' data-type='const llvm_ir::IrArray::Index' data-ref="193window_index">window_index</dfn> = <a class="local col0 ref" href="#190window_loops" title='window_loops' data-ref="190window_loops">window_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShape' data-ref="_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE">AddLoopsForShape</a>(</td></tr>
<tr><th id="696">696</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE" title='xla::ShapeUtil::MakeShape' data-ref="_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE">MakeShape</a>(<a class="local col9 ref" href="#179operand_element_type" title='operand_element_type' data-ref="179operand_element_type">operand_element_type</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col1 ref" href="#191window_size" title='window_size' data-ref="191window_size">window_size</a>), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"window"</q>);</td></tr>
<tr><th id="697">697</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#190window_loops" title='window_loops' data-ref="190window_loops">window_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(),</td></tr>
<tr><th id="698">698</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="699">699</th><td></td></tr>
<tr><th id="700">700</th><td>  <i>// Compute the operand index to visit and evaluate the condition whether the</i></td></tr>
<tr><th id="701">701</th><td><i>  // operand index is within the bounds. The unsigned comparison includes</i></td></tr>
<tr><th id="702">702</th><td><i>  // checking whether the operand index &gt;= 0.</i></td></tr>
<tr><th id="703">703</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col4 decl" id="194operand_index" title='operand_index' data-type='llvm_ir::IrArray::Index' data-ref="194operand_index">operand_index</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE">(</a><a class="local col6 ref" href="#186source_index" title='source_index' data-ref="186source_index">source_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>());</td></tr>
<tr><th id="704">704</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="195in_bounds_condition" title='in_bounds_condition' data-type='llvm::Value *' data-ref="195in_bounds_condition">in_bounds_condition</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getTrue' data-ref="_ZN4llvm13IRBuilderBase7getTrueEv">getTrue</span>();</td></tr>
<tr><th id="705">705</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="196i" title='i' data-type='int64' data-ref="196i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a> &lt; <a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>; ++<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>) {</td></tr>
<tr><th id="706">706</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="197strided_index" title='strided_index' data-type='llvm::Value *' data-ref="197strided_index">strided_index</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWMul' data-ref="_ZN4llvm9IRBuilder12CreateNSWMulEPNS_5ValueES2_RKNS_5TwineE">CreateNSWMul</span>(</td></tr>
<tr><th id="707">707</th><td>        <a class="local col6 ref" href="#186source_index" title='source_index' data-ref="186source_index">source_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>]</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col8 ref" href="#178window" title='window' data-ref="178window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>).<span class='ref' title='xla::WindowDimension::stride' data-ref="_ZNK3xla15WindowDimension6strideEv">stride</span>()));</td></tr>
<tr><th id="708">708</th><td>    <a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>]</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWSub' data-ref="_ZN4llvm9IRBuilder12CreateNSWSubEPNS_5ValueES2_RKNS_5TwineE">CreateNSWSub</span>(</td></tr>
<tr><th id="709">709</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWAdd' data-ref="_ZN4llvm9IRBuilder12CreateNSWAddEPNS_5ValueES2_RKNS_5TwineE">CreateNSWAdd</span>(<a class="local col7 ref" href="#197strided_index" title='strided_index' data-ref="197strided_index">strided_index</a>, <a class="local col3 ref" href="#193window_index" title='window_index' data-ref="193window_index">window_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>]</a>),</td></tr>
<tr><th id="710">710</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col8 ref" href="#178window" title='window' data-ref="178window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>).<span class='ref' title='xla::WindowDimension::padding_low' data-ref="_ZNK3xla15WindowDimension11padding_lowEv">padding_low</span>()));</td></tr>
<tr><th id="711">711</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="198index_condition" title='index_condition' data-type='llvm::Value *' data-ref="198index_condition">index_condition</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpULT' data-ref="_ZN4llvm9IRBuilder13CreateICmpULTEPNS_5ValueES2_RKNS_5TwineE">CreateICmpULT</span>(</td></tr>
<tr><th id="712">712</th><td>        <a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>]</a>,</td></tr>
<tr><th id="713">713</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil12GetDimensionERKNS_5ShapeEx" title='xla::ShapeUtil::GetDimension' data-ref="_ZN3xla9ShapeUtil12GetDimensionERKNS_5ShapeEx">GetDimension</a>(<a class="local col5 ref" href="#175operand" title='operand' data-ref="175operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="local col6 ref" href="#196i" title='i' data-ref="196i">i</a>)));</td></tr>
<tr><th id="714">714</th><td>    <a class="local col5 ref" href="#195in_bounds_condition" title='in_bounds_condition' data-ref="195in_bounds_condition">in_bounds_condition</a> =</td></tr>
<tr><th id="715">715</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</span>(<a class="local col5 ref" href="#195in_bounds_condition" title='in_bounds_condition' data-ref="195in_bounds_condition">in_bounds_condition</a>, <a class="local col8 ref" href="#198index_condition" title='index_condition' data-ref="198index_condition">index_condition</a>);</td></tr>
<tr><th id="716">716</th><td>  }</td></tr>
<tr><th id="717">717</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(in_bounds_condition != nullptr), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 717) &lt;&lt; &quot;Check failed: &quot; &quot;in_bounds_condition != nullptr&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="local col5 ref" href="#195in_bounds_condition" title='in_bounds_condition' data-ref="195in_bounds_condition">in_bounds_condition</a> != <b>nullptr</b>);</td></tr>
<tr><th id="718">718</th><td></td></tr>
<tr><th id="719">719</th><td>  <i>// Only need to do something if the operand index is within the bounds. First</i></td></tr>
<tr><th id="720">720</th><td><i>  // check if the initialized_flag is set.</i></td></tr>
<tr><th id="721">721</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col9 decl" id="199if_in_bounds" title='if_in_bounds' data-type='llvm_ir::LlvmIfData' data-ref="199if_in_bounds">if_in_bounds</dfn> =</td></tr>
<tr><th id="722">722</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(<a class="local col5 ref" href="#195in_bounds_condition" title='in_bounds_condition' data-ref="195in_bounds_condition">in_bounds_condition</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"in-bounds"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="723">723</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col9 ref" href="#199if_in_bounds" title='if_in_bounds' data-ref="199if_in_bounds">if_in_bounds</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::true_block" title='xla::llvm_ir::LlvmIfData::true_block' data-ref="xla::llvm_ir::LlvmIfData::true_block">true_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="724">724</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col0 decl" id="200if_initialized" title='if_initialized' data-type='llvm_ir::LlvmIfData' data-ref="200if_initialized">if_initialized</dfn> =</td></tr>
<tr><th id="725">725</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col9 ref" href="#189initialized_flag_address" title='initialized_flag_address' data-ref="189initialized_flag_address">initialized_flag_address</a>),</td></tr>
<tr><th id="726">726</th><td>                              <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"initialized"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="727">727</th><td></td></tr>
<tr><th id="728">728</th><td>  <i>// If the initialized_flag is false, initialize the selected value and index</i></td></tr>
<tr><th id="729">729</th><td><i>  // with the currently visiting operand.</i></td></tr>
<tr><th id="730">730</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#200if_initialized" title='if_initialized' data-ref="200if_initialized">if_initialized</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::false_block" title='xla::llvm_ir::LlvmIfData::false_block' data-ref="xla::llvm_ir::LlvmIfData::false_block">false_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="731">731</th><td>  <em>const</em> <em>auto</em> <dfn class="local col1 decl" id="201save_operand_index" title='save_operand_index' data-type='const (lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:732:7)' data-ref="201save_operand_index">save_operand_index</dfn> =</td></tr>
<tr><th id="732">732</th><td>      [&amp;](<em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col2 decl" id="202operand_index" title='operand_index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="202operand_index">operand_index</dfn>) {</td></tr>
<tr><th id="733">733</th><td>        <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="203i" title='i' data-type='int64' data-ref="203i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#203i" title='i' data-ref="203i">i</a> &lt; <a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>; ++<a class="local col3 ref" href="#203i" title='i' data-ref="203i">i</a>) {</td></tr>
<tr><th id="734">734</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="204selected_index_address_slot" title='selected_index_address_slot' data-type='llvm::Value *' data-ref="204selected_index_address_slot">selected_index_address_slot</dfn> =</td></tr>
<tr><th id="735">735</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_5ValueENS_8ArrayRefIS2_EERKNS_5TwineE">CreateInBoundsGEP</span>(<a class="local col8 ref" href="#188selected_index_address" title='selected_index_address' data-ref="188selected_index_address">selected_index_address</a>,</td></tr>
<tr><th id="736">736</th><td>                                            <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col3 ref" href="#203i" title='i' data-ref="203i">i</a>)});</td></tr>
<tr><th id="737">737</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col2 ref" href="#202operand_index" title='operand_index' data-ref="202operand_index">operand_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col3 ref" href="#203i" title='i' data-ref="203i">i</a>]</a>,</td></tr>
<tr><th id="738">738</th><td>                                  <a class="local col4 ref" href="#204selected_index_address_slot" title='selected_index_address_slot' data-ref="204selected_index_address_slot">selected_index_address_slot</a>);</td></tr>
<tr><th id="739">739</th><td>        }</td></tr>
<tr><th id="740">740</th><td>      };</td></tr>
<tr><th id="741">741</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="205operand_array" title='operand_array' data-type='llvm_ir::IrArray' data-ref="205operand_array">operand_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col5 ref" href="#175operand" title='operand' data-ref="175operand">operand</a>));</td></tr>
<tr><th id="742">742</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="206operand_data" title='operand_data' data-type='llvm::Value *' data-ref="206operand_data">operand_data</dfn> =</td></tr>
<tr><th id="743">743</th><td>      <a class="local col5 ref" href="#205operand_array" title='operand_array' data-ref="205operand_array">operand_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitReadArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitReadArrayElement</a>(<a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="744">744</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col6 ref" href="#206operand_data" title='operand_data' data-ref="206operand_data">operand_data</a>, <a class="local col7 ref" href="#187selected_value_address" title='selected_value_address' data-ref="187selected_value_address">selected_value_address</a>);</td></tr>
<tr><th id="745">745</th><td>  <a class="local col1 ref" href="#201save_operand_index" title='save_operand_index' data-ref="201save_operand_index">save_operand_index</a>(<a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a>);</td></tr>
<tr><th id="746">746</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt1' data-ref="_ZN4llvm13IRBuilderBase7getInt1Eb">getInt1</span>(<b>true</b>), <a class="local col9 ref" href="#189initialized_flag_address" title='initialized_flag_address' data-ref="189initialized_flag_address">initialized_flag_address</a>);</td></tr>
<tr><th id="747">747</th><td></td></tr>
<tr><th id="748">748</th><td>  <i>// If the initialized_flag is true, call the `select` function to potentially</i></td></tr>
<tr><th id="749">749</th><td><i>  // update the selected value and index with the currently visiting operand.</i></td></tr>
<tr><th id="750">750</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#200if_initialized" title='if_initialized' data-ref="200if_initialized">if_initialized</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::true_block" title='xla::llvm_ir::LlvmIfData::true_block' data-ref="xla::llvm_ir::LlvmIfData::true_block">true_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="751">751</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span> <dfn class="local col7 decl" id="207output_shape" title='output_shape' data-type='const xla::Shape' data-ref="207output_shape">output_shape</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE" title='xla::ShapeUtil::MakeShape' data-ref="_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE">MakeShape</a>(<span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>, <a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1Ev" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1Ev">{</a>});</td></tr>
<tr><th id="752">752</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="208operand_address" title='operand_address' data-type='llvm::Value *' data-ref="208operand_address">operand_address</dfn> =</td></tr>
<tr><th id="753">753</th><td>      <a class="local col5 ref" href="#205operand_array" title='operand_array' data-ref="205operand_array">operand_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="754">754</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="209result" title='result' data-type='llvm::Value *' data-ref="209result">result</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(</td></tr>
<tr><th id="755">755</th><td>      <a class="local col1 ref" href="#181select_function" title='select_function' data-ref="181select_function">select_function</a>, <a class="local col7 ref" href="#207output_shape" title='output_shape' data-ref="207output_shape">output_shape</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col7 ref" href="#187selected_value_address" title='selected_value_address' data-ref="187selected_value_address">selected_value_address</a>, <a class="local col8 ref" href="#208operand_address" title='operand_address' data-ref="208operand_address">operand_address</a>},</td></tr>
<tr><th id="756">756</th><td>      <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"select_function"</q>);</td></tr>
<tr><th id="757">757</th><td></td></tr>
<tr><th id="758">758</th><td>  <i>// If the 'select' function returns false, update the selected value and the</i></td></tr>
<tr><th id="759">759</th><td><i>  // index to the currently visiting operand.</i></td></tr>
<tr><th id="760">760</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="210cond" title='cond' data-type='llvm::Value *' data-ref="210cond">cond</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpNE' data-ref="_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpNE</span>(</td></tr>
<tr><th id="761">761</th><td>      <a class="local col9 ref" href="#209result" title='result' data-ref="209result">result</a>,</td></tr>
<tr><th id="762">762</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>::<span class='ref' title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</span>(<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>), <var>0</var>),</td></tr>
<tr><th id="763">763</th><td>      <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></span><q>"boolean_predicate"</q>);</td></tr>
<tr><th id="764">764</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col1 decl" id="211if_select_lhs" title='if_select_lhs' data-type='llvm_ir::LlvmIfData' data-ref="211if_select_lhs">if_select_lhs</dfn> =</td></tr>
<tr><th id="765">765</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(<a class="local col0 ref" href="#210cond" title='cond' data-ref="210cond">cond</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"if-select-lhs"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="766">766</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col1 ref" href="#211if_select_lhs" title='if_select_lhs' data-ref="211if_select_lhs">if_select_lhs</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::false_block" title='xla::llvm_ir::LlvmIfData::false_block' data-ref="xla::llvm_ir::LlvmIfData::false_block">false_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="767">767</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col8 ref" href="#208operand_address" title='operand_address' data-ref="208operand_address">operand_address</a>),</td></tr>
<tr><th id="768">768</th><td>                          <a class="local col7 ref" href="#187selected_value_address" title='selected_value_address' data-ref="187selected_value_address">selected_value_address</a>);</td></tr>
<tr><th id="769">769</th><td>  <a class="local col1 ref" href="#201save_operand_index" title='save_operand_index' data-ref="201save_operand_index">save_operand_index</a>(<a class="local col4 ref" href="#194operand_index" title='operand_index' data-ref="194operand_index">operand_index</a>);</td></tr>
<tr><th id="770">770</th><td></td></tr>
<tr><th id="771">771</th><td>  <i>// After iterating over the window elements, scatter the source element to</i></td></tr>
<tr><th id="772">772</th><td><i>  // the selected index of the output. The value we store at the output</i></td></tr>
<tr><th id="773">773</th><td><i>  // location is computed by calling the `scatter` function with the source</i></td></tr>
<tr><th id="774">774</th><td><i>  // value and the current output value.</i></td></tr>
<tr><th id="775">775</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#190window_loops" title='window_loops' data-ref="190window_loops">window_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(),</td></tr>
<tr><th id="776">776</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="777">777</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <a class="ref fake" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1Ev" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1Ev"></a><dfn class="local col2 decl" id="212selected_index" title='selected_index' data-type='llvm_ir::IrArray::Index' data-ref="212selected_index">selected_index</dfn>;</td></tr>
<tr><th id="778">778</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="213i" title='i' data-type='int64' data-ref="213i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#213i" title='i' data-ref="213i">i</a> &lt; <a class="local col0 ref" href="#180rank" title='rank' data-ref="180rank">rank</a>; ++<a class="local col3 ref" href="#213i" title='i' data-ref="213i">i</a>) {</td></tr>
<tr><th id="779">779</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="214selected_index_address_slot" title='selected_index_address_slot' data-type='llvm::Value *' data-ref="214selected_index_address_slot">selected_index_address_slot</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_5ValueENS_8ArrayRefIS2_EERKNS_5TwineE">CreateInBoundsGEP</span>(</td></tr>
<tr><th id="780">780</th><td>        <a class="local col8 ref" href="#188selected_index_address" title='selected_index_address' data-ref="188selected_index_address">selected_index_address</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col3 ref" href="#213i" title='i' data-ref="213i">i</a>)});</td></tr>
<tr><th id="781">781</th><td>    <a class="local col2 ref" href="#212selected_index" title='selected_index' data-ref="212selected_index">selected_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index9push_backEPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::push_back' data-ref="_ZN3xla7llvm_ir7IrArray5Index9push_backEPN4llvm5ValueE">push_back</a>(</td></tr>
<tr><th id="782">782</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col4 ref" href="#214selected_index_address_slot" title='selected_index_address_slot' data-ref="214selected_index_address_slot">selected_index_address_slot</a>));</td></tr>
<tr><th id="783">783</th><td>  }</td></tr>
<tr><th id="784">784</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="215source_array" title='source_array' data-type='llvm_ir::IrArray' data-ref="215source_array">source_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col6 ref" href="#176source" title='source' data-ref="176source">source</a>));</td></tr>
<tr><th id="785">785</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="216source_value_address" title='source_value_address' data-type='llvm::Value *' data-ref="216source_value_address">source_value_address</dfn> =</td></tr>
<tr><th id="786">786</th><td>      <a class="local col5 ref" href="#215source_array" title='source_array' data-ref="215source_array">source_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col6 ref" href="#186source_index" title='source_index' data-ref="186source_index">source_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="787">787</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col7 decl" id="217output_array" title='output_array' data-type='llvm_ir::IrArray' data-ref="217output_array">output_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col4 ref" href="#174select_and_scatter" title='select_and_scatter' data-ref="174select_and_scatter">select_and_scatter</a>));</td></tr>
<tr><th id="788">788</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="218output_value_address" title='output_value_address' data-type='llvm::Value *' data-ref="218output_value_address">output_value_address</dfn> =</td></tr>
<tr><th id="789">789</th><td>      <a class="local col7 ref" href="#217output_array" title='output_array' data-ref="217output_array">output_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col2 ref" href="#212selected_index" title='selected_index' data-ref="212selected_index">selected_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="790">790</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="219scatter_value" title='scatter_value' data-type='llvm::Value *' data-ref="219scatter_value">scatter_value</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(</td></tr>
<tr><th id="791">791</th><td>      <a class="local col2 ref" href="#182scatter_function" title='scatter_function' data-ref="182scatter_function">scatter_function</a>, <a class="local col6 ref" href="#176source" title='source' data-ref="176source">source</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="792">792</th><td>      <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col8 ref" href="#218output_value_address" title='output_value_address' data-ref="218output_value_address">output_value_address</a>, <a class="local col6 ref" href="#216source_value_address" title='source_value_address' data-ref="216source_value_address">source_value_address</a>}, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"scatter_function"</q>);</td></tr>
<tr><th id="793">793</th><td>  <a class="local col7 ref" href="#217output_array" title='output_array' data-ref="217output_array">output_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray21EmitWriteArrayElementERKNS1_5IndexEPN4llvm5ValueEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::IrArray::EmitWriteArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray21EmitWriteArrayElementERKNS1_5IndexEPN4llvm5ValueEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE">EmitWriteArrayElement</a>(<a class="local col2 ref" href="#212selected_index" title='selected_index' data-ref="212selected_index">selected_index</a>, <a class="local col9 ref" href="#219scatter_value" title='scatter_value' data-ref="219scatter_value">scatter_value</a>,</td></tr>
<tr><th id="794">794</th><td>                                     &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="795">795</th><td></td></tr>
<tr><th id="796">796</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col5 ref" href="#185source_loops" title='source_loops' data-ref="185source_loops">source_loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(),</td></tr>
<tr><th id="797">797</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="798">798</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="799">799</th><td>}</td></tr>
<tr><th id="800">800</th><td></td></tr>
<tr><th id="801">801</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter9HandleDotEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleDot' data-ref="_ZN3xla3cpu9IrEmitter9HandleDotEPNS_14HloInstructionE">HandleDot</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="220dot" title='dot' data-type='xla::HloInstruction *' data-ref="220dot">dot</dfn>) {</td></tr>
<tr><th id="802">802</th><td>  <em>auto</em> <dfn class="local col1 decl" id="221lhs" title='lhs' data-type='const xla::HloInstruction *' data-ref="221lhs">lhs</dfn> = <a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="803">803</th><td>  <em>auto</em> <dfn class="local col2 decl" id="222rhs" title='rhs' data-type='const xla::HloInstruction *' data-ref="222rhs">rhs</dfn> = <a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="804">804</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ElementTypesSameAndSupported( *dot, {lhs, rhs}, {F16, F32, F64, C64})); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</a>(</td></tr>
<tr><th id="805">805</th><td>      <i>/*instruction=*/</i>*<a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>, <i>/*operands=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col1 ref" href="#221lhs" title='lhs' data-ref="221lhs">lhs</a>, <a class="local col2 ref" href="#222rhs" title='rhs' data-ref="222rhs">rhs</a>},</td></tr>
<tr><th id="806">806</th><td>      <i>/*supported_types=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<span class='enum' title='xla::PrimitiveType::F16' data-ref="xla::PrimitiveType::F16">F16</span>, <span class='enum' title='xla::PrimitiveType::F32' data-ref="xla::PrimitiveType::F32">F32</span>, <span class='enum' title='xla::PrimitiveType::F64' data-ref="xla::PrimitiveType::F64">F64</span>, <span class='enum' title='xla::PrimitiveType::C64' data-ref="xla::PrimitiveType::C64">C64</span>}));</td></tr>
<tr><th id="807">807</th><td>  <em>const</em> <span class='type' title='xla::DotDimensionNumbers' data-ref="xla::DotDimensionNumbers">DotDimensionNumbers</span>&amp; <dfn class="local col3 decl" id="223dnums" title='dnums' data-type='const xla::DotDimensionNumbers &amp;' data-ref="223dnums">dnums</dfn> = <a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction21dot_dimension_numbersEv" title='xla::HloInstruction::dot_dimension_numbers' data-ref="_ZNK3xla14HloInstruction21dot_dimension_numbersEv">dot_dimension_numbers</a>();</td></tr>
<tr><th id="808">808</th><td>  <b>if</b> (<a class="local col3 ref" href="#223dnums" title='dnums' data-ref="223dnums">dnums</a>.<span class='ref' title='xla::DotDimensionNumbers::lhs_batch_dimensions_size' data-ref="_ZNK3xla19DotDimensionNumbers25lhs_batch_dimensions_sizeEv">lhs_batch_dimensions_size</span>() &gt; <var>0</var> ||</td></tr>
<tr><th id="809">809</th><td>      <a class="local col3 ref" href="#223dnums" title='dnums' data-ref="223dnums">dnums</a>.<span class='ref' title='xla::DotDimensionNumbers::rhs_batch_dimensions_size' data-ref="_ZNK3xla19DotDimensionNumbers25rhs_batch_dimensions_sizeEv">rhs_batch_dimensions_size</span>() &gt; <var>0</var>) {</td></tr>
<tr><th id="810">810</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Dot with batch dimensions not implemented."</q>);</td></tr>
<tr><th id="811">811</th><td>  }</td></tr>
<tr><th id="812">812</th><td></td></tr>
<tr><th id="813">813</th><td>  <b>if</b> (<a class="local col3 ref" href="#223dnums" title='dnums' data-ref="223dnums">dnums</a>.<span class='ref' title='xla::DotDimensionNumbers::lhs_contracting_dimensions_size' data-ref="_ZNK3xla19DotDimensionNumbers31lhs_contracting_dimensions_sizeEv">lhs_contracting_dimensions_size</span>() != <var>1</var>) {</td></tr>
<tr><th id="814">814</th><td>    <i>// This is disallowed by ShapeInference today.</i></td></tr>
<tr><th id="815">815</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(</td></tr>
<tr><th id="816">816</th><td>        <q>"Dot with multiple contracting dimensions not implemented."</q>);</td></tr>
<tr><th id="817">817</th><td>  }</td></tr>
<tr><th id="818">818</th><td></td></tr>
<tr><th id="819">819</th><td>  <b>if</b> (<a class="local col3 ref" href="#223dnums" title='dnums' data-ref="223dnums">dnums</a>.<span class='ref' title='xla::DotDimensionNumbers::lhs_contracting_dimensions' data-ref="_ZNK3xla19DotDimensionNumbers26lhs_contracting_dimensionsEi">lhs_contracting_dimensions</span>(<var>0</var>) !=</td></tr>
<tr><th id="820">820</th><td>          <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>(<a class="local col1 ref" href="#221lhs" title='lhs' data-ref="221lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>() - <var>1</var>, <var>1</var>) ||</td></tr>
<tr><th id="821">821</th><td>      <a class="local col3 ref" href="#223dnums" title='dnums' data-ref="223dnums">dnums</a>.<span class='ref' title='xla::DotDimensionNumbers::rhs_contracting_dimensions' data-ref="_ZNK3xla19DotDimensionNumbers26rhs_contracting_dimensionsEi">rhs_contracting_dimensions</span>(<var>0</var>) != <var>0</var>) {</td></tr>
<tr><th id="822">822</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(</td></tr>
<tr><th id="823">823</th><td>        <q>"Dot with non-standard contracting dimensions not implemented."</q>);</td></tr>
<tr><th id="824">824</th><td>  }</td></tr>
<tr><th id="825">825</th><td></td></tr>
<tr><th id="826">826</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col4 decl" id="224lhs_array" title='lhs_array' data-type='llvm_ir::IrArray' data-ref="224lhs_array">lhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col1 ref" href="#221lhs" title='lhs' data-ref="221lhs">lhs</a>));</td></tr>
<tr><th id="827">827</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="225rhs_array" title='rhs_array' data-type='llvm_ir::IrArray' data-ref="225rhs_array">rhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#222rhs" title='rhs' data-ref="222rhs">rhs</a>));</td></tr>
<tr><th id="828">828</th><td></td></tr>
<tr><th id="829">829</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(dot)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>));</td></tr>
<tr><th id="830">830</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col6 decl" id="226target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="226target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>);</td></tr>
<tr><th id="831">831</th><td></td></tr>
<tr><th id="832">832</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 832, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleDot: "</q>;</td></tr>
<tr><th id="833">833</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 833, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  lhs operand: "</q></td></tr>
<tr><th id="834">834</th><td>          <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col4 ref" href="#224lhs_array" title='lhs_array' data-ref="224lhs_array">lhs_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="835">835</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 835, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  rhs operand: "</q></td></tr>
<tr><th id="836">836</th><td>          <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col5 ref" href="#225rhs_array" title='rhs_array' data-ref="225rhs_array">rhs_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="837">837</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 837, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  target: "</q></td></tr>
<tr><th id="838">838</th><td>          <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col6 ref" href="#226target_array" title='target_array' data-ref="226target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="839">839</th><td></td></tr>
<tr><th id="840">840</th><td>  <i>// Dot operation is complicated so we delegate to a helper class.</i></td></tr>
<tr><th id="841">841</th><td>  <b>return</b> <a class="type" href="dot_op_emitter.h.html#xla::cpu::DotOpEmitter" title='xla::cpu::DotOpEmitter' data-ref="xla::cpu::DotOpEmitter">DotOpEmitter</a>::<a class="ref" href="dot_op_emitter.h.html#_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299" title='xla::cpu::DotOpEmitter::EmitDotOperation' data-ref="_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299">EmitDotOperation</a>(</td></tr>
<tr><th id="842">842</th><td>      *<a class="local col0 ref" href="#220dot" title='dot' data-ref="220dot">dot</a>, <i>/*transpose_lhs=*/</i><b>false</b>, <i>/*transpose_rhs=*/</i><b>false</b>, <a class="local col6 ref" href="#226target_array" title='target_array' data-ref="226target_array">target_array</a>,</td></tr>
<tr><th id="843">843</th><td>      <a class="local col4 ref" href="#224lhs_array" title='lhs_array' data-ref="224lhs_array">lhs_array</a>, <a class="local col5 ref" href="#225rhs_array" title='rhs_array' data-ref="225rhs_array">rhs_array</a>, <i>/*addend_array=*/</i><b>nullptr</b>,</td></tr>
<tr><th id="844">844</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>,</td></tr>
<tr><th id="845">845</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a>);</td></tr>
<tr><th id="846">846</th><td>}</td></tr>
<tr><th id="847">847</th><td></td></tr>
<tr><th id="848">848</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter17HandleConvolutionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleConvolution' data-ref="_ZN3xla3cpu9IrEmitter17HandleConvolutionEPNS_14HloInstructionE">HandleConvolution</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="227convolution" title='convolution' data-type='xla::HloInstruction *' data-ref="227convolution">convolution</dfn>) {</td></tr>
<tr><th id="849">849</th><td>  <em>auto</em> <dfn class="local col8 decl" id="228lhs" title='lhs' data-type='const xla::HloInstruction *' data-ref="228lhs">lhs</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="850">850</th><td>  <em>auto</em> <dfn class="local col9 decl" id="229rhs" title='rhs' data-type='const xla::HloInstruction *' data-ref="229rhs">rhs</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="851">851</th><td>  <em>const</em> <em>auto</em>&amp; <dfn class="local col0 decl" id="230window" title='window' data-type='const xla::Window &amp;' data-ref="230window">window</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6windowEv" title='xla::HloInstruction::window' data-ref="_ZNK3xla14HloInstruction6windowEv">window</a>();</td></tr>
<tr><th id="852">852</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ElementTypesSameAndSupported( *convolution, {lhs, rhs}, {F16, F32, C64})); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</a>(</td></tr>
<tr><th id="853">853</th><td>      <i>/*instruction=*/</i>*<a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>, <i>/*operands=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>, <a class="local col9 ref" href="#229rhs" title='rhs' data-ref="229rhs">rhs</a>},</td></tr>
<tr><th id="854">854</th><td>      <i>/*supported_types=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<span class='enum' title='xla::PrimitiveType::F16' data-ref="xla::PrimitiveType::F16">F16</span>, <span class='enum' title='xla::PrimitiveType::F32' data-ref="xla::PrimitiveType::F32">F32</span>, <span class='enum' title='xla::PrimitiveType::C64' data-ref="xla::PrimitiveType::C64">C64</span>}));</td></tr>
<tr><th id="855">855</th><td></td></tr>
<tr><th id="856">856</th><td>  <em>const</em> <span class='type' title='xla::ConvolutionDimensionNumbers' data-ref="xla::ConvolutionDimensionNumbers">ConvolutionDimensionNumbers</span>&amp; <dfn class="local col1 decl" id="231dnums" title='dnums' data-type='const xla::ConvolutionDimensionNumbers &amp;' data-ref="231dnums">dnums</dfn> =</td></tr>
<tr><th id="857">857</th><td>      <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction29convolution_dimension_numbersEv" title='xla::HloInstruction::convolution_dimension_numbers' data-ref="_ZNK3xla14HloInstruction29convolution_dimension_numbersEv">convolution_dimension_numbers</a>();</td></tr>
<tr><th id="858">858</th><td></td></tr>
<tr><th id="859">859</th><td>  <b>if</b> (<a class="ref" href="ir_emission_utils.h.html#_ZN3xla3cpu40PotentiallyImplementedAsEigenConvolutionERKNS_14HloInstructionE" title='xla::cpu::PotentiallyImplementedAsEigenConvolution' data-ref="_ZN3xla3cpu40PotentiallyImplementedAsEigenConvolutionERKNS_14HloInstructionE">PotentiallyImplementedAsEigenConvolution</a>(*<a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>)) {</td></tr>
<tr><th id="860">860</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col2 decl" id="232lhs_shape" title='lhs_shape' data-type='const xla::Shape &amp;' data-ref="232lhs_shape">lhs_shape</dfn> = <a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="861">861</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="233rhs_shape" title='rhs_shape' data-type='const xla::Shape &amp;' data-ref="233rhs_shape">rhs_shape</dfn> = <a class="local col9 ref" href="#229rhs" title='rhs' data-ref="229rhs">rhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="862">862</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col4 decl" id="234convolution_shape" title='convolution_shape' data-type='const xla::Shape &amp;' data-ref="234convolution_shape">convolution_shape</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="863">863</th><td>    <i>// The input, kernel and output agree with respect to layout.</i></td></tr>
<tr><th id="864">864</th><td>    <b>if</b> (<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE" title='xla::LayoutUtil::IsMonotonicWithDim0Major' data-ref="_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE">IsMonotonicWithDim0Major</a>(<a class="local col2 ref" href="#232lhs_shape" title='lhs_shape' data-ref="232lhs_shape">lhs_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>()) &amp;&amp;</td></tr>
<tr><th id="865">865</th><td>        <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE" title='xla::LayoutUtil::IsMonotonicWithDim0Major' data-ref="_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE">IsMonotonicWithDim0Major</a>(<a class="local col3 ref" href="#233rhs_shape" title='rhs_shape' data-ref="233rhs_shape">rhs_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>()) &amp;&amp;</td></tr>
<tr><th id="866">866</th><td>        <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE" title='xla::LayoutUtil::IsMonotonicWithDim0Major' data-ref="_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE">IsMonotonicWithDim0Major</a>(<a class="local col4 ref" href="#234convolution_shape" title='convolution_shape' data-ref="234convolution_shape">convolution_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>())) {</td></tr>
<tr><th id="867">867</th><td>      <i>// We lower 1D convolutions into calls to the same Eigen function as 2D</i></td></tr>
<tr><th id="868">868</th><td><i>      // convolutions, except that we pretend that the 1D convolution is really</i></td></tr>
<tr><th id="869">869</th><td><i>      // a 2D convolution with the missing dimension set to 1.  We also adjust</i></td></tr>
<tr><th id="870">870</th><td><i>      // the padding, dilation parameters as needed.</i></td></tr>
<tr><th id="871">871</th><td>      <em>bool</em> <dfn class="local col5 decl" id="235one_dim_convolution" title='one_dim_convolution' data-type='bool' data-ref="235one_dim_convolution">one_dim_convolution</dfn> = <a class="local col2 ref" href="#232lhs_shape" title='lhs_shape' data-ref="232lhs_shape">lhs_shape</a>.<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>() == <var>3</var>;</td></tr>
<tr><th id="872">872</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="236lhs_address" title='lhs_address' data-type='llvm::Value *' data-ref="236lhs_address">lhs_address</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>);</td></tr>
<tr><th id="873">873</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="237rhs_address" title='rhs_address' data-type='llvm::Value *' data-ref="237rhs_address">rhs_address</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col9 ref" href="#229rhs" title='rhs' data-ref="229rhs">rhs</a>);</td></tr>
<tr><th id="874">874</th><td>      <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(convolution)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>));</td></tr>
<tr><th id="875">875</th><td></td></tr>
<tr><th id="876">876</th><td>      <em>const</em> <span class='type' title='xla::ConvolutionDimensionNumbers' data-ref="xla::ConvolutionDimensionNumbers">ConvolutionDimensionNumbers</span>&amp; <dfn class="local col8 decl" id="238dnums" title='dnums' data-type='const xla::ConvolutionDimensionNumbers &amp;' data-ref="238dnums">dnums</dfn> =</td></tr>
<tr><th id="877">877</th><td>          <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction29convolution_dimension_numbersEv" title='xla::HloInstruction::convolution_dimension_numbers' data-ref="_ZNK3xla14HloInstruction29convolution_dimension_numbersEv">convolution_dimension_numbers</a>();</td></tr>
<tr><th id="878">878</th><td></td></tr>
<tr><th id="879">879</th><td>      <i>// Input tensor.</i></td></tr>
<tr><th id="880">880</th><td>      <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col9 decl" id="239input_shape" title='input_shape' data-type='const xla::Shape &amp;' data-ref="239input_shape">input_shape</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="881">881</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="240input_batch" title='input_batch' data-type='int64' data-ref="240input_batch">input_batch</dfn> = <a class="local col9 ref" href="#239input_shape" title='input_shape' data-ref="239input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_batch_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers21input_batch_dimensionEv">input_batch_dimension</span>());</td></tr>
<tr><th id="882">882</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="241input_rows" title='input_rows' data-type='int64' data-ref="241input_rows">input_rows</dfn> =</td></tr>
<tr><th id="883">883</th><td>          <a class="local col9 ref" href="#239input_shape" title='input_shape' data-ref="239input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers24input_spatial_dimensionsEi">input_spatial_dimensions</span>(<var>0</var>));</td></tr>
<tr><th id="884">884</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col2 decl" id="242input_cols" title='input_cols' data-type='int64' data-ref="242input_cols">input_cols</dfn> =</td></tr>
<tr><th id="885">885</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a></td></tr>
<tr><th id="886">886</th><td>              ? <var>1</var></td></tr>
<tr><th id="887">887</th><td>              : <a class="local col9 ref" href="#239input_shape" title='input_shape' data-ref="239input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers24input_spatial_dimensionsEi">input_spatial_dimensions</span>(<var>1</var>));</td></tr>
<tr><th id="888">888</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="243input_channels" title='input_channels' data-type='int64' data-ref="243input_channels">input_channels</dfn> =</td></tr>
<tr><th id="889">889</th><td>          <a class="local col9 ref" href="#239input_shape" title='input_shape' data-ref="239input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers23input_feature_dimensionEv">input_feature_dimension</span>());</td></tr>
<tr><th id="890">890</th><td></td></tr>
<tr><th id="891">891</th><td>      <i>// Kernel tensor.</i></td></tr>
<tr><th id="892">892</th><td>      <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col4 decl" id="244kernel_shape" title='kernel_shape' data-type='const xla::Shape &amp;' data-ref="244kernel_shape">kernel_shape</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="893">893</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="245kernel_rows" title='kernel_rows' data-type='int64' data-ref="245kernel_rows">kernel_rows</dfn> =</td></tr>
<tr><th id="894">894</th><td>          <a class="local col4 ref" href="#244kernel_shape" title='kernel_shape' data-ref="244kernel_shape">kernel_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25kernel_spatial_dimensionsEi">kernel_spatial_dimensions</span>(<var>0</var>));</td></tr>
<tr><th id="895">895</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="246kernel_cols" title='kernel_cols' data-type='int64' data-ref="246kernel_cols">kernel_cols</dfn> =</td></tr>
<tr><th id="896">896</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a></td></tr>
<tr><th id="897">897</th><td>              ? <var>1</var></td></tr>
<tr><th id="898">898</th><td>              : <a class="local col4 ref" href="#244kernel_shape" title='kernel_shape' data-ref="244kernel_shape">kernel_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25kernel_spatial_dimensionsEi">kernel_spatial_dimensions</span>(<var>1</var>));</td></tr>
<tr><th id="899">899</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="247kernel_channels" title='kernel_channels' data-type='int64' data-ref="247kernel_channels">kernel_channels</dfn> =</td></tr>
<tr><th id="900">900</th><td>          <a class="local col4 ref" href="#244kernel_shape" title='kernel_shape' data-ref="244kernel_shape">kernel_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_input_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers30kernel_input_feature_dimensionEv">kernel_input_feature_dimension</span>());</td></tr>
<tr><th id="901">901</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="248kernel_filters" title='kernel_filters' data-type='int64' data-ref="248kernel_filters">kernel_filters</dfn> =</td></tr>
<tr><th id="902">902</th><td>          <a class="local col4 ref" href="#244kernel_shape" title='kernel_shape' data-ref="244kernel_shape">kernel_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_output_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers31kernel_output_feature_dimensionEv">kernel_output_feature_dimension</span>());</td></tr>
<tr><th id="903">903</th><td></td></tr>
<tr><th id="904">904</th><td>      <i>// Output tensor.</i></td></tr>
<tr><th id="905">905</th><td>      <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col9 decl" id="249convolution_shape" title='convolution_shape' data-type='const xla::Shape &amp;' data-ref="249convolution_shape">convolution_shape</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="906">906</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="250output_rows" title='output_rows' data-type='int64' data-ref="250output_rows">output_rows</dfn> =</td></tr>
<tr><th id="907">907</th><td>          <a class="local col9 ref" href="#249convolution_shape" title='convolution_shape' data-ref="249convolution_shape">convolution_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25output_spatial_dimensionsEi">output_spatial_dimensions</span>(<var>0</var>));</td></tr>
<tr><th id="908">908</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="251output_cols" title='output_cols' data-type='int64' data-ref="251output_cols">output_cols</dfn> = <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a></td></tr>
<tr><th id="909">909</th><td>                              ? <var>1</var></td></tr>
<tr><th id="910">910</th><td>                              : <a class="local col9 ref" href="#249convolution_shape" title='convolution_shape' data-ref="249convolution_shape">convolution_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(</td></tr>
<tr><th id="911">911</th><td>                                    <a class="local col8 ref" href="#238dnums" title='dnums' data-ref="238dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25output_spatial_dimensionsEi">output_spatial_dimensions</span>(<var>1</var>));</td></tr>
<tr><th id="912">912</th><td></td></tr>
<tr><th id="913">913</th><td>      <i>// Extract the window stride for the convolution.</i></td></tr>
<tr><th id="914">914</th><td>      <em>const</em> <span class='type' title='xla::Window' data-ref="xla::Window">Window</span>&amp; <dfn class="local col2 decl" id="252window" title='window' data-type='const xla::Window &amp;' data-ref="252window">window</dfn> = <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6windowEv" title='xla::HloInstruction::window' data-ref="_ZNK3xla14HloInstruction6windowEv">window</a>();</td></tr>
<tr><th id="915">915</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="253row_stride" title='row_stride' data-type='int64' data-ref="253row_stride">row_stride</dfn> = <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>0</var>).<span class='ref' title='xla::WindowDimension::stride' data-ref="_ZNK3xla15WindowDimension6strideEv">stride</span>();</td></tr>
<tr><th id="916">916</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="254col_stride" title='col_stride' data-type='int64' data-ref="254col_stride">col_stride</dfn> =</td></tr>
<tr><th id="917">917</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a> ? <var>1</var> : <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>1</var>).<span class='ref' title='xla::WindowDimension::stride' data-ref="_ZNK3xla15WindowDimension6strideEv">stride</span>();</td></tr>
<tr><th id="918">918</th><td></td></tr>
<tr><th id="919">919</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="255padding_top" title='padding_top' data-type='int64' data-ref="255padding_top">padding_top</dfn> = <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>0</var>).<span class='ref' title='xla::WindowDimension::padding_low' data-ref="_ZNK3xla15WindowDimension11padding_lowEv">padding_low</span>();</td></tr>
<tr><th id="920">920</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="256padding_bottom" title='padding_bottom' data-type='int64' data-ref="256padding_bottom">padding_bottom</dfn> = <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>0</var>).<span class='ref' title='xla::WindowDimension::padding_high' data-ref="_ZNK3xla15WindowDimension12padding_highEv">padding_high</span>();</td></tr>
<tr><th id="921">921</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="257padding_left" title='padding_left' data-type='int64' data-ref="257padding_left">padding_left</dfn> =</td></tr>
<tr><th id="922">922</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a> ? <var>0</var> : <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>1</var>).<span class='ref' title='xla::WindowDimension::padding_low' data-ref="_ZNK3xla15WindowDimension11padding_lowEv">padding_low</span>();</td></tr>
<tr><th id="923">923</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="258padding_right" title='padding_right' data-type='int64' data-ref="258padding_right">padding_right</dfn> =</td></tr>
<tr><th id="924">924</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a> ? <var>0</var> : <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>1</var>).<span class='ref' title='xla::WindowDimension::padding_high' data-ref="_ZNK3xla15WindowDimension12padding_highEv">padding_high</span>();</td></tr>
<tr><th id="925">925</th><td></td></tr>
<tr><th id="926">926</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="259lhs_row_dilation" title='lhs_row_dilation' data-type='int64' data-ref="259lhs_row_dilation">lhs_row_dilation</dfn> = <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>0</var>).<span class='ref' title='xla::WindowDimension::base_dilation' data-ref="_ZNK3xla15WindowDimension13base_dilationEv">base_dilation</span>();</td></tr>
<tr><th id="927">927</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="260lhs_col_dilation" title='lhs_col_dilation' data-type='int64' data-ref="260lhs_col_dilation">lhs_col_dilation</dfn> =</td></tr>
<tr><th id="928">928</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a> ? <var>1</var> : <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>1</var>).<span class='ref' title='xla::WindowDimension::base_dilation' data-ref="_ZNK3xla15WindowDimension13base_dilationEv">base_dilation</span>();</td></tr>
<tr><th id="929">929</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="261rhs_row_dilation" title='rhs_row_dilation' data-type='int64' data-ref="261rhs_row_dilation">rhs_row_dilation</dfn> = <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>0</var>).<span class='ref' title='xla::WindowDimension::window_dilation' data-ref="_ZNK3xla15WindowDimension15window_dilationEv">window_dilation</span>();</td></tr>
<tr><th id="930">930</th><td>      <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col2 decl" id="262rhs_col_dilation" title='rhs_col_dilation' data-type='int64' data-ref="262rhs_col_dilation">rhs_col_dilation</dfn> =</td></tr>
<tr><th id="931">931</th><td>          <a class="local col5 ref" href="#235one_dim_convolution" title='one_dim_convolution' data-ref="235one_dim_convolution">one_dim_convolution</a> ? <var>1</var> : <a class="local col2 ref" href="#252window" title='window' data-ref="252window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<var>1</var>).<span class='ref' title='xla::WindowDimension::window_dilation' data-ref="_ZNK3xla15WindowDimension15window_dilationEv">window_dilation</span>();</td></tr>
<tr><th id="932">932</th><td></td></tr>
<tr><th id="933">933</th><td>      <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col3 decl" id="263primitive_type" title='primitive_type' data-type='xla::PrimitiveType' data-ref="263primitive_type">primitive_type</dfn> = <a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="934">934</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col4 decl" id="264ir_ptr_type" title='ir_ptr_type' data-type='llvm::Type *' data-ref="264ir_ptr_type">ir_ptr_type</dfn> = <a class="local col3 ref" href="#263primitive_type" title='primitive_type' data-ref="263primitive_type">primitive_type</a> == <span class='enum' title='xla::PrimitiveType::F16' data-ref="xla::PrimitiveType::F16">F16</span></td></tr>
<tr><th id="935">935</th><td>                                    ? <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getHalfTy' data-ref="_ZN4llvm13IRBuilderBase9getHalfTyEv">getHalfTy</span>()-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>()</td></tr>
<tr><th id="936">936</th><td>                                    : <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getFloatTy' data-ref="_ZN4llvm13IRBuilderBase10getFloatTyEv">getFloatTy</span>()-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>();</td></tr>
<tr><th id="937">937</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col5 decl" id="265int64_type" title='int64_type' data-type='llvm::Type *' data-ref="265int64_type">int64_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt64TyEv">getInt64Ty</span>();</td></tr>
<tr><th id="938">938</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col6 decl" id="266int8_ptr_type" title='int8_ptr_type' data-type='llvm::Type *' data-ref="266int8_ptr_type">int8_ptr_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8Ty' data-ref="_ZN4llvm13IRBuilderBase9getInt8TyEv">getInt8Ty</span>()-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>();</td></tr>
<tr><th id="939">939</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>* <dfn class="local col7 decl" id="267conv_type" title='conv_type' data-type='llvm::FunctionType *' data-ref="267conv_type">conv_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>::<span class='ref' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</span>(</td></tr>
<tr><th id="940">940</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getVoidTy' data-ref="_ZN4llvm13IRBuilderBase9getVoidTyEv">getVoidTy</span>(),</td></tr>
<tr><th id="941">941</th><td>          <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col6 ref" href="#266int8_ptr_type" title='int8_ptr_type' data-ref="266int8_ptr_type">int8_ptr_type</a>, <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>, <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>, <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>, <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,</td></tr>
<tr><th id="942">942</th><td>           <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,    <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,</td></tr>
<tr><th id="943">943</th><td>           <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,    <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,</td></tr>
<tr><th id="944">944</th><td>           <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,    <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,</td></tr>
<tr><th id="945">945</th><td>           <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,    <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>,  <a class="local col5 ref" href="#265int64_type" title='int64_type' data-ref="265int64_type">int64_type</a>},</td></tr>
<tr><th id="946">946</th><td>          <i>/*isVarArg=*/</i><b>false</b>);</td></tr>
<tr><th id="947">947</th><td>      <em>bool</em> <dfn class="local col8 decl" id="268multi_threaded_eigen" title='multi_threaded_eigen' data-type='bool' data-ref="268multi_threaded_eigen">multi_threaded_eigen</dfn> =</td></tr>
<tr><th id="948">948</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13debug_optionsEv" title='xla::HloModuleConfig::debug_options' data-ref="_ZNK3xla15HloModuleConfig13debug_optionsEv">debug_options</a>().<span class='ref' title='xla::DebugOptions::xla_cpu_multi_thread_eigen' data-ref="_ZNK3xla12DebugOptions26xla_cpu_multi_thread_eigenEv">xla_cpu_multi_thread_eigen</span>();</td></tr>
<tr><th id="949">949</th><td>      <em>const</em> <em>char</em>* <dfn class="local col9 decl" id="269fn_name" title='fn_name' data-type='const char *' data-ref="269fn_name">fn_name</dfn> =</td></tr>
<tr><th id="950">950</th><td>          <a class="local col3 ref" href="#263primitive_type" title='primitive_type' data-ref="263primitive_type">primitive_type</a> == <span class='enum' title='xla::PrimitiveType::F16' data-ref="xla::PrimitiveType::F16">F16</span></td></tr>
<tr><th id="951">951</th><td>              ? (<a class="local col8 ref" href="#268multi_threaded_eigen" title='multi_threaded_eigen' data-ref="268multi_threaded_eigen">multi_threaded_eigen</a></td></tr>
<tr><th id="952">952</th><td>                     ? <span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kEigenConvF16SymbolName" title='xla::cpu::runtime::kEigenConvF16SymbolName' data-ref="xla::cpu::runtime::kEigenConvF16SymbolName">kEigenConvF16SymbolName</a></td></tr>
<tr><th id="953">953</th><td>                     : <span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kEigenSingleThreadedConvF16SymbolName" title='xla::cpu::runtime::kEigenSingleThreadedConvF16SymbolName' data-ref="xla::cpu::runtime::kEigenSingleThreadedConvF16SymbolName">kEigenSingleThreadedConvF16SymbolName</a>)</td></tr>
<tr><th id="954">954</th><td>              : (<a class="local col8 ref" href="#268multi_threaded_eigen" title='multi_threaded_eigen' data-ref="268multi_threaded_eigen">multi_threaded_eigen</a></td></tr>
<tr><th id="955">955</th><td>                     ? <span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kEigenConvF32SymbolName" title='xla::cpu::runtime::kEigenConvF32SymbolName' data-ref="xla::cpu::runtime::kEigenConvF32SymbolName">kEigenConvF32SymbolName</a></td></tr>
<tr><th id="956">956</th><td>                     : <span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kEigenSingleThreadedConvF32SymbolName" title='xla::cpu::runtime::kEigenSingleThreadedConvF32SymbolName' data-ref="xla::cpu::runtime::kEigenSingleThreadedConvF32SymbolName">kEigenSingleThreadedConvF32SymbolName</a>);</td></tr>
<tr><th id="957">957</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col0 decl" id="270conv_func" title='conv_func' data-type='llvm::Function *' data-ref="270conv_func">conv_func</dfn> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(</td></tr>
<tr><th id="958">958</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(<span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><a class="local col9 ref" href="#269fn_name" title='fn_name' data-ref="269fn_name">fn_name</a>, <a class="local col7 ref" href="#267conv_type" title='conv_type' data-ref="267conv_type">conv_type</a>));</td></tr>
<tr><th id="959">959</th><td>      <a class="local col0 ref" href="#270conv_func" title='conv_func' data-ref="270conv_func">conv_func</a>-&gt;<span class='ref' title='llvm::Function::setCallingConv' data-ref="_ZN4llvm8Function14setCallingConvEj">setCallingConv</span>(<span class="namespace">llvm::CallingConv::</span><span class='enum' title='llvm::CallingConv::C' data-ref="llvm::CallingConv::C">C</span>);</td></tr>
<tr><th id="960">960</th><td>      <a class="local col0 ref" href="#270conv_func" title='conv_func' data-ref="270conv_func">conv_func</a>-&gt;<span class='ref' title='llvm::Function::setDoesNotThrow' data-ref="_ZN4llvm8Function15setDoesNotThrowEv">setDoesNotThrow</span>();</td></tr>
<tr><th id="961">961</th><td>      <a class="local col0 ref" href="#270conv_func" title='conv_func' data-ref="270conv_func">conv_func</a>-&gt;<span class='ref' title='llvm::Function::setOnlyAccessesArgMemory' data-ref="_ZN4llvm8Function24setOnlyAccessesArgMemoryEv">setOnlyAccessesArgMemory</span>();</td></tr>
<tr><th id="962">962</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(</td></tr>
<tr><th id="963">963</th><td>          <a class="local col0 ref" href="#270conv_func" title='conv_func' data-ref="270conv_func">conv_func</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{</td></tr>
<tr><th id="964">964</th><td>                         <a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="965">965</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="966">966</th><td>                             <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>), <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>),</td></tr>
<tr><th id="967">967</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col6 ref" href="#236lhs_address" title='lhs_address' data-ref="236lhs_address">lhs_address</a>, <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>),</td></tr>
<tr><th id="968">968</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col7 ref" href="#237rhs_address" title='rhs_address' data-ref="237rhs_address">rhs_address</a>, <a class="local col4 ref" href="#264ir_ptr_type" title='ir_ptr_type' data-ref="264ir_ptr_type">ir_ptr_type</a>),</td></tr>
<tr><th id="969">969</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col0 ref" href="#240input_batch" title='input_batch' data-ref="240input_batch">input_batch</a>),</td></tr>
<tr><th id="970">970</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col1 ref" href="#241input_rows" title='input_rows' data-ref="241input_rows">input_rows</a>),</td></tr>
<tr><th id="971">971</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col2 ref" href="#242input_cols" title='input_cols' data-ref="242input_cols">input_cols</a>),</td></tr>
<tr><th id="972">972</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col3 ref" href="#243input_channels" title='input_channels' data-ref="243input_channels">input_channels</a>),</td></tr>
<tr><th id="973">973</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col5 ref" href="#245kernel_rows" title='kernel_rows' data-ref="245kernel_rows">kernel_rows</a>),</td></tr>
<tr><th id="974">974</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col6 ref" href="#246kernel_cols" title='kernel_cols' data-ref="246kernel_cols">kernel_cols</a>),</td></tr>
<tr><th id="975">975</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#247kernel_channels" title='kernel_channels' data-ref="247kernel_channels">kernel_channels</a>),</td></tr>
<tr><th id="976">976</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col8 ref" href="#248kernel_filters" title='kernel_filters' data-ref="248kernel_filters">kernel_filters</a>),</td></tr>
<tr><th id="977">977</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col0 ref" href="#250output_rows" title='output_rows' data-ref="250output_rows">output_rows</a>),</td></tr>
<tr><th id="978">978</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col1 ref" href="#251output_cols" title='output_cols' data-ref="251output_cols">output_cols</a>),</td></tr>
<tr><th id="979">979</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col3 ref" href="#253row_stride" title='row_stride' data-ref="253row_stride">row_stride</a>),</td></tr>
<tr><th id="980">980</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col4 ref" href="#254col_stride" title='col_stride' data-ref="254col_stride">col_stride</a>),</td></tr>
<tr><th id="981">981</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col5 ref" href="#255padding_top" title='padding_top' data-ref="255padding_top">padding_top</a>),</td></tr>
<tr><th id="982">982</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col6 ref" href="#256padding_bottom" title='padding_bottom' data-ref="256padding_bottom">padding_bottom</a>),</td></tr>
<tr><th id="983">983</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#257padding_left" title='padding_left' data-ref="257padding_left">padding_left</a>),</td></tr>
<tr><th id="984">984</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col8 ref" href="#258padding_right" title='padding_right' data-ref="258padding_right">padding_right</a>),</td></tr>
<tr><th id="985">985</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col9 ref" href="#259lhs_row_dilation" title='lhs_row_dilation' data-ref="259lhs_row_dilation">lhs_row_dilation</a>),</td></tr>
<tr><th id="986">986</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col0 ref" href="#260lhs_col_dilation" title='lhs_col_dilation' data-ref="260lhs_col_dilation">lhs_col_dilation</a>),</td></tr>
<tr><th id="987">987</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col1 ref" href="#261rhs_row_dilation" title='rhs_row_dilation' data-ref="261rhs_row_dilation">rhs_row_dilation</a>),</td></tr>
<tr><th id="988">988</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col2 ref" href="#262rhs_col_dilation" title='rhs_col_dilation' data-ref="262rhs_col_dilation">rhs_col_dilation</a>),</td></tr>
<tr><th id="989">989</th><td>                     });</td></tr>
<tr><th id="990">990</th><td></td></tr>
<tr><th id="991">991</th><td>      <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="992">992</th><td>    }</td></tr>
<tr><th id="993">993</th><td>  }</td></tr>
<tr><th id="994">994</th><td></td></tr>
<tr><th id="995">995</th><td>  <i>// This is a completely un-optimized version of convolution just to</i></td></tr>
<tr><th id="996">996</th><td><i>  // have an early version that works. E.g. the input index and</i></td></tr>
<tr><th id="997">997</th><td><i>  // padding calculation is not hoisted out of the inner loop.</i></td></tr>
<tr><th id="998">998</th><td><i>  //</i></td></tr>
<tr><th id="999">999</th><td><i>  // See the description of convolution in the XLA documentation for the pseudo</i></td></tr>
<tr><th id="1000">1000</th><td><i>  // code for convolution.</i></td></tr>
<tr><th id="1001">1001</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="1002">1002</th><td>      <a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>, <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, convolution, lhs, rhs, window,</td></tr>
<tr><th id="1003">1003</th><td>                    dnums](<em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col1 decl" id="271index" title='index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="271index">index</dfn>) {</td></tr>
<tr><th id="1004">1004</th><td>        <em>int</em> <dfn class="local col2 decl" id="272num_spatial_dims" title='num_spatial_dims' data-type='int' data-ref="272num_spatial_dims">num_spatial_dims</dfn> = <a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_spatial_dimensions_size' data-ref="_ZNK3xla27ConvolutionDimensionNumbers30output_spatial_dimensions_sizeEv">output_spatial_dimensions_size</span>();</td></tr>
<tr><th id="1005">1005</th><td>        <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col3 decl" id="273output_spatial" title='output_spatial' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="273output_spatial">output_spatial</dfn><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1EmRKT0_" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1EmRKT0_">(</a><a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>);</td></tr>
<tr><th id="1006">1006</th><td>        <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="274i" title='i' data-type='int' data-ref="274i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#274i" title='i' data-ref="274i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col4 ref" href="#274i" title='i' data-ref="274i">i</a>) {</td></tr>
<tr><th id="1007">1007</th><td>          <a class="local col3 ref" href="#273output_spatial" title='output_spatial' data-ref="273output_spatial">output_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col4 ref" href="#274i" title='i' data-ref="274i">i</a>]</a> = <a class="local col1 ref" href="#271index" title='index' data-ref="271index">index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25output_spatial_dimensionsEi">output_spatial_dimensions</span>(<a class="local col4 ref" href="#274i" title='i' data-ref="274i">i</a>)]</a>;</td></tr>
<tr><th id="1008">1008</th><td>        }</td></tr>
<tr><th id="1009">1009</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="275output_feature" title='output_feature' data-type='llvm::Value *' data-ref="275output_feature">output_feature</dfn> = <a class="local col1 ref" href="#271index" title='index' data-ref="271index">index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers24output_feature_dimensionEv">output_feature_dimension</span>()]</a>;</td></tr>
<tr><th id="1010">1010</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="276batch" title='batch' data-type='llvm::Value *' data-ref="276batch">batch</dfn> = <a class="local col1 ref" href="#271index" title='index' data-ref="271index">index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::output_batch_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers22output_batch_dimensionEv">output_batch_dimension</span>()]</a>;</td></tr>
<tr><th id="1011">1011</th><td></td></tr>
<tr><th id="1012">1012</th><td>        <i>// We will accumulate the products into this sum to calculate</i></td></tr>
<tr><th id="1013">1013</th><td><i>        // the output entry at the given index.</i></td></tr>
<tr><th id="1014">1014</th><td>        <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col7 decl" id="277lhs_element_type" title='lhs_element_type' data-type='xla::PrimitiveType' data-ref="277lhs_element_type">lhs_element_type</dfn> = <a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="1015">1015</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="278sum_address" title='sum_address' data-type='llvm::Value *' data-ref="278sum_address">sum_address</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="1016">1016</th><td>            <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col7 ref" href="#277lhs_element_type" title='lhs_element_type' data-ref="277lhs_element_type">lhs_element_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>),</td></tr>
<tr><th id="1017">1017</th><td>            <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"convolution_sum_address"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="1018">1018</th><td>            <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col7 ref" href="#277lhs_element_type" title='lhs_element_type' data-ref="277lhs_element_type">lhs_element_type</a>));</td></tr>
<tr><th id="1019">1019</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(</td></tr>
<tr><th id="1020">1020</th><td>            <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantFP' data-ref="llvm::ConstantFP">ConstantFP</span>::<span class='ref' title='llvm::ConstantFP::get' data-ref="_ZN4llvm10ConstantFP3getEPNS_4TypeEd">get</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getFloatTy' data-ref="_ZN4llvm13IRBuilderBase10getFloatTyEv">getFloatTy</span>(), <var>0.0</var>), <a class="local col8 ref" href="#278sum_address" title='sum_address' data-ref="278sum_address">sum_address</a>);</td></tr>
<tr><th id="1021">1021</th><td></td></tr>
<tr><th id="1022">1022</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col9 decl" id="279loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="279loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col7 ref" href="#227convolution" title='convolution' data-ref="227convolution">convolution</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"inner"</q>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1023">1023</th><td>        <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col0 decl" id="280kernel_spatial" title='kernel_spatial' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="280kernel_spatial">kernel_spatial</dfn><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1EmRKT0_" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1EmRKT0_">(</a><a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>);</td></tr>
<tr><th id="1024">1024</th><td>        <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="281i" title='i' data-type='int' data-ref="281i">i</dfn> = <var>0</var>; <a class="local col1 ref" href="#281i" title='i' data-ref="281i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col1 ref" href="#281i" title='i' data-ref="281i">i</a>) {</td></tr>
<tr><th id="1025">1025</th><td>          <a class="local col0 ref" href="#280kernel_spatial" title='kernel_spatial' data-ref="280kernel_spatial">kernel_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col1 ref" href="#281i" title='i' data-ref="281i">i</a>]</a> =</td></tr>
<tr><th id="1026">1026</th><td>              <a class="local col9 ref" href="#279loops" title='loops' data-ref="279loops">loops</a></td></tr>
<tr><th id="1027">1027</th><td>                  .<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb" title='xla::llvm_ir::ForLoopNest::AddLoop' data-ref="_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb">AddLoop</a>(<var>0</var>,</td></tr>
<tr><th id="1028">1028</th><td>                           <a class="local col9 ref" href="#229rhs" title='rhs' data-ref="229rhs">rhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(</td></tr>
<tr><th id="1029">1029</th><td>                               <a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25kernel_spatial_dimensionsEi">kernel_spatial_dimensions</span>(<a class="local col1 ref" href="#281i" title='i' data-ref="281i">i</a>)),</td></tr>
<tr><th id="1030">1030</th><td>                           <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_" title='tensorflow::strings::StrCat' data-ref="_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_">StrCat</a>(<a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1EPKc" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1EPKc"></a><q>"k"</q>, <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1Ei" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1Ei"></a><a class="local col1 ref" href="#281i" title='i' data-ref="281i">i</a>))</td></tr>
<tr><th id="1031">1031</th><td>                  <a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv" title='xla::llvm_ir::ForLoop::GetIndVarValue' data-ref="_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv">GetIndVarValue</a>();</td></tr>
<tr><th id="1032">1032</th><td>        }</td></tr>
<tr><th id="1033">1033</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="282input_feature" title='input_feature' data-type='llvm::Value *' data-ref="282input_feature">input_feature</dfn> =</td></tr>
<tr><th id="1034">1034</th><td>            <a class="local col9 ref" href="#279loops" title='loops' data-ref="279loops">loops</a></td></tr>
<tr><th id="1035">1035</th><td>                .<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb" title='xla::llvm_ir::ForLoopNest::AddLoop' data-ref="_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb">AddLoop</a>(</td></tr>
<tr><th id="1036">1036</th><td>                    <var>0</var>, <a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers23input_feature_dimensionEv">input_feature_dimension</span>()),</td></tr>
<tr><th id="1037">1037</th><td>                    <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"iz"</q>)</td></tr>
<tr><th id="1038">1038</th><td>                <a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv" title='xla::llvm_ir::ForLoop::GetIndVarValue' data-ref="_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv">GetIndVarValue</a>();</td></tr>
<tr><th id="1039">1039</th><td></td></tr>
<tr><th id="1040">1040</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col9 ref" href="#279loops" title='loops' data-ref="279loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1041">1041</th><td></td></tr>
<tr><th id="1042">1042</th><td>        <i>// Calculate the spatial index in the input array, taking striding,</i></td></tr>
<tr><th id="1043">1043</th><td><i>        // dilation and padding into account. An index in the padding will be</i></td></tr>
<tr><th id="1044">1044</th><td><i>        // out of the bounds of the array.</i></td></tr>
<tr><th id="1045">1045</th><td>        <em>const</em> <em>auto</em> <dfn class="local col3 decl" id="283calculate_input_index" title='calculate_input_index' data-type='const (lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:1046:13)' data-ref="283calculate_input_index">calculate_input_index</dfn> =</td></tr>
<tr><th id="1046">1046</th><td>            [<b>this</b>](<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="284output_index" title='output_index' data-type='llvm::Value *' data-ref="284output_index">output_index</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="285kernel_index" title='kernel_index' data-type='llvm::Value *' data-ref="285kernel_index">kernel_index</dfn>,</td></tr>
<tr><th id="1047">1047</th><td>                   <em>const</em> <span class='type' title='xla::WindowDimension' data-ref="xla::WindowDimension">WindowDimension</span>&amp; <dfn class="local col6 decl" id="286window_dim" title='window_dim' data-type='const xla::WindowDimension &amp;' data-ref="286window_dim">window_dim</dfn>) {</td></tr>
<tr><th id="1048">1048</th><td>              <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="287strided_index" title='strided_index' data-type='llvm::Value *' data-ref="287strided_index">strided_index</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWMul' data-ref="_ZN4llvm9IRBuilder12CreateNSWMulEPNS_5ValueES2_RKNS_5TwineE">CreateNSWMul</span>(</td></tr>
<tr><th id="1049">1049</th><td>                  <a class="local col4 ref" href="#284output_index" title='output_index' data-ref="284output_index">output_index</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col6 ref" href="#286window_dim" title='window_dim' data-ref="286window_dim">window_dim</a>.<span class='ref' title='xla::WindowDimension::stride' data-ref="_ZNK3xla15WindowDimension6strideEv">stride</span>()));</td></tr>
<tr><th id="1050">1050</th><td>              <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="288dilated_kernel_index" title='dilated_kernel_index' data-type='llvm::Value *' data-ref="288dilated_kernel_index">dilated_kernel_index</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWMul' data-ref="_ZN4llvm9IRBuilder12CreateNSWMulEPNS_5ValueES2_RKNS_5TwineE">CreateNSWMul</span>(</td></tr>
<tr><th id="1051">1051</th><td>                  <a class="local col5 ref" href="#285kernel_index" title='kernel_index' data-ref="285kernel_index">kernel_index</a>,</td></tr>
<tr><th id="1052">1052</th><td>                  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col6 ref" href="#286window_dim" title='window_dim' data-ref="286window_dim">window_dim</a>.<span class='ref' title='xla::WindowDimension::window_dilation' data-ref="_ZNK3xla15WindowDimension15window_dilationEv">window_dilation</span>()));</td></tr>
<tr><th id="1053">1053</th><td>              <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWSub' data-ref="_ZN4llvm9IRBuilder12CreateNSWSubEPNS_5ValueES2_RKNS_5TwineE">CreateNSWSub</span>(</td></tr>
<tr><th id="1054">1054</th><td>                  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWAdd' data-ref="_ZN4llvm9IRBuilder12CreateNSWAddEPNS_5ValueES2_RKNS_5TwineE">CreateNSWAdd</span>(<a class="local col7 ref" href="#287strided_index" title='strided_index' data-ref="287strided_index">strided_index</a>, <a class="local col8 ref" href="#288dilated_kernel_index" title='dilated_kernel_index' data-ref="288dilated_kernel_index">dilated_kernel_index</a>),</td></tr>
<tr><th id="1055">1055</th><td>                  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col6 ref" href="#286window_dim" title='window_dim' data-ref="286window_dim">window_dim</a>.<span class='ref' title='xla::WindowDimension::padding_low' data-ref="_ZNK3xla15WindowDimension11padding_lowEv">padding_low</span>()));</td></tr>
<tr><th id="1056">1056</th><td>            };</td></tr>
<tr><th id="1057">1057</th><td>        <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col9 decl" id="289input_spatial" title='input_spatial' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="289input_spatial">input_spatial</dfn><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1EmRKT0_" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1EmRKT0_">(</a><a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>);</td></tr>
<tr><th id="1058">1058</th><td>        <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="290i" title='i' data-type='int' data-ref="290i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a>) {</td></tr>
<tr><th id="1059">1059</th><td>          <a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a>]</a> = <a class="local col3 ref" href="#283calculate_input_index" title='calculate_input_index' data-ref="283calculate_input_index">calculate_input_index</a>(</td></tr>
<tr><th id="1060">1060</th><td>              <a class="local col3 ref" href="#273output_spatial" title='output_spatial' data-ref="273output_spatial">output_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a>]</a>, <a class="local col0 ref" href="#280kernel_spatial" title='kernel_spatial' data-ref="280kernel_spatial">kernel_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a>]</a>, <a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col0 ref" href="#290i" title='i' data-ref="290i">i</a>));</td></tr>
<tr><th id="1061">1061</th><td>        }</td></tr>
<tr><th id="1062">1062</th><td></td></tr>
<tr><th id="1063">1063</th><td>        <i>// We need to check if 0 &lt;= input dim &lt; bound, as otherwise we are in</i></td></tr>
<tr><th id="1064">1064</th><td><i>        // the padding so that we can skip the computation. That is equivalent</i></td></tr>
<tr><th id="1065">1065</th><td><i>        // to input dim &lt; bound as an *unsigned* comparison, since a negative</i></td></tr>
<tr><th id="1066">1066</th><td><i>        // value will wrap to a large positive value. The input dim is dilated,</i></td></tr>
<tr><th id="1067">1067</th><td><i>        // so we need to dilate the bound as well to match.</i></td></tr>
<tr><th id="1068">1068</th><td><i></i></td></tr>
<tr><th id="1069">1069</th><td><i>        // Also need to check that the input coordinates are not in one of the</i></td></tr>
<tr><th id="1070">1070</th><td><i>        // holes created by base dilation.</i></td></tr>
<tr><th id="1071">1071</th><td>        <em>const</em> <em>auto</em> <dfn class="local col1 decl" id="291not_in_hole" title='not_in_hole' data-type='const (lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:1071:34)' data-ref="291not_in_hole">not_in_hole</dfn> = [&amp;](<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="292input_index" title='input_index' data-type='llvm::Value *' data-ref="292input_index">input_index</dfn>,</td></tr>
<tr><th id="1072">1072</th><td>                                     <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="293base_dilation" title='base_dilation' data-type='int64' data-ref="293base_dilation">base_dilation</dfn>) {</td></tr>
<tr><th id="1073">1073</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="294remainder" title='remainder' data-type='llvm::Value *' data-ref="294remainder">remainder</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateSRem' data-ref="_ZN4llvm9IRBuilder10CreateSRemEPNS_5ValueES2_RKNS_5TwineE">CreateSRem</span>(</td></tr>
<tr><th id="1074">1074</th><td>              <a class="local col2 ref" href="#292input_index" title='input_index' data-ref="292input_index">input_index</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col3 ref" href="#293base_dilation" title='base_dilation' data-ref="293base_dilation">base_dilation</a>));</td></tr>
<tr><th id="1075">1075</th><td>          <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpEQ' data-ref="_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE">CreateICmpEQ</span>(<a class="local col4 ref" href="#294remainder" title='remainder' data-ref="294remainder">remainder</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<var>0</var>));</td></tr>
<tr><th id="1076">1076</th><td>        };</td></tr>
<tr><th id="1077">1077</th><td></td></tr>
<tr><th id="1078">1078</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="295in_bounds_condition" title='in_bounds_condition' data-type='llvm::Value *' data-ref="295in_bounds_condition">in_bounds_condition</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt1' data-ref="_ZN4llvm13IRBuilderBase7getInt1Eb">getInt1</span>(<b>true</b>);</td></tr>
<tr><th id="1079">1079</th><td>        <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="296i" title='i' data-type='int' data-ref="296i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>) {</td></tr>
<tr><th id="1080">1080</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>* <dfn class="local col7 decl" id="297input_bound" title='input_bound' data-type='llvm::ConstantInt *' data-ref="297input_bound">input_bound</dfn> =</td></tr>
<tr><th id="1081">1081</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<span class="namespace">window_util::</span><a class="ref" href="../../window_util.h.html#_ZN3xla11window_util12DilatedBoundExx" title='xla::window_util::DilatedBound' data-ref="_ZN3xla11window_util12DilatedBoundExx">DilatedBound</a>(</td></tr>
<tr><th id="1082">1082</th><td>                  <a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers24input_spatial_dimensionsEi">input_spatial_dimensions</span>(<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>)),</td></tr>
<tr><th id="1083">1083</th><td>                  <a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>).<span class='ref' title='xla::WindowDimension::base_dilation' data-ref="_ZNK3xla15WindowDimension13base_dilationEv">base_dilation</span>()));</td></tr>
<tr><th id="1084">1084</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="298dim_in_bound" title='dim_in_bound' data-type='llvm::Value *' data-ref="298dim_in_bound">dim_in_bound</dfn> =</td></tr>
<tr><th id="1085">1085</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpULT' data-ref="_ZN4llvm9IRBuilder13CreateICmpULTEPNS_5ValueES2_RKNS_5TwineE">CreateICmpULT</span>(<a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>]</a>, <a class="local col7 ref" href="#297input_bound" title='input_bound' data-ref="297input_bound">input_bound</a>);</td></tr>
<tr><th id="1086">1086</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="299dim_not_in_hole" title='dim_not_in_hole' data-type='llvm::Value *' data-ref="299dim_not_in_hole">dim_not_in_hole</dfn> = <a class="local col1 ref" href="#291not_in_hole" title='not_in_hole' data-ref="291not_in_hole">not_in_hole</a>(</td></tr>
<tr><th id="1087">1087</th><td>              <a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>]</a>, <a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col6 ref" href="#296i" title='i' data-ref="296i">i</a>).<span class='ref' title='xla::WindowDimension::base_dilation' data-ref="_ZNK3xla15WindowDimension13base_dilationEv">base_dilation</span>());</td></tr>
<tr><th id="1088">1088</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="300dim_ok" title='dim_ok' data-type='llvm::Value *' data-ref="300dim_ok">dim_ok</dfn> =</td></tr>
<tr><th id="1089">1089</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</span>(<a class="local col8 ref" href="#298dim_in_bound" title='dim_in_bound' data-ref="298dim_in_bound">dim_in_bound</a>, <a class="local col9 ref" href="#299dim_not_in_hole" title='dim_not_in_hole' data-ref="299dim_not_in_hole">dim_not_in_hole</a>);</td></tr>
<tr><th id="1090">1090</th><td>          <a class="local col5 ref" href="#295in_bounds_condition" title='in_bounds_condition' data-ref="295in_bounds_condition">in_bounds_condition</a> =</td></tr>
<tr><th id="1091">1091</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</span>(<a class="local col5 ref" href="#295in_bounds_condition" title='in_bounds_condition' data-ref="295in_bounds_condition">in_bounds_condition</a>, <a class="local col0 ref" href="#300dim_ok" title='dim_ok' data-ref="300dim_ok">dim_ok</a>);</td></tr>
<tr><th id="1092">1092</th><td>        }</td></tr>
<tr><th id="1093">1093</th><td></td></tr>
<tr><th id="1094">1094</th><td>        <i>// Now we need to map the dilated base coordinates back to the actual</i></td></tr>
<tr><th id="1095">1095</th><td><i>        // data indices on the lhs.</i></td></tr>
<tr><th id="1096">1096</th><td>        <em>const</em> <em>auto</em> <dfn class="local col1 decl" id="301undilate" title='undilate' data-type='const (lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:1096:31)' data-ref="301undilate">undilate</dfn> = [&amp;](<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="302input_index" title='input_index' data-type='llvm::Value *' data-ref="302input_index">input_index</dfn>,</td></tr>
<tr><th id="1097">1097</th><td>                                  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="303base_dilation" title='base_dilation' data-type='int64' data-ref="303base_dilation">base_dilation</dfn>) {</td></tr>
<tr><th id="1098">1098</th><td>          <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateSDiv' data-ref="_ZN4llvm9IRBuilder10CreateSDivEPNS_5ValueES2_RKNS_5TwineEb">CreateSDiv</span>(<a class="local col2 ref" href="#302input_index" title='input_index' data-ref="302input_index">input_index</a>,</td></tr>
<tr><th id="1099">1099</th><td>                                        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col3 ref" href="#303base_dilation" title='base_dilation' data-ref="303base_dilation">base_dilation</a>));</td></tr>
<tr><th id="1100">1100</th><td>        };</td></tr>
<tr><th id="1101">1101</th><td>        <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="304i" title='i' data-type='int' data-ref="304i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#304i" title='i' data-ref="304i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col4 ref" href="#304i" title='i' data-ref="304i">i</a>) {</td></tr>
<tr><th id="1102">1102</th><td>          <a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col4 ref" href="#304i" title='i' data-ref="304i">i</a>]</a> =</td></tr>
<tr><th id="1103">1103</th><td>              <a class="local col1 ref" href="#301undilate" title='undilate' data-ref="301undilate">undilate</a>(<a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col4 ref" href="#304i" title='i' data-ref="304i">i</a>]</a>, <a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col4 ref" href="#304i" title='i' data-ref="304i">i</a>).<span class='ref' title='xla::WindowDimension::base_dilation' data-ref="_ZNK3xla15WindowDimension13base_dilationEv">base_dilation</span>());</td></tr>
<tr><th id="1104">1104</th><td>        }</td></tr>
<tr><th id="1105">1105</th><td></td></tr>
<tr><th id="1106">1106</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col5 decl" id="305if_data" title='if_data' data-type='llvm_ir::LlvmIfData' data-ref="305if_data">if_data</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(</td></tr>
<tr><th id="1107">1107</th><td>            <a class="local col5 ref" href="#295in_bounds_condition" title='in_bounds_condition' data-ref="295in_bounds_condition">in_bounds_condition</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"in-bounds"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1108">1108</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col5 ref" href="#305if_data" title='if_data' data-ref="305if_data">if_data</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::true_block" title='xla::llvm_ir::LlvmIfData::true_block' data-ref="xla::llvm_ir::LlvmIfData::true_block">true_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1109">1109</th><td></td></tr>
<tr><th id="1110">1110</th><td>        <i>// We are not in the padding, so carry out the computation.</i></td></tr>
<tr><th id="1111">1111</th><td>        <em>int</em> <dfn class="local col6 decl" id="306num_dims" title='num_dims' data-type='int' data-ref="306num_dims">num_dims</dfn> = <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a> + <var>2</var>;</td></tr>
<tr><th id="1112">1112</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col7 decl" id="307input_index" title='input_index' data-type='llvm_ir::IrArray::Index' data-ref="307input_index">input_index</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE">(</a><a class="local col6 ref" href="#306num_dims" title='num_dims' data-ref="306num_dims">num_dims</a>);</td></tr>
<tr><th id="1113">1113</th><td>        <b>for</b> (<em>int</em> <dfn class="local col8 decl" id="308i" title='i' data-type='int' data-ref="308i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#308i" title='i' data-ref="308i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col8 ref" href="#308i" title='i' data-ref="308i">i</a>) {</td></tr>
<tr><th id="1114">1114</th><td>          <a class="local col7 ref" href="#307input_index" title='input_index' data-ref="307input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers24input_spatial_dimensionsEi">input_spatial_dimensions</span>(<a class="local col8 ref" href="#308i" title='i' data-ref="308i">i</a>)]</a> = <a class="local col9 ref" href="#289input_spatial" title='input_spatial' data-ref="289input_spatial">input_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col8 ref" href="#308i" title='i' data-ref="308i">i</a>]</a>;</td></tr>
<tr><th id="1115">1115</th><td>        }</td></tr>
<tr><th id="1116">1116</th><td>        <a class="local col7 ref" href="#307input_index" title='input_index' data-ref="307input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers23input_feature_dimensionEv">input_feature_dimension</span>()]</a> = <a class="local col2 ref" href="#282input_feature" title='input_feature' data-ref="282input_feature">input_feature</a>;</td></tr>
<tr><th id="1117">1117</th><td>        <a class="local col7 ref" href="#307input_index" title='input_index' data-ref="307input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::input_batch_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers21input_batch_dimensionEv">input_batch_dimension</span>()]</a> = <a class="local col6 ref" href="#276batch" title='batch' data-ref="276batch">batch</a>;</td></tr>
<tr><th id="1118">1118</th><td></td></tr>
<tr><th id="1119">1119</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col9 decl" id="309kernel_array" title='kernel_array' data-type='llvm_ir::IrArray' data-ref="309kernel_array">kernel_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col9 ref" href="#229rhs" title='rhs' data-ref="229rhs">rhs</a>));</td></tr>
<tr><th id="1120">1120</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col0 decl" id="310kernel_index" title='kernel_index' data-type='llvm_ir::IrArray::Index' data-ref="310kernel_index">kernel_index</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE">(</a><a class="local col6 ref" href="#306num_dims" title='num_dims' data-ref="306num_dims">num_dims</a>);</td></tr>
<tr><th id="1121">1121</th><td>        <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="311i" title='i' data-type='int' data-ref="311i">i</dfn> = <var>0</var>; <a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a> &lt; <a class="local col2 ref" href="#272num_spatial_dims" title='num_spatial_dims' data-ref="272num_spatial_dims">num_spatial_dims</a>; ++<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>) {</td></tr>
<tr><th id="1122">1122</th><td>          <a class="local col0 ref" href="#310kernel_index" title='kernel_index' data-ref="310kernel_index">kernel_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_spatial_dimensions' data-ref="_ZNK3xla27ConvolutionDimensionNumbers25kernel_spatial_dimensionsEi">kernel_spatial_dimensions</span>(<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>)]</a> =</td></tr>
<tr><th id="1123">1123</th><td>              <a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>).<span class='ref' title='xla::WindowDimension::window_reversal' data-ref="_ZNK3xla15WindowDimension15window_reversalEv">window_reversal</span>()</td></tr>
<tr><th id="1124">1124</th><td>                  ? <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateNSWSub' data-ref="_ZN4llvm9IRBuilder12CreateNSWSubEPNS_5ValueES2_RKNS_5TwineE">CreateNSWSub</span>(</td></tr>
<tr><th id="1125">1125</th><td>                        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col0 ref" href="#230window" title='window' data-ref="230window">window</a>.<span class='ref' title='xla::Window::dimensions' data-ref="_ZNK3xla6Window10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>).<span class='ref' title='xla::WindowDimension::size' data-ref="_ZNK3xla15WindowDimension4sizeEv">size</span>() - <var>1</var>),</td></tr>
<tr><th id="1126">1126</th><td>                        <a class="local col0 ref" href="#280kernel_spatial" title='kernel_spatial' data-ref="280kernel_spatial">kernel_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>]</a>)</td></tr>
<tr><th id="1127">1127</th><td>                  : <a class="local col0 ref" href="#280kernel_spatial" title='kernel_spatial' data-ref="280kernel_spatial">kernel_spatial</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col1 ref" href="#311i" title='i' data-ref="311i">i</a>]</a>;</td></tr>
<tr><th id="1128">1128</th><td>        }</td></tr>
<tr><th id="1129">1129</th><td></td></tr>
<tr><th id="1130">1130</th><td>        <a class="local col0 ref" href="#310kernel_index" title='kernel_index' data-ref="310kernel_index">kernel_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_input_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers30kernel_input_feature_dimensionEv">kernel_input_feature_dimension</span>()]</a> = <a class="local col2 ref" href="#282input_feature" title='input_feature' data-ref="282input_feature">input_feature</a>;</td></tr>
<tr><th id="1131">1131</th><td>        <a class="local col0 ref" href="#310kernel_index" title='kernel_index' data-ref="310kernel_index">kernel_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#231dnums" title='dnums' data-ref="231dnums">dnums</a>.<span class='ref' title='xla::ConvolutionDimensionNumbers::kernel_output_feature_dimension' data-ref="_ZNK3xla27ConvolutionDimensionNumbers31kernel_output_feature_dimensionEv">kernel_output_feature_dimension</span>()]</a> = <a class="local col5 ref" href="#275output_feature" title='output_feature' data-ref="275output_feature">output_feature</a>;</td></tr>
<tr><th id="1132">1132</th><td></td></tr>
<tr><th id="1133">1133</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col2 decl" id="312input_array" title='input_array' data-type='llvm_ir::IrArray' data-ref="312input_array">input_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#228lhs" title='lhs' data-ref="228lhs">lhs</a>));</td></tr>
<tr><th id="1134">1134</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="313product" title='product' data-type='llvm::Value *' data-ref="313product">product</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateFMul' data-ref="_ZN4llvm9IRBuilder10CreateFMulEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFMul</span>(</td></tr>
<tr><th id="1135">1135</th><td>            <a class="local col2 ref" href="#312input_array" title='input_array' data-ref="312input_array">input_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitReadArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitReadArrayElement</a>(<a class="local col7 ref" href="#307input_index" title='input_index' data-ref="307input_index">input_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>),</td></tr>
<tr><th id="1136">1136</th><td>            <a class="local col9 ref" href="#309kernel_array" title='kernel_array' data-ref="309kernel_array">kernel_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitReadArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitReadArrayElement</a>(<a class="local col0 ref" href="#310kernel_index" title='kernel_index' data-ref="310kernel_index">kernel_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>));</td></tr>
<tr><th id="1137">1137</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="314sum" title='sum' data-type='llvm::Value *' data-ref="314sum">sum</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateFAdd' data-ref="_ZN4llvm9IRBuilder10CreateFAddEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFAdd</span>(</td></tr>
<tr><th id="1138">1138</th><td>            <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col8 ref" href="#278sum_address" title='sum_address' data-ref="278sum_address">sum_address</a>), <a class="local col3 ref" href="#313product" title='product' data-ref="313product">product</a>);</td></tr>
<tr><th id="1139">1139</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col4 ref" href="#314sum" title='sum' data-ref="314sum">sum</a>, <a class="local col8 ref" href="#278sum_address" title='sum_address' data-ref="278sum_address">sum_address</a>);</td></tr>
<tr><th id="1140">1140</th><td></td></tr>
<tr><th id="1141">1141</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col9 ref" href="#279loops" title='loops' data-ref="279loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1142">1142</th><td>        <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col8 ref" href="#278sum_address" title='sum_address' data-ref="278sum_address">sum_address</a>);</td></tr>
<tr><th id="1143">1143</th><td>      });</td></tr>
<tr><th id="1144">1144</th><td>}</td></tr>
<tr><th id="1145">1145</th><td></td></tr>
<tr><th id="1146">1146</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter9HandleFftEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleFft' data-ref="_ZN3xla3cpu9IrEmitter9HandleFftEPNS_14HloInstructionE">HandleFft</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="315fft" title='fft' data-type='xla::HloInstruction *' data-ref="315fft">fft</dfn>) {</td></tr>
<tr><th id="1147">1147</th><td>  <em>auto</em> <dfn class="local col6 decl" id="316operand" title='operand' data-type='const xla::HloInstruction *' data-ref="316operand">operand</dfn> = <a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="1148">1148</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ElementTypesSameAndSupported( *fft, {operand}, {F32, C64})); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</a>(</td></tr>
<tr><th id="1149">1149</th><td>      <i>/*instruction=*/</i>*<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>, <i>/*operands=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col6 ref" href="#316operand" title='operand' data-ref="316operand">operand</a>},</td></tr>
<tr><th id="1150">1150</th><td>      <i>/*supported_types=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<span class='enum' title='xla::PrimitiveType::F32' data-ref="xla::PrimitiveType::F32">F32</span>, <span class='enum' title='xla::PrimitiveType::C64' data-ref="xla::PrimitiveType::C64">C64</span>}));</td></tr>
<tr><th id="1151">1151</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(LayoutUtil::IsMonotonicWithDim0Major(operand-&gt;shape().layout())), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1151, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;LayoutUtil::IsMonotonicWithDim0Major(operand-&gt;shape().layout())&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE" title='xla::LayoutUtil::IsMonotonicWithDim0Major' data-ref="_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE">IsMonotonicWithDim0Major</a>(<a class="local col6 ref" href="#316operand" title='operand' data-ref="316operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>()));</td></tr>
<tr><th id="1152">1152</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(LayoutUtil::IsMonotonicWithDim0Major(fft-&gt;shape().layout())), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1152, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;LayoutUtil::IsMonotonicWithDim0Major(fft-&gt;shape().layout())&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE" title='xla::LayoutUtil::IsMonotonicWithDim0Major' data-ref="_ZN3xla10LayoutUtil24IsMonotonicWithDim0MajorERKNS_6LayoutE">IsMonotonicWithDim0Major</a>(<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>()));</td></tr>
<tr><th id="1153">1153</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1153, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"operand="</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil21HumanStringWithLayoutERKNS_5ShapeE" title='xla::ShapeUtil::HumanStringWithLayout' data-ref="_ZN3xla9ShapeUtil21HumanStringWithLayoutERKNS_5ShapeE">HumanStringWithLayout</a>(<a class="local col6 ref" href="#316operand" title='operand' data-ref="316operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="1154">1154</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1154, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"fft="</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil21HumanStringWithLayoutERKNS_5ShapeE" title='xla::ShapeUtil::HumanStringWithLayout' data-ref="_ZN3xla9ShapeUtil21HumanStringWithLayoutERKNS_5ShapeE">HumanStringWithLayout</a>(<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="1155">1155</th><td></td></tr>
<tr><th id="1156">1156</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="317operand_address" title='operand_address' data-type='llvm::Value *' data-ref="317operand_address">operand_address</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col6 ref" href="#316operand" title='operand' data-ref="316operand">operand</a>);</td></tr>
<tr><th id="1157">1157</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(fft)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>));</td></tr>
<tr><th id="1158">1158</th><td></td></tr>
<tr><th id="1159">1159</th><td>  <em>const</em> <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt;&amp; <dfn class="local col8 decl" id="318fft_length" title='fft_length' data-type='const std::vector&lt;int64&gt; &amp;' data-ref="318fft_length">fft_length</dfn> = <a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10fft_lengthEv" title='xla::HloInstruction::fft_length' data-ref="_ZNK3xla14HloInstruction10fft_lengthEv">fft_length</a>();</td></tr>
<tr><th id="1160">1160</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="319input_batch" title='input_batch' data-type='int64' data-ref="319input_batch">input_batch</dfn> = <var>1</var>;</td></tr>
<tr><th id="1161">1161</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="320i" title='i' data-type='int' data-ref="320i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#320i" title='i' data-ref="320i">i</a> &lt; <a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>() - <a class="local col8 ref" href="#318fft_length" title='fft_length' data-ref="318fft_length">fft_length</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>(); <a class="local col0 ref" href="#320i" title='i' data-ref="320i">i</a>++) {</td></tr>
<tr><th id="1162">1162</th><td>    <a class="local col9 ref" href="#319input_batch" title='input_batch' data-ref="319input_batch">input_batch</a> *= <a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col0 ref" href="#320i" title='i' data-ref="320i">i</a>);</td></tr>
<tr><th id="1163">1163</th><td>  }</td></tr>
<tr><th id="1164">1164</th><td></td></tr>
<tr><th id="1165">1165</th><td>  <i>// Args have been computed, make the call.</i></td></tr>
<tr><th id="1166">1166</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col1 decl" id="321int8_ptr_type" title='int8_ptr_type' data-type='llvm::Type *' data-ref="321int8_ptr_type">int8_ptr_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8Ty' data-ref="_ZN4llvm13IRBuilderBase9getInt8TyEv">getInt8Ty</span>()-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>();</td></tr>
<tr><th id="1167">1167</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col2 decl" id="322int32_type" title='int32_type' data-type='llvm::Type *' data-ref="322int32_type">int32_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt32TyEv">getInt32Ty</span>();</td></tr>
<tr><th id="1168">1168</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col3 decl" id="323int64_type" title='int64_type' data-type='llvm::Type *' data-ref="323int64_type">int64_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt64TyEv">getInt64Ty</span>();</td></tr>
<tr><th id="1169">1169</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>* <dfn class="local col4 decl" id="324fft_type" title='fft_type' data-type='llvm::FunctionType *' data-ref="324fft_type">fft_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>::<span class='ref' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</span>(</td></tr>
<tr><th id="1170">1170</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getVoidTy' data-ref="_ZN4llvm13IRBuilderBase9getVoidTyEv">getVoidTy</span>(),</td></tr>
<tr><th id="1171">1171</th><td>      <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col1 ref" href="#321int8_ptr_type" title='int8_ptr_type' data-ref="321int8_ptr_type">int8_ptr_type</a>, <a class="local col1 ref" href="#321int8_ptr_type" title='int8_ptr_type' data-ref="321int8_ptr_type">int8_ptr_type</a>, <a class="local col1 ref" href="#321int8_ptr_type" title='int8_ptr_type' data-ref="321int8_ptr_type">int8_ptr_type</a>, <a class="local col2 ref" href="#322int32_type" title='int32_type' data-ref="322int32_type">int32_type</a>, <a class="local col2 ref" href="#322int32_type" title='int32_type' data-ref="322int32_type">int32_type</a>,</td></tr>
<tr><th id="1172">1172</th><td>       <a class="local col3 ref" href="#323int64_type" title='int64_type' data-ref="323int64_type">int64_type</a>, <a class="local col3 ref" href="#323int64_type" title='int64_type' data-ref="323int64_type">int64_type</a>, <a class="local col3 ref" href="#323int64_type" title='int64_type' data-ref="323int64_type">int64_type</a>, <a class="local col3 ref" href="#323int64_type" title='int64_type' data-ref="323int64_type">int64_type</a>},</td></tr>
<tr><th id="1173">1173</th><td>      <i>/*isVarArg=*/</i><b>false</b>);</td></tr>
<tr><th id="1174">1174</th><td>  <em>const</em> <em>char</em>* <dfn class="local col5 decl" id="325fn_name" title='fn_name' data-type='const char *' data-ref="325fn_name">fn_name</dfn> = <span class="namespace">runtime::</span><a class="ref" href="cpu_runtime.h.html#xla::cpu::runtime::kEigenFftSymbolName" title='xla::cpu::runtime::kEigenFftSymbolName' data-ref="xla::cpu::runtime::kEigenFftSymbolName">kEigenFftSymbolName</a>;</td></tr>
<tr><th id="1175">1175</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col6 decl" id="326fft_func" title='fft_func' data-type='llvm::Function *' data-ref="326fft_func">fft_func</dfn> = <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(</td></tr>
<tr><th id="1176">1176</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(<span class='ref fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></span><a class="local col5 ref" href="#325fn_name" title='fn_name' data-ref="325fn_name">fn_name</a>, <a class="local col4 ref" href="#324fft_type" title='fft_type' data-ref="324fft_type">fft_type</a>));</td></tr>
<tr><th id="1177">1177</th><td>  <a class="local col6 ref" href="#326fft_func" title='fft_func' data-ref="326fft_func">fft_func</a>-&gt;<span class='ref' title='llvm::Function::setCallingConv' data-ref="_ZN4llvm8Function14setCallingConvEj">setCallingConv</span>(<span class="namespace">llvm::CallingConv::</span><span class='enum' title='llvm::CallingConv::C' data-ref="llvm::CallingConv::C">C</span>);</td></tr>
<tr><th id="1178">1178</th><td>  <a class="local col6 ref" href="#326fft_func" title='fft_func' data-ref="326fft_func">fft_func</a>-&gt;<span class='ref' title='llvm::Function::setDoesNotThrow' data-ref="_ZN4llvm8Function15setDoesNotThrowEv">setDoesNotThrow</span>();</td></tr>
<tr><th id="1179">1179</th><td>  <a class="local col6 ref" href="#326fft_func" title='fft_func' data-ref="326fft_func">fft_func</a>-&gt;<span class='ref' title='llvm::Function::setOnlyAccessesInaccessibleMemOrArgMem' data-ref="_ZN4llvm8Function38setOnlyAccessesInaccessibleMemOrArgMemEv">setOnlyAccessesInaccessibleMemOrArgMem</span>();</td></tr>
<tr><th id="1180">1180</th><td>  <em>const</em> <em>int</em> <dfn class="local col7 decl" id="327fft_rank" title='fft_rank' data-type='const int' data-ref="327fft_rank">fft_rank</dfn> = <a class="local col8 ref" href="#318fft_length" title='fft_length' data-ref="318fft_length">fft_length</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>();</td></tr>
<tr><th id="1181">1181</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(</td></tr>
<tr><th id="1182">1182</th><td>      <a class="local col6 ref" href="#326fft_func" title='fft_func' data-ref="326fft_func">fft_func</a>,</td></tr>
<tr><th id="1183">1183</th><td>      <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="1184">1184</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>), <a class="local col1 ref" href="#321int8_ptr_type" title='int8_ptr_type' data-ref="321int8_ptr_type">int8_ptr_type</a>),</td></tr>
<tr><th id="1185">1185</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col7 ref" href="#317operand_address" title='operand_address' data-ref="317operand_address">operand_address</a>, <a class="local col1 ref" href="#321int8_ptr_type" title='int8_ptr_type' data-ref="321int8_ptr_type">int8_ptr_type</a>),</td></tr>
<tr><th id="1186">1186</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col5 ref" href="#315fft" title='fft' data-ref="315fft">fft</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8fft_typeEv" title='xla::HloInstruction::fft_type' data-ref="_ZNK3xla14HloInstruction8fft_typeEv">fft_type</a>()), <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col7 ref" href="#327fft_rank" title='fft_rank' data-ref="327fft_rank">fft_rank</a>),</td></tr>
<tr><th id="1187">1187</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col9 ref" href="#319input_batch" title='input_batch' data-ref="319input_batch">input_batch</a>),</td></tr>
<tr><th id="1188">1188</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#327fft_rank" title='fft_rank' data-ref="327fft_rank">fft_rank</a> &gt; <var>0</var> ? <a class="local col8 ref" href="#318fft_length" title='fft_length' data-ref="318fft_length">fft_length</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<var>0</var>]</a> : <var>0</var>),</td></tr>
<tr><th id="1189">1189</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#327fft_rank" title='fft_rank' data-ref="327fft_rank">fft_rank</a> &gt; <var>1</var> ? <a class="local col8 ref" href="#318fft_length" title='fft_length' data-ref="318fft_length">fft_length</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<var>1</var>]</a> : <var>0</var>),</td></tr>
<tr><th id="1190">1190</th><td>       <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#327fft_rank" title='fft_rank' data-ref="327fft_rank">fft_rank</a> &gt; <var>2</var> ? <a class="local col8 ref" href="#318fft_length" title='fft_length' data-ref="318fft_length">fft_length</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<var>2</var>]</a> : <var>0</var>)});</td></tr>
<tr><th id="1191">1191</th><td></td></tr>
<tr><th id="1192">1192</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="1193">1193</th><td>}</td></tr>
<tr><th id="1194">1194</th><td></td></tr>
<tr><th id="1195">1195</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter21HandleCrossReplicaSumEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleCrossReplicaSum' data-ref="_ZN3xla3cpu9IrEmitter21HandleCrossReplicaSumEPNS_14HloInstructionE">HandleCrossReplicaSum</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="328crs" title='crs' data-type='xla::HloInstruction *' data-ref="328crs">crs</dfn>) {</td></tr>
<tr><th id="1196">1196</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13replica_countEv" title='xla::HloModuleConfig::replica_count' data-ref="_ZNK3xla15HloModuleConfig13replica_countEv">replica_count</a>() == <var>1</var>) {</td></tr>
<tr><th id="1197">1197</th><td>    <i>// When there is a single replica, a cross replica sum is the identity</i></td></tr>
<tr><th id="1198">1198</th><td><i>    // function, and the buffer assignment expects a copy (we could eliminate</i></td></tr>
<tr><th id="1199">1199</th><td><i>    // these at the HLO level as an optimization).</i></td></tr>
<tr><th id="1200">1200</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(crs)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col8 ref" href="#328crs" title='crs' data-ref="328crs">crs</a>));</td></tr>
<tr><th id="1201">1201</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</a>(*<a class="local col8 ref" href="#328crs" title='crs' data-ref="328crs">crs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>), *<a class="local col8 ref" href="#328crs" title='crs' data-ref="328crs">crs</a>);</td></tr>
<tr><th id="1202">1202</th><td>  }</td></tr>
<tr><th id="1203">1203</th><td></td></tr>
<tr><th id="1204">1204</th><td>  <i>// TODO(b/33011107): Support cross replica sum on CPU.</i></td></tr>
<tr><th id="1205">1205</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"CrossReplicaSum is not implemented on CPU."</q>);</td></tr>
<tr><th id="1206">1206</th><td>}</td></tr>
<tr><th id="1207">1207</th><td></td></tr>
<tr><th id="1208">1208</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// Fills up the free variables in 'index_with_free_var' with values from</i></td></tr>
<tr><th id="1209">1209</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// 'filler_index'. The size of free variables must be the same as the</i></td></tr>
<tr><th id="1210">1210</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// size of 'filler_index'.</i></td></tr>
<tr><th id="1211">1211</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">//</i></td></tr>
<tr><th id="1212">1212</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// This is often used after dimension reduction, where</i></td></tr>
<tr><th id="1213">1213</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// 'index_with_free_var' has one or more dimensions reduced, which serves as</i></td></tr>
<tr><th id="1214">1214</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// free variables (represented as nullptr). For example, if we have a 4</i></td></tr>
<tr><th id="1215">1215</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// dimensional input and index for the dimension being reduced is</i></td></tr>
<tr><th id="1216">1216</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// 2 (third dimension), we will have an index like [i, j, NULL, k]</i></td></tr>
<tr><th id="1217">1217</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// after reduced dimension.</i></td></tr>
<tr><th id="1218">1218</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">//</i></td></tr>
<tr><th id="1219">1219</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// Here we fill up that free variable by 'filler_index', which contains</i></td></tr>
<tr><th id="1220">1220</th><td><i  data-doc="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">// the value in the reduced dimension.</i></td></tr>
<tr><th id="1221">1221</th><td><em>static</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="tu decl def" id="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_" title='xla::cpu::FillReducedDimensionIndex' data-type='llvm_ir::IrArray::Index xla::cpu::FillReducedDimensionIndex(llvm_ir::IrArray::Index index_with_free_var, llvm_ir::IrArray::Index filler_index)' data-ref="_ZN3xla3cpuL25FillReducedDimensionIndexENS_7llvm_ir7IrArray5IndexES3_">FillReducedDimensionIndex</dfn>(</td></tr>
<tr><th id="1222">1222</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col9 decl" id="329index_with_free_var" title='index_with_free_var' data-type='llvm_ir::IrArray::Index' data-ref="329index_with_free_var">index_with_free_var</dfn>,</td></tr>
<tr><th id="1223">1223</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col0 decl" id="330filler_index" title='filler_index' data-type='llvm_ir::IrArray::Index' data-ref="330filler_index">filler_index</dfn>) {</td></tr>
<tr><th id="1224">1224</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>::<a class="typedef" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index::const_iterator" title='xla::llvm_ir::IrArray::Index::const_iterator' data-type='std::vector&lt;llvm::Value *&gt;::const_iterator' data-ref="xla::llvm_ir::IrArray::Index::const_iterator">const_iterator</a> <dfn class="local col1 decl" id="331it" title='it' data-type='llvm_ir::IrArray::Index::const_iterator' data-ref="331it">it</dfn> = <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}" title='__gnu_cxx::__normal_iterator::__normal_iterator&lt;_Iterator, _Container&gt;' data-ref="__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}"></a><a class="local col0 ref" href="#330filler_index" title='filler_index' data-ref="330filler_index">filler_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index5beginEv" title='xla::llvm_ir::IrArray::Index::begin' data-ref="_ZN3xla7llvm_ir7IrArray5Index5beginEv">begin</a>();</td></tr>
<tr><th id="1225">1225</th><td></td></tr>
<tr><th id="1226">1226</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col2 decl" id="332i" title='i' data-type='size_t' data-ref="332i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#332i" title='i' data-ref="332i">i</a> &lt; <a class="local col9 ref" href="#329index_with_free_var" title='index_with_free_var' data-ref="329index_with_free_var">index_with_free_var</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(); ++<a class="local col2 ref" href="#332i" title='i' data-ref="332i">i</a>) {</td></tr>
<tr><th id="1227">1227</th><td>    <b>if</b> (<a class="local col9 ref" href="#329index_with_free_var" title='index_with_free_var' data-ref="329index_with_free_var">index_with_free_var</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col2 ref" href="#332i" title='i' data-ref="332i">i</a>]</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="1228">1228</th><td>      <a class="local col9 ref" href="#329index_with_free_var" title='index_with_free_var' data-ref="329index_with_free_var">index_with_free_var</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col2 ref" href="#332i" title='i' data-ref="332i">i</a>]</a> = <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col1 ref" href="#331it" title='it' data-ref="331it">it</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a>;</td></tr>
<tr><th id="1229">1229</th><td>    }</td></tr>
<tr><th id="1230">1230</th><td>  }</td></tr>
<tr><th id="1231">1231</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(filler_index.end() == it), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1231) &lt;&lt; &quot;Check failed: &quot; &quot;filler_index.end() == it&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="local col0 ref" href="#330filler_index" title='filler_index' data-ref="330filler_index">filler_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index3endEv" title='xla::llvm_ir::IrArray::Index::end' data-ref="_ZN3xla7llvm_ir7IrArray5Index3endEv">end</a>() <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::operator==" title='__gnu_cxx::operator==' data-ref="__gnu_cxx::operator==">==</a> <a class="local col1 ref" href="#331it" title='it' data-ref="331it">it</a>);</td></tr>
<tr><th id="1232">1232</th><td>  <b>return</b> <a class="ref fake" href="../llvm_ir/ir_array.h.html#54" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EOS2_"></a><a class="local col9 ref" href="#329index_with_free_var" title='index_with_free_var' data-ref="329index_with_free_var">index_with_free_var</a>;</td></tr>
<tr><th id="1233">1233</th><td>}</td></tr>
<tr><th id="1234">1234</th><td></td></tr>
<tr><th id="1235">1235</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter15HandleParameterEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleParameter' data-ref="_ZN3xla3cpu9IrEmitter15HandleParameterEPNS_14HloInstructionE">HandleParameter</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="333parameter" title='parameter' data-type='xla::HloInstruction *' data-ref="333parameter">parameter</dfn>) {</td></tr>
<tr><th id="1236">1236</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1236, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleParameter: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col3 ref" href="#333parameter" title='parameter' data-ref="333parameter">parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="1237">1237</th><td>  <em>auto</em> <dfn class="local col4 decl" id="334param_number" title='param_number' data-type='long long' data-ref="334param_number">param_number</dfn> = <a class="local col3 ref" href="#333parameter" title='parameter' data-ref="333parameter">parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>();</td></tr>
<tr><th id="1238">1238</th><td>  <em>auto</em> <dfn class="local col5 decl" id="335param_shape" title='param_shape' data-type='xla::Shape' data-ref="335param_shape">param_shape</dfn> = <span class='ref fake' title='xla::Shape::Shape' data-ref="_ZN3xla5ShapeC1ERKS0_"></span><a class="local col3 ref" href="#333parameter" title='parameter' data-ref="333parameter">parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="1239">1239</th><td></td></tr>
<tr><th id="1240">1240</th><td>  <i>// We have to access the parameter at offset param_number in the params</i></td></tr>
<tr><th id="1241">1241</th><td><i>  // array. The code generated here is equivalent to this C code:</i></td></tr>
<tr><th id="1242">1242</th><td><i>  //</i></td></tr>
<tr><th id="1243">1243</th><td><i>  //   i8* param_address_untyped = params[param_number];</i></td></tr>
<tr><th id="1244">1244</th><td><i>  //   Param* param_address_typed = (Param*)param_address_untyped;</i></td></tr>
<tr><th id="1245">1245</th><td><i>  //</i></td></tr>
<tr><th id="1246">1246</th><td><i>  // Where Param is the actual element type of the underlying buffer (for</i></td></tr>
<tr><th id="1247">1247</th><td><i>  // example, float for an XLA F32 element type).</i></td></tr>
<tr><th id="1248">1248</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="336params" title='params' data-type='llvm::Value *' data-ref="336params">params</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction14parameters_argEv" title='xla::cpu::IrFunction::parameters_arg' data-ref="_ZN3xla3cpu10IrFunction14parameters_argEv">parameters_arg</a>();</td></tr>
<tr><th id="1249">1249</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="337param_address_offset" title='param_address_offset' data-type='llvm::Value *' data-ref="337param_address_offset">param_address_offset</dfn> =</td></tr>
<tr><th id="1250">1250</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21EmitBufferIndexingGEPEPN4llvm5ValueExPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::EmitBufferIndexingGEP' data-ref="_ZN3xla7llvm_ir21EmitBufferIndexingGEPEPN4llvm5ValueExPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">EmitBufferIndexingGEP</a>(<a class="local col6 ref" href="#336params" title='params' data-ref="336params">params</a>, <a class="local col4 ref" href="#334param_number" title='param_number' data-ref="334param_number">param_number</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1251">1251</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col8 decl" id="338param_address_untyped" title='param_address_untyped' data-type='llvm::LoadInst *' data-ref="338param_address_untyped">param_address_untyped</dfn> =</td></tr>
<tr><th id="1252">1252</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col7 ref" href="#337param_address_offset" title='param_address_offset' data-ref="337param_address_offset">param_address_offset</a>);</td></tr>
<tr><th id="1253">1253</th><td>  <a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>-&gt;<span class='ref' title='llvm::Value::setName' data-ref="_ZN4llvm5Value7setNameERKNS_5TwineE">setName</span>(<span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col3 ref" href="#333parameter" title='parameter' data-ref="333parameter">parameter</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"untyped"</q>)));</td></tr>
<tr><th id="1254">1254</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a> &amp;&amp;</td></tr>
<tr><th id="1255">1255</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13debug_optionsEv" title='xla::HloModuleConfig::debug_options' data-ref="_ZNK3xla15HloModuleConfig13debug_optionsEv">debug_options</a>()</td></tr>
<tr><th id="1256">1256</th><td>          .<span class='ref' title='xla::DebugOptions::xla_llvm_enable_invariant_load_metadata' data-ref="_ZNK3xla12DebugOptions39xla_llvm_enable_invariant_load_metadataEv">xla_llvm_enable_invariant_load_metadata</span>()) {</td></tr>
<tr><th id="1257">1257</th><td>    <i>// In the entry computation the parameter slots in the %params argument are</i></td></tr>
<tr><th id="1258">1258</th><td><i>    // invariant through program execution.  In computations that are called</i></td></tr>
<tr><th id="1259">1259</th><td><i>    // from the entry computation (via kWhile, kCall and kConditional) the</i></td></tr>
<tr><th id="1260">1260</th><td><i>    // parameter slots are *not* invariant since they're written to by their</i></td></tr>
<tr><th id="1261">1261</th><td><i>    // callers.</i></td></tr>
<tr><th id="1262">1262</th><td>    <a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>-&gt;<span class='ref' title='llvm::Instruction::setMetadata' data-ref="_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE">setMetadata</span>(</td></tr>
<tr><th id="1263">1263</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</span>::<span class='enum' title='llvm::LLVMContext::MD_invariant_load' data-ref="llvm::LLVMContext::MD_invariant_load">MD_invariant_load</span>,</td></tr>
<tr><th id="1264">1264</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::MDNode' data-ref="llvm::MDNode">MDNode</span>::<span class='ref' title='llvm::MDNode::get' data-ref="_ZN4llvm6MDNode3getERNS_11LLVMContextENS_8ArrayRefIPNS_8MetadataEEE">get</span>(<span class='refarg'><a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>-&gt;<span class='ref' title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</span>()</span>, <i>/*MDs=*/</i><span class='ref' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1Ev">{</span>}));</td></tr>
<tr><th id="1265">1265</th><td>  }</td></tr>
<tr><th id="1266">1266</th><td></td></tr>
<tr><th id="1267">1267</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="339param_address_typed" title='param_address_typed' data-type='llvm::Value *' data-ref="339param_address_typed">param_address_typed</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="1268">1268</th><td>      <a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col5 ref" href="#335param_shape" title='param_shape' data-ref="335param_shape">param_shape</a>)-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>());</td></tr>
<tr><th id="1269">1269</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col3 ref" href="#333parameter" title='parameter' data-ref="333parameter">parameter</a>]</a> = <a class="local col9 ref" href="#339param_address_typed" title='param_address_typed' data-ref="339param_address_typed">param_address_typed</a>;</td></tr>
<tr><th id="1270">1270</th><td></td></tr>
<tr><th id="1271">1271</th><td>  <b>if</b> (!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsOpaqueERKNS_5ShapeE" title='xla::ShapeUtil::IsOpaque' data-ref="_ZN3xla9ShapeUtil8IsOpaqueERKNS_5ShapeE">IsOpaque</a>(<a class="local col5 ref" href="#335param_shape" title='param_shape' data-ref="335param_shape">param_shape</a>)) {</td></tr>
<tr><th id="1272">1272</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE" title='xla::cpu::IrEmitter::AttachAlignmentMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE">AttachAlignmentMetadataForLoad</a>(<a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>, <a class="local col5 ref" href="#335param_shape" title='param_shape' data-ref="335param_shape">param_shape</a>);</td></tr>
<tr><th id="1273">1273</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE" title='xla::cpu::IrEmitter::AttachDereferenceableMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstERKNS_5ShapeE">AttachDereferenceableMetadataForLoad</a>(<a class="local col8 ref" href="#338param_address_untyped" title='param_address_untyped' data-ref="338param_address_untyped">param_address_untyped</a>, <a class="local col5 ref" href="#335param_shape" title='param_shape' data-ref="335param_shape">param_shape</a>);</td></tr>
<tr><th id="1274">1274</th><td>  }</td></tr>
<tr><th id="1275">1275</th><td></td></tr>
<tr><th id="1276">1276</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1276, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  emitted value: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col9 ref" href="#339param_address_typed" title='param_address_typed' data-ref="339param_address_typed">param_address_typed</a>);</td></tr>
<tr><th id="1277">1277</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="1278">1278</th><td>}</td></tr>
<tr><th id="1279">1279</th><td></td></tr>
<tr><th id="1280">1280</th><td><i  data-doc="_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE">// Returns true if the relative order of the unreduced dimensions stays the same</i></td></tr>
<tr><th id="1281">1281</th><td><i  data-doc="_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE">// through the reduce operation.</i></td></tr>
<tr><th id="1282">1282</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE" title='xla::cpu::ReductionPreservesLayout' data-type='bool xla::cpu::ReductionPreservesLayout(const xla::HloInstruction &amp; reduce)' data-ref="_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE">ReductionPreservesLayout</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>&amp; <dfn class="local col0 decl" id="340reduce" title='reduce' data-type='const xla::HloInstruction &amp;' data-ref="340reduce">reduce</dfn>) {</td></tr>
<tr><th id="1283">1283</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#283" title="while (false &amp;&amp; ((void)(reduce.opcode()), (void)(HloOpcode::kReduce), 0)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1283)" data-ref="_M/DCHECK_EQ">DCHECK_EQ</a>(<a class="local col0 ref" href="#340reduce" title='reduce' data-ref="340reduce">reduce</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>(), <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kReduce' data-ref="xla::HloOpcode::kReduce">kReduce</a>);</td></tr>
<tr><th id="1284">1284</th><td></td></tr>
<tr><th id="1285">1285</th><td>  <i>// Maps dimensions that were not reduced from their dimension numbers in the</i></td></tr>
<tr><th id="1286">1286</th><td><i>  // source shape to their dimensions numbers in the destination shape.</i></td></tr>
<tr><th id="1287">1287</th><td><i>  //</i></td></tr>
<tr><th id="1288">1288</th><td><i>  // So if we reduce f32[A,B,C,D] on dimensions 1 and 2, this map contains</i></td></tr>
<tr><th id="1289">1289</th><td><i>  // [0-&gt;0, 3-&gt;1].</i></td></tr>
<tr><th id="1290">1290</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/flatmap.h.html#tensorflow::gtl::FlatMap" title='tensorflow::gtl::FlatMap' data-ref="tensorflow::gtl::FlatMap">FlatMap</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <a class="ref fake" href="../../../../core/lib/gtl/flatmap.h.html#_ZN10tensorflow3gtl7FlatMapC1Ev" title='tensorflow::gtl::FlatMap::FlatMap&lt;Key, Val, Hash, Eq&gt;' data-ref="_ZN10tensorflow3gtl7FlatMapC1Ev"></a><dfn class="local col1 decl" id="341unreduced_dim_map" title='unreduced_dim_map' data-type='gtl::FlatMap&lt;int64, int64&gt;' data-ref="341unreduced_dim_map">unreduced_dim_map</dfn>;</td></tr>
<tr><th id="1291">1291</th><td></td></tr>
<tr><th id="1292">1292</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/flatset.h.html#tensorflow::gtl::FlatSet" title='tensorflow::gtl::FlatSet' data-ref="tensorflow::gtl::FlatSet">FlatSet</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col2 decl" id="342reduced_dims" title='reduced_dims' data-type='gtl::FlatSet&lt;int64&gt;' data-ref="342reduced_dims">reduced_dims</dfn><a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZN10tensorflow3gtl7FlatSetC1ET_S2_mRKT0_RKT1_" title='tensorflow::gtl::FlatSet::FlatSet&lt;Key, Hash, Eq&gt;' data-ref="_ZN10tensorflow3gtl7FlatSetC1ET_S2_mRKT0_RKT1_">(</a><a class="local col0 ref" href="#340reduce" title='reduce' data-ref="340reduce">reduce</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10dimensionsEv" title='xla::HloInstruction::dimensions' data-ref="_ZNK3xla14HloInstruction10dimensionsEv">dimensions</a>().<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNKSt6vector5beginEv">begin</a>(),</td></tr>
<tr><th id="1293">1293</th><td>                                   <a class="local col0 ref" href="#340reduce" title='reduce' data-ref="340reduce">reduce</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10dimensionsEv" title='xla::HloInstruction::dimensions' data-ref="_ZNK3xla14HloInstruction10dimensionsEv">dimensions</a>().<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector3endEv" title='std::vector::end' data-ref="_ZNKSt6vector3endEv">end</a>());</td></tr>
<tr><th id="1294">1294</th><td></td></tr>
<tr><th id="1295">1295</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="343operand_shape" title='operand_shape' data-type='const xla::Shape &amp;' data-ref="343operand_shape">operand_shape</dfn> = <a class="local col0 ref" href="#340reduce" title='reduce' data-ref="340reduce">reduce</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="1296">1296</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col4 decl" id="344result_shape" title='result_shape' data-type='const xla::Shape &amp;' data-ref="344result_shape">result_shape</dfn> = <a class="local col0 ref" href="#340reduce" title='reduce' data-ref="340reduce">reduce</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="1297">1297</th><td></td></tr>
<tr><th id="1298">1298</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="345delta" title='delta' data-type='int64' data-ref="345delta">delta</dfn> = <var>0</var>;</td></tr>
<tr><th id="1299">1299</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="346i" title='i' data-type='int64' data-ref="346i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#346i" title='i' data-ref="346i">i</a> &lt; <a class="local col3 ref" href="#343operand_shape" title='operand_shape' data-ref="343operand_shape">operand_shape</a>.<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>(); <a class="local col6 ref" href="#346i" title='i' data-ref="346i">i</a>++) {</td></tr>
<tr><th id="1300">1300</th><td>    <b>if</b> (<a class="local col2 ref" href="#342reduced_dims" title='reduced_dims' data-ref="342reduced_dims">reduced_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet5countERKT_" title='tensorflow::gtl::FlatSet::count' data-ref="_ZNK10tensorflow3gtl7FlatSet5countERKT_">count</a>(<a class="local col6 ref" href="#346i" title='i' data-ref="346i">i</a>)) {</td></tr>
<tr><th id="1301">1301</th><td>      <a class="local col5 ref" href="#345delta" title='delta' data-ref="345delta">delta</a>++;</td></tr>
<tr><th id="1302">1302</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1303">1303</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla11InsertOrDieEPT_RKNS0_10value_type10first_typeERKNS0_10value_type11second_typeE" title='xla::InsertOrDie' data-ref="_ZN3xla11InsertOrDieEPT_RKNS0_10value_type10first_typeERKNS0_10value_type11second_typeE">InsertOrDie</a>(&amp;<a class="local col1 ref" href="#341unreduced_dim_map" title='unreduced_dim_map' data-ref="341unreduced_dim_map">unreduced_dim_map</a>, <a class="local col6 ref" href="#346i" title='i' data-ref="346i">i</a>, <a class="local col6 ref" href="#346i" title='i' data-ref="346i">i</a> - <a class="local col5 ref" href="#345delta" title='delta' data-ref="345delta">delta</a>);</td></tr>
<tr><th id="1304">1304</th><td>    }</td></tr>
<tr><th id="1305">1305</th><td>  }</td></tr>
<tr><th id="1306">1306</th><td></td></tr>
<tr><th id="1307">1307</th><td>  <i>// Iterate dimensions minor to major and check that the corresponding</i></td></tr>
<tr><th id="1308">1308</th><td><i>  // dimensions in the source and target shapes are equivalent.</i></td></tr>
<tr><th id="1309">1309</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="347result_dim_idx" title='result_dim_idx' data-type='int64' data-ref="347result_dim_idx">result_dim_idx</dfn> = <var>0</var>;</td></tr>
<tr><th id="1310">1310</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="348operand_dim_idx" title='operand_dim_idx' data-type='int64' data-ref="348operand_dim_idx">operand_dim_idx</dfn> = <var>0</var>;</td></tr>
<tr><th id="1311">1311</th><td>       <a class="local col8 ref" href="#348operand_dim_idx" title='operand_dim_idx' data-ref="348operand_dim_idx">operand_dim_idx</a> &lt; <a class="local col3 ref" href="#343operand_shape" title='operand_shape' data-ref="343operand_shape">operand_shape</a>.<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>(); <a class="local col8 ref" href="#348operand_dim_idx" title='operand_dim_idx' data-ref="348operand_dim_idx">operand_dim_idx</a>++) {</td></tr>
<tr><th id="1312">1312</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="349operand_dim" title='operand_dim' data-type='int64' data-ref="349operand_dim">operand_dim</dfn> = <a class="local col3 ref" href="#343operand_shape" title='operand_shape' data-ref="343operand_shape">operand_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>().<span class='ref' title='xla::Layout::minor_to_major' data-ref="_ZNK3xla6Layout14minor_to_majorEi">minor_to_major</span>(<a class="local col8 ref" href="#348operand_dim_idx" title='operand_dim_idx' data-ref="348operand_dim_idx">operand_dim_idx</a>);</td></tr>
<tr><th id="1313">1313</th><td>    <b>if</b> (!<a class="local col2 ref" href="#342reduced_dims" title='reduced_dims' data-ref="342reduced_dims">reduced_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet5countERKT_" title='tensorflow::gtl::FlatSet::count' data-ref="_ZNK10tensorflow3gtl7FlatSet5countERKT_">count</a>(<a class="local col9 ref" href="#349operand_dim" title='operand_dim' data-ref="349operand_dim">operand_dim</a>)) {</td></tr>
<tr><th id="1314">1314</th><td>      <b>if</b> (<a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="local col1 ref" href="#341unreduced_dim_map" title='unreduced_dim_map' data-ref="341unreduced_dim_map">unreduced_dim_map</a></span>, <a class="local col9 ref" href="#349operand_dim" title='operand_dim' data-ref="349operand_dim">operand_dim</a>) !=</td></tr>
<tr><th id="1315">1315</th><td>          <a class="local col4 ref" href="#344result_shape" title='result_shape' data-ref="344result_shape">result_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>().<span class='ref' title='xla::Layout::minor_to_major' data-ref="_ZNK3xla6Layout14minor_to_majorEi">minor_to_major</span>(<a class="local col7 ref" href="#347result_dim_idx" title='result_dim_idx' data-ref="347result_dim_idx">result_dim_idx</a>++)) {</td></tr>
<tr><th id="1316">1316</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1317">1317</th><td>      }</td></tr>
<tr><th id="1318">1318</th><td>    }</td></tr>
<tr><th id="1319">1319</th><td>  }</td></tr>
<tr><th id="1320">1320</th><td></td></tr>
<tr><th id="1321">1321</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(result_dim_idx), ::tensorflow::internal::GetReferenceableValue(result_shape.dimensions_size()), &quot;result_dim_idx&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;result_shape.dimensions_size()&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1321) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col7 ref" href="#347result_dim_idx" title='result_dim_idx' data-ref="347result_dim_idx">result_dim_idx</a>, <a class="local col4 ref" href="#344result_shape" title='result_shape' data-ref="344result_shape">result_shape</a>.<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>());</td></tr>
<tr><th id="1322">1322</th><td></td></tr>
<tr><th id="1323">1323</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1324">1324</th><td>}</td></tr>
<tr><th id="1325">1325</th><td></td></tr>
<tr><th id="1326">1326</th><td><a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ReductionGenerator" title='xla::cpu::IrEmitter::ReductionGenerator' data-type='std::function&lt;llvm::Value *(llvm::IRBuilder&lt;&gt; *, llvm::Value *, llvm::Value *)&gt;' data-ref="xla::cpu::IrEmitter::ReductionGenerator">ReductionGenerator</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZNK3xla3cpu9IrEmitter23MatchReductionGeneratorEPNS_14HloComputationEPSs" title='xla::cpu::IrEmitter::MatchReductionGenerator' data-ref="_ZNK3xla3cpu9IrEmitter23MatchReductionGeneratorEPNS_14HloComputationEPSs">MatchReductionGenerator</dfn>(</td></tr>
<tr><th id="1327">1327</th><td>    <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col0 decl" id="350function" title='function' data-type='xla::HloComputation *' data-ref="350function">function</dfn>, <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a>* <dfn class="local col1 decl" id="351failure_reason" title='failure_reason' data-type='string *' data-ref="351failure_reason">failure_reason</dfn>) <em>const</em> {</td></tr>
<tr><th id="1328">1328</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(function-&gt;num_parameters()), ::tensorflow::internal::GetReferenceableValue(2), &quot;function-&gt;num_parameters()&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;2&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1328) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col0 ref" href="#350function" title='function' data-ref="350function">function</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation14num_parametersEv" title='xla::HloComputation::num_parameters' data-ref="_ZNK3xla14HloComputation14num_parametersEv">num_parameters</a>(), <var>2</var>);</td></tr>
<tr><th id="1329">1329</th><td></td></tr>
<tr><th id="1330">1330</th><td>  <em>auto</em> <dfn class="local col2 decl" id="352root_instruction" title='root_instruction' data-type='xla::HloInstruction *' data-ref="352root_instruction">root_instruction</dfn> = <a class="local col0 ref" href="#350function" title='function' data-ref="350function">function</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>();</td></tr>
<tr><th id="1331">1331</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(ShapeUtil::IsScalar(root_instruction-&gt;shape())), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1331) &lt;&lt; &quot;Check failed: &quot; &quot;ShapeUtil::IsScalar(root_instruction-&gt;shape())&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="1332">1332</th><td></td></tr>
<tr><th id="1333">1333</th><td>  <b>if</b> (<a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction13operand_countEv" title='xla::HloInstruction::operand_count' data-ref="_ZNK3xla14HloInstruction13operand_countEv">operand_count</a>() != <var>2</var>) {</td></tr>
<tr><th id="1334">1334</th><td>    *<a class="local col1 ref" href="#351failure_reason" title='failure_reason' data-ref="351failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"root instruction is not a binary operation"</q>;</td></tr>
<tr><th id="1335">1335</th><td>    <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1EDn" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1EDn"></a><b>nullptr</b>;</td></tr>
<tr><th id="1336">1336</th><td>  }</td></tr>
<tr><th id="1337">1337</th><td></td></tr>
<tr><th id="1338">1338</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="353root_shape" title='root_shape' data-type='const xla::Shape &amp;' data-ref="353root_shape">root_shape</dfn> = <a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="1339">1339</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil16ElementIsComplexERKNS_5ShapeE" title='xla::ShapeUtil::ElementIsComplex' data-ref="_ZN3xla9ShapeUtil16ElementIsComplexERKNS_5ShapeE">ElementIsComplex</a>(<a class="local col3 ref" href="#353root_shape" title='root_shape' data-ref="353root_shape">root_shape</a>)) {</td></tr>
<tr><th id="1340">1340</th><td>    <i>// TODO(b/65408531): Complex add could by done via bitcast to &lt;float x [2N]&gt;</i></td></tr>
<tr><th id="1341">1341</th><td><i>    // Complex multiply would be more challenging. We could perhaps use a</i></td></tr>
<tr><th id="1342">1342</th><td><i>    // strided load to get all reals in a vector, all images in a vector, or use</i></td></tr>
<tr><th id="1343">1343</th><td><i>    // CreateShuffleVector on a bitcast to float x [2N].</i></td></tr>
<tr><th id="1344">1344</th><td>    *<a class="local col1 ref" href="#351failure_reason" title='failure_reason' data-ref="351failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"complex values not supported"</q>;</td></tr>
<tr><th id="1345">1345</th><td>    <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1EDn" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1EDn"></a><b>nullptr</b>;</td></tr>
<tr><th id="1346">1346</th><td>  }</td></tr>
<tr><th id="1347">1347</th><td>  <em>bool</em> <dfn class="local col4 decl" id="354root_is_floating_point" title='root_is_floating_point' data-type='bool' data-ref="354root_is_floating_point">root_is_floating_point</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil17ElementIsFloatingERKNS_5ShapeE" title='xla::ShapeUtil::ElementIsFloating' data-ref="_ZN3xla9ShapeUtil17ElementIsFloatingERKNS_5ShapeE">ElementIsFloating</a>(<a class="local col3 ref" href="#353root_shape" title='root_shape' data-ref="353root_shape">root_shape</a>);</td></tr>
<tr><th id="1348">1348</th><td>  <em>bool</em> <dfn class="local col5 decl" id="355root_is_integral" title='root_is_integral' data-type='bool' data-ref="355root_is_integral">root_is_integral</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil17ElementIsIntegralERKNS_5ShapeE" title='xla::ShapeUtil::ElementIsIntegral' data-ref="_ZN3xla9ShapeUtil17ElementIsIntegralERKNS_5ShapeE">ElementIsIntegral</a>(<a class="local col3 ref" href="#353root_shape" title='root_shape' data-ref="353root_shape">root_shape</a>);</td></tr>
<tr><th id="1349">1349</th><td>  <em>bool</em> <dfn class="local col6 decl" id="356root_is_signed" title='root_is_signed' data-type='bool' data-ref="356root_is_signed">root_is_signed</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil15ElementIsSignedERKNS_5ShapeE" title='xla::ShapeUtil::ElementIsSigned' data-ref="_ZN3xla9ShapeUtil15ElementIsSignedERKNS_5ShapeE">ElementIsSigned</a>(<a class="local col3 ref" href="#353root_shape" title='root_shape' data-ref="353root_shape">root_shape</a>);</td></tr>
<tr><th id="1350">1350</th><td></td></tr>
<tr><th id="1351">1351</th><td>  <em>auto</em> <dfn class="local col7 decl" id="357lhs" title='lhs' data-type='const xla::HloInstruction *' data-ref="357lhs">lhs</dfn> = <a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="1352">1352</th><td>  <em>auto</em> <dfn class="local col8 decl" id="358rhs" title='rhs' data-type='const xla::HloInstruction *' data-ref="358rhs">rhs</dfn> = <a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="1353">1353</th><td></td></tr>
<tr><th id="1354">1354</th><td>  <em>auto</em> <dfn class="local col9 decl" id="359param_0" title='param_0' data-type='xla::HloInstruction *' data-ref="359param_0">param_0</dfn> = <a class="local col0 ref" href="#350function" title='function' data-ref="350function">function</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation21parameter_instructionEx" title='xla::HloComputation::parameter_instruction' data-ref="_ZNK3xla14HloComputation21parameter_instructionEx">parameter_instruction</a>(<var>0</var>);</td></tr>
<tr><th id="1355">1355</th><td>  <em>auto</em> <dfn class="local col0 decl" id="360param_1" title='param_1' data-type='xla::HloInstruction *' data-ref="360param_1">param_1</dfn> = <a class="local col0 ref" href="#350function" title='function' data-ref="350function">function</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation21parameter_instructionEx" title='xla::HloComputation::parameter_instruction' data-ref="_ZNK3xla14HloComputation21parameter_instructionEx">parameter_instruction</a>(<var>1</var>);</td></tr>
<tr><th id="1356">1356</th><td>  <b>if</b> (!(<a class="local col7 ref" href="#357lhs" title='lhs' data-ref="357lhs">lhs</a> == <a class="local col9 ref" href="#359param_0" title='param_0' data-ref="359param_0">param_0</a> &amp;&amp; <a class="local col8 ref" href="#358rhs" title='rhs' data-ref="358rhs">rhs</a> == <a class="local col0 ref" href="#360param_1" title='param_1' data-ref="360param_1">param_1</a>) &amp;&amp;</td></tr>
<tr><th id="1357">1357</th><td>      !(<a class="local col8 ref" href="#358rhs" title='rhs' data-ref="358rhs">rhs</a> == <a class="local col9 ref" href="#359param_0" title='param_0' data-ref="359param_0">param_0</a> &amp;&amp; <a class="local col7 ref" href="#357lhs" title='lhs' data-ref="357lhs">lhs</a> == <a class="local col0 ref" href="#360param_1" title='param_1' data-ref="360param_1">param_1</a>)) {</td></tr>
<tr><th id="1358">1358</th><td>    *<a class="local col1 ref" href="#351failure_reason" title='failure_reason' data-ref="351failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a></td></tr>
<tr><th id="1359">1359</th><td>        <q>"root instruction is not a binary operation on the incoming arguments"</q>;</td></tr>
<tr><th id="1360">1360</th><td>    <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1EDn" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1EDn"></a><b>nullptr</b>;</td></tr>
<tr><th id="1361">1361</th><td>  }</td></tr>
<tr><th id="1362">1362</th><td></td></tr>
<tr><th id="1363">1363</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(ShapeUtil::IsScalar(lhs-&gt;shape()) &amp;&amp; ShapeUtil::IsScalar(rhs-&gt;shape())), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1363) &lt;&lt; &quot;Check failed: &quot; &quot;ShapeUtil::IsScalar(lhs-&gt;shape()) &amp;&amp; ShapeUtil::IsScalar(rhs-&gt;shape())&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col7 ref" href="#357lhs" title='lhs' data-ref="357lhs">lhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()) &amp;&amp; <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col8 ref" href="#358rhs" title='rhs' data-ref="358rhs">rhs</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="1364">1364</th><td></td></tr>
<tr><th id="1365">1365</th><td>  <i>// This is visually similar to ElementalIrEmitter, though conceptually we're</i></td></tr>
<tr><th id="1366">1366</th><td><i>  // doing something different here.  ElementalIrEmitter emits scalar operations</i></td></tr>
<tr><th id="1367">1367</th><td><i>  // while these emit scalar or vector operations depending on the type of the</i></td></tr>
<tr><th id="1368">1368</th><td><i>  // operands. See CreateShardedVectorType for the actual types in use here.</i></td></tr>
<tr><th id="1369">1369</th><td>  <b>switch</b> (<a class="local col2 ref" href="#352root_instruction" title='root_instruction' data-ref="352root_instruction">root_instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>()) {</td></tr>
<tr><th id="1370">1370</th><td>    <b>default</b>:</td></tr>
<tr><th id="1371">1371</th><td>      *<a class="local col1 ref" href="#351failure_reason" title='failure_reason' data-ref="351failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"did not recognize root instruction opcode"</q>;</td></tr>
<tr><th id="1372">1372</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1EDn" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1EDn"></a><b>nullptr</b>;</td></tr>
<tr><th id="1373">1373</th><td></td></tr>
<tr><th id="1374">1374</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kAdd' data-ref="xla::HloOpcode::kAdd">kAdd</a>:</td></tr>
<tr><th id="1375">1375</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[root_is_integral](<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col1 decl" id="361ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="361ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="362lhs" title='lhs' data-type='llvm::Value *' data-ref="362lhs">lhs</dfn>,</td></tr>
<tr><th id="1376">1376</th><td>                                <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="363rhs" title='rhs' data-type='llvm::Value *' data-ref="363rhs">rhs</dfn>) {</td></tr>
<tr><th id="1377">1377</th><td>        <b>return</b> <a class="local col5 ref" href="#355root_is_integral" title='root_is_integral' data-ref="355root_is_integral">root_is_integral</a> ? <a class="local col1 ref" href="#361ir_builder" title='ir_builder' data-ref="361ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateAdd' data-ref="_ZN4llvm9IRBuilder9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb">CreateAdd</span>(<a class="local col2 ref" href="#362lhs" title='lhs' data-ref="362lhs">lhs</a>, <a class="local col3 ref" href="#363rhs" title='rhs' data-ref="363rhs">rhs</a>)</td></tr>
<tr><th id="1378">1378</th><td>                                : <a class="local col1 ref" href="#361ir_builder" title='ir_builder' data-ref="361ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateFAdd' data-ref="_ZN4llvm9IRBuilder10CreateFAddEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFAdd</span>(<a class="local col2 ref" href="#362lhs" title='lhs' data-ref="362lhs">lhs</a>, <a class="local col3 ref" href="#363rhs" title='rhs' data-ref="363rhs">rhs</a>);</td></tr>
<tr><th id="1379">1379</th><td>      };</td></tr>
<tr><th id="1380">1380</th><td></td></tr>
<tr><th id="1381">1381</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kMultiply' data-ref="xla::HloOpcode::kMultiply">kMultiply</a>:</td></tr>
<tr><th id="1382">1382</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[root_is_integral](<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col4 decl" id="364ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="364ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="365lhs" title='lhs' data-type='llvm::Value *' data-ref="365lhs">lhs</dfn>,</td></tr>
<tr><th id="1383">1383</th><td>                                <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="366rhs" title='rhs' data-type='llvm::Value *' data-ref="366rhs">rhs</dfn>) {</td></tr>
<tr><th id="1384">1384</th><td>        <b>return</b> <a class="local col5 ref" href="#355root_is_integral" title='root_is_integral' data-ref="355root_is_integral">root_is_integral</a> ? <a class="local col4 ref" href="#364ir_builder" title='ir_builder' data-ref="364ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateMul' data-ref="_ZN4llvm9IRBuilder9CreateMulEPNS_5ValueES2_RKNS_5TwineEbb">CreateMul</span>(<a class="local col5 ref" href="#365lhs" title='lhs' data-ref="365lhs">lhs</a>, <a class="local col6 ref" href="#366rhs" title='rhs' data-ref="366rhs">rhs</a>)</td></tr>
<tr><th id="1385">1385</th><td>                                : <a class="local col4 ref" href="#364ir_builder" title='ir_builder' data-ref="364ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateFMul' data-ref="_ZN4llvm9IRBuilder10CreateFMulEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFMul</span>(<a class="local col5 ref" href="#365lhs" title='lhs' data-ref="365lhs">lhs</a>, <a class="local col6 ref" href="#366rhs" title='rhs' data-ref="366rhs">rhs</a>);</td></tr>
<tr><th id="1386">1386</th><td>      };</td></tr>
<tr><th id="1387">1387</th><td></td></tr>
<tr><th id="1388">1388</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kAnd' data-ref="xla::HloOpcode::kAnd">kAnd</a>:</td></tr>
<tr><th id="1389">1389</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[](<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col7 decl" id="367ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="367ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="368lhs" title='lhs' data-type='llvm::Value *' data-ref="368lhs">lhs</dfn>,</td></tr>
<tr><th id="1390">1390</th><td>                <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="369rhs" title='rhs' data-type='llvm::Value *' data-ref="369rhs">rhs</dfn>) { <b>return</b> <a class="local col7 ref" href="#367ir_builder" title='ir_builder' data-ref="367ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</span>(<a class="local col8 ref" href="#368lhs" title='lhs' data-ref="368lhs">lhs</a>, <a class="local col9 ref" href="#369rhs" title='rhs' data-ref="369rhs">rhs</a>); };</td></tr>
<tr><th id="1391">1391</th><td></td></tr>
<tr><th id="1392">1392</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kOr' data-ref="xla::HloOpcode::kOr">kOr</a>:</td></tr>
<tr><th id="1393">1393</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[](<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col0 decl" id="370ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="370ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="371lhs" title='lhs' data-type='llvm::Value *' data-ref="371lhs">lhs</dfn>,</td></tr>
<tr><th id="1394">1394</th><td>                <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="372rhs" title='rhs' data-type='llvm::Value *' data-ref="372rhs">rhs</dfn>) { <b>return</b> <a class="local col0 ref" href="#370ir_builder" title='ir_builder' data-ref="370ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</span>(<a class="local col1 ref" href="#371lhs" title='lhs' data-ref="371lhs">lhs</a>, <a class="local col2 ref" href="#372rhs" title='rhs' data-ref="372rhs">rhs</a>); };</td></tr>
<tr><th id="1395">1395</th><td></td></tr>
<tr><th id="1396">1396</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kMaximum' data-ref="xla::HloOpcode::kMaximum">kMaximum</a>:</td></tr>
<tr><th id="1397">1397</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[root_is_floating_point, root_is_signed](</td></tr>
<tr><th id="1398">1398</th><td>                 <span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col3 decl" id="373ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="373ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="374lhs" title='lhs' data-type='llvm::Value *' data-ref="374lhs">lhs</dfn>,</td></tr>
<tr><th id="1399">1399</th><td>                 <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="375rhs" title='rhs' data-type='llvm::Value *' data-ref="375rhs">rhs</dfn>) {</td></tr>
<tr><th id="1400">1400</th><td>        <b>if</b> (<a class="local col4 ref" href="#354root_is_floating_point" title='root_is_floating_point' data-ref="354root_is_floating_point">root_is_floating_point</a>) {</td></tr>
<tr><th id="1401">1401</th><td>          <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir19EmitCallToIntrinsicEN4llvm9Intrinsic2IDEN10tensorflow3gtl10ArraySliceIPNS1_5ValueEEENS6_IPNS1_4TypeEEEPNS1_9IRBuilderINS1_14ConstantF8727177" title='xla::llvm_ir::EmitCallToIntrinsic' data-ref="_ZN3xla7llvm_ir19EmitCallToIntrinsicEN4llvm9Intrinsic2IDEN10tensorflow3gtl10ArraySliceIPNS1_5ValueEEENS6_IPNS1_4TypeEEEPNS1_9IRBuilderINS1_14ConstantF8727177">EmitCallToIntrinsic</a>(<span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::maxnum' data-ref="llvm::Intrinsic::ID::maxnum">maxnum</span>,</td></tr>
<tr><th id="1402">1402</th><td>                                              <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col4 ref" href="#374lhs" title='lhs' data-ref="374lhs">lhs</a>, <a class="local col5 ref" href="#375rhs" title='rhs' data-ref="375rhs">rhs</a>}, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col4 ref" href="#374lhs" title='lhs' data-ref="374lhs">lhs</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>()},</td></tr>
<tr><th id="1403">1403</th><td>                                              <a class="local col3 ref" href="#373ir_builder" title='ir_builder' data-ref="373ir_builder">ir_builder</a>);</td></tr>
<tr><th id="1404">1404</th><td>        }</td></tr>
<tr><th id="1405">1405</th><td></td></tr>
<tr><th id="1406">1406</th><td>        <b>return</b> <a class="local col3 ref" href="#373ir_builder" title='ir_builder' data-ref="373ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</span>(</td></tr>
<tr><th id="1407">1407</th><td>            <a class="local col3 ref" href="#373ir_builder" title='ir_builder' data-ref="373ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateICmp' data-ref="_ZN4llvm9IRBuilder10CreateICmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE">CreateICmp</span>(<a class="local col6 ref" href="#356root_is_signed" title='root_is_signed' data-ref="356root_is_signed">root_is_signed</a> ? <span class="namespace">llvm::</span><span class='type' title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</span>::<span class='enum' title='llvm::CmpInst::Predicate::ICMP_SGE' data-ref="llvm::CmpInst::Predicate::ICMP_SGE">ICMP_SGE</span></td></tr>
<tr><th id="1408">1408</th><td>                                                  : <span class="namespace">llvm::</span><span class='type' title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</span>::<span class='enum' title='llvm::CmpInst::Predicate::ICMP_UGE' data-ref="llvm::CmpInst::Predicate::ICMP_UGE">ICMP_UGE</span>,</td></tr>
<tr><th id="1409">1409</th><td>                                   <a class="local col4 ref" href="#374lhs" title='lhs' data-ref="374lhs">lhs</a>, <a class="local col5 ref" href="#375rhs" title='rhs' data-ref="375rhs">rhs</a>),</td></tr>
<tr><th id="1410">1410</th><td>            <a class="local col4 ref" href="#374lhs" title='lhs' data-ref="374lhs">lhs</a>, <a class="local col5 ref" href="#375rhs" title='rhs' data-ref="375rhs">rhs</a>);</td></tr>
<tr><th id="1411">1411</th><td>      };</td></tr>
<tr><th id="1412">1412</th><td></td></tr>
<tr><th id="1413">1413</th><td>    <b>case</b> <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kMinimum' data-ref="xla::HloOpcode::kMinimum">kMinimum</a>:</td></tr>
<tr><th id="1414">1414</th><td>      <b>return</b> <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[root_is_floating_point, root_is_signed](</td></tr>
<tr><th id="1415">1415</th><td>                 <span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col6 decl" id="376ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="376ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="377lhs" title='lhs' data-type='llvm::Value *' data-ref="377lhs">lhs</dfn>,</td></tr>
<tr><th id="1416">1416</th><td>                 <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="378rhs" title='rhs' data-type='llvm::Value *' data-ref="378rhs">rhs</dfn>) {</td></tr>
<tr><th id="1417">1417</th><td>        <b>if</b> (<a class="local col4 ref" href="#354root_is_floating_point" title='root_is_floating_point' data-ref="354root_is_floating_point">root_is_floating_point</a>) {</td></tr>
<tr><th id="1418">1418</th><td>          <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir19EmitCallToIntrinsicEN4llvm9Intrinsic2IDEN10tensorflow3gtl10ArraySliceIPNS1_5ValueEEENS6_IPNS1_4TypeEEEPNS1_9IRBuilderINS1_14ConstantF8727177" title='xla::llvm_ir::EmitCallToIntrinsic' data-ref="_ZN3xla7llvm_ir19EmitCallToIntrinsicEN4llvm9Intrinsic2IDEN10tensorflow3gtl10ArraySliceIPNS1_5ValueEEENS6_IPNS1_4TypeEEEPNS1_9IRBuilderINS1_14ConstantF8727177">EmitCallToIntrinsic</a>(<span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::minnum' data-ref="llvm::Intrinsic::ID::minnum">minnum</span>,</td></tr>
<tr><th id="1419">1419</th><td>                                              <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col7 ref" href="#377lhs" title='lhs' data-ref="377lhs">lhs</a>, <a class="local col8 ref" href="#378rhs" title='rhs' data-ref="378rhs">rhs</a>}, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col7 ref" href="#377lhs" title='lhs' data-ref="377lhs">lhs</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>()},</td></tr>
<tr><th id="1420">1420</th><td>                                              <a class="local col6 ref" href="#376ir_builder" title='ir_builder' data-ref="376ir_builder">ir_builder</a>);</td></tr>
<tr><th id="1421">1421</th><td>        }</td></tr>
<tr><th id="1422">1422</th><td></td></tr>
<tr><th id="1423">1423</th><td>        <b>return</b> <a class="local col6 ref" href="#376ir_builder" title='ir_builder' data-ref="376ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</span>(</td></tr>
<tr><th id="1424">1424</th><td>            <a class="local col6 ref" href="#376ir_builder" title='ir_builder' data-ref="376ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateICmp' data-ref="_ZN4llvm9IRBuilder10CreateICmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE">CreateICmp</span>(<a class="local col6 ref" href="#356root_is_signed" title='root_is_signed' data-ref="356root_is_signed">root_is_signed</a> ? <span class="namespace">llvm::</span><span class='type' title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</span>::<span class='enum' title='llvm::CmpInst::Predicate::ICMP_SLE' data-ref="llvm::CmpInst::Predicate::ICMP_SLE">ICMP_SLE</span></td></tr>
<tr><th id="1425">1425</th><td>                                                  : <span class="namespace">llvm::</span><span class='type' title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</span>::<span class='enum' title='llvm::CmpInst::Predicate::ICMP_ULE' data-ref="llvm::CmpInst::Predicate::ICMP_ULE">ICMP_ULE</span>,</td></tr>
<tr><th id="1426">1426</th><td>                                   <a class="local col7 ref" href="#377lhs" title='lhs' data-ref="377lhs">lhs</a>, <a class="local col8 ref" href="#378rhs" title='rhs' data-ref="378rhs">rhs</a>),</td></tr>
<tr><th id="1427">1427</th><td>            <a class="local col7 ref" href="#377lhs" title='lhs' data-ref="377lhs">lhs</a>, <a class="local col8 ref" href="#378rhs" title='rhs' data-ref="378rhs">rhs</a>);</td></tr>
<tr><th id="1428">1428</th><td>      };</td></tr>
<tr><th id="1429">1429</th><td>  }</td></tr>
<tr><th id="1430">1430</th><td>}</td></tr>
<tr><th id="1431">1431</th><td></td></tr>
<tr><th id="1432">1432</th><td><a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVectorType" title='xla::cpu::IrEmitter::ShardedVectorType' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVectorType">ShardedVectorType</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj" title='xla::cpu::IrEmitter::CreateShardedVectorType' data-ref="_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj">CreateShardedVectorType</dfn>(</td></tr>
<tr><th id="1433">1433</th><td>    <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col9 decl" id="379element_type" title='element_type' data-type='xla::PrimitiveType' data-ref="379element_type">element_type</dfn>, <em>unsigned</em> <dfn class="local col0 decl" id="380element_count" title='element_count' data-type='unsigned int' data-ref="380element_count">element_count</dfn>) {</td></tr>
<tr><th id="1434">1434</th><td>  <em>int</em> <dfn class="local col1 decl" id="381vector_register_size_in_elements" title='vector_register_size_in_elements' data-type='int' data-ref="381vector_register_size_in_elements">vector_register_size_in_elements</dfn> =</td></tr>
<tr><th id="1435">1435</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a>.<a class="ref" href="target_machine_features.h.html#_ZNK3xla3cpu21TargetMachineFeatures25vector_register_byte_sizeERKN4llvm8FunctionE" title='xla::cpu::TargetMachineFeatures::vector_register_byte_size' data-ref="_ZNK3xla3cpu21TargetMachineFeatures25vector_register_byte_sizeERKN4llvm8FunctionE">vector_register_byte_size</a>(</td></tr>
<tr><th id="1436">1436</th><td>          *<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction8functionEv" title='xla::cpu::IrFunction::function' data-ref="_ZN3xla3cpu10IrFunction8functionEv">function</a>()) /</td></tr>
<tr><th id="1437">1437</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col9 ref" href="#379element_type" title='element_type' data-ref="379element_type">element_type</a>);</td></tr>
<tr><th id="1438">1438</th><td></td></tr>
<tr><th id="1439">1439</th><td>  <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVectorType" title='xla::cpu::IrEmitter::ShardedVectorType' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVectorType">ShardedVectorType</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col2 decl" id="382sharded_vector_type" title='sharded_vector_type' data-type='ShardedVectorType' data-ref="382sharded_vector_type">sharded_vector_type</dfn>;</td></tr>
<tr><th id="1440">1440</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col3 decl" id="383element_ir_type" title='element_ir_type' data-type='llvm::Type *' data-ref="383element_ir_type">element_ir_type</dfn> =</td></tr>
<tr><th id="1441">1441</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col9 ref" href="#379element_type" title='element_type' data-ref="379element_type">element_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="1442">1442</th><td></td></tr>
<tr><th id="1443">1443</th><td>  <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="384i" title='i' data-type='int' data-ref="384i">i</dfn> = <var>0</var>, <dfn class="local col5 decl" id="385e" title='e' data-type='int' data-ref="385e">e</dfn> = <var>1</var> + <span class="namespace">tensorflow::</span><a class="ref" href="../../../../core/lib/core/bits.h.html#_ZN10tensorflow11Log2CeilingEj" title='tensorflow::Log2Ceiling' data-ref="_ZN10tensorflow11Log2CeilingEj">Log2Ceiling</a>(<a class="local col0 ref" href="#380element_count" title='element_count' data-ref="380element_count">element_count</a>); <a class="local col4 ref" href="#384i" title='i' data-ref="384i">i</a> &lt; <a class="local col5 ref" href="#385e" title='e' data-ref="385e">e</a>; <a class="local col4 ref" href="#384i" title='i' data-ref="384i">i</a>++) {</td></tr>
<tr><th id="1444">1444</th><td>    <i>// For every power of two present in element_count, we generate one or more</i></td></tr>
<tr><th id="1445">1445</th><td><i>    // vector or scalar types.</i></td></tr>
<tr><th id="1446">1446</th><td>    <em>const</em> <em>unsigned</em> <dfn class="local col6 decl" id="386current_size_fragment" title='current_size_fragment' data-type='const unsigned int' data-ref="386current_size_fragment">current_size_fragment</dfn> = <var>1u</var> &lt;&lt; <a class="local col4 ref" href="#384i" title='i' data-ref="384i">i</a>;</td></tr>
<tr><th id="1447">1447</th><td>    <b>if</b> (!(<a class="local col0 ref" href="#380element_count" title='element_count' data-ref="380element_count">element_count</a> &amp; <a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a>)) {</td></tr>
<tr><th id="1448">1448</th><td>      <i>// Power of two not present in element_count.</i></td></tr>
<tr><th id="1449">1449</th><td>      <b>continue</b>;</td></tr>
<tr><th id="1450">1450</th><td>    }</td></tr>
<tr><th id="1451">1451</th><td></td></tr>
<tr><th id="1452">1452</th><td>    <b>if</b> (<a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a> == <var>1</var>) {</td></tr>
<tr><th id="1453">1453</th><td>      <i>// Single element, use a scalar type.</i></td></tr>
<tr><th id="1454">1454</th><td>      <a class="local col2 ref" href="#382sharded_vector_type" title='sharded_vector_type' data-ref="382sharded_vector_type">sharded_vector_type</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col3 ref" href="#383element_ir_type" title='element_ir_type' data-ref="383element_ir_type">element_ir_type</a>);</td></tr>
<tr><th id="1455">1455</th><td>      <b>continue</b>;</td></tr>
<tr><th id="1456">1456</th><td>    }</td></tr>
<tr><th id="1457">1457</th><td></td></tr>
<tr><th id="1458">1458</th><td>    <i>// Lower "current_size_fragment" number of elements using (as few as</i></td></tr>
<tr><th id="1459">1459</th><td><i>    // possible) vector registers.</i></td></tr>
<tr><th id="1460">1460</th><td></td></tr>
<tr><th id="1461">1461</th><td>    <b>if</b> (<a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a> &gt;= <a class="local col1 ref" href="#381vector_register_size_in_elements" title='vector_register_size_in_elements' data-ref="381vector_register_size_in_elements">vector_register_size_in_elements</a>) {</td></tr>
<tr><th id="1462">1462</th><td>      <em>auto</em> <dfn class="local col7 decl" id="387vector_type" title='vector_type' data-type='llvm::VectorType *' data-ref="387vector_type">vector_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</span>::<span class='ref' title='llvm::VectorType::get' data-ref="_ZN4llvm10VectorType3getEPNS_4TypeEj">get</span>(</td></tr>
<tr><th id="1463">1463</th><td>          <a class="local col3 ref" href="#383element_ir_type" title='element_ir_type' data-ref="383element_ir_type">element_ir_type</a>, <a class="local col1 ref" href="#381vector_register_size_in_elements" title='vector_register_size_in_elements' data-ref="381vector_register_size_in_elements">vector_register_size_in_elements</a>);</td></tr>
<tr><th id="1464">1464</th><td>      <a class="local col2 ref" href="#382sharded_vector_type" title='sharded_vector_type' data-ref="382sharded_vector_type">sharded_vector_type</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector6insertEN9__gnu_cxx17__normal_iteratorINS0_14__alloc_traitsINSt12_Vector_baseIT_T0_E14_Tp_alloc_typeEE13const_pointerESt6vectorIS4_S5_EEEmRKS4_" title='std::vector::insert' data-ref="_ZNSt6vector6insertEN9__gnu_cxx17__normal_iteratorINS0_14__alloc_traitsINSt12_Vector_baseIT_T0_E14_Tp_alloc_typeEE13const_pointerESt6vectorIS4_S5_EEEmRKS4_">insert</a>(</td></tr>
<tr><th id="1465">1465</th><td>          <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}" title='__gnu_cxx::__normal_iterator::__normal_iterator&lt;_Iterator, _Container&gt;' data-ref="__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}"></a><a class="local col2 ref" href="#382sharded_vector_type" title='sharded_vector_type' data-ref="382sharded_vector_type">sharded_vector_type</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>(),</td></tr>
<tr><th id="1466">1466</th><td>          <a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a> / <a class="local col1 ref" href="#381vector_register_size_in_elements" title='vector_register_size_in_elements' data-ref="381vector_register_size_in_elements">vector_register_size_in_elements</a>,</td></tr>
<tr><th id="1467">1467</th><td>          <a class="local col7 ref" href="#387vector_type" title='vector_type' data-ref="387vector_type">vector_type</a>);</td></tr>
<tr><th id="1468">1468</th><td></td></tr>
<tr><th id="1469">1469</th><td>      <i>// Both current_size_fragment and vector_register_size_in_elements are</i></td></tr>
<tr><th id="1470">1470</th><td><i>      // powers of two.</i></td></tr>
<tr><th id="1471">1471</th><td>      <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(current_size_fragment % vector_register_size_in_elements), ::tensorflow::internal::GetReferenceableValue(0), &quot;current_size_fragment % vector_register_size_in_elements&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;0&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1471) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a> % <a class="local col1 ref" href="#381vector_register_size_in_elements" title='vector_register_size_in_elements' data-ref="381vector_register_size_in_elements">vector_register_size_in_elements</a>, <var>0</var>);</td></tr>
<tr><th id="1472">1472</th><td>      <b>continue</b>;</td></tr>
<tr><th id="1473">1473</th><td>    }</td></tr>
<tr><th id="1474">1474</th><td></td></tr>
<tr><th id="1475">1475</th><td>    <i>// For now we assume that vector_register_size_in_elements and lower powers</i></td></tr>
<tr><th id="1476">1476</th><td><i>    // of two are all legal vector sizes (or at least can be lowered easily by</i></td></tr>
<tr><th id="1477">1477</th><td><i>    // LLVM).</i></td></tr>
<tr><th id="1478">1478</th><td>    <a class="local col2 ref" href="#382sharded_vector_type" title='sharded_vector_type' data-ref="382sharded_vector_type">sharded_vector_type</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(</td></tr>
<tr><th id="1479">1479</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</span>::<span class='ref' title='llvm::VectorType::get' data-ref="_ZN4llvm10VectorType3getEPNS_4TypeEj">get</span>(<a class="local col3 ref" href="#383element_ir_type" title='element_ir_type' data-ref="383element_ir_type">element_ir_type</a>, <a class="local col6 ref" href="#386current_size_fragment" title='current_size_fragment' data-ref="386current_size_fragment">current_size_fragment</a>));</td></tr>
<tr><th id="1480">1480</th><td>  }</td></tr>
<tr><th id="1481">1481</th><td>  <b>return</b> <a class="local col2 ref" href="#382sharded_vector_type" title='sharded_vector_type' data-ref="382sharded_vector_type">sharded_vector_type</a>;</td></tr>
<tr><th id="1482">1482</th><td>}</td></tr>
<tr><th id="1483">1483</th><td></td></tr>
<tr><th id="1484">1484</th><td><a class="type" href="../../statusor.h.html#xla::StatusOr" title='xla::StatusOr' data-ref="xla::StatusOr">StatusOr</a>&lt;<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVector" title='xla::cpu::IrEmitter::ShardedVector' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVector">ShardedVector</a>&gt;</td></tr>
<tr><th id="1485">1485</th><td><a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630" title='xla::cpu::IrEmitter::EmitInnerLoopForVectorizedReduction' data-ref="_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630">EmitInnerLoopForVectorizedReduction</dfn>(</td></tr>
<tr><th id="1486">1486</th><td>    <em>const</em> <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ReductionGenerator" title='xla::cpu::IrEmitter::ReductionGenerator' data-type='std::function&lt;llvm::Value *(llvm::IRBuilder&lt;&gt; *, llvm::Value *, llvm::Value *)&gt;' data-ref="xla::cpu::IrEmitter::ReductionGenerator">ReductionGenerator</a>&amp; <dfn class="local col8 decl" id="388reduction_generator" title='reduction_generator' data-type='const ReductionGenerator &amp;' data-ref="388reduction_generator">reduction_generator</dfn>,</td></tr>
<tr><th id="1487">1487</th><td>    <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col9 decl" id="389output_index" title='output_index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="389output_index">output_index</dfn>,</td></tr>
<tr><th id="1488">1488</th><td>    <em>const</em> <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVectorType" title='xla::cpu::IrEmitter::ShardedVectorType' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVectorType">ShardedVectorType</a>&amp; <dfn class="local col0 decl" id="390accumulator_type" title='accumulator_type' data-type='const ShardedVectorType &amp;' data-ref="390accumulator_type">accumulator_type</dfn>, <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="391init_value" title='init_value' data-type='xla::HloInstruction *' data-ref="391init_value">init_value</dfn>,</td></tr>
<tr><th id="1489">1489</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="392arg" title='arg' data-type='xla::HloInstruction *' data-ref="392arg">arg</dfn>, <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col3 decl" id="393dimensions" title='dimensions' data-type='gtl::ArraySlice&lt;int64&gt;' data-ref="393dimensions">dimensions</dfn>,</td></tr>
<tr><th id="1490">1490</th><td>    <em>unsigned</em> <dfn class="local col4 decl" id="394element_alignment" title='element_alignment' data-type='unsigned int' data-ref="394element_alignment">element_alignment</dfn>) {</td></tr>
<tr><th id="1491">1491</th><td>  <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVector" title='xla::cpu::IrEmitter::ShardedVector' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVector">ShardedVector</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col5 decl" id="395accumulator" title='accumulator' data-type='ShardedVector' data-ref="395accumulator">accumulator</dfn>;</td></tr>
<tr><th id="1492">1492</th><td>  <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector7reserveEm" title='std::vector::reserve' data-ref="_ZNSt6vector7reserveEm">reserve</a>(<a class="local col0 ref" href="#390accumulator_type" title='accumulator_type' data-ref="390accumulator_type">accumulator_type</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="1493">1493</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col6 decl" id="396accumulator_shard_type" title='accumulator_shard_type' data-type='llvm::Type *' data-ref="396accumulator_shard_type">accumulator_shard_type</dfn> : <a class="local col0 ref" href="#390accumulator_type" title='accumulator_type' data-ref="390accumulator_type">accumulator_type</a>) {</td></tr>
<tr><th id="1494">1494</th><td>    <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="1495">1495</th><td>        <a class="local col6 ref" href="#396accumulator_shard_type" title='accumulator_shard_type' data-ref="396accumulator_shard_type">accumulator_shard_type</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"accumulator"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <var>0</var>));</td></tr>
<tr><th id="1496">1496</th><td>  }</td></tr>
<tr><th id="1497">1497</th><td></td></tr>
<tr><th id="1498">1498</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="397init_value_ssa" title='init_value_ssa' data-type='llvm::Value *' data-ref="397init_value_ssa">init_value_ssa</dfn> =</td></tr>
<tr><th id="1499">1499</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col1 ref" href="#391init_value" title='init_value' data-ref="391init_value">init_value</a>));</td></tr>
<tr><th id="1500">1500</th><td></td></tr>
<tr><th id="1501">1501</th><td>  <b>for</b> (<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="398accumulator_shard" title='accumulator_shard' data-type='llvm::Value *' data-ref="398accumulator_shard">accumulator_shard</dfn> : <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>) {</td></tr>
<tr><th id="1502">1502</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="399initial_value" title='initial_value' data-type='llvm::Value *' data-ref="399initial_value">initial_value</dfn>;</td></tr>
<tr><th id="1503">1503</th><td>    <em>auto</em> <dfn class="local col0 decl" id="400shard_type" title='shard_type' data-type='llvm::Type *' data-ref="400shard_type">shard_type</dfn> = <a class="local col8 ref" href="#398accumulator_shard" title='accumulator_shard' data-ref="398accumulator_shard">accumulator_shard</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>()-&gt;<span class='ref' title='llvm::Type::getPointerElementType' data-ref="_ZNK4llvm4Type21getPointerElementTypeEv">getPointerElementType</span>();</td></tr>
<tr><th id="1504">1504</th><td>    <b>if</b> (<em>auto</em> <dfn class="local col1 decl" id="401vector_type" title='vector_type' data-type='llvm::VectorType *' data-ref="401vector_type"><a class="local col1 ref" href="#401vector_type" title='vector_type' data-ref="401vector_type">vector_type</a></dfn> = <span class="namespace">llvm::</span><span class='ref' title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</span>&gt;(<a class="local col0 ref" href="#400shard_type" title='shard_type' data-ref="400shard_type">shard_type</a>)) {</td></tr>
<tr><th id="1505">1505</th><td>      <a class="local col9 ref" href="#399initial_value" title='initial_value' data-ref="399initial_value">initial_value</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateVectorSplat' data-ref="_ZN4llvm9IRBuilder17CreateVectorSplatEjPNS_5ValueERKNS_5TwineE">CreateVectorSplat</span>(</td></tr>
<tr><th id="1506">1506</th><td>          <a class="local col1 ref" href="#401vector_type" title='vector_type' data-ref="401vector_type">vector_type</a>-&gt;<span class='ref' title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</span>(), <a class="local col7 ref" href="#397init_value_ssa" title='init_value_ssa' data-ref="397init_value_ssa">init_value_ssa</a>);</td></tr>
<tr><th id="1507">1507</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1508">1508</th><td>      <a class="local col9 ref" href="#399initial_value" title='initial_value' data-ref="399initial_value">initial_value</a> = <a class="local col7 ref" href="#397init_value_ssa" title='init_value_ssa' data-ref="397init_value_ssa">init_value_ssa</a>;</td></tr>
<tr><th id="1509">1509</th><td>    }</td></tr>
<tr><th id="1510">1510</th><td></td></tr>
<tr><th id="1511">1511</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</span>(<a class="local col9 ref" href="#399initial_value" title='initial_value' data-ref="399initial_value">initial_value</a>, <a class="local col8 ref" href="#398accumulator_shard" title='accumulator_shard' data-ref="398accumulator_shard">accumulator_shard</a>,</td></tr>
<tr><th id="1512">1512</th><td>                                   <a class="local col4 ref" href="#394element_alignment" title='element_alignment' data-ref="394element_alignment">element_alignment</a>);</td></tr>
<tr><th id="1513">1513</th><td>  }</td></tr>
<tr><th id="1514">1514</th><td></td></tr>
<tr><th id="1515">1515</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col2 decl" id="402reduction_loop_nest" title='reduction_loop_nest' data-type='llvm_ir::ForLoopNest' data-ref="402reduction_loop_nest">reduction_loop_nest</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col2 ref" href="#392arg" title='arg' data-ref="392arg">arg</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"vectorized_inner"</q>),</td></tr>
<tr><th id="1516">1516</th><td>                                           &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1517">1517</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col3 decl" id="403reduced_dims_index" title='reduced_dims_index' data-type='llvm_ir::IrArray::Index' data-ref="403reduced_dims_index">reduced_dims_index</dfn> =</td></tr>
<tr><th id="1518">1518</th><td>      <a class="local col2 ref" href="#402reduction_loop_nest" title='reduction_loop_nest' data-ref="402reduction_loop_nest">reduction_loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShapeOnDimensions' data-ref="_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE">AddLoopsForShapeOnDimensions</a>(<a class="local col2 ref" href="#392arg" title='arg' data-ref="392arg">arg</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;long long&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIxEC1ERKS2_"></a><a class="local col3 ref" href="#393dimensions" title='dimensions' data-ref="393dimensions">dimensions</a>,</td></tr>
<tr><th id="1519">1519</th><td>                                                       <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"reduction_dim"</q>);</td></tr>
<tr><th id="1520">1520</th><td></td></tr>
<tr><th id="1521">1521</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col2 ref" href="#402reduction_loop_nest" title='reduction_loop_nest' data-ref="402reduction_loop_nest">reduction_loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(),</td></tr>
<tr><th id="1522">1522</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1523">1523</th><td></td></tr>
<tr><th id="1524">1524</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col4 decl" id="404arg_array" title='arg_array' data-type='llvm_ir::IrArray' data-ref="404arg_array">arg_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#392arg" title='arg' data-ref="392arg">arg</a>));</td></tr>
<tr><th id="1525">1525</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col5 decl" id="405input_index" title='input_index' data-type='llvm_ir::IrArray::Index' data-ref="405input_index">input_index</dfn> = <a class="ref fake" href="../llvm_ir/ir_array.h.html#54" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1ERKS2_"></a><a class="local col3 ref" href="#403reduced_dims_index" title='reduced_dims_index' data-ref="403reduced_dims_index">reduced_dims_index</a>;</td></tr>
<tr><th id="1526">1526</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>::<a class="typedef" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index::const_iterator" title='xla::llvm_ir::IrArray::Index::const_iterator' data-type='std::vector&lt;llvm::Value *&gt;::const_iterator' data-ref="xla::llvm_ir::IrArray::Index::const_iterator">const_iterator</a> <dfn class="local col6 decl" id="406it" title='it' data-type='llvm_ir::IrArray::Index::const_iterator' data-ref="406it">it</dfn> = <a class="local col9 ref" href="#389output_index" title='output_index' data-ref="389output_index">output_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index5beginEv" title='xla::llvm_ir::IrArray::Index::begin' data-ref="_ZNK3xla7llvm_ir7IrArray5Index5beginEv">begin</a>();</td></tr>
<tr><th id="1527">1527</th><td></td></tr>
<tr><th id="1528">1528</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col7 decl" id="407i" title='i' data-type='size_t' data-ref="407i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#407i" title='i' data-ref="407i">i</a> &lt; <a class="local col5 ref" href="#405input_index" title='input_index' data-ref="405input_index">input_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(); ++<a class="local col7 ref" href="#407i" title='i' data-ref="407i">i</a>) {</td></tr>
<tr><th id="1529">1529</th><td>    <b>if</b> (<a class="local col5 ref" href="#405input_index" title='input_index' data-ref="405input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#407i" title='i' data-ref="407i">i</a>]</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="1530">1530</th><td>      <a class="local col5 ref" href="#405input_index" title='input_index' data-ref="405input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#407i" title='i' data-ref="407i">i</a>]</a> = <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col6 ref" href="#406it" title='it' data-ref="406it">it</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a>;</td></tr>
<tr><th id="1531">1531</th><td>    }</td></tr>
<tr><th id="1532">1532</th><td>  }</td></tr>
<tr><th id="1533">1533</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(output_index.end() == it), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1533) &lt;&lt; &quot;Check failed: &quot; &quot;output_index.end() == it&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="local col9 ref" href="#389output_index" title='output_index' data-ref="389output_index">output_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index3endEv" title='xla::llvm_ir::IrArray::Index::end' data-ref="_ZNK3xla7llvm_ir7IrArray5Index3endEv">end</a>() <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::operator==" title='__gnu_cxx::operator==' data-ref="__gnu_cxx::operator==">==</a> <a class="local col6 ref" href="#406it" title='it' data-ref="406it">it</a>);</td></tr>
<tr><th id="1534">1534</th><td></td></tr>
<tr><th id="1535">1535</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="408input_address" title='input_address' data-type='llvm::Value *' data-ref="408input_address">input_address</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="1536">1536</th><td>      <a class="local col4 ref" href="#404arg_array" title='arg_array' data-ref="404arg_array">arg_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col5 ref" href="#405input_index" title='input_index' data-ref="405input_index">input_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>),</td></tr>
<tr><th id="1537">1537</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8PtrTy' data-ref="_ZN4llvm13IRBuilderBase12getInt8PtrTyEj">getInt8PtrTy</span>());</td></tr>
<tr><th id="1538">1538</th><td></td></tr>
<tr><th id="1539">1539</th><td>  <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="409i" title='i' data-type='int' data-ref="409i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a> &lt; <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>(); <a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a>++) {</td></tr>
<tr><th id="1540">1540</th><td>    <em>auto</em> <dfn class="local col0 decl" id="410input_address_typed" title='input_address_typed' data-type='llvm::Value *' data-ref="410input_address_typed">input_address_typed</dfn> =</td></tr>
<tr><th id="1541">1541</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col8 ref" href="#408input_address" title='input_address' data-ref="408input_address">input_address</a>, <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a>]</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>());</td></tr>
<tr><th id="1542">1542</th><td>    <em>auto</em> <dfn class="local col1 decl" id="411current_accumulator_value" title='current_accumulator_value' data-type='llvm::LoadInst *' data-ref="411current_accumulator_value">current_accumulator_value</dfn> =</td></tr>
<tr><th id="1543">1543</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</span>(<a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a>]</a>, <a class="local col4 ref" href="#394element_alignment" title='element_alignment' data-ref="394element_alignment">element_alignment</a>);</td></tr>
<tr><th id="1544">1544</th><td>    <em>auto</em> <dfn class="local col2 decl" id="412addend" title='addend' data-type='llvm::LoadInst *' data-ref="412addend">addend</dfn> =</td></tr>
<tr><th id="1545">1545</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</span>(<a class="local col0 ref" href="#410input_address_typed" title='input_address_typed' data-ref="410input_address_typed">input_address_typed</a>, <a class="local col4 ref" href="#394element_alignment" title='element_alignment' data-ref="394element_alignment">element_alignment</a>);</td></tr>
<tr><th id="1546">1546</th><td>    <a class="local col4 ref" href="#404arg_array" title='arg_array' data-ref="404arg_array">arg_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE" title='xla::llvm_ir::IrArray::AnnotateLoadStoreInstructionWithMetadata' data-ref="_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE">AnnotateLoadStoreInstructionWithMetadata</a>(<a class="local col2 ref" href="#412addend" title='addend' data-ref="412addend">addend</a>);</td></tr>
<tr><th id="1547">1547</th><td></td></tr>
<tr><th id="1548">1548</th><td>    <em>auto</em> <dfn class="local col3 decl" id="413reduced_result" title='reduced_result' data-type='llvm::Value *' data-ref="413reduced_result">reduced_result</dfn> =</td></tr>
<tr><th id="1549">1549</th><td>        <a class="local col8 ref" href="#388reduction_generator" title='reduction_generator' data-ref="388reduction_generator">reduction_generator</a><a class="ref" href="../../../../../../include/c++/5/functional.html#_ZNKSt8functionIFT_DpT0_EEclES2_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNKSt8functionIFT_DpT0_EEclES2_">(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="local col1 ref" href="#411current_accumulator_value" title='current_accumulator_value' data-ref="411current_accumulator_value">current_accumulator_value</a>, <a class="local col2 ref" href="#412addend" title='addend' data-ref="412addend">addend</a>)</a>;</td></tr>
<tr><th id="1550">1550</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</span>(<a class="local col3 ref" href="#413reduced_result" title='reduced_result' data-ref="413reduced_result">reduced_result</a>, <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a>]</a>,</td></tr>
<tr><th id="1551">1551</th><td>                                   <a class="local col4 ref" href="#394element_alignment" title='element_alignment' data-ref="394element_alignment">element_alignment</a>);</td></tr>
<tr><th id="1552">1552</th><td></td></tr>
<tr><th id="1553">1553</th><td>    <b>if</b> (<a class="local col9 ref" href="#409i" title='i' data-ref="409i">i</a> != (<a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>() - <var>1</var>)) {</td></tr>
<tr><th id="1554">1554</th><td>      <a class="local col8 ref" href="#408input_address" title='input_address' data-ref="408input_address">input_address</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateConstInBoundsGEP1_32' data-ref="_ZN4llvm9IRBuilder26CreateConstInBoundsGEP1_32EPNS_4TypeEPNS_5ValueEjRKNS_5TwineE">CreateConstInBoundsGEP1_32</span>(</td></tr>
<tr><th id="1555">1555</th><td>          <a class="local col3 ref" href="#413reduced_result" title='reduced_result' data-ref="413reduced_result">reduced_result</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>(), <a class="local col0 ref" href="#410input_address_typed" title='input_address_typed' data-ref="410input_address_typed">input_address_typed</a>, <var>1</var>);</td></tr>
<tr><th id="1556">1556</th><td>    }</td></tr>
<tr><th id="1557">1557</th><td>  }</td></tr>
<tr><th id="1558">1558</th><td></td></tr>
<tr><th id="1559">1559</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col2 ref" href="#402reduction_loop_nest" title='reduction_loop_nest' data-ref="402reduction_loop_nest">reduction_loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(),</td></tr>
<tr><th id="1560">1560</th><td>                        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1561">1561</th><td></td></tr>
<tr><th id="1562">1562</th><td>  <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVector" title='xla::cpu::IrEmitter::ShardedVector' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVector">ShardedVector</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col4 decl" id="414result_ssa" title='result_ssa' data-type='ShardedVector' data-ref="414result_ssa">result_ssa</dfn>;</td></tr>
<tr><th id="1563">1563</th><td>  <a class="local col4 ref" href="#414result_ssa" title='result_ssa' data-ref="414result_ssa">result_ssa</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector7reserveEm" title='std::vector::reserve' data-ref="_ZNSt6vector7reserveEm">reserve</a>(<a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="1564">1564</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="415accumulator_shard" title='accumulator_shard' data-type='llvm::Value *' data-ref="415accumulator_shard">accumulator_shard</dfn> : <a class="local col5 ref" href="#395accumulator" title='accumulator' data-ref="395accumulator">accumulator</a>) {</td></tr>
<tr><th id="1565">1565</th><td>    <a class="local col4 ref" href="#414result_ssa" title='result_ssa' data-ref="414result_ssa">result_ssa</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(</td></tr>
<tr><th id="1566">1566</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</span>(<a class="local col5 ref" href="#415accumulator_shard" title='accumulator_shard' data-ref="415accumulator_shard">accumulator_shard</a>, <a class="local col4 ref" href="#394element_alignment" title='element_alignment' data-ref="394element_alignment">element_alignment</a>));</td></tr>
<tr><th id="1567">1567</th><td>  }</td></tr>
<tr><th id="1568">1568</th><td>  <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1ERKT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1ERKT_"></a><a class="local col4 ref" href="#414result_ssa" title='result_ssa' data-ref="414result_ssa">result_ssa</a>;</td></tr>
<tr><th id="1569">1569</th><td>}</td></tr>
<tr><th id="1570">1570</th><td></td></tr>
<tr><th id="1571">1571</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE" title='xla::cpu::IrEmitter::EmitShardedVectorStore' data-ref="_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE">EmitShardedVectorStore</dfn>(</td></tr>
<tr><th id="1572">1572</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="416store_address" title='store_address' data-type='llvm::Value *' data-ref="416store_address">store_address</dfn>, <em>const</em> <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;&amp; <dfn class="local col7 decl" id="417value_to_store" title='value_to_store' data-type='const std::vector&lt;llvm::Value *&gt; &amp;' data-ref="417value_to_store">value_to_store</dfn>,</td></tr>
<tr><th id="1573">1573</th><td>    <em>const</em> <em>int</em> <dfn class="local col8 decl" id="418alignment" title='alignment' data-type='const int' data-ref="418alignment">alignment</dfn>, <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&amp; <dfn class="local col9 decl" id="419containing_array" title='containing_array' data-type='const llvm_ir::IrArray &amp;' data-ref="419containing_array">containing_array</dfn>) {</td></tr>
<tr><th id="1574">1574</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="420i" title='i' data-type='int' data-ref="420i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a> &lt; <a class="local col7 ref" href="#417value_to_store" title='value_to_store' data-ref="417value_to_store">value_to_store</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>(); <a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a>++) {</td></tr>
<tr><th id="1575">1575</th><td>    <em>auto</em> <dfn class="local col1 decl" id="421store_address_typed" title='store_address_typed' data-type='llvm::Value *' data-ref="421store_address_typed">store_address_typed</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="1576">1576</th><td>        <a class="local col6 ref" href="#416store_address" title='store_address' data-ref="416store_address">store_address</a>,</td></tr>
<tr><th id="1577">1577</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</span>::<span class='ref' title='llvm::PointerType::getUnqual' data-ref="_ZN4llvm11PointerType9getUnqualEPNS_4TypeE">getUnqual</span>(<a class="local col7 ref" href="#417value_to_store" title='value_to_store' data-ref="417value_to_store">value_to_store</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a>]</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>()));</td></tr>
<tr><th id="1578">1578</th><td></td></tr>
<tr><th id="1579">1579</th><td>    <em>auto</em> <dfn class="local col2 decl" id="422store_instruction" title='store_instruction' data-type='llvm::StoreInst *' data-ref="422store_instruction">store_instruction</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</span>(</td></tr>
<tr><th id="1580">1580</th><td>        <a class="local col7 ref" href="#417value_to_store" title='value_to_store' data-ref="417value_to_store">value_to_store</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a>]</a>, <a class="local col1 ref" href="#421store_address_typed" title='store_address_typed' data-ref="421store_address_typed">store_address_typed</a>, <a class="local col8 ref" href="#418alignment" title='alignment' data-ref="418alignment">alignment</a>);</td></tr>
<tr><th id="1581">1581</th><td>    <a class="local col9 ref" href="#419containing_array" title='containing_array' data-ref="419containing_array">containing_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE" title='xla::llvm_ir::IrArray::AnnotateLoadStoreInstructionWithMetadata' data-ref="_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE">AnnotateLoadStoreInstructionWithMetadata</a>(</td></tr>
<tr><th id="1582">1582</th><td>        <a class="local col2 ref" href="#422store_instruction" title='store_instruction' data-ref="422store_instruction">store_instruction</a>);</td></tr>
<tr><th id="1583">1583</th><td></td></tr>
<tr><th id="1584">1584</th><td>    <b>if</b> (<a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a> != (<a class="local col7 ref" href="#417value_to_store" title='value_to_store' data-ref="417value_to_store">value_to_store</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>() - <var>1</var>)) {</td></tr>
<tr><th id="1585">1585</th><td>      <a class="local col6 ref" href="#416store_address" title='store_address' data-ref="416store_address">store_address</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateConstInBoundsGEP1_32' data-ref="_ZN4llvm9IRBuilder26CreateConstInBoundsGEP1_32EPNS_4TypeEPNS_5ValueEjRKNS_5TwineE">CreateConstInBoundsGEP1_32</span>(</td></tr>
<tr><th id="1586">1586</th><td>          <a class="local col7 ref" href="#417value_to_store" title='value_to_store' data-ref="417value_to_store">value_to_store</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNKSt6vectorixEm">[<a class="local col0 ref" href="#420i" title='i' data-ref="420i">i</a>]</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>(), <a class="local col1 ref" href="#421store_address_typed" title='store_address_typed' data-ref="421store_address_typed">store_address_typed</a>, <var>1</var>);</td></tr>
<tr><th id="1587">1587</th><td>    }</td></tr>
<tr><th id="1588">1588</th><td>  }</td></tr>
<tr><th id="1589">1589</th><td>}</td></tr>
<tr><th id="1590">1590</th><td></td></tr>
<tr><th id="1591">1591</th><td><a class="type" href="../../statusor.h.html#xla::StatusOr" title='xla::StatusOr' data-ref="xla::StatusOr">StatusOr</a>&lt;<em>bool</em>&gt; <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter20EmitVectorizedReduceEPNS_14HloInstructionES3_S3_N10tensorflow3gtl10ArraySliceIxEEPNS_14HloComputationEPSs" title='xla::cpu::IrEmitter::EmitVectorizedReduce' data-ref="_ZN3xla3cpu9IrEmitter20EmitVectorizedReduceEPNS_14HloInstructionES3_S3_N10tensorflow3gtl10ArraySliceIxEEPNS_14HloComputationEPSs">EmitVectorizedReduce</dfn>(</td></tr>
<tr><th id="1592">1592</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="423reduce" title='reduce' data-type='xla::HloInstruction *' data-ref="423reduce">reduce</dfn>, <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="424arg" title='arg' data-type='xla::HloInstruction *' data-ref="424arg">arg</dfn>, <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="425init_value" title='init_value' data-type='xla::HloInstruction *' data-ref="425init_value">init_value</dfn>,</td></tr>
<tr><th id="1593">1593</th><td>    <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col6 decl" id="426dimensions" title='dimensions' data-type='gtl::ArraySlice&lt;int64&gt;' data-ref="426dimensions">dimensions</dfn>, <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col7 decl" id="427function" title='function' data-type='xla::HloComputation *' data-ref="427function">function</dfn>,</td></tr>
<tr><th id="1594">1594</th><td>    <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a>* <dfn class="local col8 decl" id="428failure_reason" title='failure_reason' data-type='string *' data-ref="428failure_reason">failure_reason</dfn>) {</td></tr>
<tr><th id="1595">1595</th><td>  <b>if</b> (!<a class="tu ref" href="#_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE" title='xla::cpu::ReductionPreservesLayout' data-use='c' data-ref="_ZN3xla3cpuL24ReductionPreservesLayoutERKNS_14HloInstructionE">ReductionPreservesLayout</a>(*<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>)) {</td></tr>
<tr><th id="1596">1596</th><td>    <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="1597">1597</th><td>  }</td></tr>
<tr><th id="1598">1598</th><td></td></tr>
<tr><th id="1599">1599</th><td>  <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ReductionGenerator" title='xla::cpu::IrEmitter::ReductionGenerator' data-type='std::function&lt;llvm::Value *(llvm::IRBuilder&lt;&gt; *, llvm::Value *, llvm::Value *)&gt;' data-ref="xla::cpu::IrEmitter::ReductionGenerator">ReductionGenerator</a> <dfn class="local col9 decl" id="429reduction_generator" title='reduction_generator' data-type='ReductionGenerator' data-ref="429reduction_generator">reduction_generator</dfn> =</td></tr>
<tr><th id="1600">1600</th><td>      <a class="member" href="#_ZNK3xla3cpu9IrEmitter23MatchReductionGeneratorEPNS_14HloComputationEPSs" title='xla::cpu::IrEmitter::MatchReductionGenerator' data-ref="_ZNK3xla3cpu9IrEmitter23MatchReductionGeneratorEPNS_14HloComputationEPSs">MatchReductionGenerator</a>(<a class="local col7 ref" href="#427function" title='function' data-ref="427function">function</a>, <a class="local col8 ref" href="#428failure_reason" title='failure_reason' data-ref="428failure_reason">failure_reason</a>);</td></tr>
<tr><th id="1601">1601</th><td>  <b>if</b> (!<a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNKSt8functionIFT_DpT0_EEcvbEv" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator bool' data-ref="_ZNKSt8functionIFT_DpT0_EEcvbEv"></a><a class="local col9 ref" href="#429reduction_generator" title='reduction_generator' data-ref="429reduction_generator">reduction_generator</a>) {</td></tr>
<tr><th id="1602">1602</th><td>    <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="1603">1603</th><td>  }</td></tr>
<tr><th id="1604">1604</th><td></td></tr>
<tr><th id="1605">1605</th><td>  <em>int</em> <dfn class="local col0 decl" id="430vectorization_factor_in_bytes" title='vectorization_factor_in_bytes' data-type='int' data-ref="430vectorization_factor_in_bytes">vectorization_factor_in_bytes</dfn> =</td></tr>
<tr><th id="1606">1606</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a>.<a class="ref" href="target_machine_features.h.html#_ZNK3xla3cpu21TargetMachineFeatures29vectorization_factor_in_bytesEv" title='xla::cpu::TargetMachineFeatures::vectorization_factor_in_bytes' data-ref="_ZNK3xla3cpu21TargetMachineFeatures29vectorization_factor_in_bytesEv">vectorization_factor_in_bytes</a>();</td></tr>
<tr><th id="1607">1607</th><td></td></tr>
<tr><th id="1608">1608</th><td>  <i>// We try to process vectorization_factor elements at the same time.</i></td></tr>
<tr><th id="1609">1609</th><td>  <em>const</em> <em>int</em> <dfn class="local col1 decl" id="431vectorization_factor" title='vectorization_factor' data-type='const int' data-ref="431vectorization_factor">vectorization_factor</dfn> =</td></tr>
<tr><th id="1610">1610</th><td>      <a class="local col0 ref" href="#430vectorization_factor_in_bytes" title='vectorization_factor_in_bytes' data-ref="430vectorization_factor_in_bytes">vectorization_factor_in_bytes</a> /</td></tr>
<tr><th id="1611">1611</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>());</td></tr>
<tr><th id="1612">1612</th><td></td></tr>
<tr><th id="1613">1613</th><td>  <em>bool</em> <dfn class="local col2 decl" id="432is_reduction_over_minor_dimension" title='is_reduction_over_minor_dimension' data-type='bool' data-ref="432is_reduction_over_minor_dimension">is_reduction_over_minor_dimension</dfn> =</td></tr>
<tr><th id="1614">1614</th><td>      <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt4findT_S_RKT0_" title='std::find' data-ref="_ZSt4findT_S_RKT0_">find</a>(<a class="local col6 ref" href="#426dimensions" title='dimensions' data-ref="426dimensions">dimensions</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice5beginEv" title='tensorflow::gtl::ArraySlice::begin' data-ref="_ZNK10tensorflow3gtl10ArraySlice5beginEv">begin</a>(), <a class="local col6 ref" href="#426dimensions" title='dimensions' data-ref="426dimensions">dimensions</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>(),</td></tr>
<tr><th id="1615">1615</th><td>                <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx" title='xla::LayoutUtil::Minor' data-ref="_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx">Minor</a>(<a class="local col4 ref" href="#424arg" title='arg' data-ref="424arg">arg</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>(), <var>0</var>)) !=</td></tr>
<tr><th id="1616">1616</th><td>      <a class="local col6 ref" href="#426dimensions" title='dimensions' data-ref="426dimensions">dimensions</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>();</td></tr>
<tr><th id="1617">1617</th><td></td></tr>
<tr><th id="1618">1618</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="433element_alignment" title='element_alignment' data-type='unsigned int' data-ref="433element_alignment">element_alignment</dfn> = <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/math/math_util.h.html#tensorflow::MathUtil" title='tensorflow::MathUtil' data-ref="tensorflow::MathUtil">MathUtil</a>::<a class="ref" href="../../../../core/lib/math/math_util.h.html#_ZN10tensorflow8MathUtil3GCDET_S1_" title='tensorflow::MathUtil::GCD' data-ref="_ZN10tensorflow8MathUtil3GCDET_S1_">GCD</a>&lt;<em>unsigned</em>&gt;(</td></tr>
<tr><th id="1619">1619</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>()),</td></tr>
<tr><th id="1620">1620</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>()));</td></tr>
<tr><th id="1621">1621</th><td></td></tr>
<tr><th id="1622">1622</th><td>  <b>if</b> (<a class="local col2 ref" href="#432is_reduction_over_minor_dimension" title='is_reduction_over_minor_dimension' data-ref="432is_reduction_over_minor_dimension">is_reduction_over_minor_dimension</a>) {</td></tr>
<tr><th id="1623">1623</th><td>    <i>// TODO(sanjoy): Implement vectorized reduction over the minor dimension.</i></td></tr>
<tr><th id="1624">1624</th><td>    *<a class="local col8 ref" href="#428failure_reason" title='failure_reason' data-ref="428failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"reduction over minor dimension not implemented"</q>;</td></tr>
<tr><th id="1625">1625</th><td>    <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="1626">1626</th><td>  }</td></tr>
<tr><th id="1627">1627</th><td></td></tr>
<tr><th id="1628">1628</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(!ShapeUtil::IsTuple(reduce-&gt;shape())), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1628) &lt;&lt; &quot;Check failed: &quot; &quot;!ShapeUtil::IsTuple(reduce-&gt;shape())&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE" title='xla::ShapeUtil::IsTuple' data-ref="_ZN3xla9ShapeUtil7IsTupleERKNS_5ShapeE">IsTuple</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="1629">1629</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(reduce)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>));</td></tr>
<tr><th id="1630">1630</th><td></td></tr>
<tr><th id="1631">1631</th><td>  <i>// We know we're not reducing over the most minor dimension, which means we</i></td></tr>
<tr><th id="1632">1632</th><td><i>  // can lower the reduction loop as:</i></td></tr>
<tr><th id="1633">1633</th><td><i>  //</i></td></tr>
<tr><th id="1634">1634</th><td><i>  //  1. We're reducing over dimensions R0, R1.</i></td></tr>
<tr><th id="1635">1635</th><td><i>  //  2. D0 is the most minor dimension.</i></td></tr>
<tr><th id="1636">1636</th><td><i>  //  3. VS is the vectorization stride (we want to reduce this many elements at</i></td></tr>
<tr><th id="1637">1637</th><td><i>  //     once)</i></td></tr>
<tr><th id="1638">1638</th><td><i>  //</i></td></tr>
<tr><th id="1639">1639</th><td><i>  //  for (d1 in D1) {</i></td></tr>
<tr><th id="1640">1640</th><td><i>  //    for (d0 in D0 with stride VS) {</i></td></tr>
<tr><th id="1641">1641</th><td><i>  //      vector_acc = init</i></td></tr>
<tr><th id="1642">1642</th><td><i>  //      for (r1 in R1) {</i></td></tr>
<tr><th id="1643">1643</th><td><i>  //        for (r0 in R0) {</i></td></tr>
<tr><th id="1644">1644</th><td><i>  //          vector_acc = elementwise_reduce(vector_acc, input[d1, d0, r1, r0]</i></td></tr>
<tr><th id="1645">1645</th><td><i>  //        }</i></td></tr>
<tr><th id="1646">1646</th><td><i>  //      }</i></td></tr>
<tr><th id="1647">1647</th><td><i>  //      output[d1, d0] = vector_acc</i></td></tr>
<tr><th id="1648">1648</th><td><i>  //    }</i></td></tr>
<tr><th id="1649">1649</th><td><i>  //  }</i></td></tr>
<tr><th id="1650">1650</th><td></td></tr>
<tr><th id="1651">1651</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col4 decl" id="434loop_nest" title='loop_nest' data-type='llvm_ir::ForLoopNest' data-ref="434loop_nest">loop_nest</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1652">1652</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col5 decl" id="435array_index" title='array_index' data-type='llvm_ir::IrArray::Index' data-ref="435array_index">array_index</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1EmPN4llvm5ValueE">(</a><a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>());</td></tr>
<tr><th id="1653">1653</th><td>  <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="436i" title='i' data-type='int' data-ref="436i">i</dfn> = <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE" title='xla::LayoutUtil::MinorToMajor' data-ref="_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE">MinorToMajor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()).<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice4sizeEv" title='tensorflow::gtl::ArraySlice::size' data-ref="_ZNK10tensorflow3gtl10ArraySlice4sizeEv">size</a>() - <var>1</var>; <a class="local col6 ref" href="#436i" title='i' data-ref="436i">i</a> &gt; <var>0</var>;</td></tr>
<tr><th id="1654">1654</th><td>       --<a class="local col6 ref" href="#436i" title='i' data-ref="436i">i</a>) {</td></tr>
<tr><th id="1655">1655</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="437dimension" title='dimension' data-type='int64' data-ref="437dimension">dimension</dfn> = <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx" title='xla::LayoutUtil::Minor' data-ref="_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx">Minor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>(), <a class="local col6 ref" href="#436i" title='i' data-ref="436i">i</a>);</td></tr>
<tr><th id="1656">1656</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="438start_index" title='start_index' data-type='int64' data-ref="438start_index">start_index</dfn> = <var>0</var>;</td></tr>
<tr><th id="1657">1657</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="439end_index" title='end_index' data-type='int64' data-ref="439end_index">end_index</dfn> = <a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col7 ref" href="#437dimension" title='dimension' data-ref="437dimension">dimension</a>);</td></tr>
<tr><th id="1658">1658</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#std::unique_ptr" title='std::unique_ptr' data-ref="std::unique_ptr">unique_ptr</a>&lt;<span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoop" title='xla::llvm_ir::ForLoop' data-ref="xla::llvm_ir::ForLoop">ForLoop</a>&gt; <dfn class="local col0 decl" id="440loop" title='loop' data-type='std::unique_ptr&lt;llvm_ir::ForLoop&gt;' data-ref="440loop">loop</dfn> =</td></tr>
<tr><th id="1659">1659</th><td>        <a class="local col4 ref" href="#434loop_nest" title='loop_nest' data-ref="434loop_nest">loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb" title='xla::llvm_ir::ForLoopNest::AddLoop' data-ref="_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxN10tensorflow11StringPieceEbb">AddLoop</a>(<a class="local col8 ref" href="#438start_index" title='start_index' data-ref="438start_index">start_index</a>, <a class="local col9 ref" href="#439end_index" title='end_index' data-ref="439end_index">end_index</a>,</td></tr>
<tr><th id="1660">1660</th><td>                          <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/stringprintf.h.html#_ZN10tensorflow7strings6PrintfEPKcz" title='tensorflow::strings::Printf' data-ref="_ZN10tensorflow7strings6PrintfEPKcz">Printf</a>(<q>"dim.%lld"</q>, <a class="local col7 ref" href="#437dimension" title='dimension' data-ref="437dimension">dimension</a>));</td></tr>
<tr><th id="1661">1661</th><td>    <a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col7 ref" href="#437dimension" title='dimension' data-ref="437dimension">dimension</a>]</a> = <a class="local col0 ref" href="#440loop" title='loop' data-ref="440loop">loop</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv" title='xla::llvm_ir::ForLoop::GetIndVarValue' data-ref="_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv">GetIndVarValue</a>();</td></tr>
<tr><th id="1662">1662</th><td>  }</td></tr>
<tr><th id="1663">1663</th><td></td></tr>
<tr><th id="1664">1664</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="441innermost_dimension" title='innermost_dimension' data-type='int64' data-ref="441innermost_dimension">innermost_dimension</dfn> = <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx" title='xla::LayoutUtil::Minor' data-ref="_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx">Minor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>(), <var>0</var>);</td></tr>
<tr><th id="1665">1665</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col2 decl" id="442innermost_dimension_size" title='innermost_dimension_size' data-type='int64' data-ref="442innermost_dimension_size">innermost_dimension_size</dfn> =</td></tr>
<tr><th id="1666">1666</th><td>      <a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#441innermost_dimension" title='innermost_dimension' data-ref="441innermost_dimension">innermost_dimension</a>);</td></tr>
<tr><th id="1667">1667</th><td></td></tr>
<tr><th id="1668">1668</th><td>  <b>if</b> (<span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>* <dfn class="local col3 decl" id="443innermost_body_bb" title='innermost_body_bb' data-type='llvm::BasicBlock *' data-ref="443innermost_body_bb"><a class="local col3 ref" href="#443innermost_body_bb" title='innermost_body_bb' data-ref="443innermost_body_bb">innermost_body_bb</a></dfn> =</td></tr>
<tr><th id="1669">1669</th><td>          <a class="local col4 ref" href="#434loop_nest" title='loop_nest' data-ref="434loop_nest">loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>()) {</td></tr>
<tr><th id="1670">1670</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col3 ref" href="#443innermost_body_bb" title='innermost_body_bb' data-ref="443innermost_body_bb">innermost_body_bb</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1671">1671</th><td>  }</td></tr>
<tr><th id="1672">1672</th><td></td></tr>
<tr><th id="1673">1673</th><td>  <em>auto</em> <dfn class="local col4 decl" id="444outermost_loop_exit_block" title='outermost_loop_exit_block' data-type='llvm::BasicBlock *' data-ref="444outermost_loop_exit_block">outermost_loop_exit_block</dfn> = <a class="local col4 ref" href="#434loop_nest" title='loop_nest' data-ref="434loop_nest">loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>();</td></tr>
<tr><th id="1674">1674</th><td></td></tr>
<tr><th id="1675">1675</th><td>  <b>if</b> (<a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> &gt;= <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>) {</td></tr>
<tr><th id="1676">1676</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="445start_index" title='start_index' data-type='int64' data-ref="445start_index">start_index</dfn> = <var>0</var>;</td></tr>
<tr><th id="1677">1677</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="446end_index" title='end_index' data-type='int64' data-ref="446end_index">end_index</dfn> = (<a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> / <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>) *</td></tr>
<tr><th id="1678">1678</th><td>                      <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>;</td></tr>
<tr><th id="1679">1679</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#std::unique_ptr" title='std::unique_ptr' data-ref="std::unique_ptr">unique_ptr</a>&lt;<span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoop" title='xla::llvm_ir::ForLoop' data-ref="xla::llvm_ir::ForLoop">ForLoop</a>&gt; <dfn class="local col7 decl" id="447loop" title='loop' data-type='std::unique_ptr&lt;llvm_ir::ForLoop&gt;' data-ref="447loop">loop</dfn> = <a class="local col4 ref" href="#434loop_nest" title='loop_nest' data-ref="434loop_nest">loop_nest</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxxN10tensorflow11StringPieceEbb" title='xla::llvm_ir::ForLoopNest::AddLoop' data-ref="_ZN3xla7llvm_ir11ForLoopNest7AddLoopExxxN10tensorflow11StringPieceEbb">AddLoop</a>(</td></tr>
<tr><th id="1680">1680</th><td>        <a class="local col5 ref" href="#445start_index" title='start_index' data-ref="445start_index">start_index</a>, <a class="local col6 ref" href="#446end_index" title='end_index' data-ref="446end_index">end_index</a>, <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>,</td></tr>
<tr><th id="1681">1681</th><td>        <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/stringprintf.h.html#_ZN10tensorflow7strings6PrintfEPKcz" title='tensorflow::strings::Printf' data-ref="_ZN10tensorflow7strings6PrintfEPKcz">Printf</a>(<q>"dim.%lld"</q>, <a class="local col1 ref" href="#441innermost_dimension" title='innermost_dimension' data-ref="441innermost_dimension">innermost_dimension</a>));</td></tr>
<tr><th id="1682">1682</th><td>    <a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#441innermost_dimension" title='innermost_dimension' data-ref="441innermost_dimension">innermost_dimension</a>]</a> = <a class="local col7 ref" href="#447loop" title='loop' data-ref="447loop">loop</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv" title='xla::llvm_ir::ForLoop::GetIndVarValue' data-ref="_ZNK3xla7llvm_ir7ForLoop14GetIndVarValueEv">GetIndVarValue</a>();</td></tr>
<tr><th id="1683">1683</th><td></td></tr>
<tr><th id="1684">1684</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col7 ref" href="#447loop" title='loop' data-ref="447loop">loop</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop17GetBodyBasicBlockEv" title='xla::llvm_ir::ForLoop::GetBodyBasicBlock' data-ref="_ZNK3xla7llvm_ir7ForLoop17GetBodyBasicBlockEv">GetBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1685">1685</th><td></td></tr>
<tr><th id="1686">1686</th><td>    <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVectorType" title='xla::cpu::IrEmitter::ShardedVectorType' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVectorType">ShardedVectorType</a> <dfn class="local col8 decl" id="448vector_type" title='vector_type' data-type='ShardedVectorType' data-ref="448vector_type">vector_type</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj" title='xla::cpu::IrEmitter::CreateShardedVectorType' data-ref="_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj">CreateShardedVectorType</a>(</td></tr>
<tr><th id="1687">1687</th><td>        <a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>(), <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>);</td></tr>
<tr><th id="1688">1688</th><td>    <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value5 = (EmitInnerLoopForVectorizedReduction( reduction_generator, array_index, vector_type, init_value, arg, dimensions, element_alignment)); if ((__builtin_expect(!_status_or_value5.ok(), 0))) { return _status_or_value5.status(); } std::vector&lt;llvm::Value*&gt; accumulator = std::move(_status_or_value5.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(std::<a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;llvm::<span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col9 decl" id="449accumulator" title='accumulator' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="449accumulator">accumulator</dfn>,</td></tr>
<tr><th id="1689">1689</th><td>                        <a class="member" href="#_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630" title='xla::cpu::IrEmitter::EmitInnerLoopForVectorizedReduction' data-ref="_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630">EmitInnerLoopForVectorizedReduction</a>(</td></tr>
<tr><th id="1690">1690</th><td>                            <a class="local col9 ref" href="#429reduction_generator" title='reduction_generator' data-ref="429reduction_generator">reduction_generator</a>, <a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a>, <a class="local col8 ref" href="#448vector_type" title='vector_type' data-ref="448vector_type">vector_type</a>,</td></tr>
<tr><th id="1691">1691</th><td>                            <a class="local col5 ref" href="#425init_value" title='init_value' data-ref="425init_value">init_value</a>, <a class="local col4 ref" href="#424arg" title='arg' data-ref="424arg">arg</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;long long&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIxEC1ERKS2_"></a><a class="local col6 ref" href="#426dimensions" title='dimensions' data-ref="426dimensions">dimensions</a>, <a class="local col3 ref" href="#433element_alignment" title='element_alignment' data-ref="433element_alignment">element_alignment</a>));</td></tr>
<tr><th id="1692">1692</th><td></td></tr>
<tr><th id="1693">1693</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col0 decl" id="450target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="450target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>);</td></tr>
<tr><th id="1694">1694</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="451output_address" title='output_address' data-type='llvm::Value *' data-ref="451output_address">output_address</dfn> =</td></tr>
<tr><th id="1695">1695</th><td>        <a class="local col0 ref" href="#450target_array" title='target_array' data-ref="450target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1696">1696</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE" title='xla::cpu::IrEmitter::EmitShardedVectorStore' data-ref="_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE">EmitShardedVectorStore</a>(<a class="local col1 ref" href="#451output_address" title='output_address' data-ref="451output_address">output_address</a>, <a class="local col9 ref" href="#1688" title='accumulator' data-ref="449accumulator">accumulator</a>, <a class="local col3 ref" href="#433element_alignment" title='element_alignment' data-ref="433element_alignment">element_alignment</a>,</td></tr>
<tr><th id="1697">1697</th><td>                           <a class="local col0 ref" href="#450target_array" title='target_array' data-ref="450target_array">target_array</a>);</td></tr>
<tr><th id="1698">1698</th><td></td></tr>
<tr><th id="1699">1699</th><td>    <b>if</b> (<em>auto</em> <dfn class="local col2 decl" id="452exit_terminator" title='exit_terminator' data-type='llvm::TerminatorInst *' data-ref="452exit_terminator"><a class="local col2 ref" href="#452exit_terminator" title='exit_terminator' data-ref="452exit_terminator">exit_terminator</a></dfn> = <a class="local col7 ref" href="#447loop" title='loop' data-ref="447loop">loop</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop17GetExitBasicBlockEv" title='xla::llvm_ir::ForLoop::GetExitBasicBlock' data-ref="_ZNK3xla7llvm_ir7ForLoop17GetExitBasicBlockEv">GetExitBasicBlock</a>()-&gt;<span class='ref' title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</span>()) {</td></tr>
<tr><th id="1700">1700</th><td>      <a class="macro" href="../../../../core/platform/default/logging.h.html#256" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_GTImpl( ::tensorflow::internal::GetReferenceableValue(LayoutUtil::MinorToMajor(reduce-&gt;shape()).size()), ::tensorflow::internal::GetReferenceableValue(1), &quot;LayoutUtil::MinorToMajor(reduce-&gt;shape()).size()&quot; &quot; &quot; &quot;&gt;&quot; &quot; &quot; &quot;1&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1700) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_GT">CHECK_GT</a>(<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE" title='xla::LayoutUtil::MinorToMajor' data-ref="_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE">MinorToMajor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()).<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice4sizeEv" title='tensorflow::gtl::ArraySlice::size' data-ref="_ZNK10tensorflow3gtl10ArraySlice4sizeEv">size</a>(), <var>1</var>);</td></tr>
<tr><th id="1701">1701</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</span>(<a class="local col2 ref" href="#452exit_terminator" title='exit_terminator' data-ref="452exit_terminator">exit_terminator</a>);</td></tr>
<tr><th id="1702">1702</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1703">1703</th><td>      <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(LayoutUtil::MinorToMajor(reduce-&gt;shape()).size()), ::tensorflow::internal::GetReferenceableValue(1), &quot;LayoutUtil::MinorToMajor(reduce-&gt;shape()).size()&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;1&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1703) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE" title='xla::LayoutUtil::MinorToMajor' data-ref="_ZN3xla10LayoutUtil12MinorToMajorERKNS_5ShapeE">MinorToMajor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()).<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice4sizeEv" title='tensorflow::gtl::ArraySlice::size' data-ref="_ZNK10tensorflow3gtl10ArraySlice4sizeEv">size</a>(), <var>1</var>);</td></tr>
<tr><th id="1704">1704</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</span>(<a class="local col7 ref" href="#447loop" title='loop' data-ref="447loop">loop</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZNK3xla7llvm_ir7ForLoop17GetExitBasicBlockEv" title='xla::llvm_ir::ForLoop::GetExitBasicBlock' data-ref="_ZNK3xla7llvm_ir7ForLoop17GetExitBasicBlockEv">GetExitBasicBlock</a>());</td></tr>
<tr><th id="1705">1705</th><td>    }</td></tr>
<tr><th id="1706">1706</th><td>  }</td></tr>
<tr><th id="1707">1707</th><td></td></tr>
<tr><th id="1708">1708</th><td>  <i>// Since we increment the stride for the inner dimension by more than 1, we</i></td></tr>
<tr><th id="1709">1709</th><td><i>  // may need to peel out an "epilogue" iteration to get the remaining elements</i></td></tr>
<tr><th id="1710">1710</th><td><i>  // in the following case:</i></td></tr>
<tr><th id="1711">1711</th><td>  <b>if</b> (<a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> % <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>) {</td></tr>
<tr><th id="1712">1712</th><td>    <i>// TODO(b/63775531): Consider using a scalar loop here to save on code size.</i></td></tr>
<tr><th id="1713">1713</th><td>    <a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col1 ref" href="#441innermost_dimension" title='innermost_dimension' data-ref="441innermost_dimension">innermost_dimension</a>]</a> =</td></tr>
<tr><th id="1714">1714</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> -</td></tr>
<tr><th id="1715">1715</th><td>                             (<a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> % <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>));</td></tr>
<tr><th id="1716">1716</th><td></td></tr>
<tr><th id="1717">1717</th><td>    <a class="typedef" href="ir_emitter.h.html#xla::cpu::IrEmitter::ShardedVectorType" title='xla::cpu::IrEmitter::ShardedVectorType' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="xla::cpu::IrEmitter::ShardedVectorType">ShardedVectorType</a> <dfn class="local col3 decl" id="453vector_type" title='vector_type' data-type='ShardedVectorType' data-ref="453vector_type">vector_type</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj" title='xla::cpu::IrEmitter::CreateShardedVectorType' data-ref="_ZN3xla3cpu9IrEmitter23CreateShardedVectorTypeENS_13PrimitiveTypeEj">CreateShardedVectorType</a>(</td></tr>
<tr><th id="1718">1718</th><td>        <a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>(),</td></tr>
<tr><th id="1719">1719</th><td>        <a class="local col2 ref" href="#442innermost_dimension_size" title='innermost_dimension_size' data-ref="442innermost_dimension_size">innermost_dimension_size</a> % <a class="local col1 ref" href="#431vectorization_factor" title='vectorization_factor' data-ref="431vectorization_factor">vectorization_factor</a>);</td></tr>
<tr><th id="1720">1720</th><td>    <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value7 = (EmitInnerLoopForVectorizedReduction( reduction_generator, array_index, vector_type, init_value, arg, dimensions, element_alignment)); if ((__builtin_expect(!_status_or_value7.ok(), 0))) { return _status_or_value7.status(); } std::vector&lt;llvm::Value*&gt; accumulator = std::move(_status_or_value7.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(std::<a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;llvm::<span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col4 decl" id="454accumulator" title='accumulator' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="454accumulator">accumulator</dfn>,</td></tr>
<tr><th id="1721">1721</th><td>                        <a class="member" href="#_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630" title='xla::cpu::IrEmitter::EmitInnerLoopForVectorizedReduction' data-ref="_ZN3xla3cpu9IrEmitter35EmitInnerLoopForVectorizedReductionERKSt8functionIFPN4llvm5ValueEPNS3_9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultIns8816630">EmitInnerLoopForVectorizedReduction</a>(</td></tr>
<tr><th id="1722">1722</th><td>                            <a class="local col9 ref" href="#429reduction_generator" title='reduction_generator' data-ref="429reduction_generator">reduction_generator</a>, <a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a>, <a class="local col3 ref" href="#453vector_type" title='vector_type' data-ref="453vector_type">vector_type</a>,</td></tr>
<tr><th id="1723">1723</th><td>                            <a class="local col5 ref" href="#425init_value" title='init_value' data-ref="425init_value">init_value</a>, <a class="local col4 ref" href="#424arg" title='arg' data-ref="424arg">arg</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;long long&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIxEC1ERKS2_"></a><a class="local col6 ref" href="#426dimensions" title='dimensions' data-ref="426dimensions">dimensions</a>, <a class="local col3 ref" href="#433element_alignment" title='element_alignment' data-ref="433element_alignment">element_alignment</a>));</td></tr>
<tr><th id="1724">1724</th><td></td></tr>
<tr><th id="1725">1725</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="455target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="455target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col3 ref" href="#423reduce" title='reduce' data-ref="423reduce">reduce</a>);</td></tr>
<tr><th id="1726">1726</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="456output_address" title='output_address' data-type='llvm::Value *' data-ref="456output_address">output_address</dfn> =</td></tr>
<tr><th id="1727">1727</th><td>        <a class="local col5 ref" href="#455target_array" title='target_array' data-ref="455target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col5 ref" href="#435array_index" title='array_index' data-ref="435array_index">array_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1728">1728</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE" title='xla::cpu::IrEmitter::EmitShardedVectorStore' data-ref="_ZN3xla3cpu9IrEmitter22EmitShardedVectorStoreEPN4llvm5ValueERKSt6vectorIS4_SaIS4_EEiRKNS_7llvm_ir7IrArrayE">EmitShardedVectorStore</a>(<a class="local col6 ref" href="#456output_address" title='output_address' data-ref="456output_address">output_address</a>, <a class="local col4 ref" href="#1720" title='accumulator' data-ref="454accumulator">accumulator</a>, <a class="local col3 ref" href="#433element_alignment" title='element_alignment' data-ref="433element_alignment">element_alignment</a>,</td></tr>
<tr><th id="1729">1729</th><td>                           <a class="local col5 ref" href="#455target_array" title='target_array' data-ref="455target_array">target_array</a>);</td></tr>
<tr><th id="1730">1730</th><td>  }</td></tr>
<tr><th id="1731">1731</th><td></td></tr>
<tr><th id="1732">1732</th><td>  <b>if</b> (<a class="local col4 ref" href="#444outermost_loop_exit_block" title='outermost_loop_exit_block' data-ref="444outermost_loop_exit_block">outermost_loop_exit_block</a>) {</td></tr>
<tr><th id="1733">1733</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</span>(<a class="local col4 ref" href="#444outermost_loop_exit_block" title='outermost_loop_exit_block' data-ref="444outermost_loop_exit_block">outermost_loop_exit_block</a>);</td></tr>
<tr><th id="1734">1734</th><td>  }</td></tr>
<tr><th id="1735">1735</th><td></td></tr>
<tr><th id="1736">1736</th><td>  <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>true</b>;</td></tr>
<tr><th id="1737">1737</th><td>}</td></tr>
<tr><th id="1738">1738</th><td></td></tr>
<tr><th id="1739">1739</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter12HandleReduceEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleReduce' data-ref="_ZN3xla3cpu9IrEmitter12HandleReduceEPNS_14HloInstructionE">HandleReduce</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="457reduce" title='reduce' data-type='xla::HloInstruction *' data-ref="457reduce">reduce</dfn>) {</td></tr>
<tr><th id="1740">1740</th><td>  <em>auto</em> <dfn class="local col8 decl" id="458arg" title='arg' data-type='xla::HloInstruction *' data-ref="458arg">arg</dfn> = <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZN3xla14HloInstruction15mutable_operandEx" title='xla::HloInstruction::mutable_operand' data-ref="_ZN3xla14HloInstruction15mutable_operandEx">mutable_operand</a>(<var>0</var>);</td></tr>
<tr><th id="1741">1741</th><td>  <em>auto</em> <dfn class="local col9 decl" id="459init_value" title='init_value' data-type='xla::HloInstruction *' data-ref="459init_value">init_value</dfn> = <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZN3xla14HloInstruction15mutable_operandEx" title='xla::HloInstruction::mutable_operand' data-ref="_ZN3xla14HloInstruction15mutable_operandEx">mutable_operand</a>(<var>1</var>);</td></tr>
<tr><th id="1742">1742</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col0 decl" id="460dimensions" title='dimensions' data-type='gtl::ArraySlice&lt;int64&gt;' data-ref="460dimensions">dimensions</dfn><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE">(</a><a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10dimensionsEv" title='xla::HloInstruction::dimensions' data-ref="_ZNK3xla14HloInstruction10dimensionsEv">dimensions</a>());</td></tr>
<tr><th id="1743">1743</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col1 decl" id="461function" title='function' data-type='xla::HloComputation *' data-ref="461function">function</dfn> = <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8to_applyEv" title='xla::HloInstruction::to_apply' data-ref="_ZNK3xla14HloInstruction8to_applyEv">to_apply</a>();</td></tr>
<tr><th id="1744">1744</th><td>  <b>if</b> (!<span class="namespace">options::</span><a class="ref" href="cpu_options.h.html#_ZN3xla3cpu7options24VectorizedReduceDisabledERKNS_15HloModuleConfigE" title='xla::cpu::options::VectorizedReduceDisabled' data-ref="_ZN3xla3cpu7options24VectorizedReduceDisabledERKNS_15HloModuleConfigE">VectorizedReduceDisabled</a>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>)) {</td></tr>
<tr><th id="1745">1745</th><td>    <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringC1Ev" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt12basic_stringC1Ev"></a><dfn class="local col2 decl" id="462vectorization_failure_reason" title='vectorization_failure_reason' data-type='string' data-ref="462vectorization_failure_reason">vectorization_failure_reason</dfn>;</td></tr>
<tr><th id="1746">1746</th><td>    <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value9 = (EmitVectorizedReduce(reduce, arg, init_value, dimensions, function, &amp;vectorization_failure_reason)); if ((__builtin_expect(!_status_or_value9.ok(), 0))) { return _status_or_value9.status(); } bool vectorization_successful = std::move(_status_or_value9.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(</td></tr>
<tr><th id="1747">1747</th><td>        <em>bool</em> <dfn class="local col3 decl" id="463vectorization_successful" title='vectorization_successful' data-type='bool' data-ref="463vectorization_successful">vectorization_successful</dfn>,</td></tr>
<tr><th id="1748">1748</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter20EmitVectorizedReduceEPNS_14HloInstructionES3_S3_N10tensorflow3gtl10ArraySliceIxEEPNS_14HloComputationEPSs" title='xla::cpu::IrEmitter::EmitVectorizedReduce' data-ref="_ZN3xla3cpu9IrEmitter20EmitVectorizedReduceEPNS_14HloInstructionES3_S3_N10tensorflow3gtl10ArraySliceIxEEPNS_14HloComputationEPSs">EmitVectorizedReduce</a>(<a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>, <a class="local col8 ref" href="#458arg" title='arg' data-ref="458arg">arg</a>, <a class="local col9 ref" href="#459init_value" title='init_value' data-ref="459init_value">init_value</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;long long&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIxEC1ERKS2_"></a><a class="local col0 ref" href="#460dimensions" title='dimensions' data-ref="460dimensions">dimensions</a>, <a class="local col1 ref" href="#461function" title='function' data-ref="461function">function</a>,</td></tr>
<tr><th id="1749">1749</th><td>                             &amp;<a class="local col2 ref" href="#462vectorization_failure_reason" title='vectorization_failure_reason' data-ref="462vectorization_failure_reason">vectorization_failure_reason</a>));</td></tr>
<tr><th id="1750">1750</th><td>    <b>if</b> (<a class="local col3 ref" href="#1746" title='vectorization_successful' data-ref="463vectorization_successful">vectorization_successful</a>) {</td></tr>
<tr><th id="1751">1751</th><td>      <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((1) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1751, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>1</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Successfully vectorized reduction "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>()</td></tr>
<tr><th id="1752">1752</th><td>              <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"\n"</q>;</td></tr>
<tr><th id="1753">1753</th><td>      <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="1754">1754</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1755">1755</th><td>      <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((1) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1755, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>1</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Could not vectorize reduction "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>() <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>": "</q></td></tr>
<tr><th id="1756">1756</th><td>              <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col2 ref" href="#462vectorization_failure_reason" title='vectorization_failure_reason' data-ref="462vectorization_failure_reason">vectorization_failure_reason</a>;</td></tr>
<tr><th id="1757">1757</th><td>    }</td></tr>
<tr><th id="1758">1758</th><td>  }</td></tr>
<tr><th id="1759">1759</th><td></td></tr>
<tr><th id="1760">1760</th><td>  <i>// The called computation should have been emitted previously.</i></td></tr>
<tr><th id="1761">1761</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col4 decl" id="464reducer_function" title='reducer_function' data-type='llvm::Function *' data-ref="464reducer_function">reducer_function</dfn> = <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col1 ref" href="#461function" title='function' data-ref="461function">function</a>);</td></tr>
<tr><th id="1762">1762</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="1763">1763</th><td>      <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>, <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, reduce, arg, init_value, dimensions,</td></tr>
<tr><th id="1764">1764</th><td>               reducer_function](<em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col5 decl" id="465index" title='index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="465index">index</dfn>) {</td></tr>
<tr><th id="1765">1765</th><td>        <i>// Initialize an accumulator with init_value.</i></td></tr>
<tr><th id="1766">1766</th><td>        <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col6 decl" id="466accumulator_type" title='accumulator_type' data-type='xla::PrimitiveType' data-ref="466accumulator_type">accumulator_type</dfn> = <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="1767">1767</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</span>* <dfn class="local col7 decl" id="467accumulator_addr" title='accumulator_addr' data-type='llvm::AllocaInst *' data-ref="467accumulator_addr">accumulator_addr</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="1768">1768</th><td>            <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col6 ref" href="#466accumulator_type" title='accumulator_type' data-ref="466accumulator_type">accumulator_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>),</td></tr>
<tr><th id="1769">1769</th><td>            <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"accumulator"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="1770">1770</th><td>            <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col6 ref" href="#466accumulator_type" title='accumulator_type' data-ref="466accumulator_type">accumulator_type</a>));</td></tr>
<tr><th id="1771">1771</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="468init_value_addr" title='init_value_addr' data-type='llvm::Value *' data-ref="468init_value_addr">init_value_addr</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col9 ref" href="#459init_value" title='init_value' data-ref="459init_value">init_value</a>);</td></tr>
<tr><th id="1772">1772</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="469load_init_value" title='load_init_value' data-type='llvm::Value *' data-ref="469load_init_value">load_init_value</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col8 ref" href="#468init_value_addr" title='init_value_addr' data-ref="468init_value_addr">init_value_addr</a>);</td></tr>
<tr><th id="1773">1773</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col9 ref" href="#469load_init_value" title='load_init_value' data-ref="469load_init_value">load_init_value</a>, <a class="local col7 ref" href="#467accumulator_addr" title='accumulator_addr' data-ref="467accumulator_addr">accumulator_addr</a>);</td></tr>
<tr><th id="1774">1774</th><td></td></tr>
<tr><th id="1775">1775</th><td>        <i>// The enclosing loops go over all the target elements. Now we have to</i></td></tr>
<tr><th id="1776">1776</th><td><i>        // compute the actual target element. For this, we build a new loop nest</i></td></tr>
<tr><th id="1777">1777</th><td><i>        // to iterate over all the reduction dimensions in the argument.</i></td></tr>
<tr><th id="1778">1778</th><td><i>        // AddLoopsForShapeOnDimensions will return an Index where induction</i></td></tr>
<tr><th id="1779">1779</th><td><i>        // Value*s are placed for each dimension in dimensions, and all the rest</i></td></tr>
<tr><th id="1780">1780</th><td><i>        // are nullptrs.</i></td></tr>
<tr><th id="1781">1781</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col0 decl" id="470loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="470loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"inner"</q>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1782">1782</th><td>        <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col1 decl" id="471reduced_dims_index" title='reduced_dims_index' data-type='const llvm_ir::IrArray::Index' data-ref="471reduced_dims_index">reduced_dims_index</dfn> =</td></tr>
<tr><th id="1783">1783</th><td>            <a class="local col0 ref" href="#470loops" title='loops' data-ref="470loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShapeOnDimensions' data-ref="_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE">AddLoopsForShapeOnDimensions</a>(<a class="local col8 ref" href="#458arg" title='arg' data-ref="458arg">arg</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;long long&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIxEC1ERKS2_"></a><a class="local col0 ref" href="#460dimensions" title='dimensions' data-ref="460dimensions">dimensions</a>,</td></tr>
<tr><th id="1784">1784</th><td>                                               <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"reduction_dim"</q>);</td></tr>
<tr><th id="1785">1785</th><td></td></tr>
<tr><th id="1786">1786</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#470loops" title='loops' data-ref="470loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1787">1787</th><td></td></tr>
<tr><th id="1788">1788</th><td>        <i>// Build a full index for the input argument, using reduced_dims_index</i></td></tr>
<tr><th id="1789">1789</th><td><i>        // as the base. In reduced_dims_index only the reduction dimensions are</i></td></tr>
<tr><th id="1790">1790</th><td><i>        // filled in. We fill in the rest of the dimensions with induction</i></td></tr>
<tr><th id="1791">1791</th><td><i>        // Value*s taken from 'index' which iterates over the target array.</i></td></tr>
<tr><th id="1792">1792</th><td><i>        // See the high-level description in the XLA documentation for details.</i></td></tr>
<tr><th id="1793">1793</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col2 decl" id="472arg_array" title='arg_array' data-type='llvm_ir::IrArray' data-ref="472arg_array">arg_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#458arg" title='arg' data-ref="458arg">arg</a>));</td></tr>
<tr><th id="1794">1794</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col3 decl" id="473input_index" title='input_index' data-type='llvm_ir::IrArray::Index' data-ref="473input_index">input_index</dfn> = <a class="ref fake" href="../llvm_ir/ir_array.h.html#54" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1ERKS2_"></a><a class="local col1 ref" href="#471reduced_dims_index" title='reduced_dims_index' data-ref="471reduced_dims_index">reduced_dims_index</a>;</td></tr>
<tr><th id="1795">1795</th><td>        <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>::<a class="typedef" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index::const_iterator" title='xla::llvm_ir::IrArray::Index::const_iterator' data-type='std::vector&lt;llvm::Value *&gt;::const_iterator' data-ref="xla::llvm_ir::IrArray::Index::const_iterator">const_iterator</a> <dfn class="local col4 decl" id="474it" title='it' data-type='llvm_ir::IrArray::Index::const_iterator' data-ref="474it">it</dfn> = <a class="local col5 ref" href="#465index" title='index' data-ref="465index">index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index5beginEv" title='xla::llvm_ir::IrArray::Index::begin' data-ref="_ZNK3xla7llvm_ir7IrArray5Index5beginEv">begin</a>();</td></tr>
<tr><th id="1796">1796</th><td></td></tr>
<tr><th id="1797">1797</th><td>        <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col5 decl" id="475i" title='i' data-type='size_t' data-ref="475i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#475i" title='i' data-ref="475i">i</a> &lt; <a class="local col3 ref" href="#473input_index" title='input_index' data-ref="473input_index">input_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(); ++<a class="local col5 ref" href="#475i" title='i' data-ref="475i">i</a>) {</td></tr>
<tr><th id="1798">1798</th><td>          <b>if</b> (<a class="local col3 ref" href="#473input_index" title='input_index' data-ref="473input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col5 ref" href="#475i" title='i' data-ref="475i">i</a>]</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="1799">1799</th><td>            <a class="local col3 ref" href="#473input_index" title='input_index' data-ref="473input_index">input_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZN3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col5 ref" href="#475i" title='i' data-ref="475i">i</a>]</a> = <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col4 ref" href="#474it" title='it' data-ref="474it">it</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a>;</td></tr>
<tr><th id="1800">1800</th><td>          }</td></tr>
<tr><th id="1801">1801</th><td>        }</td></tr>
<tr><th id="1802">1802</th><td>        <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(index.end() == it), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1802) &lt;&lt; &quot;Check failed: &quot; &quot;index.end() == it&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(<a class="local col5 ref" href="#465index" title='index' data-ref="465index">index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index3endEv" title='xla::llvm_ir::IrArray::Index::end' data-ref="_ZNK3xla7llvm_ir7IrArray5Index3endEv">end</a>() <a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::operator==" title='__gnu_cxx::operator==' data-ref="__gnu_cxx::operator==">==</a> <a class="local col4 ref" href="#474it" title='it' data-ref="474it">it</a>);</td></tr>
<tr><th id="1803">1803</th><td></td></tr>
<tr><th id="1804">1804</th><td>        <i>// Apply the reduction function to the loaded value.</i></td></tr>
<tr><th id="1805">1805</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="476input_address" title='input_address' data-type='llvm::Value *' data-ref="476input_address">input_address</dfn> =</td></tr>
<tr><th id="1806">1806</th><td>            <a class="local col2 ref" href="#472arg_array" title='arg_array' data-ref="472arg_array">arg_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col3 ref" href="#473input_index" title='input_index' data-ref="473input_index">input_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1807">1807</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="477result" title='result' data-type='llvm::Value *' data-ref="477result">result</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(</td></tr>
<tr><th id="1808">1808</th><td>            <a class="local col4 ref" href="#464reducer_function" title='reducer_function' data-ref="464reducer_function">reducer_function</a>, <a class="local col7 ref" href="#457reduce" title='reduce' data-ref="457reduce">reduce</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="1809">1809</th><td>            <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col7 ref" href="#467accumulator_addr" title='accumulator_addr' data-ref="467accumulator_addr">accumulator_addr</a>, <a class="local col6 ref" href="#476input_address" title='input_address' data-ref="476input_address">input_address</a>}, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"reduce_function"</q>);</td></tr>
<tr><th id="1810">1810</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col7 ref" href="#477result" title='result' data-ref="477result">result</a>, <a class="local col7 ref" href="#467accumulator_addr" title='accumulator_addr' data-ref="467accumulator_addr">accumulator_addr</a>);</td></tr>
<tr><th id="1811">1811</th><td></td></tr>
<tr><th id="1812">1812</th><td>        <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col0 ref" href="#470loops" title='loops' data-ref="470loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1813">1813</th><td>        <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col7 ref" href="#467accumulator_addr" title='accumulator_addr' data-ref="467accumulator_addr">accumulator_addr</a>);</td></tr>
<tr><th id="1814">1814</th><td>      });</td></tr>
<tr><th id="1815">1815</th><td>}</td></tr>
<tr><th id="1816">1816</th><td></td></tr>
<tr><th id="1817">1817</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10HandleSendEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSend' data-ref="_ZN3xla3cpu9IrEmitter10HandleSendEPNS_14HloInstructionE">HandleSend</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="478send" title='send' data-type='xla::HloInstruction *' data-ref="478send">send</dfn>) {</td></tr>
<tr><th id="1818">1818</th><td>  <i>// TODO(b/33942983): Support Send/Recv on CPU.</i></td></tr>
<tr><th id="1819">1819</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Send is not implemented on CPU."</q>);</td></tr>
<tr><th id="1820">1820</th><td>}</td></tr>
<tr><th id="1821">1821</th><td></td></tr>
<tr><th id="1822">1822</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter14HandleSendDoneEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSendDone' data-ref="_ZN3xla3cpu9IrEmitter14HandleSendDoneEPNS_14HloInstructionE">HandleSendDone</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="479send_done" title='send_done' data-type='xla::HloInstruction *' data-ref="479send_done">send_done</dfn>) {</td></tr>
<tr><th id="1823">1823</th><td>  <i>// TODO(b/33942983): Support Send/Recv on CPU.</i></td></tr>
<tr><th id="1824">1824</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Send-done is not implemented on CPU."</q>);</td></tr>
<tr><th id="1825">1825</th><td>}</td></tr>
<tr><th id="1826">1826</th><td></td></tr>
<tr><th id="1827">1827</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter11HandleSliceEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleSlice' data-ref="_ZN3xla3cpu9IrEmitter11HandleSliceEPNS_14HloInstructionE">HandleSlice</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="480slice" title='slice' data-type='xla::HloInstruction *' data-ref="480slice">slice</dfn>) {</td></tr>
<tr><th id="1828">1828</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1828, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleSlice: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="1829">1829</th><td>  <em>auto</em> <dfn class="local col1 decl" id="481operand" title='operand' data-type='const xla::HloInstruction *' data-ref="481operand">operand</dfn> = <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="1830">1830</th><td>  <i>// The code below emits a sequential loop nest. For the parallel backend, use</i></td></tr>
<tr><th id="1831">1831</th><td><i>  // ParallelLoopEmitter which respects dynamic loop bounds.</i></td></tr>
<tr><th id="1832">1832</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE" title='xla::cpu::IrEmitter::ShouldEmitParallelLoopFor' data-ref="_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE">ShouldEmitParallelLoopFor</a>(*<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>)) {</td></tr>
<tr><th id="1833">1833</th><td>    <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>);</td></tr>
<tr><th id="1834">1834</th><td>  }</td></tr>
<tr><th id="1835">1835</th><td></td></tr>
<tr><th id="1836">1836</th><td>  <i>// The code below assumes the layouts are equal.</i></td></tr>
<tr><th id="1837">1837</th><td>  <b>if</b> (!<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5EqualERKNS_6LayoutES3_" title='xla::LayoutUtil::Equal' data-ref="_ZN3xla10LayoutUtil5EqualERKNS_6LayoutES3_">Equal</a>(<a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>(), <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>())) {</td></tr>
<tr><th id="1838">1838</th><td>    <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>);</td></tr>
<tr><th id="1839">1839</th><td>  }</td></tr>
<tr><th id="1840">1840</th><td></td></tr>
<tr><th id="1841">1841</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(slice)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>));</td></tr>
<tr><th id="1842">1842</th><td></td></tr>
<tr><th id="1843">1843</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil15HasZeroElementsERKNS_5ShapeE" title='xla::ShapeUtil::HasZeroElements' data-ref="_ZN3xla9ShapeUtil15HasZeroElementsERKNS_5ShapeE">HasZeroElements</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="1844">1844</th><td>    <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="1845">1845</th><td>  }</td></tr>
<tr><th id="1846">1846</th><td></td></tr>
<tr><th id="1847">1847</th><td>  <em>const</em> <span class='type' title='xla::Layout' data-ref="xla::Layout">Layout</span>&amp; <dfn class="local col2 decl" id="482layout" title='layout' data-type='const xla::Layout &amp;' data-ref="482layout">layout</dfn> = <a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>();</td></tr>
<tr><th id="1848">1848</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="483num_dims" title='num_dims' data-type='const int64' data-ref="483num_dims">num_dims</dfn> = <a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions_size' data-ref="_ZNK3xla5Shape15dimensions_sizeEv">dimensions_size</span>();</td></tr>
<tr><th id="1849">1849</th><td></td></tr>
<tr><th id="1850">1850</th><td>  <i>// The slice lowering finds maximal contiguous blocks of memory that can be</i></td></tr>
<tr><th id="1851">1851</th><td><i>  // copied from the source to the target. This is done by looking at the</i></td></tr>
<tr><th id="1852">1852</th><td><i>  // source/target layout in minor to major order and do the following:</i></td></tr>
<tr><th id="1853">1853</th><td><i>  //</i></td></tr>
<tr><th id="1854">1854</th><td><i>  // * Find an initial segment of dimensions along which the slice uses the</i></td></tr>
<tr><th id="1855">1855</th><td><i>  //   whole dimension. These are the "inner" dimensions and can be folded into</i></td></tr>
<tr><th id="1856">1856</th><td><i>  //   the memcpy.</i></td></tr>
<tr><th id="1857">1857</th><td><i>  //</i></td></tr>
<tr><th id="1858">1858</th><td><i>  // * Of the remaining dimensions decide which ones require loops.</i></td></tr>
<tr><th id="1859">1859</th><td><i>  //</i></td></tr>
<tr><th id="1860">1860</th><td><i>  // * Implement the memcpy within the innermost loop.</i></td></tr>
<tr><th id="1861">1861</th><td></td></tr>
<tr><th id="1862">1862</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/flatset.h.html#tensorflow::gtl::FlatSet" title='tensorflow::gtl::FlatSet' data-ref="tensorflow::gtl::FlatSet">FlatSet</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <a class="ref fake" href="../../../../core/lib/gtl/flatset.h.html#_ZN10tensorflow3gtl7FlatSetC1Ev" title='tensorflow::gtl::FlatSet::FlatSet&lt;Key, Hash, Eq&gt;' data-ref="_ZN10tensorflow3gtl7FlatSetC1Ev"></a><dfn class="local col4 decl" id="484inner_dims" title='inner_dims' data-type='gtl::FlatSet&lt;int64&gt;' data-ref="484inner_dims">inner_dims</dfn>;</td></tr>
<tr><th id="1863">1863</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="485dim" title='dim' data-type='int64' data-ref="485dim">dim</dfn> : <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil12MinorToMajorERKNS_6LayoutE" title='xla::LayoutUtil::MinorToMajor' data-ref="_ZN3xla10LayoutUtil12MinorToMajorERKNS_6LayoutE">MinorToMajor</a>(<a class="local col2 ref" href="#482layout" title='layout' data-ref="482layout">layout</a>)) {</td></tr>
<tr><th id="1864">1864</th><td>    <b>if</b> (<a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col5 ref" href="#485dim" title='dim' data-ref="485dim">dim</a>) != <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col5 ref" href="#485dim" title='dim' data-ref="485dim">dim</a>)) {</td></tr>
<tr><th id="1865">1865</th><td>      <b>break</b>;</td></tr>
<tr><th id="1866">1866</th><td>    }</td></tr>
<tr><th id="1867">1867</th><td>    <a class="local col4 ref" href="#484inner_dims" title='inner_dims' data-ref="484inner_dims">inner_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZN10tensorflow3gtl7FlatSet6insertERKT_" title='tensorflow::gtl::FlatSet::insert' data-ref="_ZN10tensorflow3gtl7FlatSet6insertERKT_">insert</a>(<a class="local col5 ref" href="#485dim" title='dim' data-ref="485dim">dim</a>);</td></tr>
<tr><th id="1868">1868</th><td>  }</td></tr>
<tr><th id="1869">1869</th><td></td></tr>
<tr><th id="1870">1870</th><td>  <em>const</em> <em>bool</em> <dfn class="local col6 decl" id="486is_trivial_copy" title='is_trivial_copy' data-type='const bool' data-ref="486is_trivial_copy">is_trivial_copy</dfn> = (<a class="local col4 ref" href="#484inner_dims" title='inner_dims' data-ref="484inner_dims">inner_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet4sizeEv" title='tensorflow::gtl::FlatSet::size' data-ref="_ZNK10tensorflow3gtl7FlatSet4sizeEv">size</a>() == <a class="local col3 ref" href="#483num_dims" title='num_dims' data-ref="483num_dims">num_dims</a>);</td></tr>
<tr><th id="1871">1871</th><td>  <b>if</b> (<a class="local col6 ref" href="#486is_trivial_copy" title='is_trivial_copy' data-ref="486is_trivial_copy">is_trivial_copy</a>) {</td></tr>
<tr><th id="1872">1872</th><td>    <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil17IsEffectiveScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsEffectiveScalar' data-ref="_ZN3xla9ShapeUtil17IsEffectiveScalarERKNS_5ShapeE">IsEffectiveScalar</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="1873">1873</th><td>      <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>);</td></tr>
<tr><th id="1874">1874</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1875">1875</th><td>      <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</a>(*<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>, *<a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>);</td></tr>
<tr><th id="1876">1876</th><td>    }</td></tr>
<tr><th id="1877">1877</th><td>  }</td></tr>
<tr><th id="1878">1878</th><td></td></tr>
<tr><th id="1879">1879</th><td>  <i>// The memcpy will copy elements that are logically this shape (allowed to be</i></td></tr>
<tr><th id="1880">1880</th><td><i>  // scalar).</i></td></tr>
<tr><th id="1881">1881</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span> <dfn class="local col7 decl" id="487logical_element_shape" title='logical_element_shape' data-type='const xla::Shape' data-ref="487logical_element_shape">logical_element_shape</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil16FilterDimensionsERKSt8functionIFbxEENS_5ShapeE" title='xla::ShapeUtil::FilterDimensions' data-ref="_ZN3xla9ShapeUtil16FilterDimensionsERKSt8functionIFbxEENS_5ShapeE">FilterDimensions</a>(</td></tr>
<tr><th id="1882">1882</th><td>      <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[&amp;inner_dims](<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="488dim" title='dim' data-type='int64' data-ref="488dim">dim</dfn>) -&gt; <em>bool</em> { <b>return</b> <a class="local col4 ref" href="#484inner_dims" title='inner_dims' data-ref="484inner_dims">inner_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet5countERKT_" title='tensorflow::gtl::FlatSet::count' data-ref="_ZNK10tensorflow3gtl7FlatSet5countERKT_">count</a>(<a class="local col8 ref" href="#488dim" title='dim' data-ref="488dim">dim</a>); },</td></tr>
<tr><th id="1883">1883</th><td>      <span class='ref fake' title='xla::Shape::Shape' data-ref="_ZN3xla5ShapeC1ERKS0_"></span><a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="1884">1884</th><td></td></tr>
<tr><th id="1885">1885</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="489primitive_elements_per_logical_element" title='primitive_elements_per_logical_element' data-type='const int64' data-ref="489primitive_elements_per_logical_element">primitive_elements_per_logical_element</dfn> =</td></tr>
<tr><th id="1886">1886</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil10ElementsInERKNS_5ShapeE" title='xla::ShapeUtil::ElementsIn' data-ref="_ZN3xla9ShapeUtil10ElementsInERKNS_5ShapeE">ElementsIn</a>(<a class="local col7 ref" href="#487logical_element_shape" title='logical_element_shape' data-ref="487logical_element_shape">logical_element_shape</a>);</td></tr>
<tr><th id="1887">1887</th><td></td></tr>
<tr><th id="1888">1888</th><td>  <i>// memcpy_dim is the innermost (in terms of layout) dimension for which the</i></td></tr>
<tr><th id="1889">1889</th><td><i>  // slice does *not* just copy all the elements along the dimension.</i></td></tr>
<tr><th id="1890">1890</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="490memcpy_dim" title='memcpy_dim' data-type='const int64' data-ref="490memcpy_dim">memcpy_dim</dfn> = <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx" title='xla::LayoutUtil::Minor' data-ref="_ZN3xla10LayoutUtil5MinorERKNS_6LayoutEx">Minor</a>(<a class="local col2 ref" href="#482layout" title='layout' data-ref="482layout">layout</a>, <a class="local col4 ref" href="#484inner_dims" title='inner_dims' data-ref="484inner_dims">inner_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet4sizeEv" title='tensorflow::gtl::FlatSet::size' data-ref="_ZNK10tensorflow3gtl7FlatSet4sizeEv">size</a>());</td></tr>
<tr><th id="1891">1891</th><td></td></tr>
<tr><th id="1892">1892</th><td>  <em>const</em> <em>bool</em> <dfn class="local col1 decl" id="491memcpy_is_contiguous" title='memcpy_is_contiguous' data-type='const bool' data-ref="491memcpy_is_contiguous">memcpy_is_contiguous</dfn> = <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction13slice_stridesEx" title='xla::HloInstruction::slice_strides' data-ref="_ZNK3xla14HloInstruction13slice_stridesEx">slice_strides</a>(<a class="local col0 ref" href="#490memcpy_dim" title='memcpy_dim' data-ref="490memcpy_dim">memcpy_dim</a>) == <var>1</var>;</td></tr>
<tr><th id="1893">1893</th><td>  <i>// The number of logical elements that can be copied in a single call</i></td></tr>
<tr><th id="1894">1894</th><td><i>  // to memcpy. We can only copy 1 element at a time if there is a non-trivial</i></td></tr>
<tr><th id="1895">1895</th><td><i>  // stride.</i></td></tr>
<tr><th id="1896">1896</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col2 decl" id="492memcpy_logical_elements" title='memcpy_logical_elements' data-type='const int64' data-ref="492memcpy_logical_elements">memcpy_logical_elements</dfn> =</td></tr>
<tr><th id="1897">1897</th><td>      <a class="local col1 ref" href="#491memcpy_is_contiguous" title='memcpy_is_contiguous' data-ref="491memcpy_is_contiguous">memcpy_is_contiguous</a></td></tr>
<tr><th id="1898">1898</th><td>          ? <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction12slice_limitsEx" title='xla::HloInstruction::slice_limits' data-ref="_ZNK3xla14HloInstruction12slice_limitsEx">slice_limits</a>(<a class="local col0 ref" href="#490memcpy_dim" title='memcpy_dim' data-ref="490memcpy_dim">memcpy_dim</a>) - <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction12slice_startsEx" title='xla::HloInstruction::slice_starts' data-ref="_ZNK3xla14HloInstruction12slice_startsEx">slice_starts</a>(<a class="local col0 ref" href="#490memcpy_dim" title='memcpy_dim' data-ref="490memcpy_dim">memcpy_dim</a>)</td></tr>
<tr><th id="1899">1899</th><td>          : <var>1</var>;</td></tr>
<tr><th id="1900">1900</th><td></td></tr>
<tr><th id="1901">1901</th><td>  <i>// Determine the dimensions that get lowered as loops.</i></td></tr>
<tr><th id="1902">1902</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col3 decl" id="493outer_dims" title='outer_dims' data-type='std::vector&lt;int64&gt;' data-ref="493outer_dims">outer_dims</dfn>;</td></tr>
<tr><th id="1903">1903</th><td>  <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="494i" title='i' data-type='int64' data-ref="494i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#494i" title='i' data-ref="494i">i</a> &lt; <a class="local col3 ref" href="#483num_dims" title='num_dims' data-ref="483num_dims">num_dims</a> - <a class="local col4 ref" href="#484inner_dims" title='inner_dims' data-ref="484inner_dims">inner_dims</a>.<a class="ref" href="../../../../core/lib/gtl/flatset.h.html#_ZNK10tensorflow3gtl7FlatSet4sizeEv" title='tensorflow::gtl::FlatSet::size' data-ref="_ZNK10tensorflow3gtl7FlatSet4sizeEv">size</a>() - <var>1</var>; ++<a class="local col4 ref" href="#494i" title='i' data-ref="494i">i</a>) {</td></tr>
<tr><th id="1904">1904</th><td>    <a class="local col3 ref" href="#493outer_dims" title='outer_dims' data-ref="493outer_dims">outer_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5MajorERKNS_6LayoutEx" title='xla::LayoutUtil::Major' data-ref="_ZN3xla10LayoutUtil5MajorERKNS_6LayoutEx">Major</a>(<a class="local col2 ref" href="#482layout" title='layout' data-ref="482layout">layout</a>, <a class="local col4 ref" href="#494i" title='i' data-ref="494i">i</a>));</td></tr>
<tr><th id="1905">1905</th><td>  }</td></tr>
<tr><th id="1906">1906</th><td></td></tr>
<tr><th id="1907">1907</th><td>  <i>// Is the slice along the memcpy dimension contiguous? If not, then memcpy_dim</i></td></tr>
<tr><th id="1908">1908</th><td><i>  // needs to be wrapped around a loop as well.</i></td></tr>
<tr><th id="1909">1909</th><td>  <b>if</b> (!<a class="local col1 ref" href="#491memcpy_is_contiguous" title='memcpy_is_contiguous' data-ref="491memcpy_is_contiguous">memcpy_is_contiguous</a>) {</td></tr>
<tr><th id="1910">1910</th><td>    <a class="local col3 ref" href="#493outer_dims" title='outer_dims' data-ref="493outer_dims">outer_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col0 ref" href="#490memcpy_dim" title='memcpy_dim' data-ref="490memcpy_dim">memcpy_dim</a>);</td></tr>
<tr><th id="1911">1911</th><td>  }</td></tr>
<tr><th id="1912">1912</th><td></td></tr>
<tr><th id="1913">1913</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="495target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="495target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>);</td></tr>
<tr><th id="1914">1914</th><td></td></tr>
<tr><th id="1915">1915</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="496num_outer_loops" title='num_outer_loops' data-type='const int64' data-ref="496num_outer_loops">num_outer_loops</dfn> = <a class="local col3 ref" href="#493outer_dims" title='outer_dims' data-ref="493outer_dims">outer_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>();</td></tr>
<tr><th id="1916">1916</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col7 decl" id="497loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="497loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1917">1917</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col8 decl" id="498target_index" title='target_index' data-type='llvm_ir::IrArray::Index' data-ref="498target_index">target_index</dfn> =</td></tr>
<tr><th id="1918">1918</th><td>      <a class="local col7 ref" href="#497loops" title='loops' data-ref="497loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShapeOnDimensions' data-ref="_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE">AddLoopsForShapeOnDimensions</a>(<a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col3 ref" href="#493outer_dims" title='outer_dims' data-ref="493outer_dims">outer_dims</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"slice"</q>);</td></tr>
<tr><th id="1919">1919</th><td></td></tr>
<tr><th id="1920">1920</th><td>  <i>// Only the indices for the outer dimensions have been initialized in</i></td></tr>
<tr><th id="1921">1921</th><td><i>  // target_index. The rest of the indices should get initialized to 0, since</i></td></tr>
<tr><th id="1922">1922</th><td><i>  // for the rest of the dimensions the copy writes to the full dimension.</i></td></tr>
<tr><th id="1923">1923</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt7replaceT_S_RKT0_S2_" title='std::replace' data-ref="_ZSt7replaceT_S_RKT0_S2_">replace</a>(<a class="local col8 ref" href="#498target_index" title='target_index' data-ref="498target_index">target_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index5beginEv" title='xla::llvm_ir::IrArray::Index::begin' data-ref="_ZN3xla7llvm_ir7IrArray5Index5beginEv">begin</a>(), <a class="local col8 ref" href="#498target_index" title='target_index' data-ref="498target_index">target_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index3endEv" title='xla::llvm_ir::IrArray::Index::end' data-ref="_ZN3xla7llvm_ir7IrArray5Index3endEv">end</a>(),</td></tr>
<tr><th id="1924">1924</th><td>               <b>static_cast</b>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;(<b>nullptr</b>),</td></tr>
<tr><th id="1925">1925</th><td>               <b>static_cast</b>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<var>0</var>)));</td></tr>
<tr><th id="1926">1926</th><td></td></tr>
<tr><th id="1927">1927</th><td>  <b>if</b> (<a class="local col6 ref" href="#496num_outer_loops" title='num_outer_loops' data-ref="496num_outer_loops">num_outer_loops</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="1928">1928</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col7 ref" href="#497loops" title='loops' data-ref="497loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1929">1929</th><td>  }</td></tr>
<tr><th id="1930">1930</th><td></td></tr>
<tr><th id="1931">1931</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col9 decl" id="499source_array" title='source_array' data-type='llvm_ir::IrArray' data-ref="499source_array">source_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col1 ref" href="#481operand" title='operand' data-ref="481operand">operand</a>);</td></tr>
<tr><th id="1932">1932</th><td>  <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col0 decl" id="500source_index" title='source_index' data-type='const llvm_ir::IrArray::Index' data-ref="500source_index">source_index</dfn> = <a class="local col8 ref" href="#498target_index" title='target_index' data-ref="498target_index">target_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index18SourceIndexOfSliceERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEES9_PN4llvm9IRBuilderINSA_14ConstantFolderENSA_24IRBuil13129195" title='xla::llvm_ir::IrArray::Index::SourceIndexOfSlice' data-ref="_ZNK3xla7llvm_ir7IrArray5Index18SourceIndexOfSliceERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEES9_PN4llvm9IRBuilderINSA_14ConstantFolderENSA_24IRBuil13129195">SourceIndexOfSlice</a>(</td></tr>
<tr><th id="1933">1933</th><td>      <i>/*shape=*/</i><a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <i>/*starts=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction12slice_startsEv" title='xla::HloInstruction::slice_starts' data-ref="_ZNK3xla14HloInstruction12slice_startsEv">slice_starts</a>(),</td></tr>
<tr><th id="1934">1934</th><td>      <i>/*strides=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction13slice_stridesEv" title='xla::HloInstruction::slice_strides' data-ref="_ZNK3xla14HloInstruction13slice_stridesEv">slice_strides</a>(), <i>/*builder=*/</i>&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1935">1935</th><td></td></tr>
<tr><th id="1936">1936</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="501memcpy_dest" title='memcpy_dest' data-type='llvm::Value *' data-ref="501memcpy_dest">memcpy_dest</dfn> = <a class="local col5 ref" href="#495target_array" title='target_array' data-ref="495target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(</td></tr>
<tr><th id="1937">1937</th><td>      <a class="local col8 ref" href="#498target_index" title='target_index' data-ref="498target_index">target_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"slice.dest"</q>);</td></tr>
<tr><th id="1938">1938</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="502memcpy_source" title='memcpy_source' data-type='llvm::Value *' data-ref="502memcpy_source">memcpy_source</dfn> = <a class="local col9 ref" href="#499source_array" title='source_array' data-ref="499source_array">source_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(</td></tr>
<tr><th id="1939">1939</th><td>      <a class="local col0 ref" href="#500source_index" title='source_index' data-ref="500source_index">source_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"slice.source"</q>);</td></tr>
<tr><th id="1940">1940</th><td></td></tr>
<tr><th id="1941">1941</th><td>  <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="503memcpy_elements" title='memcpy_elements' data-type='const int64' data-ref="503memcpy_elements">memcpy_elements</dfn> =</td></tr>
<tr><th id="1942">1942</th><td>      <a class="local col9 ref" href="#489primitive_elements_per_logical_element" title='primitive_elements_per_logical_element' data-ref="489primitive_elements_per_logical_element">primitive_elements_per_logical_element</a> * <a class="local col2 ref" href="#492memcpy_logical_elements" title='memcpy_logical_elements' data-ref="492memcpy_logical_elements">memcpy_logical_elements</a>;</td></tr>
<tr><th id="1943">1943</th><td></td></tr>
<tr><th id="1944">1944</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_" title='xla::cpu::IrEmitter::EmitTransferElements' data-ref="_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_">EmitTransferElements</a>(<a class="local col1 ref" href="#501memcpy_dest" title='memcpy_dest' data-ref="501memcpy_dest">memcpy_dest</a>, <a class="local col2 ref" href="#502memcpy_source" title='memcpy_source' data-ref="502memcpy_source">memcpy_source</a>, <a class="local col3 ref" href="#503memcpy_elements" title='memcpy_elements' data-ref="503memcpy_elements">memcpy_elements</a>,</td></tr>
<tr><th id="1945">1945</th><td>                       <a class="local col0 ref" href="#480slice" title='slice' data-ref="480slice">slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>(), <a class="local col5 ref" href="#495target_array" title='target_array' data-ref="495target_array">target_array</a>,</td></tr>
<tr><th id="1946">1946</th><td>                       <a class="local col9 ref" href="#499source_array" title='source_array' data-ref="499source_array">source_array</a>);</td></tr>
<tr><th id="1947">1947</th><td></td></tr>
<tr><th id="1948">1948</th><td>  <b>if</b> (<a class="macro" href="../../../../core/platform/default/logging.h.html#85" title="((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel())" data-ref="_M/VLOG_IS_ON">VLOG_IS_ON</a>(<var>2</var>)) {</td></tr>
<tr><th id="1949">1949</th><td>    <em>const</em> <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="504memcpy_bytes" title='memcpy_bytes' data-type='const int64' data-ref="504memcpy_bytes">memcpy_bytes</dfn> =</td></tr>
<tr><th id="1950">1950</th><td>        <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil10ByteSizeOfERKNS_5ShapeEx" title='xla::ShapeUtil::ByteSizeOf' data-ref="_ZN3xla9ShapeUtil10ByteSizeOfERKNS_5ShapeEx">ByteSizeOf</a>(<a class="local col7 ref" href="#487logical_element_shape" title='logical_element_shape' data-ref="487logical_element_shape">logical_element_shape</a>) * <a class="local col3 ref" href="#503memcpy_elements" title='memcpy_elements' data-ref="503memcpy_elements">memcpy_elements</a>;</td></tr>
<tr><th id="1951">1951</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 1951, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  emitted copy of "</q> <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZNSt13basic_ostreamlsEx" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEx">&lt;&lt;</a> <a class="local col4 ref" href="#504memcpy_bytes" title='memcpy_bytes' data-ref="504memcpy_bytes">memcpy_bytes</a> <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" bytes inside "</q></td></tr>
<tr><th id="1952">1952</th><td>            <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZNSt13basic_ostreamlsEx" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEx">&lt;&lt;</a> <a class="local col6 ref" href="#496num_outer_loops" title='num_outer_loops' data-ref="496num_outer_loops">num_outer_loops</a> <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" loops"</q>;</td></tr>
<tr><th id="1953">1953</th><td>  }</td></tr>
<tr><th id="1954">1954</th><td></td></tr>
<tr><th id="1955">1955</th><td>  <b>if</b> (<a class="local col6 ref" href="#496num_outer_loops" title='num_outer_loops' data-ref="496num_outer_loops">num_outer_loops</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="1956">1956</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col7 ref" href="#497loops" title='loops' data-ref="497loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1957">1957</th><td>  }</td></tr>
<tr><th id="1958">1958</th><td></td></tr>
<tr><th id="1959">1959</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="1960">1960</th><td>}</td></tr>
<tr><th id="1961">1961</th><td></td></tr>
<tr><th id="1962">1962</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter18HandleDynamicSliceEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleDynamicSlice' data-ref="_ZN3xla3cpu9IrEmitter18HandleDynamicSliceEPNS_14HloInstructionE">HandleDynamicSlice</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="505dynamic_slice" title='dynamic_slice' data-type='xla::HloInstruction *' data-ref="505dynamic_slice">dynamic_slice</dfn>) {</td></tr>
<tr><th id="1963">1963</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col5 ref" href="#505dynamic_slice" title='dynamic_slice' data-ref="505dynamic_slice">dynamic_slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="1964">1964</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(dynamic_slice)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col5 ref" href="#505dynamic_slice" title='dynamic_slice' data-ref="505dynamic_slice">dynamic_slice</a>));</td></tr>
<tr><th id="1965">1965</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</a>(*<a class="local col5 ref" href="#505dynamic_slice" title='dynamic_slice' data-ref="505dynamic_slice">dynamic_slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>), *<a class="local col5 ref" href="#505dynamic_slice" title='dynamic_slice' data-ref="505dynamic_slice">dynamic_slice</a>);</td></tr>
<tr><th id="1966">1966</th><td>  }</td></tr>
<tr><th id="1967">1967</th><td>  <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col5 ref" href="#505dynamic_slice" title='dynamic_slice' data-ref="505dynamic_slice">dynamic_slice</a>);</td></tr>
<tr><th id="1968">1968</th><td>}</td></tr>
<tr><th id="1969">1969</th><td></td></tr>
<tr><th id="1970">1970</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter24HandleDynamicUpdateSliceEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleDynamicUpdateSlice' data-ref="_ZN3xla3cpu9IrEmitter24HandleDynamicUpdateSliceEPNS_14HloInstructionE">HandleDynamicUpdateSlice</dfn>(</td></tr>
<tr><th id="1971">1971</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col6 decl" id="506dynamic_update_slice" title='dynamic_update_slice' data-type='xla::HloInstruction *' data-ref="506dynamic_update_slice">dynamic_update_slice</dfn>) {</td></tr>
<tr><th id="1972">1972</th><td>  <em>auto</em> <dfn class="local col7 decl" id="507update" title='update' data-type='const xla::HloInstruction *' data-ref="507update">update</dfn> = <a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="1973">1973</th><td>  <b>if</b> (<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="1974">1974</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(dynamic_update_slice)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>));</td></tr>
<tr><th id="1975">1975</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</a>(*<a class="local col7 ref" href="#507update" title='update' data-ref="507update">update</a>, *<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>);</td></tr>
<tr><th id="1976">1976</th><td>  } <b>else</b> <b>if</b> (<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/ops.h.html#_ZN3xla7llvm_ir28CanUpdateDynamicSliceInPlaceEPNS_14HloInstructionERKNS_16BufferAssignmentE" title='xla::llvm_ir::CanUpdateDynamicSliceInPlace' data-ref="_ZN3xla7llvm_ir28CanUpdateDynamicSliceInPlaceEPNS_14HloInstructionERKNS_16BufferAssignmentE">CanUpdateDynamicSliceInPlace</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>,</td></tr>
<tr><th id="1977">1977</th><td>                                                   <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>)) {</td></tr>
<tr><th id="1978">1978</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(dynamic_update_slice)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>));</td></tr>
<tr><th id="1979">1979</th><td>    <em>auto</em> <dfn class="local col8 decl" id="508operands" title='operands' data-type='std::vector&lt;xla::llvm_ir::IrArray, std::allocator&lt;xla::llvm_ir::IrArray&gt; &gt;' data-ref="508operands">operands</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArraysForOperandsOf' data-ref="_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE">GetIrArraysForOperandsOf</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>);</td></tr>
<tr><th id="1980">1980</th><td>    <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/ops.h.html#_ZN3xla7llvm_ir29EmitDynamicUpdateSliceInPlaceEN10tensorflow3gtl10ArraySliceINS0_7IrArrayEEERKS4_NS1_11StringPieceEPN4llvm9IRBuilderINS9_14ConstantFol1728067" title='xla::llvm_ir::EmitDynamicUpdateSliceInPlace' data-ref="_ZN3xla7llvm_ir29EmitDynamicUpdateSliceInPlaceEN10tensorflow3gtl10ArraySliceINS0_7IrArrayEEERKS4_NS1_11StringPieceEPN4llvm9IRBuilderINS9_14ConstantFol1728067">EmitDynamicUpdateSliceInPlace</a>(</td></tr>
<tr><th id="1981">1981</th><td>        <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col8 ref" href="#508operands" title='operands' data-ref="508operands">operands</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>),</td></tr>
<tr><th id="1982">1982</th><td>        <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"in_place"</q>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="1983">1983</th><td>  }</td></tr>
<tr><th id="1984">1984</th><td>  <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col6 ref" href="#506dynamic_update_slice" title='dynamic_update_slice' data-ref="506dynamic_update_slice">dynamic_update_slice</a>);</td></tr>
<tr><th id="1985">1985</th><td>}</td></tr>
<tr><th id="1986">1986</th><td></td></tr>
<tr><th id="1987">1987</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10HandleRecvEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleRecv' data-ref="_ZN3xla3cpu9IrEmitter10HandleRecvEPNS_14HloInstructionE">HandleRecv</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="509recv" title='recv' data-type='xla::HloInstruction *' data-ref="509recv">recv</dfn>) {</td></tr>
<tr><th id="1988">1988</th><td>  <i>// TODO(b/33942983): Support Send/Recv on CPU.</i></td></tr>
<tr><th id="1989">1989</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Recv is not implemented on CPU."</q>);</td></tr>
<tr><th id="1990">1990</th><td>}</td></tr>
<tr><th id="1991">1991</th><td></td></tr>
<tr><th id="1992">1992</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter14HandleRecvDoneEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleRecvDone' data-ref="_ZN3xla3cpu9IrEmitter14HandleRecvDoneEPNS_14HloInstructionE">HandleRecvDone</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="510recv_done" title='recv_done' data-type='xla::HloInstruction *' data-ref="510recv_done">recv_done</dfn>) {</td></tr>
<tr><th id="1993">1993</th><td>  <i>// TODO(b/33942983): Support Send/Recv on CPU.</i></td></tr>
<tr><th id="1994">1994</th><td>  <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Recv-done is not implemented on CPU."</q>);</td></tr>
<tr><th id="1995">1995</th><td>}</td></tr>
<tr><th id="1996">1996</th><td></td></tr>
<tr><th id="1997">1997</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter9HandlePadEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandlePad' data-ref="_ZN3xla3cpu9IrEmitter9HandlePadEPNS_14HloInstructionE">HandlePad</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="511pad" title='pad' data-type='xla::HloInstruction *' data-ref="511pad">pad</dfn>) {</td></tr>
<tr><th id="1998">1998</th><td>  <i>// CPU backend does not properly handle negative padding but this is ok</i></td></tr>
<tr><th id="1999">1999</th><td><i>  // because negative padding should be removed by the algebraic simplifier.</i></td></tr>
<tr><th id="2000">2000</th><td>  <b>for</b> (<em>auto</em>&amp; <dfn class="local col2 decl" id="512padding_dimension" title='padding_dimension' data-type='const xla::PaddingConfig_PaddingConfigDimension &amp;' data-ref="512padding_dimension">padding_dimension</dfn> : <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction14padding_configEv" title='xla::HloInstruction::padding_config' data-ref="_ZNK3xla14HloInstruction14padding_configEv">padding_config</a>().<span class='ref' title='xla::PaddingConfig::dimensions' data-ref="_ZNK3xla13PaddingConfig10dimensionsEv">dimensions</span>()) {</td></tr>
<tr><th id="2001">2001</th><td>    <b>if</b> (<a class="local col2 ref" href="#512padding_dimension" title='padding_dimension' data-ref="512padding_dimension">padding_dimension</a>.<span class='ref' title='xla::PaddingConfig_PaddingConfigDimension::edge_padding_low' data-ref="_ZNK3xla36PaddingConfig_PaddingConfigDimension16edge_padding_lowEv">edge_padding_low</span>() &lt; <var>0</var> ||</td></tr>
<tr><th id="2002">2002</th><td>        <a class="local col2 ref" href="#512padding_dimension" title='padding_dimension' data-ref="512padding_dimension">padding_dimension</a>.<span class='ref' title='xla::PaddingConfig_PaddingConfigDimension::edge_padding_high' data-ref="_ZNK3xla36PaddingConfig_PaddingConfigDimension17edge_padding_highEv">edge_padding_high</span>() &lt; <var>0</var>) {</td></tr>
<tr><th id="2003">2003</th><td>      <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla19InternalErrorStrCatEDpOT_" title='xla::InternalErrorStrCat' data-ref="_ZN3xla19InternalErrorStrCatEDpOT_">InternalErrorStrCat</a>(</td></tr>
<tr><th id="2004">2004</th><td>          <q>"Encountered negative padding in IrEmitter on CPU. "</q></td></tr>
<tr><th id="2005">2005</th><td>          <q>"This should have been eliminated at the HLO level. "</q>,</td></tr>
<tr><th id="2006">2006</th><td>          <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>());</td></tr>
<tr><th id="2007">2007</th><td>    }</td></tr>
<tr><th id="2008">2008</th><td>  }</td></tr>
<tr><th id="2009">2009</th><td></td></tr>
<tr><th id="2010">2010</th><td>  <i>// First, fill in the padding value to all output elements.</i></td></tr>
<tr><th id="2011">2011</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetElementLoop( pad, &quot;initialize&quot;, [this, pad](const llvm_ir::IrArray::Index&amp; target_index) { const HloInstruction* padding_value = pad-&gt;operand(1); llvm::Value* padding_value_addr = GetEmittedValueFor(padding_value); return ir_builder_.CreateLoad(padding_value_addr); })); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="2012">2012</th><td>      <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"initialize"</q>,</td></tr>
<tr><th id="2013">2013</th><td>      <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, pad](<em>const</em> llvm_ir::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col3 decl" id="513target_index" title='target_index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="513target_index">target_index</dfn>) {</td></tr>
<tr><th id="2014">2014</th><td>        <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="514padding_value" title='padding_value' data-type='const xla::HloInstruction *' data-ref="514padding_value">padding_value</dfn> = <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="2015">2015</th><td>        llvm::<span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="515padding_value_addr" title='padding_value_addr' data-type='llvm::Value *' data-ref="515padding_value_addr">padding_value_addr</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col4 ref" href="#2011" title='padding_value' data-ref="514padding_value">padding_value</a>);</td></tr>
<tr><th id="2016">2016</th><td>        <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col5 ref" href="#2011" title='padding_value_addr' data-ref="515padding_value_addr">padding_value_addr</a>);</td></tr>
<tr><th id="2017">2017</th><td>      }));</td></tr>
<tr><th id="2018">2018</th><td></td></tr>
<tr><th id="2019">2019</th><td>  <i>// Create a loop to iterate over the operand elements and update the output</i></td></tr>
<tr><th id="2020">2020</th><td><i>  // locations where the operand elements should be stored.</i></td></tr>
<tr><th id="2021">2021</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col6 decl" id="516loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="516loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"assign"</q>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2022">2022</th><td>  <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="517operand" title='operand' data-type='const xla::HloInstruction *' data-ref="517operand">operand</dfn> = <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="2023">2023</th><td>  <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col8 decl" id="518operand_index" title='operand_index' data-type='const llvm_ir::IrArray::Index' data-ref="518operand_index">operand_index</dfn> =</td></tr>
<tr><th id="2024">2024</th><td>      <a class="local col6 ref" href="#516loops" title='loops' data-ref="516loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShape' data-ref="_ZN3xla7llvm_ir11ForLoopNest16AddLoopsForShapeERKNS_5ShapeEN10tensorflow11StringPieceE">AddLoopsForShape</a>(<a class="local col7 ref" href="#517operand" title='operand' data-ref="517operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"operand"</q>);</td></tr>
<tr><th id="2025">2025</th><td></td></tr>
<tr><th id="2026">2026</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col6 ref" href="#516loops" title='loops' data-ref="516loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2027">2027</th><td></td></tr>
<tr><th id="2028">2028</th><td>  <i>// Load an element from the operand.</i></td></tr>
<tr><th id="2029">2029</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col9 decl" id="519operand_array" title='operand_array' data-type='llvm_ir::IrArray' data-ref="519operand_array">operand_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col7 ref" href="#517operand" title='operand' data-ref="517operand">operand</a>));</td></tr>
<tr><th id="2030">2030</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="520operand_data" title='operand_data' data-type='llvm::Value *' data-ref="520operand_data">operand_data</dfn> =</td></tr>
<tr><th id="2031">2031</th><td>      <a class="local col9 ref" href="#519operand_array" title='operand_array' data-ref="519operand_array">operand_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitReadArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitReadArrayElement</a>(<a class="local col8 ref" href="#518operand_index" title='operand_index' data-ref="518operand_index">operand_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2032">2032</th><td></td></tr>
<tr><th id="2033">2033</th><td>  <i>// Compute the output index the operand element should be assigned to.</i></td></tr>
<tr><th id="2034">2034</th><td><i>  // output_index := edge_padding_low + operand_index * (interior_padding + 1)</i></td></tr>
<tr><th id="2035">2035</th><td>  <em>const</em> <span class='type' title='xla::PaddingConfig' data-ref="xla::PaddingConfig">PaddingConfig</span>&amp; <dfn class="local col1 decl" id="521padding_config" title='padding_config' data-type='const xla::PaddingConfig &amp;' data-ref="521padding_config">padding_config</dfn> = <a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction14padding_configEv" title='xla::HloInstruction::padding_config' data-ref="_ZNK3xla14HloInstruction14padding_configEv">padding_config</a>();</td></tr>
<tr><th id="2036">2036</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <a class="ref fake" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5IndexC1Ev" title='xla::llvm_ir::IrArray::Index::Index' data-ref="_ZN3xla7llvm_ir7IrArray5IndexC1Ev"></a><dfn class="local col2 decl" id="522output_index" title='output_index' data-type='llvm_ir::IrArray::Index' data-ref="522output_index">output_index</dfn>;</td></tr>
<tr><th id="2037">2037</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col3 decl" id="523i" title='i' data-type='size_t' data-ref="523i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#523i" title='i' data-ref="523i">i</a> &lt; <a class="local col8 ref" href="#518operand_index" title='operand_index' data-ref="518operand_index">operand_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5Index4sizeEv" title='xla::llvm_ir::IrArray::Index::size' data-ref="_ZNK3xla7llvm_ir7IrArray5Index4sizeEv">size</a>(); ++<a class="local col3 ref" href="#523i" title='i' data-ref="523i">i</a>) {</td></tr>
<tr><th id="2038">2038</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="524offset" title='offset' data-type='llvm::Value *' data-ref="524offset">offset</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateMul' data-ref="_ZN4llvm9IRBuilder9CreateMulEPNS_5ValueES2_RKNS_5TwineEbb">CreateMul</span>(</td></tr>
<tr><th id="2039">2039</th><td>        <a class="local col8 ref" href="#518operand_index" title='operand_index' data-ref="518operand_index">operand_index</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray5IndexixEm" title='xla::llvm_ir::IrArray::Index::operator[]' data-ref="_ZNK3xla7llvm_ir7IrArray5IndexixEm">[<a class="local col3 ref" href="#523i" title='i' data-ref="523i">i</a>]</a>,</td></tr>
<tr><th id="2040">2040</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col1 ref" href="#521padding_config" title='padding_config' data-ref="521padding_config">padding_config</a>.<span class='ref' title='xla::PaddingConfig::dimensions' data-ref="_ZNK3xla13PaddingConfig10dimensionsEi">dimensions</span>(<a class="local col3 ref" href="#523i" title='i' data-ref="523i">i</a>).<span class='ref' title='xla::PaddingConfig_PaddingConfigDimension::interior_padding' data-ref="_ZNK3xla36PaddingConfig_PaddingConfigDimension16interior_paddingEv">interior_padding</span>() +</td></tr>
<tr><th id="2041">2041</th><td>                             <var>1</var>));</td></tr>
<tr><th id="2042">2042</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="525index" title='index' data-type='llvm::Value *' data-ref="525index">index</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAdd' data-ref="_ZN4llvm9IRBuilder9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb">CreateAdd</span>(</td></tr>
<tr><th id="2043">2043</th><td>        <a class="local col4 ref" href="#524offset" title='offset' data-ref="524offset">offset</a>,</td></tr>
<tr><th id="2044">2044</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col1 ref" href="#521padding_config" title='padding_config' data-ref="521padding_config">padding_config</a>.<span class='ref' title='xla::PaddingConfig::dimensions' data-ref="_ZNK3xla13PaddingConfig10dimensionsEi">dimensions</span>(<a class="local col3 ref" href="#523i" title='i' data-ref="523i">i</a>).<span class='ref' title='xla::PaddingConfig_PaddingConfigDimension::edge_padding_low' data-ref="_ZNK3xla36PaddingConfig_PaddingConfigDimension16edge_padding_lowEv">edge_padding_low</span>()));</td></tr>
<tr><th id="2045">2045</th><td>    <a class="local col2 ref" href="#522output_index" title='output_index' data-ref="522output_index">output_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index9push_backEPN4llvm5ValueE" title='xla::llvm_ir::IrArray::Index::push_back' data-ref="_ZN3xla7llvm_ir7IrArray5Index9push_backEPN4llvm5ValueE">push_back</a>(<a class="local col5 ref" href="#525index" title='index' data-ref="525index">index</a>);</td></tr>
<tr><th id="2046">2046</th><td>  }</td></tr>
<tr><th id="2047">2047</th><td></td></tr>
<tr><th id="2048">2048</th><td>  <i>// Store the operand element to the computed output location.</i></td></tr>
<tr><th id="2049">2049</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col6 decl" id="526output_array" title='output_array' data-type='llvm_ir::IrArray' data-ref="526output_array">output_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col1 ref" href="#511pad" title='pad' data-ref="511pad">pad</a>));</td></tr>
<tr><th id="2050">2050</th><td>  <a class="local col6 ref" href="#526output_array" title='output_array' data-ref="526output_array">output_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray21EmitWriteArrayElementERKNS1_5IndexEPN4llvm5ValueEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::IrArray::EmitWriteArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray21EmitWriteArrayElementERKNS1_5IndexEPN4llvm5ValueEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEE">EmitWriteArrayElement</a>(<a class="local col2 ref" href="#522output_index" title='output_index' data-ref="522output_index">output_index</a>, <a class="local col0 ref" href="#520operand_data" title='operand_data' data-ref="520operand_data">operand_data</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2051">2051</th><td></td></tr>
<tr><th id="2052">2052</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col6 ref" href="#516loops" title='loops' data-ref="516loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2053">2053</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2054">2054</th><td>}</td></tr>
<tr><th id="2055">2055</th><td></td></tr>
<tr><th id="2056">2056</th><td><i  data-doc="_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE">// If `hlo` is a Transpose, returns its operand; otherwise returns `hlo` itself.</i></td></tr>
<tr><th id="2057">2057</th><td><em>static</em> <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="tu decl def" id="_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE" title='xla::cpu::StripTranspose' data-type='const xla::HloInstruction * xla::cpu::StripTranspose(const xla::HloInstruction &amp; hlo)' data-ref="_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE">StripTranspose</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>&amp; <dfn class="local col7 decl" id="527hlo" title='hlo' data-type='const xla::HloInstruction &amp;' data-ref="527hlo">hlo</dfn>) {</td></tr>
<tr><th id="2058">2058</th><td>  <b>if</b> (<a class="local col7 ref" href="#527hlo" title='hlo' data-ref="527hlo">hlo</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16IsRank2TransposeEv" title='xla::HloInstruction::IsRank2Transpose' data-ref="_ZNK3xla14HloInstruction16IsRank2TransposeEv">IsRank2Transpose</a>()) {</td></tr>
<tr><th id="2059">2059</th><td>    <b>return</b> <a class="local col7 ref" href="#527hlo" title='hlo' data-ref="527hlo">hlo</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="2060">2060</th><td>  }</td></tr>
<tr><th id="2061">2061</th><td>  <b>return</b> &amp;<a class="local col7 ref" href="#527hlo" title='hlo' data-ref="527hlo">hlo</a>;</td></tr>
<tr><th id="2062">2062</th><td>}</td></tr>
<tr><th id="2063">2063</th><td></td></tr>
<tr><th id="2064">2064</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter12HandleFusionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleFusion' data-ref="_ZN3xla3cpu9IrEmitter12HandleFusionEPNS_14HloInstructionE">HandleFusion</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="528fusion" title='fusion' data-type='xla::HloInstruction *' data-ref="528fusion">fusion</dfn>) {</td></tr>
<tr><th id="2065">2065</th><td>  <em>auto</em>* <dfn class="local col9 decl" id="529root" title='root' data-type='xla::HloInstruction *' data-ref="529root">root</dfn> = <a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction21fused_expression_rootEv" title='xla::HloInstruction::fused_expression_root' data-ref="_ZNK3xla14HloInstruction21fused_expression_rootEv">fused_expression_root</a>();</td></tr>
<tr><th id="2066">2066</th><td>  <b>if</b> (<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction11fusion_kindEv" title='xla::HloInstruction::fusion_kind' data-ref="_ZNK3xla14HloInstruction11fusion_kindEv">fusion_kind</a>() == <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>::<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind" title='xla::HloInstruction::FusionKind' data-ref="xla::HloInstruction::FusionKind">FusionKind</a>::<a class="enum" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind::kTransposeDot" title='xla::HloInstruction::FusionKind::kTransposeDot' data-ref="xla::HloInstruction::FusionKind::kTransposeDot">kTransposeDot</a>) {</td></tr>
<tr><th id="2067">2067</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#273" title="while (false &amp;&amp; (root-&gt;opcode() == HloOpcode::kDot)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2067)" data-ref="_M/DCHECK">DCHECK</a>(<a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>() == <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kDot' data-ref="xla::HloOpcode::kDot">kDot</a>);</td></tr>
<tr><th id="2068">2068</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="530lhs_parameter" title='lhs_parameter' data-type='const xla::HloInstruction *' data-ref="530lhs_parameter">lhs_parameter</dfn> = <a class="tu ref" href="#_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE" title='xla::cpu::StripTranspose' data-use='c' data-ref="_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE">StripTranspose</a>(*<a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>));</td></tr>
<tr><th id="2069">2069</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="531rhs_parameter" title='rhs_parameter' data-type='const xla::HloInstruction *' data-ref="531rhs_parameter">rhs_parameter</dfn> = <a class="tu ref" href="#_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE" title='xla::cpu::StripTranspose' data-use='c' data-ref="_ZN3xla3cpuL14StripTransposeERKNS_14HloInstructionE">StripTranspose</a>(*<a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>));</td></tr>
<tr><th id="2070">2070</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#273" title="while (false &amp;&amp; (lhs_parameter-&gt;opcode() == HloOpcode::kParameter &amp;&amp; rhs_parameter-&gt;opcode() == HloOpcode::kParameter)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2071)" data-ref="_M/DCHECK">DCHECK</a>(<a class="local col0 ref" href="#530lhs_parameter" title='lhs_parameter' data-ref="530lhs_parameter">lhs_parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>() == <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kParameter' data-ref="xla::HloOpcode::kParameter">kParameter</a> &amp;&amp;</td></tr>
<tr><th id="2071">2071</th><td>           <a class="local col1 ref" href="#531rhs_parameter" title='rhs_parameter' data-ref="531rhs_parameter">rhs_parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>() == <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kParameter' data-ref="xla::HloOpcode::kParameter">kParameter</a>);</td></tr>
<tr><th id="2072">2072</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="532lhs" title='lhs' data-type='const xla::HloInstruction *' data-ref="532lhs">lhs</dfn> =</td></tr>
<tr><th id="2073">2073</th><td>        <a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col0 ref" href="#530lhs_parameter" title='lhs_parameter' data-ref="530lhs_parameter">lhs_parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>());</td></tr>
<tr><th id="2074">2074</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="533rhs" title='rhs' data-type='const xla::HloInstruction *' data-ref="533rhs">rhs</dfn> =</td></tr>
<tr><th id="2075">2075</th><td>        <a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col1 ref" href="#531rhs_parameter" title='rhs_parameter' data-ref="531rhs_parameter">rhs_parameter</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>());</td></tr>
<tr><th id="2076">2076</th><td></td></tr>
<tr><th id="2077">2077</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ElementTypesSameAndSupported( *root, {lhs, rhs}, {F16, F32})); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</a>(</td></tr>
<tr><th id="2078">2078</th><td>        <i>/*instruction=*/</i>*<a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>, <i>/*operands=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col2 ref" href="#532lhs" title='lhs' data-ref="532lhs">lhs</a>, <a class="local col3 ref" href="#533rhs" title='rhs' data-ref="533rhs">rhs</a>},</td></tr>
<tr><th id="2079">2079</th><td>        <i>/*supported_types=*/</i><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<span class='enum' title='xla::PrimitiveType::F16' data-ref="xla::PrimitiveType::F16">F16</span>, <span class='enum' title='xla::PrimitiveType::F32' data-ref="xla::PrimitiveType::F32">F32</span>}));</td></tr>
<tr><th id="2080">2080</th><td></td></tr>
<tr><th id="2081">2081</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col4 decl" id="534lhs_array" title='lhs_array' data-type='llvm_ir::IrArray' data-ref="534lhs_array">lhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#532lhs" title='lhs' data-ref="532lhs">lhs</a>));</td></tr>
<tr><th id="2082">2082</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col5 decl" id="535rhs_array" title='rhs_array' data-type='llvm_ir::IrArray' data-ref="535rhs_array">rhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a><a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col3 ref" href="#533rhs" title='rhs' data-ref="533rhs">rhs</a>));</td></tr>
<tr><th id="2083">2083</th><td></td></tr>
<tr><th id="2084">2084</th><td>    <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span> <dfn class="local col6 decl" id="536target_shape" title='target_shape' data-type='xla::Shape' data-ref="536target_shape">target_shape</dfn> = <span class='ref fake' title='xla::Shape::Shape' data-ref="_ZN3xla5ShapeC1ERKS0_"></span><a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2085">2085</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(fusion)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>));</td></tr>
<tr><th id="2086">2086</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col7 decl" id="537target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="537target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>);</td></tr>
<tr><th id="2087">2087</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2087, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleFusion kTransposeDot: "</q>;</td></tr>
<tr><th id="2088">2088</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2088, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  lhs operand: "</q></td></tr>
<tr><th id="2089">2089</th><td>            <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col4 ref" href="#534lhs_array" title='lhs_array' data-ref="534lhs_array">lhs_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="2090">2090</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2090, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  rhs operand: "</q></td></tr>
<tr><th id="2091">2091</th><td>            <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col5 ref" href="#535rhs_array" title='rhs_array' data-ref="535rhs_array">rhs_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="2092">2092</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2092, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  target: "</q></td></tr>
<tr><th id="2093">2093</th><td>            <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col7 ref" href="#537target_array" title='target_array' data-ref="537target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="2094">2094</th><td></td></tr>
<tr><th id="2095">2095</th><td>    <i>// Dot operation is complicated so we delegate to a helper class.</i></td></tr>
<tr><th id="2096">2096</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (DotOpEmitter::EmitDotOperation( *root, root-&gt;operand(0)-&gt;IsRank2Transpose(), root-&gt;operand(1)-&gt;IsRank2Transpose(), target_array, lhs_array, rhs_array, nullptr, GetExecutableRunOptionsArgument(), &amp;ir_builder_, hlo_module_config_, target_machine_features_)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="type" href="dot_op_emitter.h.html#xla::cpu::DotOpEmitter" title='xla::cpu::DotOpEmitter' data-ref="xla::cpu::DotOpEmitter">DotOpEmitter</a>::<a class="ref" href="dot_op_emitter.h.html#_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299" title='xla::cpu::DotOpEmitter::EmitDotOperation' data-ref="_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299">EmitDotOperation</a>(</td></tr>
<tr><th id="2097">2097</th><td>        *<a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>, <a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16IsRank2TransposeEv" title='xla::HloInstruction::IsRank2Transpose' data-ref="_ZNK3xla14HloInstruction16IsRank2TransposeEv">IsRank2Transpose</a>(),</td></tr>
<tr><th id="2098">2098</th><td>        <a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16IsRank2TransposeEv" title='xla::HloInstruction::IsRank2Transpose' data-ref="_ZNK3xla14HloInstruction16IsRank2TransposeEv">IsRank2Transpose</a>(), <a class="local col7 ref" href="#537target_array" title='target_array' data-ref="537target_array">target_array</a>, <a class="local col4 ref" href="#534lhs_array" title='lhs_array' data-ref="534lhs_array">lhs_array</a>,</td></tr>
<tr><th id="2099">2099</th><td>        <a class="local col5 ref" href="#535rhs_array" title='rhs_array' data-ref="535rhs_array">rhs_array</a>, <i>/*addend_array=*/</i><b>nullptr</b>, <a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="2100">2100</th><td>        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a>));</td></tr>
<tr><th id="2101">2101</th><td>    <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2102">2102</th><td>  } <b>else</b> <b>if</b> (<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/ops.h.html#_ZN3xla7llvm_ir37CanEmitFusedDynamicUpdateSliceInPlaceEPNS_14HloInstructionERKNS_16BufferAssignmentE" title='xla::llvm_ir::CanEmitFusedDynamicUpdateSliceInPlace' data-ref="_ZN3xla7llvm_ir37CanEmitFusedDynamicUpdateSliceInPlaceEPNS_14HloInstructionERKNS_16BufferAssignmentE">CanEmitFusedDynamicUpdateSliceInPlace</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>,</td></tr>
<tr><th id="2103">2103</th><td>                                                            <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>)) {</td></tr>
<tr><th id="2104">2104</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2104, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleFusion FusedDynamicUpdateSliceInPlace"</q>;</td></tr>
<tr><th id="2105">2105</th><td>    <a class="type" href="elemental_ir_emitter.h.html#xla::cpu::CpuElementalIrEmitter" title='xla::cpu::CpuElementalIrEmitter' data-ref="xla::cpu::CpuElementalIrEmitter">CpuElementalIrEmitter</a> <dfn class="local col8 decl" id="538elemental_emitter" title='elemental_emitter' data-type='xla::cpu::CpuElementalIrEmitter' data-ref="538elemental_emitter">elemental_emitter</dfn><a class="ref" href="elemental_ir_emitter.h.html#_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE" title='xla::cpu::CpuElementalIrEmitter::CpuElementalIrEmitter' data-ref="_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE">(</a><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>, <b>this</b>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="2106">2106</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(fusion)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>));</td></tr>
<tr><th id="2107">2107</th><td></td></tr>
<tr><th id="2108">2108</th><td>    <i>// Delegate to common implementation of fused in-place dynamic-update-slice.</i></td></tr>
<tr><th id="2109">2109</th><td>    <em>auto</em> <dfn class="local col9 decl" id="539operands" title='operands' data-type='std::vector&lt;xla::llvm_ir::IrArray, std::allocator&lt;xla::llvm_ir::IrArray&gt; &gt;' data-ref="539operands">operands</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArraysForOperandsOf' data-ref="_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE">GetIrArraysForOperandsOf</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>);</td></tr>
<tr><th id="2110">2110</th><td>    <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/ops.h.html#_ZN3xla7llvm_ir34EmitFusedDynamicUpdateSliceInPlaceEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceINS0_7IrArrayEEERKS6_PNS_18ElementalIrEmitterEPN1760152" title='xla::llvm_ir::EmitFusedDynamicUpdateSliceInPlace' data-ref="_ZN3xla7llvm_ir34EmitFusedDynamicUpdateSliceInPlaceEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceINS0_7IrArrayEEERKS6_PNS_18ElementalIrEmitterEPN1760152">EmitFusedDynamicUpdateSliceInPlace</a>(</td></tr>
<tr><th id="2111">2111</th><td>        <a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col9 ref" href="#539operands" title='operands' data-ref="539operands">operands</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>), &amp;<a class="local col8 ref" href="#538elemental_emitter" title='elemental_emitter' data-ref="538elemental_emitter">elemental_emitter</a>,</td></tr>
<tr><th id="2112">2112</th><td>        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2113">2113</th><td>  } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction11fusion_kindEv" title='xla::HloInstruction::fusion_kind' data-ref="_ZNK3xla14HloInstruction11fusion_kindEv">fusion_kind</a>() == <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>::<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind" title='xla::HloInstruction::FusionKind' data-ref="xla::HloInstruction::FusionKind">FusionKind</a>::<a class="enum" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind::kLoop" title='xla::HloInstruction::FusionKind::kLoop' data-ref="xla::HloInstruction::FusionKind::kLoop">kLoop</a>) {</td></tr>
<tr><th id="2114">2114</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2114, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleFusion kLoop"</q>;</td></tr>
<tr><th id="2115">2115</th><td>    <a class="type" href="elemental_ir_emitter.h.html#xla::cpu::CpuElementalIrEmitter" title='xla::cpu::CpuElementalIrEmitter' data-ref="xla::cpu::CpuElementalIrEmitter">CpuElementalIrEmitter</a> <dfn class="local col0 decl" id="540elemental_emitter" title='elemental_emitter' data-type='xla::cpu::CpuElementalIrEmitter' data-ref="540elemental_emitter">elemental_emitter</dfn><a class="ref" href="elemental_ir_emitter.h.html#_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE" title='xla::cpu::CpuElementalIrEmitter::CpuElementalIrEmitter' data-ref="_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE">(</a><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>, <b>this</b>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="2116">2116</th><td>    <em>auto</em> <dfn class="local col1 decl" id="541operands" title='operands' data-type='std::vector&lt;xla::llvm_ir::IrArray, std::allocator&lt;xla::llvm_ir::IrArray&gt; &gt;' data-ref="541operands">operands</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArraysForOperandsOf' data-ref="_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE">GetIrArraysForOperandsOf</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>);</td></tr>
<tr><th id="2117">2117</th><td>    <a class="type" href="../llvm_ir/fused_ir_emitter.h.html#xla::FusedIrEmitter" title='xla::FusedIrEmitter' data-ref="xla::FusedIrEmitter">FusedIrEmitter</a> <dfn class="local col2 decl" id="542fused_emitter" title='fused_emitter' data-type='xla::FusedIrEmitter' data-ref="542fused_emitter">fused_emitter</dfn><a class="ref" href="../llvm_ir/fused_ir_emitter.h.html#_ZN3xla14FusedIrEmitterC1EN10tensorflow3gtl10ArraySliceINS_7llvm_ir7IrArrayEEEPNS_18ElementalIrEmitterE" title='xla::FusedIrEmitter::FusedIrEmitter' data-ref="_ZN3xla14FusedIrEmitterC1EN10tensorflow3gtl10ArraySliceINS_7llvm_ir7IrArrayEEEPNS_18ElementalIrEmitterE">(</a><a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col1 ref" href="#541operands" title='operands' data-ref="541operands">operands</a>, &amp;<a class="local col0 ref" href="#540elemental_emitter" title='elemental_emitter' data-ref="540elemental_emitter">elemental_emitter</a>);</td></tr>
<tr><th id="2118">2118</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (fusion-&gt;fused_expression_root()-&gt;Accept(&amp;fused_emitter)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction21fused_expression_rootEv" title='xla::HloInstruction::fused_expression_root' data-ref="_ZNK3xla14HloInstruction21fused_expression_rootEv">fused_expression_root</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZN3xla14HloInstruction6AcceptEPNS_17DfsHloVisitorBaseIT_EEbb" title='xla::HloInstruction::Accept' data-ref="_ZN3xla14HloInstruction6AcceptEPNS_17DfsHloVisitorBaseIT_EEbb">Accept</a>(&amp;<a class="local col2 ref" href="#542fused_emitter" title='fused_emitter' data-ref="542fused_emitter">fused_emitter</a>));</td></tr>
<tr><th id="2119">2119</th><td></td></tr>
<tr><th id="2120">2120</th><td>    <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>, <a class="local col2 ref" href="#542fused_emitter" title='fused_emitter' data-ref="542fused_emitter">fused_emitter</a>.<a class="ref" href="../llvm_ir/fused_ir_emitter.h.html#_ZNK3xla14FusedIrEmitter16GetRootGeneratorEv" title='xla::FusedIrEmitter::GetRootGenerator' data-ref="_ZNK3xla14FusedIrEmitter16GetRootGeneratorEv">GetRootGenerator</a>());</td></tr>
<tr><th id="2121">2121</th><td>  } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction11fusion_kindEv" title='xla::HloInstruction::fusion_kind' data-ref="_ZNK3xla14HloInstruction11fusion_kindEv">fusion_kind</a>() == <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>::<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind" title='xla::HloInstruction::FusionKind' data-ref="xla::HloInstruction::FusionKind">FusionKind</a>::<a class="enum" href="../hlo_instruction.h.html#xla::HloInstruction::FusionKind::kOutput" title='xla::HloInstruction::FusionKind::kOutput' data-ref="xla::HloInstruction::FusionKind::kOutput">kOutput</a>) {</td></tr>
<tr><th id="2122">2122</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2122, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"HandleFusion kOutput"</q>;</td></tr>
<tr><th id="2123">2123</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="543dot_op_index" title='dot_op_index' data-type='int64' data-ref="543dot_op_index">dot_op_index</dfn> = <a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>() == <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kDot' data-ref="xla::HloOpcode::kDot">kDot</a> ? <var>0</var> : <var>1</var>;</td></tr>
<tr><th id="2124">2124</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="544dot" title='dot' data-type='const xla::HloInstruction *' data-ref="544dot">dot</dfn> = <a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col3 ref" href="#543dot_op_index" title='dot_op_index' data-ref="543dot_op_index">dot_op_index</a>);</td></tr>
<tr><th id="2125">2125</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(dot-&gt;opcode()), ::tensorflow::internal::GetReferenceableValue(HloOpcode::kDot), &quot;dot-&gt;opcode()&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;HloOpcode::kDot&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2125) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col4 ref" href="#544dot" title='dot' data-ref="544dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>(), <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kDot' data-ref="xla::HloOpcode::kDot">kDot</a>)</td></tr>
<tr><th id="2126">2126</th><td>        <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col4 ref" href="#544dot" title='dot' data-ref="544dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>() <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"  "</q></td></tr>
<tr><th id="2127">2127</th><td>        <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction30fused_instructions_computationEv" title='xla::HloInstruction::fused_instructions_computation' data-ref="_ZNK3xla14HloInstruction30fused_instructions_computationEv">fused_instructions_computation</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation8ToStringEv" title='xla::HloComputation::ToString' data-ref="_ZNK3xla14HloComputation8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2128">2128</th><td></td></tr>
<tr><th id="2129">2129</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col5 decl" id="545dot_lhs_param_number" title='dot_lhs_param_number' data-type='int64' data-ref="545dot_lhs_param_number">dot_lhs_param_number</dfn> = <a class="local col4 ref" href="#544dot" title='dot' data-ref="544dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>();</td></tr>
<tr><th id="2130">2130</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col6 decl" id="546dot_rhs_param_number" title='dot_rhs_param_number' data-type='int64' data-ref="546dot_rhs_param_number">dot_rhs_param_number</dfn> = <a class="local col4 ref" href="#544dot" title='dot' data-ref="544dot">dot</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>();</td></tr>
<tr><th id="2131">2131</th><td>    <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="547addend_param_number" title='addend_param_number' data-type='int64' data-ref="547addend_param_number">addend_param_number</dfn> =</td></tr>
<tr><th id="2132">2132</th><td>        <a class="local col9 ref" href="#529root" title='root' data-ref="529root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var> - <a class="local col3 ref" href="#543dot_op_index" title='dot_op_index' data-ref="543dot_op_index">dot_op_index</a>)-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16parameter_numberEv" title='xla::HloInstruction::parameter_number' data-ref="_ZNK3xla14HloInstruction16parameter_numberEv">parameter_number</a>();</td></tr>
<tr><th id="2133">2133</th><td></td></tr>
<tr><th id="2134">2134</th><td>    <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span> <dfn class="local col8 decl" id="548target_shape" title='target_shape' data-type='xla::Shape' data-ref="548target_shape">target_shape</dfn> = <span class='ref fake' title='xla::Shape::Shape' data-ref="_ZN3xla5ShapeC1ERKS0_"></span><a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2135">2135</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(fusion)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>));</td></tr>
<tr><th id="2136">2136</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col9 decl" id="549target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="549target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>);</td></tr>
<tr><th id="2137">2137</th><td></td></tr>
<tr><th id="2138">2138</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col0 decl" id="550lhs_array" title='lhs_array' data-type='llvm_ir::IrArray' data-ref="550lhs_array">lhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a></td></tr>
<tr><th id="2139">2139</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col5 ref" href="#545dot_lhs_param_number" title='dot_lhs_param_number' data-ref="545dot_lhs_param_number">dot_lhs_param_number</a>)));</td></tr>
<tr><th id="2140">2140</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col1 decl" id="551rhs_array" title='rhs_array' data-type='llvm_ir::IrArray' data-ref="551rhs_array">rhs_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a></td></tr>
<tr><th id="2141">2141</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col6 ref" href="#546dot_rhs_param_number" title='dot_rhs_param_number' data-ref="546dot_rhs_param_number">dot_rhs_param_number</a>)));</td></tr>
<tr><th id="2142">2142</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col2 decl" id="552addend_array" title='addend_array' data-type='llvm_ir::IrArray' data-ref="552addend_array">addend_array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EOS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EOS1_">(</a></td></tr>
<tr><th id="2143">2143</th><td>        <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col8 ref" href="#528fusion" title='fusion' data-ref="528fusion">fusion</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<a class="local col7 ref" href="#547addend_param_number" title='addend_param_number' data-ref="547addend_param_number">addend_param_number</a>)));</td></tr>
<tr><th id="2144">2144</th><td></td></tr>
<tr><th id="2145">2145</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (DotOpEmitter::EmitDotOperation( *dot, false, false, target_array, lhs_array, rhs_array, &amp;addend_array, GetExecutableRunOptionsArgument(), &amp;ir_builder_, hlo_module_config_, target_machine_features_)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="type" href="dot_op_emitter.h.html#xla::cpu::DotOpEmitter" title='xla::cpu::DotOpEmitter' data-ref="xla::cpu::DotOpEmitter">DotOpEmitter</a>::<a class="ref" href="dot_op_emitter.h.html#_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299" title='xla::cpu::DotOpEmitter::EmitDotOperation' data-ref="_ZN3xla3cpu12DotOpEmitter16EmitDotOperationERKNS_14HloInstructionEbbRKNS_7llvm_ir7IrArrayES8_S8_PS7_PN4llvm5ValueEPNSA_9IRBuilderINSA_14ConstantFolder5557299">EmitDotOperation</a>(</td></tr>
<tr><th id="2146">2146</th><td>        *<a class="local col4 ref" href="#544dot" title='dot' data-ref="544dot">dot</a>, <i>/*transpose_lhs=*/</i><b>false</b>, <i>/*transpose_rhs=*/</i><b>false</b>, <a class="local col9 ref" href="#549target_array" title='target_array' data-ref="549target_array">target_array</a>,</td></tr>
<tr><th id="2147">2147</th><td>        <a class="local col0 ref" href="#550lhs_array" title='lhs_array' data-ref="550lhs_array">lhs_array</a>, <a class="local col1 ref" href="#551rhs_array" title='rhs_array' data-ref="551rhs_array">rhs_array</a>, &amp;<a class="local col2 ref" href="#552addend_array" title='addend_array' data-ref="552addend_array">addend_array</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="2148">2148</th><td>        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::target_machine_features_" title='xla::cpu::IrEmitter::target_machine_features_' data-ref="xla::cpu::IrEmitter::target_machine_features_">target_machine_features_</a>));</td></tr>
<tr><th id="2149">2149</th><td>    <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2150">2150</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2151">2151</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"Fusion kind not implemented on CPU"</q>);</td></tr>
<tr><th id="2152">2152</th><td>  }</td></tr>
<tr><th id="2153">2153</th><td>}</td></tr>
<tr><th id="2154">2154</th><td></td></tr>
<tr><th id="2155">2155</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10HandleCallEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleCall' data-ref="_ZN3xla3cpu9IrEmitter10HandleCallEPNS_14HloInstructionE">HandleCall</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="553call" title='call' data-type='xla::HloInstruction *' data-ref="553call">call</dfn>) {</td></tr>
<tr><th id="2156">2156</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col4 decl" id="554computation" title='computation' data-type='xla::HloComputation *' data-ref="554computation">computation</dfn> = <a class="local col3 ref" href="#553call" title='call' data-ref="553call">call</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8to_applyEv" title='xla::HloInstruction::to_apply' data-ref="_ZNK3xla14HloInstruction8to_applyEv">to_apply</a>();</td></tr>
<tr><th id="2157">2157</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col5 decl" id="555call_ir_function" title='call_ir_function' data-type='llvm::Function *' data-ref="555call_ir_function">call_ir_function</dfn> = <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>);</td></tr>
<tr><th id="2158">2158</th><td></td></tr>
<tr><th id="2159">2159</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col6 decl" id="556parameter_addresses" title='parameter_addresses' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="556parameter_addresses">parameter_addresses</dfn>;</td></tr>
<tr><th id="2160">2160</th><td>  <b>for</b> (<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="557operand" title='operand' data-type='const xla::HloInstruction *' data-ref="557operand">operand</dfn> : <a class="local col3 ref" href="#553call" title='call' data-ref="553call">call</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>()) {</td></tr>
<tr><th id="2161">2161</th><td>    <a class="local col6 ref" href="#556parameter_addresses" title='parameter_addresses' data-ref="556parameter_addresses">parameter_addresses</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col7 ref" href="#557operand" title='operand' data-ref="557operand">operand</a>));</td></tr>
<tr><th id="2162">2162</th><td>  }</td></tr>
<tr><th id="2163">2163</th><td></td></tr>
<tr><th id="2164">2164</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(call)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col3 ref" href="#553call" title='call' data-ref="553call">call</a>));</td></tr>
<tr><th id="2165">2165</th><td></td></tr>
<tr><th id="2166">2166</th><td>  <b>if</b> (!<a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction26outer_dimension_partitionsEv" title='xla::HloInstruction::outer_dimension_partitions' data-ref="_ZNK3xla14HloInstruction26outer_dimension_partitionsEv">outer_dimension_partitions</a>().<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector5emptyEv" title='std::vector::empty' data-ref="_ZNKSt6vector5emptyEv">empty</a>() &amp;&amp;</td></tr>
<tr><th id="2167">2167</th><td>      !<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::parallel_cpu_backend_" title='xla::cpu::IrEmitter::parallel_cpu_backend_' data-ref="xla::cpu::IrEmitter::parallel_cpu_backend_">parallel_cpu_backend_</a>) {</td></tr>
<tr><th id="2168">2168</th><td>    <i>// ParallelTaskAssignment assigned partitions, emit call to</i></td></tr>
<tr><th id="2169">2169</th><td><i>    // ParallelForkJoin.</i></td></tr>
<tr><th id="2170">2170</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col8 decl" id="558call_args" title='call_args' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="558call_args">call_args</dfn> = <a class="ref" href="ir_function.h.html#_ZN3xla3cpu29GetArrayFunctionCallArgumentsEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultIn4888316" title='xla::cpu::GetArrayFunctionCallArguments' data-ref="_ZN3xla3cpu29GetArrayFunctionCallArgumentsEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultIn4888316">GetArrayFunctionCallArguments</a>(</td></tr>
<tr><th id="2171">2171</th><td>        <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col6 ref" href="#556parameter_addresses" title='parameter_addresses' data-ref="556parameter_addresses">parameter_addresses</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation4nameEv" title='xla::HloComputation::name' data-ref="_ZNK3xla14HloComputation4nameEv">name</a>(),</td></tr>
<tr><th id="2172">2172</th><td>        <i>/*return_value_buffer=*/</i><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col3 ref" href="#553call" title='call' data-ref="553call">call</a>]</a>,</td></tr>
<tr><th id="2173">2173</th><td>        <i>/*exec_run_options_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="2174">2174</th><td>        <i>/*temp_buffers_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv" title='xla::cpu::IrEmitter::GetTempBuffersArgument' data-ref="_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv">GetTempBuffersArgument</a>(),</td></tr>
<tr><th id="2175">2175</th><td>        <i>/*profile_counters_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv" title='xla::cpu::IrEmitter::GetProfileCountersArgument' data-ref="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv">GetProfileCountersArgument</a>());</td></tr>
<tr><th id="2176">2176</th><td></td></tr>
<tr><th id="2177">2177</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="559root" title='root' data-type='xla::HloInstruction *' data-ref="559root">root</dfn> = <a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>();</td></tr>
<tr><th id="2178">2178</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitCallToParallelForkJoin( call_args, root-&gt;shape(), root-&gt;outer_dimension_partitions(), &amp;ir_builder_, call_ir_function, computation-&gt;name())); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="ref" href="ir_function.h.html#_ZN3xla3cpu26EmitCallToParallelForkJoinERKSt6vectorIPN4llvm5ValueESaIS4_EERKNS_5ShapeERKS1_IxSaIxEEPNS2_9IRBuilderINS2_14ConstantFolderENS2_24IRBuilde2806901" title='xla::cpu::EmitCallToParallelForkJoin' data-ref="_ZN3xla3cpu26EmitCallToParallelForkJoinERKSt6vectorIPN4llvm5ValueESaIS4_EERKNS_5ShapeERKS1_IxSaIxEEPNS2_9IRBuilderINS2_14ConstantFolderENS2_24IRBuilde2806901">EmitCallToParallelForkJoin</a>(</td></tr>
<tr><th id="2179">2179</th><td>        <a class="local col8 ref" href="#558call_args" title='call_args' data-ref="558call_args">call_args</a>, <a class="local col9 ref" href="#559root" title='root' data-ref="559root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="local col9 ref" href="#559root" title='root' data-ref="559root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction26outer_dimension_partitionsEv" title='xla::HloInstruction::outer_dimension_partitions' data-ref="_ZNK3xla14HloInstruction26outer_dimension_partitionsEv">outer_dimension_partitions</a>(),</td></tr>
<tr><th id="2180">2180</th><td>        &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="local col5 ref" href="#555call_ir_function" title='call_ir_function' data-ref="555call_ir_function">call_ir_function</a>, <a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation4nameEv" title='xla::HloComputation::name' data-ref="_ZNK3xla14HloComputation4nameEv">name</a>()));</td></tr>
<tr><th id="2181">2181</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2182">2182</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</a>(<a class="local col5 ref" href="#555call_ir_function" title='call_ir_function' data-ref="555call_ir_function">call_ir_function</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col6 ref" href="#556parameter_addresses" title='parameter_addresses' data-ref="556parameter_addresses">parameter_addresses</a>,</td></tr>
<tr><th id="2183">2183</th><td>                              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col3 ref" href="#553call" title='call' data-ref="553call">call</a>]</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="local col4 ref" href="#554computation" title='computation' data-ref="554computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation4nameEv" title='xla::HloComputation::name' data-ref="_ZNK3xla14HloComputation4nameEv">name</a>());</td></tr>
<tr><th id="2184">2184</th><td>  }</td></tr>
<tr><th id="2185">2185</th><td></td></tr>
<tr><th id="2186">2186</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2187">2187</th><td>}</td></tr>
<tr><th id="2188">2188</th><td></td></tr>
<tr><th id="2189">2189</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter16HandleCustomCallEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleCustomCall' data-ref="_ZN3xla3cpu9IrEmitter16HandleCustomCallEPNS_14HloInstructionE">HandleCustomCall</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="560custom_call" title='custom_call' data-type='xla::HloInstruction *' data-ref="560custom_call">custom_call</dfn>) {</td></tr>
<tr><th id="2190">2190</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt; <dfn class="local col1 decl" id="561operands" title='operands' data-type='gtl::ArraySlice&lt;HloInstruction *&gt;' data-ref="561operands">operands</dfn><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE">(</a><a class="local col0 ref" href="#560custom_call" title='custom_call' data-ref="560custom_call">custom_call</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>());</td></tr>
<tr><th id="2191">2191</th><td>  <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col2 decl" id="562custom_call_target" title='custom_call_target' data-type='tensorflow::StringPiece' data-ref="562custom_call_target">custom_call_target</dfn><a class="ref" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs">(</a><a class="local col0 ref" href="#560custom_call" title='custom_call' data-ref="560custom_call">custom_call</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction18custom_call_targetEv" title='xla::HloInstruction::custom_call_target' data-ref="_ZNK3xla14HloInstruction18custom_call_targetEv">custom_call_target</a>());</td></tr>
<tr><th id="2192">2192</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col3 decl" id="563i8_ptr_type" title='i8_ptr_type' data-type='llvm::Type *' data-ref="563i8_ptr_type">i8_ptr_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8PtrTy' data-ref="_ZN4llvm13IRBuilderBase12getInt8PtrTyEj">getInt8PtrTy</span>();</td></tr>
<tr><th id="2193">2193</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</span>* <dfn class="local col4 decl" id="564operands_alloca" title='operands_alloca' data-type='llvm::AllocaInst *' data-ref="564operands_alloca">operands_alloca</dfn> =</td></tr>
<tr><th id="2194">2194</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675" title='xla::llvm_ir::EmitAllocaAtFunctionEntryWithCount' data-ref="_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675">EmitAllocaAtFunctionEntryWithCount</a>(</td></tr>
<tr><th id="2195">2195</th><td>          <a class="local col3 ref" href="#563i8_ptr_type" title='i8_ptr_type' data-ref="563i8_ptr_type">i8_ptr_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</span>(<a class="local col1 ref" href="#561operands" title='operands' data-ref="561operands">operands</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice4sizeEv" title='tensorflow::gtl::ArraySlice::size' data-ref="_ZNK10tensorflow3gtl10ArraySlice4sizeEv">size</a>()),</td></tr>
<tr><th id="2196">2196</th><td>          <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"cc_operands_alloca"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2197">2197</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col5 decl" id="565i" title='i' data-type='size_t' data-ref="565i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#565i" title='i' data-ref="565i">i</a> &lt; <a class="local col1 ref" href="#561operands" title='operands' data-ref="561operands">operands</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice4sizeEv" title='tensorflow::gtl::ArraySlice::size' data-ref="_ZNK10tensorflow3gtl10ArraySlice4sizeEv">size</a>(); ++<a class="local col5 ref" href="#565i" title='i' data-ref="565i">i</a>) {</td></tr>
<tr><th id="2198">2198</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col6 decl" id="566operand" title='operand' data-type='const xla::HloInstruction *' data-ref="566operand">operand</dfn> = <a class="local col1 ref" href="#561operands" title='operands' data-ref="561operands">operands</a><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySliceixENS0_20array_slice_internal14ArraySliceImplIT_E9size_typeE" title='tensorflow::gtl::ArraySlice::operator[]' data-ref="_ZNK10tensorflow3gtl10ArraySliceixENS0_20array_slice_internal14ArraySliceImplIT_E9size_typeE">[<a class="local col5 ref" href="#565i" title='i' data-ref="565i">i</a>]</a>;</td></tr>
<tr><th id="2199">2199</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="567operand_as_i8ptr" title='operand_as_i8ptr' data-type='llvm::Value *' data-ref="567operand_as_i8ptr">operand_as_i8ptr</dfn> =</td></tr>
<tr><th id="2200">2200</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreatePointerCast' data-ref="_ZN4llvm9IRBuilder17CreatePointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePointerCast</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col6 ref" href="#566operand" title='operand' data-ref="566operand">operand</a>), <a class="local col3 ref" href="#563i8_ptr_type" title='i8_ptr_type' data-ref="563i8_ptr_type">i8_ptr_type</a>);</td></tr>
<tr><th id="2201">2201</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="568slot_in_operands_alloca" title='slot_in_operands_alloca' data-type='llvm::Value *' data-ref="568slot_in_operands_alloca">slot_in_operands_alloca</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_5ValueENS_8ArrayRefIS2_EERKNS_5TwineE">CreateInBoundsGEP</span>(</td></tr>
<tr><th id="2202">2202</th><td>        <a class="local col4 ref" href="#564operands_alloca" title='operands_alloca' data-ref="564operands_alloca">operands_alloca</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col5 ref" href="#565i" title='i' data-ref="565i">i</a>)});</td></tr>
<tr><th id="2203">2203</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col7 ref" href="#567operand_as_i8ptr" title='operand_as_i8ptr' data-ref="567operand_as_i8ptr">operand_as_i8ptr</a>, <a class="local col8 ref" href="#568slot_in_operands_alloca" title='slot_in_operands_alloca' data-ref="568slot_in_operands_alloca">slot_in_operands_alloca</a>);</td></tr>
<tr><th id="2204">2204</th><td>  }</td></tr>
<tr><th id="2205">2205</th><td>  <em>auto</em>* <dfn class="local col9 decl" id="569custom_call_ir_function" title='custom_call_ir_function' data-type='llvm::Function *' data-ref="569custom_call_ir_function">custom_call_ir_function</dfn> =</td></tr>
<tr><th id="2206">2206</th><td>      <span class="namespace">llvm::</span><span class='ref' title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</span>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeE">getOrInsertFunction</span>(</td></tr>
<tr><th id="2207">2207</th><td>          <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#38" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKS0_"></a><a class="local col2 ref" href="#562custom_call_target" title='custom_call_target' data-ref="562custom_call_target">custom_call_target</a>),</td></tr>
<tr><th id="2208">2208</th><td>          <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</span>::<span class='ref' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</span>(</td></tr>
<tr><th id="2209">2209</th><td>              <i>/*Result=*/</i><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getVoidTy' data-ref="_ZN4llvm13IRBuilderBase9getVoidTyEv">getVoidTy</span>(),</td></tr>
<tr><th id="2210">2210</th><td>              <i>/*Params=*/</i><span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col3 ref" href="#563i8_ptr_type" title='i8_ptr_type' data-ref="563i8_ptr_type">i8_ptr_type</a>, <a class="local col4 ref" href="#564operands_alloca" title='operands_alloca' data-ref="564operands_alloca">operands_alloca</a>-&gt;<span class='ref' title='llvm::AllocaInst::getType' data-ref="_ZNK4llvm10AllocaInst7getTypeEv">getType</span>()},</td></tr>
<tr><th id="2211">2211</th><td>              <i>/*isVarArg=*/</i><b>false</b>)));</td></tr>
<tr><th id="2212">2212</th><td></td></tr>
<tr><th id="2213">2213</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(custom_call)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col0 ref" href="#560custom_call" title='custom_call' data-ref="560custom_call">custom_call</a>));</td></tr>
<tr><th id="2214">2214</th><td>  <em>auto</em>* <dfn class="local col0 decl" id="570output_address_arg" title='output_address_arg' data-type='llvm::Value *' data-ref="570output_address_arg">output_address_arg</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreatePointerCast' data-ref="_ZN4llvm9IRBuilder17CreatePointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePointerCast</span>(</td></tr>
<tr><th id="2215">2215</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col0 ref" href="#560custom_call" title='custom_call' data-ref="560custom_call">custom_call</a>), <a class="local col3 ref" href="#563i8_ptr_type" title='i8_ptr_type' data-ref="563i8_ptr_type">i8_ptr_type</a>);</td></tr>
<tr><th id="2216">2216</th><td></td></tr>
<tr><th id="2217">2217</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col9 ref" href="#569custom_call_ir_function" title='custom_call_ir_function' data-ref="569custom_call_ir_function">custom_call_ir_function</a>,</td></tr>
<tr><th id="2218">2218</th><td>                         <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col0 ref" href="#570output_address_arg" title='output_address_arg' data-ref="570output_address_arg">output_address_arg</a>, <a class="local col4 ref" href="#564operands_alloca" title='operands_alloca' data-ref="564operands_alloca">operands_alloca</a>});</td></tr>
<tr><th id="2219">2219</th><td></td></tr>
<tr><th id="2220">2220</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2221">2221</th><td>}</td></tr>
<tr><th id="2222">2222</th><td></td></tr>
<tr><th id="2223">2223</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter11HandleWhileEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleWhile' data-ref="_ZN3xla3cpu9IrEmitter11HandleWhileEPNS_14HloInstructionE">HandleWhile</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="571xla_while" title='xla_while' data-type='xla::HloInstruction *' data-ref="571xla_while">xla_while</dfn>) {</td></tr>
<tr><th id="2224">2224</th><td>  <i>// Precondition: Condition computation must return a scalar bool.</i></td></tr>
<tr><th id="2225">2225</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col2 decl" id="572condition" title='condition' data-type='xla::HloComputation *' data-ref="572condition">condition</dfn> = <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction15while_conditionEv" title='xla::HloInstruction::while_condition' data-ref="_ZNK3xla14HloInstruction15while_conditionEv">while_condition</a>();</td></tr>
<tr><th id="2226">2226</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(ShapeUtil::IsScalar(condition-&gt;root_instruction()-&gt;shape()) &amp;&amp; condition-&gt;root_instruction()-&gt;shape().element_type() == PRED), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2227, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;ShapeUtil::IsScalar(condition-&gt;root_instruction()-&gt;shape()) &amp;&amp; condition-&gt;root_instruction()-&gt;shape().element_type() == PRED&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col2 ref" href="#572condition" title='condition' data-ref="572condition">condition</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()) &amp;&amp;</td></tr>
<tr><th id="2227">2227</th><td>               <a class="local col2 ref" href="#572condition" title='condition' data-ref="572condition">condition</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>() == <span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>)</td></tr>
<tr><th id="2228">2228</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"While condition computation must return bool; got: "</q></td></tr>
<tr><th id="2229">2229</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col2 ref" href="#572condition" title='condition' data-ref="572condition">condition</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2230">2230</th><td>  <i>// Check that all while-related buffers share an allocation slice.</i></td></tr>
<tr><th id="2231">2231</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ShapeUtil::ForEachSubshapeWithStatus( xla_while-&gt;shape(), [this, &amp;xla_while](const Shape&amp; , const ShapeIndex&amp; index) -&gt; Status { auto check = [this](const HloInstruction* a, const HloInstruction* b, const ShapeIndex&amp; index) { const BufferAllocation::Slice slice_a = assignment_.GetUniqueSlice(a, index).ConsumeValueOrDie(); const BufferAllocation::Slice slice_b = assignment_.GetUniqueSlice(b, index).ConsumeValueOrDie(); if (slice_a != slice_b) { return InternalError( &quot;instruction %s %s does not share slice with &quot; &quot;instruction %s %s&quot;, a-&gt;ToString().c_str(), slice_a.ToString().c_str(), b-&gt;ToString().c_str(), slice_b.ToString().c_str()); } return Status::OK(); }; do { const ::tensorflow::Status _status = (check(xla_while, xla_while-&gt;operand(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0); do { const ::tensorflow::Status _status = (check( xla_while, xla_while-&gt;while_condition()-&gt;parameter_instruction(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0); do { const ::tensorflow::Status _status = (check(xla_while, xla_while-&gt;while_body()-&gt;parameter_instruction(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0); do { const ::tensorflow::Status _status = (check( xla_while, xla_while-&gt;while_body()-&gt;root_instruction(), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0); return Status::OK(); })); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil25ForEachSubshapeWithStatusERKNS_5ShapeERKSt8functionIFN10tensorflow6StatusES3_RKNS_10ShapeIndexEEE" title='xla::ShapeUtil::ForEachSubshapeWithStatus' data-ref="_ZN3xla9ShapeUtil25ForEachSubshapeWithStatusERKNS_5ShapeERKSt8functionIFN10tensorflow6StatusES3_RKNS_10ShapeIndexEEE">ForEachSubshapeWithStatus</a>(</td></tr>
<tr><th id="2232">2232</th><td>      <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="2233">2233</th><td>      <a class="ref fake" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[<b>this</b>, &amp;xla_while](<em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <i>/*subshape*/</i>,</td></tr>
<tr><th id="2234">2234</th><td>                         <em>const</em> <a class="type" href="../../shape_util.h.html#xla::ShapeIndex" title='xla::ShapeIndex' data-ref="xla::ShapeIndex">ShapeIndex</a>&amp; <dfn class="local col3 decl" id="573index" title='index' data-type='const xla::ShapeIndex &amp;' data-ref="573index">index</dfn>) -&gt; <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> {</td></tr>
<tr><th id="2235">2235</th><td>        <em>auto</em> <dfn class="local col4 decl" id="574check" title='check' data-type='(lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:2231:3)' data-ref="574check">check</dfn> = [<b>this</b>](<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="575a" title='a' data-type='const xla::HloInstruction *' data-ref="575a">a</dfn>, <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col6 decl" id="576b" title='b' data-type='const xla::HloInstruction *' data-ref="576b">b</dfn>,</td></tr>
<tr><th id="2236">2236</th><td>                            <em>const</em> <a class="type" href="../../shape_util.h.html#xla::ShapeIndex" title='xla::ShapeIndex' data-ref="xla::ShapeIndex">ShapeIndex</a>&amp; <dfn class="local col7 decl" id="577index" title='index' data-type='const xla::ShapeIndex &amp;' data-ref="577index">index</dfn>) {</td></tr>
<tr><th id="2237">2237</th><td>          <em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a> <dfn class="local col8 decl" id="578slice_a" title='slice_a' data-type='const BufferAllocation::Slice' data-ref="578slice_a">slice_a</dfn> =</td></tr>
<tr><th id="2238">2238</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE" title='xla::BufferAssignment::GetUniqueSlice' data-ref="_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE">GetUniqueSlice</a>(<a class="local col5 ref" href="#2231" title='a' data-ref="575a">a</a>, <a class="local col7 ref" href="#2231" title='index' data-ref="577index">index</a>).<a class="ref" href="../../statusor.h.html#_ZN3xla8StatusOr17ConsumeValueOrDieEv" title='xla::StatusOr::ConsumeValueOrDie' data-ref="_ZN3xla8StatusOr17ConsumeValueOrDieEv">ConsumeValueOrDie</a>();</td></tr>
<tr><th id="2239">2239</th><td>          <em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a> <dfn class="local col9 decl" id="579slice_b" title='slice_b' data-type='const BufferAllocation::Slice' data-ref="579slice_b">slice_b</dfn> =</td></tr>
<tr><th id="2240">2240</th><td>              <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE" title='xla::BufferAssignment::GetUniqueSlice' data-ref="_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE">GetUniqueSlice</a>(<a class="local col6 ref" href="#2231" title='b' data-ref="576b">b</a>, <a class="local col7 ref" href="#2231" title='index' data-ref="577index">index</a>).<a class="ref" href="../../statusor.h.html#_ZN3xla8StatusOr17ConsumeValueOrDieEv" title='xla::StatusOr::ConsumeValueOrDie' data-ref="_ZN3xla8StatusOr17ConsumeValueOrDieEv">ConsumeValueOrDie</a>();</td></tr>
<tr><th id="2241">2241</th><td>          <b>if</b> (<a class="local col8 ref" href="#2231" title='slice_a' data-ref="578slice_a">slice_a</a> <a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5SliceneERKS1_" title='xla::BufferAllocation::Slice::operator!=' data-ref="_ZNK3xla16BufferAllocation5SliceneERKS1_">!=</a> <a class="local col9 ref" href="#2231" title='slice_b' data-ref="579slice_b">slice_b</a>) {</td></tr>
<tr><th id="2242">2242</th><td>            <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13InternalErrorEPKcz" title='xla::InternalError' data-ref="_ZN3xla13InternalErrorEPKcz">InternalError</a>(</td></tr>
<tr><th id="2243">2243</th><td>                <q>"instruction %s %s does not share slice with "</q></td></tr>
<tr><th id="2244">2244</th><td>                <q>"instruction %s %s"</q>,</td></tr>
<tr><th id="2245">2245</th><td>                <a class="local col5 ref" href="#2231" title='a' data-ref="575a">a</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>().<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>(), <a class="local col8 ref" href="#2231" title='slice_a' data-ref="578slice_a">slice_a</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice8ToStringEv" title='xla::BufferAllocation::Slice::ToString' data-ref="_ZNK3xla16BufferAllocation5Slice8ToStringEv">ToString</a>().<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>(),</td></tr>
<tr><th id="2246">2246</th><td>                <a class="local col6 ref" href="#2231" title='b' data-ref="576b">b</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>().<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>(), <a class="local col9 ref" href="#2231" title='slice_b' data-ref="579slice_b">slice_b</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice8ToStringEv" title='xla::BufferAllocation::Slice::ToString' data-ref="_ZNK3xla16BufferAllocation5Slice8ToStringEv">ToString</a>().<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>());</td></tr>
<tr><th id="2247">2247</th><td>          }</td></tr>
<tr><th id="2248">2248</th><td>          <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2249">2249</th><td>        };</td></tr>
<tr><th id="2250">2250</th><td>        <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (check(xla_while, xla_while-&gt;operand(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col4 ref" href="#2231" title='check' data-ref="574check">check</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>), <a class="local col3 ref" href="#2231" title='index' data-ref="573index">index</a>));</td></tr>
<tr><th id="2251">2251</th><td>        <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (check( xla_while, xla_while-&gt;while_condition()-&gt;parameter_instruction(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col4 ref" href="#2231" title='check' data-ref="574check">check</a>(</td></tr>
<tr><th id="2252">2252</th><td>            <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction15while_conditionEv" title='xla::HloInstruction::while_condition' data-ref="_ZNK3xla14HloInstruction15while_conditionEv">while_condition</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation21parameter_instructionEx" title='xla::HloComputation::parameter_instruction' data-ref="_ZNK3xla14HloComputation21parameter_instructionEx">parameter_instruction</a>(<var>0</var>),</td></tr>
<tr><th id="2253">2253</th><td>            <a class="local col3 ref" href="#2231" title='index' data-ref="573index">index</a>));</td></tr>
<tr><th id="2254">2254</th><td>        <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (check(xla_while, xla_while-&gt;while_body()-&gt;parameter_instruction(0), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(</td></tr>
<tr><th id="2255">2255</th><td>            <a class="local col4 ref" href="#2231" title='check' data-ref="574check">check</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10while_bodyEv" title='xla::HloInstruction::while_body' data-ref="_ZNK3xla14HloInstruction10while_bodyEv">while_body</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation21parameter_instructionEx" title='xla::HloComputation::parameter_instruction' data-ref="_ZNK3xla14HloComputation21parameter_instructionEx">parameter_instruction</a>(<var>0</var>),</td></tr>
<tr><th id="2256">2256</th><td>                  <a class="local col3 ref" href="#2231" title='index' data-ref="573index">index</a>));</td></tr>
<tr><th id="2257">2257</th><td>        <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (check( xla_while, xla_while-&gt;while_body()-&gt;root_instruction(), index)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="local col4 ref" href="#2231" title='check' data-ref="574check">check</a>(</td></tr>
<tr><th id="2258">2258</th><td>            <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10while_bodyEv" title='xla::HloInstruction::while_body' data-ref="_ZNK3xla14HloInstruction10while_bodyEv">while_body</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>(), <a class="local col3 ref" href="#2231" title='index' data-ref="573index">index</a>));</td></tr>
<tr><th id="2259">2259</th><td>        <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2260">2260</th><td>      }));</td></tr>
<tr><th id="2261">2261</th><td></td></tr>
<tr><th id="2262">2262</th><td>  <i>// Set emitted value to that of 'init' with which it shares an allocation.</i></td></tr>
<tr><th id="2263">2263</th><td>  <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="580init" title='init' data-type='const xla::HloInstruction *' data-ref="580init">init</dfn> = <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="2264">2264</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>]</a> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col0 ref" href="#580init" title='init' data-ref="580init">init</a>);</td></tr>
<tr><th id="2265">2265</th><td></td></tr>
<tr><th id="2266">2266</th><td>  <i>// The called computation should have been emitted previously.</i></td></tr>
<tr><th id="2267">2267</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col1 decl" id="581condition_ir_function" title='condition_ir_function' data-type='llvm::Function *' data-ref="581condition_ir_function">condition_ir_function</dfn> =</td></tr>
<tr><th id="2268">2268</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col2 ref" href="#572condition" title='condition' data-ref="572condition">condition</a>);</td></tr>
<tr><th id="2269">2269</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="582body_ir_function" title='body_ir_function' data-type='llvm::Function *' data-ref="582body_ir_function">body_ir_function</dfn> =</td></tr>
<tr><th id="2270">2270</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10while_bodyEv" title='xla::HloInstruction::while_body' data-ref="_ZNK3xla14HloInstruction10while_bodyEv">while_body</a>());</td></tr>
<tr><th id="2271">2271</th><td></td></tr>
<tr><th id="2272">2272</th><td>  <i>// Generating:</i></td></tr>
<tr><th id="2273">2273</th><td><i>  //   while (Condition(while_result)) {</i></td></tr>
<tr><th id="2274">2274</th><td><i>  //     // CopyInsertion pass inserts copies which enable 'while_result' to</i></td></tr>
<tr><th id="2275">2275</th><td><i>  //     // be passed back in as 'Body' parameter.</i></td></tr>
<tr><th id="2276">2276</th><td><i>  //     while_result = Body(while_result);  // Insert</i></td></tr>
<tr><th id="2277">2277</th><td><i>  //   }</i></td></tr>
<tr><th id="2278">2278</th><td><i></i></td></tr>
<tr><th id="2279">2279</th><td><i>  // Terminates the current block with a branch to a while header.</i></td></tr>
<tr><th id="2280">2280</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>* <dfn class="local col3 decl" id="583header_bb" title='header_bb' data-type='llvm::BasicBlock *' data-ref="583header_bb">header_bb</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>::<span class='ref' title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</span>(</td></tr>
<tr><th id="2281">2281</th><td>      <span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()</span>, <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"header"</q>)),</td></tr>
<tr><th id="2282">2282</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction8functionEv" title='xla::cpu::IrFunction::function' data-ref="_ZN3xla3cpu10IrFunction8functionEv">function</a>());</td></tr>
<tr><th id="2283">2283</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</span>(<a class="local col3 ref" href="#583header_bb" title='header_bb' data-ref="583header_bb">header_bb</a>);</td></tr>
<tr><th id="2284">2284</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</span>(<a class="local col3 ref" href="#583header_bb" title='header_bb' data-ref="583header_bb">header_bb</a>);</td></tr>
<tr><th id="2285">2285</th><td></td></tr>
<tr><th id="2286">2286</th><td>  <i>// Calls the condition function to determine whether to proceed with the</i></td></tr>
<tr><th id="2287">2287</th><td><i>  // body.  It must return a bool, so use the scalar call form.</i></td></tr>
<tr><th id="2288">2288</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="584while_result" title='while_result' data-type='llvm::Value *' data-ref="584while_result">while_result</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>);</td></tr>
<tr><th id="2289">2289</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="585while_condition" title='while_condition' data-type='llvm::Value *' data-ref="585while_condition">while_condition</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(</td></tr>
<tr><th id="2290">2290</th><td>      <a class="local col1 ref" href="#581condition_ir_function" title='condition_ir_function' data-ref="581condition_ir_function">condition_ir_function</a>, <a class="local col2 ref" href="#572condition" title='condition' data-ref="572condition">condition</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="2291">2291</th><td>      <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col4 ref" href="#584while_result" title='while_result' data-ref="584while_result">while_result</a>}, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"cond"</q>));</td></tr>
<tr><th id="2292">2292</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="586while_predicate" title='while_predicate' data-type='llvm::Value *' data-ref="586while_predicate">while_predicate</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpNE' data-ref="_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpNE</span>(</td></tr>
<tr><th id="2293">2293</th><td>      <a class="local col5 ref" href="#585while_condition" title='while_condition' data-ref="585while_condition">while_condition</a>,</td></tr>
<tr><th id="2294">2294</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>::<span class='ref' title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</span>(<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>), <var>0</var>));</td></tr>
<tr><th id="2295">2295</th><td></td></tr>
<tr><th id="2296">2296</th><td>  <i>// Branches to the body or to the while exit depending on the condition.</i></td></tr>
<tr><th id="2297">2297</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>* <dfn class="local col7 decl" id="587body_bb" title='body_bb' data-type='llvm::BasicBlock *' data-ref="587body_bb">body_bb</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>::<span class='ref' title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</span>(</td></tr>
<tr><th id="2298">2298</th><td>      <span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()</span>, <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"body"</q>)),</td></tr>
<tr><th id="2299">2299</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction8functionEv" title='xla::cpu::IrFunction::function' data-ref="_ZN3xla3cpu10IrFunction8functionEv">function</a>());</td></tr>
<tr><th id="2300">2300</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>* <dfn class="local col8 decl" id="588exit_bb" title='exit_bb' data-type='llvm::BasicBlock *' data-ref="588exit_bb">exit_bb</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</span>::<span class='ref' title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</span>(</td></tr>
<tr><th id="2301">2301</th><td>      <span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>()</span>, <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"exit"</q>)));</td></tr>
<tr><th id="2302">2302</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</span>(<a class="local col6 ref" href="#586while_predicate" title='while_predicate' data-ref="586while_predicate">while_predicate</a>, <a class="local col7 ref" href="#587body_bb" title='body_bb' data-ref="587body_bb">body_bb</a>, <a class="local col8 ref" href="#588exit_bb" title='exit_bb' data-ref="588exit_bb">exit_bb</a>);</td></tr>
<tr><th id="2303">2303</th><td></td></tr>
<tr><th id="2304">2304</th><td>  <i>// Calls the body function from the body block.</i></td></tr>
<tr><th id="2305">2305</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</span>(<a class="local col7 ref" href="#587body_bb" title='body_bb' data-ref="587body_bb">body_bb</a>);</td></tr>
<tr><th id="2306">2306</th><td></td></tr>
<tr><th id="2307">2307</th><td>  <i>// Calls the body function.</i></td></tr>
<tr><th id="2308">2308</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</a>(<a class="local col2 ref" href="#582body_ir_function" title='body_ir_function' data-ref="582body_ir_function">body_ir_function</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="local col4 ref" href="#584while_result" title='while_result' data-ref="584while_result">while_result</a>}, <a class="local col4 ref" href="#584while_result" title='while_result' data-ref="584while_result">while_result</a>,</td></tr>
<tr><th id="2309">2309</th><td>                            <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col1 ref" href="#571xla_while" title='xla_while' data-ref="571xla_while">xla_while</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"body"</q>));</td></tr>
<tr><th id="2310">2310</th><td>  <i>// Finishes with a branch back to the header.</i></td></tr>
<tr><th id="2311">2311</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</span>(<a class="local col3 ref" href="#583header_bb" title='header_bb' data-ref="583header_bb">header_bb</a>);</td></tr>
<tr><th id="2312">2312</th><td></td></tr>
<tr><th id="2313">2313</th><td>  <i>// Adds the exit block to the function and sets the insert point there.</i></td></tr>
<tr><th id="2314">2314</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction8functionEv" title='xla::cpu::IrFunction::function' data-ref="_ZN3xla3cpu10IrFunction8functionEv">function</a>()-&gt;<span class='ref' title='llvm::Function::getBasicBlockList' data-ref="_ZN4llvm8Function17getBasicBlockListEv">getBasicBlockList</span>().<span class='ref' title='llvm::iplist_impl::push_back' data-ref="_ZN4llvm11iplist_impl9push_backENT_7pointerE">push_back</span>(<a class="local col8 ref" href="#588exit_bb" title='exit_bb' data-ref="588exit_bb">exit_bb</a>);</td></tr>
<tr><th id="2315">2315</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</span>(<a class="local col8 ref" href="#588exit_bb" title='exit_bb' data-ref="588exit_bb">exit_bb</a>);</td></tr>
<tr><th id="2316">2316</th><td></td></tr>
<tr><th id="2317">2317</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2318">2318</th><td>}</td></tr>
<tr><th id="2319">2319</th><td></td></tr>
<tr><th id="2320">2320</th><td><a class="type" href="../../statusor.h.html#xla::StatusOr" title='xla::StatusOr' data-ref="xla::StatusOr">StatusOr</a>&lt;<em>bool</em>&gt; <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter19EmitFastConcatenateEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIS3_EEPSs" title='xla::cpu::IrEmitter::EmitFastConcatenate' data-ref="_ZN3xla3cpu9IrEmitter19EmitFastConcatenateEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIS3_EEPSs">EmitFastConcatenate</dfn>(</td></tr>
<tr><th id="2321">2321</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="589concatenate" title='concatenate' data-type='xla::HloInstruction *' data-ref="589concatenate">concatenate</dfn>, <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt; <dfn class="local col0 decl" id="590operands" title='operands' data-type='gtl::ArraySlice&lt;HloInstruction *&gt;' data-ref="590operands">operands</dfn>,</td></tr>
<tr><th id="2322">2322</th><td>    <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a>* <dfn class="local col1 decl" id="591failure_reason" title='failure_reason' data-type='string *' data-ref="591failure_reason">failure_reason</dfn>) {</td></tr>
<tr><th id="2323">2323</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE" title='xla::cpu::IrEmitter::ShouldEmitParallelLoopFor' data-ref="_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE">ShouldEmitParallelLoopFor</a>(*<a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>)) {</td></tr>
<tr><th id="2324">2324</th><td>    *<a class="local col1 ref" href="#591failure_reason" title='failure_reason' data-ref="591failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a></td></tr>
<tr><th id="2325">2325</th><td>        <q>"cannot generate memcpy-based concat for the parallel CPU backend"</q>;</td></tr>
<tr><th id="2326">2326</th><td>    <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="2327">2327</th><td>  }</td></tr>
<tr><th id="2328">2328</th><td></td></tr>
<tr><th id="2329">2329</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col2 decl" id="592output_shape" title='output_shape' data-type='const xla::Shape &amp;' data-ref="592output_shape">output_shape</dfn> = <a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2330">2330</th><td>  <b>for</b> (<em>auto</em>* <dfn class="local col3 decl" id="593op" title='op' data-type='xla::HloInstruction *' data-ref="593op">op</dfn> : <a class="local col0 ref" href="#590operands" title='operands' data-ref="590operands">operands</a>) {</td></tr>
<tr><th id="2331">2331</th><td>    <b>if</b> (!<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil5EqualERKNS_6LayoutES3_" title='xla::LayoutUtil::Equal' data-ref="_ZN3xla10LayoutUtil5EqualERKNS_6LayoutES3_">Equal</a>(<a class="local col3 ref" href="#593op" title='op' data-ref="593op">op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>(), <a class="local col2 ref" href="#592output_shape" title='output_shape' data-ref="592output_shape">output_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>())) {</td></tr>
<tr><th id="2332">2332</th><td>      *<a class="local col1 ref" href="#591failure_reason" title='failure_reason' data-ref="591failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"operand has mismatching layouts"</q>;</td></tr>
<tr><th id="2333">2333</th><td>      <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="2334">2334</th><td>    }</td></tr>
<tr><th id="2335">2335</th><td>    <b>if</b> (<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil8IsPaddedERKNS_5ShapeE" title='xla::LayoutUtil::IsPadded' data-ref="_ZN3xla10LayoutUtil8IsPaddedERKNS_5ShapeE">IsPadded</a>(<a class="local col3 ref" href="#593op" title='op' data-ref="593op">op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())) {</td></tr>
<tr><th id="2336">2336</th><td>      *<a class="local col1 ref" href="#591failure_reason" title='failure_reason' data-ref="591failure_reason">failure_reason</a> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringaSEPKT_" title='std::basic_string::operator=' data-ref="_ZNSt12basic_stringaSEPKT_">=</a> <q>"operand has padded layout"</q>;</td></tr>
<tr><th id="2337">2337</th><td>      <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>false</b>;</td></tr>
<tr><th id="2338">2338</th><td>    }</td></tr>
<tr><th id="2339">2339</th><td>  }</td></tr>
<tr><th id="2340">2340</th><td></td></tr>
<tr><th id="2341">2341</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#97" title="if ((__builtin_expect(!(!LayoutUtil::IsPadded(concatenate-&gt;shape())), 0))) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2341) &lt;&lt; &quot;Check failed: &quot; &quot;!LayoutUtil::IsPadded(concatenate-&gt;shape())&quot; &quot; &quot;" data-ref="_M/CHECK">CHECK</a>(!<a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil8IsPaddedERKNS_5ShapeE" title='xla::LayoutUtil::IsPadded' data-ref="_ZN3xla10LayoutUtil8IsPaddedERKNS_5ShapeE">IsPadded</a>(<a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="2342">2342</th><td></td></tr>
<tr><th id="2343">2343</th><td>  <i>// We split the dimensions into three categories: the dimension over which we</i></td></tr>
<tr><th id="2344">2344</th><td><i>  // are concatenating (concat_dim), the dimensions that are minor to it</i></td></tr>
<tr><th id="2345">2345</th><td><i>  // (inner_dims) and the dimensions that are major to it (outer_dims).</i></td></tr>
<tr><th id="2346">2346</th><td></td></tr>
<tr><th id="2347">2347</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col4 decl" id="594concat_dim" title='concat_dim' data-type='int64' data-ref="594concat_dim">concat_dim</dfn> = <a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction10dimensionsEx" title='xla::HloInstruction::dimensions' data-ref="_ZNK3xla14HloInstruction10dimensionsEx">dimensions</a>(<var>0</var>);</td></tr>
<tr><th id="2348">2348</th><td>  <em>const</em> <span class='type' title='xla::Layout' data-ref="xla::Layout">Layout</span>&amp; <dfn class="local col5 decl" id="595output_layout" title='output_layout' data-type='const xla::Layout &amp;' data-ref="595output_layout">output_layout</dfn> = <a class="local col2 ref" href="#592output_shape" title='output_shape' data-ref="592output_shape">output_shape</a>.<span class='ref' title='xla::Shape::layout' data-ref="_ZNK3xla5Shape6layoutEv">layout</span>();</td></tr>
<tr><th id="2349">2349</th><td>  <em>auto</em> <dfn class="local col6 decl" id="596output_min2maj" title='output_min2maj' data-type='tensorflow::gtl::ArraySlice&lt;long long&gt;' data-ref="596output_min2maj">output_min2maj</dfn> = <a class="type" href="../../layout_util.h.html#xla::LayoutUtil" title='xla::LayoutUtil' data-ref="xla::LayoutUtil">LayoutUtil</a>::<a class="ref" href="../../layout_util.h.html#_ZN3xla10LayoutUtil12MinorToMajorERKNS_6LayoutE" title='xla::LayoutUtil::MinorToMajor' data-ref="_ZN3xla10LayoutUtil12MinorToMajorERKNS_6LayoutE">MinorToMajor</a>(<a class="local col5 ref" href="#595output_layout" title='output_layout' data-ref="595output_layout">output_layout</a>);</td></tr>
<tr><th id="2350">2350</th><td>  <em>auto</em> <dfn class="local col7 decl" id="597concat_dim_layout_itr" title='concat_dim_layout_itr' data-type='const long long *' data-ref="597concat_dim_layout_itr">concat_dim_layout_itr</dfn> =</td></tr>
<tr><th id="2351">2351</th><td>      <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt4findT_S_RKT0_" title='std::find' data-ref="_ZSt4findT_S_RKT0_">find</a>(<a class="local col6 ref" href="#596output_min2maj" title='output_min2maj' data-ref="596output_min2maj">output_min2maj</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice5beginEv" title='tensorflow::gtl::ArraySlice::begin' data-ref="_ZNK10tensorflow3gtl10ArraySlice5beginEv">begin</a>(), <a class="local col6 ref" href="#596output_min2maj" title='output_min2maj' data-ref="596output_min2maj">output_min2maj</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>(), <a class="local col4 ref" href="#594concat_dim" title='concat_dim' data-ref="594concat_dim">concat_dim</a>);</td></tr>
<tr><th id="2352">2352</th><td></td></tr>
<tr><th id="2353">2353</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col8 decl" id="598inner_dims" title='inner_dims' data-type='std::vector&lt;int64&gt;' data-ref="598inner_dims">inner_dims</dfn><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1ET_S0_RKT0_" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1ET_S0_RKT0_">(</a><a class="local col6 ref" href="#596output_min2maj" title='output_min2maj' data-ref="596output_min2maj">output_min2maj</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice5beginEv" title='tensorflow::gtl::ArraySlice::begin' data-ref="_ZNK10tensorflow3gtl10ArraySlice5beginEv">begin</a>(), <a class="local col7 ref" href="#597concat_dim_layout_itr" title='concat_dim_layout_itr' data-ref="597concat_dim_layout_itr">concat_dim_layout_itr</a>);</td></tr>
<tr><th id="2354">2354</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt; <dfn class="local col9 decl" id="599outer_dims" title='outer_dims' data-type='std::vector&lt;int64&gt;' data-ref="599outer_dims">outer_dims</dfn><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1ET_S0_RKT0_" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1ET_S0_RKT0_">(</a><span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator_base_funcs.h.html#_ZSt4nextT_NSt15iterator_traitsIS_E15difference_typeE" title='std::next' data-ref="_ZSt4nextT_NSt15iterator_traitsIS_E15difference_typeE">next</a>(<a class="local col7 ref" href="#597concat_dim_layout_itr" title='concat_dim_layout_itr' data-ref="597concat_dim_layout_itr">concat_dim_layout_itr</a>),</td></tr>
<tr><th id="2355">2355</th><td>                                <a class="local col6 ref" href="#596output_min2maj" title='output_min2maj' data-ref="596output_min2maj">output_min2maj</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>());</td></tr>
<tr><th id="2356">2356</th><td></td></tr>
<tr><th id="2357">2357</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col0 decl" id="600i8_ptr_type" title='i8_ptr_type' data-type='llvm::Type *' data-ref="600i8_ptr_type">i8_ptr_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8PtrTy' data-ref="_ZN4llvm13IRBuilderBase12getInt8PtrTyEj">getInt8PtrTy</span>();</td></tr>
<tr><th id="2358">2358</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col1 decl" id="601i8_type" title='i8_type' data-type='llvm::Type *' data-ref="601i8_type">i8_type</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt8Ty' data-ref="_ZN4llvm13IRBuilderBase9getInt8TyEv">getInt8Ty</span>();</td></tr>
<tr><th id="2359">2359</th><td></td></tr>
<tr><th id="2360">2360</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(concatenate)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>));</td></tr>
<tr><th id="2361">2361</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col2 decl" id="602target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="602target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>);</td></tr>
<tr><th id="2362">2362</th><td></td></tr>
<tr><th id="2363">2363</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_loop.h.html#xla::llvm_ir::ForLoopNest" title='xla::llvm_ir::ForLoopNest' data-ref="xla::llvm_ir::ForLoopNest">ForLoopNest</a> <dfn class="local col3 decl" id="603loops" title='loops' data-type='llvm_ir::ForLoopNest' data-ref="603loops">loops</dfn><a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::ForLoopNest::ForLoopNest' data-ref="_ZN3xla7llvm_ir11ForLoopNestC1EN10tensorflow11StringPieceEPN4llvm9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultInserterEEE">(</a><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col9 ref" href="#589concatenate" title='concatenate' data-ref="589concatenate">concatenate</a>), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2364">2364</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a> <dfn class="local col4 decl" id="604outer_dims_index" title='outer_dims_index' data-type='llvm_ir::IrArray::Index' data-ref="604outer_dims_index">outer_dims_index</dfn> =</td></tr>
<tr><th id="2365">2365</th><td>      <a class="local col3 ref" href="#603loops" title='loops' data-ref="603loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE" title='xla::llvm_ir::ForLoopNest::AddLoopsForShapeOnDimensions' data-ref="_ZN3xla7llvm_ir11ForLoopNest28AddLoopsForShapeOnDimensionsERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIxEENS5_11StringPieceE">AddLoopsForShapeOnDimensions</a>(<a class="local col2 ref" href="#592output_shape" title='output_shape' data-ref="592output_shape">output_shape</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col9 ref" href="#599outer_dims" title='outer_dims' data-ref="599outer_dims">outer_dims</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"concat"</q>);</td></tr>
<tr><th id="2366">2366</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt7replaceT_S_RKT0_S2_" title='std::replace' data-ref="_ZSt7replaceT_S_RKT0_S2_">replace</a>(<a class="local col4 ref" href="#604outer_dims_index" title='outer_dims_index' data-ref="604outer_dims_index">outer_dims_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index5beginEv" title='xla::llvm_ir::IrArray::Index::begin' data-ref="_ZN3xla7llvm_ir7IrArray5Index5beginEv">begin</a>(), <a class="local col4 ref" href="#604outer_dims_index" title='outer_dims_index' data-ref="604outer_dims_index">outer_dims_index</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArray5Index3endEv" title='xla::llvm_ir::IrArray::Index::end' data-ref="_ZN3xla7llvm_ir7IrArray5Index3endEv">end</a>(),</td></tr>
<tr><th id="2367">2367</th><td>               <b>static_cast</b>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;(<b>nullptr</b>),</td></tr>
<tr><th id="2368">2368</th><td>               <b>static_cast</b>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<var>0</var>)));</td></tr>
<tr><th id="2369">2369</th><td></td></tr>
<tr><th id="2370">2370</th><td>  <b>if</b> (!<a class="local col9 ref" href="#599outer_dims" title='outer_dims' data-ref="599outer_dims">outer_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector5emptyEv" title='std::vector::empty' data-ref="_ZNKSt6vector5emptyEv">empty</a>()) {</td></tr>
<tr><th id="2371">2371</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col3 ref" href="#603loops" title='loops' data-ref="603loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetInnerLoopBodyBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetInnerLoopBodyBasicBlockEv">GetInnerLoopBodyBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2372">2372</th><td>  }</td></tr>
<tr><th id="2373">2373</th><td></td></tr>
<tr><th id="2374">2374</th><td>  <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col5 decl" id="605primitive_type" title='primitive_type' data-type='xla::PrimitiveType' data-ref="605primitive_type">primitive_type</dfn> = <a class="local col2 ref" href="#592output_shape" title='output_shape' data-ref="592output_shape">output_shape</a>.<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="2375">2375</th><td>  <em>unsigned</em> <dfn class="local col6 decl" id="606primitive_type_size" title='primitive_type_size' data-type='unsigned int' data-ref="606primitive_type_size">primitive_type_size</dfn> =</td></tr>
<tr><th id="2376">2376</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col5 ref" href="#605primitive_type" title='primitive_type' data-ref="605primitive_type">primitive_type</a>);</td></tr>
<tr><th id="2377">2377</th><td></td></tr>
<tr><th id="2378">2378</th><td>  <i>// Contiguous subregions from each operand to the concatenate contribute to a</i></td></tr>
<tr><th id="2379">2379</th><td><i>  // contiguous subregion in the target buffer starting at target_region_begin.</i></td></tr>
<tr><th id="2380">2380</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="607target_region_begin" title='target_region_begin' data-type='llvm::Value *' data-ref="607target_region_begin">target_region_begin</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="2381">2381</th><td>      <a class="local col2 ref" href="#602target_array" title='target_array' data-ref="602target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col4 ref" href="#604outer_dims_index" title='outer_dims_index' data-ref="604outer_dims_index">outer_dims_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="2382">2382</th><td>                                           <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"target_region"</q>),</td></tr>
<tr><th id="2383">2383</th><td>      <a class="local col0 ref" href="#600i8_ptr_type" title='i8_ptr_type' data-ref="600i8_ptr_type">i8_ptr_type</a>);</td></tr>
<tr><th id="2384">2384</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="608byte_offset_into_target_region" title='byte_offset_into_target_region' data-type='int64' data-ref="608byte_offset_into_target_region">byte_offset_into_target_region</dfn> = <var>0</var>;</td></tr>
<tr><th id="2385">2385</th><td></td></tr>
<tr><th id="2386">2386</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="609inner_dims_product" title='inner_dims_product' data-type='int64' data-ref="609inner_dims_product">inner_dims_product</dfn> =</td></tr>
<tr><th id="2387">2387</th><td>      <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_numeric.h.html#_ZSt10accumulateT_S_T0_T1_" title='std::accumulate' data-ref="_ZSt10accumulateT_S_T0_T1_">accumulate</a>(<a class="local col8 ref" href="#598inner_dims" title='inner_dims' data-ref="598inner_dims">inner_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNSt6vector5beginEv">begin</a>(), <a class="local col8 ref" href="#598inner_dims" title='inner_dims' data-ref="598inner_dims">inner_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>(), <var>1l</var>,</td></tr>
<tr><th id="2388">2388</th><td>                      [&amp;](<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col0 decl" id="610product" title='product' data-type='int64' data-ref="610product">product</dfn>, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col1 decl" id="611inner_dim" title='inner_dim' data-type='int64' data-ref="611inner_dim">inner_dim</dfn>) {</td></tr>
<tr><th id="2389">2389</th><td>                        <b>return</b> <a class="local col0 ref" href="#610product" title='product' data-ref="610product">product</a> * <a class="local col2 ref" href="#592output_shape" title='output_shape' data-ref="592output_shape">output_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col1 ref" href="#611inner_dim" title='inner_dim' data-ref="611inner_dim">inner_dim</a>);</td></tr>
<tr><th id="2390">2390</th><td>                      });</td></tr>
<tr><th id="2391">2391</th><td></td></tr>
<tr><th id="2392">2392</th><td>  <i>// For each operand, emit a memcpy from the operand to the target of size</i></td></tr>
<tr><th id="2393">2393</th><td><i>  // equal to the product of inner dimensions.</i></td></tr>
<tr><th id="2394">2394</th><td>  <b>for</b> (<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="612operand" title='operand' data-type='xla::HloInstruction *' data-ref="612operand">operand</dfn> : <a class="local col0 ref" href="#590operands" title='operands' data-ref="590operands">operands</a>) {</td></tr>
<tr><th id="2395">2395</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col3 decl" id="613input_shape" title='input_shape' data-type='const xla::Shape &amp;' data-ref="613input_shape">input_shape</dfn> = <a class="local col2 ref" href="#612operand" title='operand' data-ref="612operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2396">2396</th><td>    <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col4 decl" id="614source_array" title='source_array' data-type='llvm_ir::IrArray' data-ref="614source_array">source_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#612operand" title='operand' data-ref="612operand">operand</a>);</td></tr>
<tr><th id="2397">2397</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="615copy_source_address" title='copy_source_address' data-type='llvm::Value *' data-ref="615copy_source_address">copy_source_address</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(</td></tr>
<tr><th id="2398">2398</th><td>        <a class="local col4 ref" href="#614source_array" title='source_array' data-ref="614source_array">source_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitArrayElementAddress' data-ref="_ZNK3xla7llvm_ir7IrArray23EmitArrayElementAddressERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitArrayElementAddress</a>(<a class="local col4 ref" href="#604outer_dims_index" title='outer_dims_index' data-ref="604outer_dims_index">outer_dims_index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>,</td></tr>
<tr><th id="2399">2399</th><td>                                             <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"src_addr"</q>),</td></tr>
<tr><th id="2400">2400</th><td>        <a class="local col0 ref" href="#600i8_ptr_type" title='i8_ptr_type' data-ref="600i8_ptr_type">i8_ptr_type</a>);</td></tr>
<tr><th id="2401">2401</th><td></td></tr>
<tr><th id="2402">2402</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="616copy_target_address" title='copy_target_address' data-type='llvm::Value *' data-ref="616copy_target_address">copy_target_address</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE">CreateGEP</span>(</td></tr>
<tr><th id="2403">2403</th><td>        <a class="local col1 ref" href="#601i8_type" title='i8_type' data-ref="601i8_type">i8_type</a>, <a class="local col7 ref" href="#607target_region_begin" title='target_region_begin' data-ref="607target_region_begin">target_region_begin</a>,</td></tr>
<tr><th id="2404">2404</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col8 ref" href="#608byte_offset_into_target_region" title='byte_offset_into_target_region' data-ref="608byte_offset_into_target_region">byte_offset_into_target_region</a>));</td></tr>
<tr><th id="2405">2405</th><td></td></tr>
<tr><th id="2406">2406</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_" title='xla::cpu::IrEmitter::EmitTransferElements' data-ref="_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_">EmitTransferElements</a>(</td></tr>
<tr><th id="2407">2407</th><td>        <a class="local col6 ref" href="#616copy_target_address" title='copy_target_address' data-ref="616copy_target_address">copy_target_address</a>, <a class="local col5 ref" href="#615copy_source_address" title='copy_source_address' data-ref="615copy_source_address">copy_source_address</a>,</td></tr>
<tr><th id="2408">2408</th><td>        <a class="local col9 ref" href="#609inner_dims_product" title='inner_dims_product' data-ref="609inner_dims_product">inner_dims_product</a> * <a class="local col3 ref" href="#613input_shape" title='input_shape' data-ref="613input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col4 ref" href="#594concat_dim" title='concat_dim' data-ref="594concat_dim">concat_dim</a>), <a class="local col5 ref" href="#605primitive_type" title='primitive_type' data-ref="605primitive_type">primitive_type</a>,</td></tr>
<tr><th id="2409">2409</th><td>        <a class="local col2 ref" href="#602target_array" title='target_array' data-ref="602target_array">target_array</a>, <a class="local col4 ref" href="#614source_array" title='source_array' data-ref="614source_array">source_array</a>);</td></tr>
<tr><th id="2410">2410</th><td></td></tr>
<tr><th id="2411">2411</th><td>    <a class="local col8 ref" href="#608byte_offset_into_target_region" title='byte_offset_into_target_region' data-ref="608byte_offset_into_target_region">byte_offset_into_target_region</a> += <a class="local col9 ref" href="#609inner_dims_product" title='inner_dims_product' data-ref="609inner_dims_product">inner_dims_product</a> *</td></tr>
<tr><th id="2412">2412</th><td>                                      <a class="local col3 ref" href="#613input_shape" title='input_shape' data-ref="613input_shape">input_shape</a>.<span class='ref' title='xla::Shape::dimensions' data-ref="_ZNK3xla5Shape10dimensionsEi">dimensions</span>(<a class="local col4 ref" href="#594concat_dim" title='concat_dim' data-ref="594concat_dim">concat_dim</a>) *</td></tr>
<tr><th id="2413">2413</th><td>                                      <a class="local col6 ref" href="#606primitive_type_size" title='primitive_type_size' data-ref="606primitive_type_size">primitive_type_size</a>;</td></tr>
<tr><th id="2414">2414</th><td>  }</td></tr>
<tr><th id="2415">2415</th><td></td></tr>
<tr><th id="2416">2416</th><td>  <b>if</b> (!<a class="local col9 ref" href="#599outer_dims" title='outer_dims' data-ref="599outer_dims">outer_dims</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector5emptyEv" title='std::vector::empty' data-ref="_ZNKSt6vector5emptyEv">empty</a>()) {</td></tr>
<tr><th id="2417">2417</th><td>    <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col3 ref" href="#603loops" title='loops' data-ref="603loops">loops</a>.<a class="ref" href="../llvm_ir/llvm_loop.h.html#_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv" title='xla::llvm_ir::ForLoopNest::GetOuterLoopExitBasicBlock' data-ref="_ZN3xla7llvm_ir11ForLoopNest26GetOuterLoopExitBasicBlockEv">GetOuterLoopExitBasicBlock</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2418">2418</th><td>  }</td></tr>
<tr><th id="2419">2419</th><td></td></tr>
<tr><th id="2420">2420</th><td>  <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><b>true</b>;</td></tr>
<tr><th id="2421">2421</th><td>}</td></tr>
<tr><th id="2422">2422</th><td></td></tr>
<tr><th id="2423">2423</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_" title='xla::cpu::IrEmitter::EmitTransferElements' data-ref="_ZN3xla3cpu9IrEmitter20EmitTransferElementsEPN4llvm5ValueES4_xNS_13PrimitiveTypeERKNS_7llvm_ir7IrArrayES9_">EmitTransferElements</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="617target" title='target' data-type='llvm::Value *' data-ref="617target">target</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="618source" title='source' data-type='llvm::Value *' data-ref="618source">source</dfn>,</td></tr>
<tr><th id="2424">2424</th><td>                                     <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="619element_count" title='element_count' data-type='int64' data-ref="619element_count">element_count</dfn>,</td></tr>
<tr><th id="2425">2425</th><td>                                     <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col0 decl" id="620primitive_type" title='primitive_type' data-type='xla::PrimitiveType' data-ref="620primitive_type">primitive_type</dfn>,</td></tr>
<tr><th id="2426">2426</th><td>                                     <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&amp; <dfn class="local col1 decl" id="621target_array" title='target_array' data-type='const llvm_ir::IrArray &amp;' data-ref="621target_array">target_array</dfn>,</td></tr>
<tr><th id="2427">2427</th><td>                                     <em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&amp; <dfn class="local col2 decl" id="622source_array" title='source_array' data-type='const llvm_ir::IrArray &amp;' data-ref="622source_array">source_array</dfn>) {</td></tr>
<tr><th id="2428">2428</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="623primitive_type_size" title='primitive_type_size' data-type='unsigned int' data-ref="623primitive_type_size">primitive_type_size</dfn> =</td></tr>
<tr><th id="2429">2429</th><td>      <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE" title='xla::ShapeUtil::ByteSizeOfPrimitiveType' data-ref="_ZN3xla9ShapeUtil23ByteSizeOfPrimitiveTypeENS_13PrimitiveTypeE">ByteSizeOfPrimitiveType</a>(<a class="local col0 ref" href="#620primitive_type" title='primitive_type' data-ref="620primitive_type">primitive_type</a>);</td></tr>
<tr><th id="2430">2430</th><td>  <em>unsigned</em> <dfn class="local col4 decl" id="624element_alignment" title='element_alignment' data-type='unsigned int' data-ref="624element_alignment">element_alignment</dfn> = <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/math/math_util.h.html#tensorflow::MathUtil" title='tensorflow::MathUtil' data-ref="tensorflow::MathUtil">MathUtil</a>::<a class="ref" href="../../../../core/lib/math/math_util.h.html#_ZN10tensorflow8MathUtil3GCDET_S1_" title='tensorflow::MathUtil::GCD' data-ref="_ZN10tensorflow8MathUtil3GCDET_S1_">GCD</a>&lt;<em>unsigned</em>&gt;(</td></tr>
<tr><th id="2431">2431</th><td>      <a class="local col3 ref" href="#623primitive_type_size" title='primitive_type_size' data-ref="623primitive_type_size">primitive_type_size</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col0 ref" href="#620primitive_type" title='primitive_type' data-ref="620primitive_type">primitive_type</a>));</td></tr>
<tr><th id="2432">2432</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col5 decl" id="625primitive_ptr_type" title='primitive_ptr_type' data-type='llvm::Type *' data-ref="625primitive_ptr_type">primitive_ptr_type</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</span>::<span class='ref' title='llvm::PointerType::getUnqual' data-ref="_ZN4llvm11PointerType9getUnqualEPNS_4TypeE">getUnqual</span>(</td></tr>
<tr><th id="2433">2433</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col0 ref" href="#620primitive_type" title='primitive_type' data-ref="620primitive_type">primitive_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>));</td></tr>
<tr><th id="2434">2434</th><td></td></tr>
<tr><th id="2435">2435</th><td>  <b>if</b> (<a class="local col9 ref" href="#619element_count" title='element_count' data-ref="619element_count">element_count</a> == <var>1</var>) {</td></tr>
<tr><th id="2436">2436</th><td>    <em>auto</em>* <dfn class="local col6 decl" id="626load_instruction" title='load_instruction' data-type='llvm::LoadInst *' data-ref="626load_instruction">load_instruction</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</span>(</td></tr>
<tr><th id="2437">2437</th><td>        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col8 ref" href="#618source" title='source' data-ref="618source">source</a>, <a class="local col5 ref" href="#625primitive_ptr_type" title='primitive_ptr_type' data-ref="625primitive_ptr_type">primitive_ptr_type</a>),</td></tr>
<tr><th id="2438">2438</th><td>        <a class="local col4 ref" href="#624element_alignment" title='element_alignment' data-ref="624element_alignment">element_alignment</a>);</td></tr>
<tr><th id="2439">2439</th><td>    <a class="local col2 ref" href="#622source_array" title='source_array' data-ref="622source_array">source_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE" title='xla::llvm_ir::IrArray::AnnotateLoadStoreInstructionWithMetadata' data-ref="_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE">AnnotateLoadStoreInstructionWithMetadata</a>(<a class="local col6 ref" href="#626load_instruction" title='load_instruction' data-ref="626load_instruction">load_instruction</a>);</td></tr>
<tr><th id="2440">2440</th><td>    <em>auto</em>* <dfn class="local col7 decl" id="627store_instruction" title='store_instruction' data-type='llvm::StoreInst *' data-ref="627store_instruction">store_instruction</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</span>(</td></tr>
<tr><th id="2441">2441</th><td>        <a class="local col6 ref" href="#626load_instruction" title='load_instruction' data-ref="626load_instruction">load_instruction</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col7 ref" href="#617target" title='target' data-ref="617target">target</a>, <a class="local col5 ref" href="#625primitive_ptr_type" title='primitive_ptr_type' data-ref="625primitive_ptr_type">primitive_ptr_type</a>),</td></tr>
<tr><th id="2442">2442</th><td>        <a class="local col4 ref" href="#624element_alignment" title='element_alignment' data-ref="624element_alignment">element_alignment</a>);</td></tr>
<tr><th id="2443">2443</th><td>    <a class="local col1 ref" href="#621target_array" title='target_array' data-ref="621target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE" title='xla::llvm_ir::IrArray::AnnotateLoadStoreInstructionWithMetadata' data-ref="_ZNK3xla7llvm_ir7IrArray40AnnotateLoadStoreInstructionWithMetadataEPN4llvm11InstructionE">AnnotateLoadStoreInstructionWithMetadata</a>(<a class="local col7 ref" href="#627store_instruction" title='store_instruction' data-ref="627store_instruction">store_instruction</a>);</td></tr>
<tr><th id="2444">2444</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2445">2445</th><td>    <em>auto</em>* <dfn class="local col8 decl" id="628memcpy_instruction" title='memcpy_instruction' data-type='llvm::CallInst *' data-ref="628memcpy_instruction">memcpy_instruction</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::CreateMemCpy' data-ref="_ZN4llvm13IRBuilderBase12CreateMemCpyEPNS_5ValueEjS2_jmbPNS_6MDNodeES4_S4_S4_">CreateMemCpy</span>(</td></tr>
<tr><th id="2446">2446</th><td>        <a class="local col7 ref" href="#617target" title='target' data-ref="617target">target</a>, <i>/*DstAlign=*/</i><a class="local col4 ref" href="#624element_alignment" title='element_alignment' data-ref="624element_alignment">element_alignment</a>, <a class="local col8 ref" href="#618source" title='source' data-ref="618source">source</a>,</td></tr>
<tr><th id="2447">2447</th><td>        <i>/*SrcAlign=*/</i><a class="local col4 ref" href="#624element_alignment" title='element_alignment' data-ref="624element_alignment">element_alignment</a>, <a class="local col9 ref" href="#619element_count" title='element_count' data-ref="619element_count">element_count</a> * <a class="local col3 ref" href="#623primitive_type_size" title='primitive_type_size' data-ref="623primitive_type_size">primitive_type_size</a>);</td></tr>
<tr><th id="2448">2448</th><td></td></tr>
<tr><th id="2449">2449</th><td>    <i>// The memcpy does the load and the store internally.  The aliasing related</i></td></tr>
<tr><th id="2450">2450</th><td><i>    // metadata has to reflect that.</i></td></tr>
<tr><th id="2451">2451</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_map.h.html#std::map" title='std::map' data-ref="std::map">map</a>&lt;<em>int</em>, <span class="namespace">llvm::</span><span class='type' title='llvm::MDNode' data-ref="llvm::MDNode">MDNode</span>*&gt; <dfn class="local col9 decl" id="629merged_metadata" title='merged_metadata' data-type='std::map&lt;int, llvm::MDNode *&gt;' data-ref="629merged_metadata">merged_metadata</dfn> =</td></tr>
<tr><th id="2452">2452</th><td>        <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir13MergeMetadataEPN4llvm11LLVMContextERKSt3mapIiPNS1_6MDNodeESt4lessIiESaISt4pairIKiS6_EEESF_" title='xla::llvm_ir::MergeMetadata' data-ref="_ZN3xla7llvm_ir13MergeMetadataEPN4llvm11LLVMContextERKSt3mapIiPNS1_6MDNodeESt4lessIiESaISt4pairIKiS6_EEESF_">MergeMetadata</a>(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>-&gt;<span class='ref' title='llvm::Module::getContext' data-ref="_ZNK4llvm6Module10getContextEv">getContext</span>(), <a class="local col2 ref" href="#622source_array" title='source_array' data-ref="622source_array">source_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray8metadataEv" title='xla::llvm_ir::IrArray::metadata' data-ref="_ZNK3xla7llvm_ir7IrArray8metadataEv">metadata</a>(),</td></tr>
<tr><th id="2453">2453</th><td>                               <a class="local col1 ref" href="#621target_array" title='target_array' data-ref="621target_array">target_array</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray8metadataEv" title='xla::llvm_ir::IrArray::metadata' data-ref="_ZNK3xla7llvm_ir7IrArray8metadataEv">metadata</a>());</td></tr>
<tr><th id="2454">2454</th><td>    <b>for</b> (<em>const</em> <em>auto</em>&amp; <dfn class="local col0 decl" id="630kind_md_pair" title='kind_md_pair' data-type='const std::pair&lt;const int, llvm::MDNode *&gt; &amp;' data-ref="630kind_md_pair">kind_md_pair</dfn> : <a class="local col9 ref" href="#629merged_metadata" title='merged_metadata' data-ref="629merged_metadata">merged_metadata</a>) {</td></tr>
<tr><th id="2455">2455</th><td>      <a class="local col8 ref" href="#628memcpy_instruction" title='memcpy_instruction' data-ref="628memcpy_instruction">memcpy_instruction</a>-&gt;<span class='ref' title='llvm::Instruction::setMetadata' data-ref="_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE">setMetadata</span>(<a class="local col0 ref" href="#630kind_md_pair" title='kind_md_pair' data-ref="630kind_md_pair">kind_md_pair</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;const int, llvm::MDNode *&gt;::first' data-ref="std::pair::first">first</a>, <a class="local col0 ref" href="#630kind_md_pair" title='kind_md_pair' data-ref="630kind_md_pair">kind_md_pair</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;const int, llvm::MDNode *&gt;::second' data-ref="std::pair::second">second</a>);</td></tr>
<tr><th id="2456">2456</th><td>    }</td></tr>
<tr><th id="2457">2457</th><td>  }</td></tr>
<tr><th id="2458">2458</th><td>}</td></tr>
<tr><th id="2459">2459</th><td></td></tr>
<tr><th id="2460">2460</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter17HandleConcatenateEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleConcatenate' data-ref="_ZN3xla3cpu9IrEmitter17HandleConcatenateEPNS_14HloInstructionE">HandleConcatenate</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="631concatenate" title='concatenate' data-type='xla::HloInstruction *' data-ref="631concatenate">concatenate</dfn>) {</td></tr>
<tr><th id="2461">2461</th><td>  <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt; <dfn class="local col2 decl" id="632operands" title='operands' data-type='gtl::ArraySlice&lt;HloInstruction *&gt;' data-ref="632operands">operands</dfn><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKNS0_13InlinedVectorIT_XT_EEE">(</a><a class="local col1 ref" href="#631concatenate" title='concatenate' data-ref="631concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>());</td></tr>
<tr><th id="2462">2462</th><td>  <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNSt12basic_stringC1Ev" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt12basic_stringC1Ev"></a><dfn class="local col3 decl" id="633failure_reason" title='failure_reason' data-type='string' data-ref="633failure_reason">failure_reason</dfn>;</td></tr>
<tr><th id="2463">2463</th><td>  <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value11 = (EmitFastConcatenate(concatenate, operands, &amp;failure_reason)); if ((__builtin_expect(!_status_or_value11.ok(), 0))) { return _status_or_value11.status(); } bool successful = std::move(_status_or_value11.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(</td></tr>
<tr><th id="2464">2464</th><td>      <em>bool</em> <dfn class="local col4 decl" id="634successful" title='successful' data-type='bool' data-ref="634successful">successful</dfn>,</td></tr>
<tr><th id="2465">2465</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter19EmitFastConcatenateEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIS3_EEPSs" title='xla::cpu::IrEmitter::EmitFastConcatenate' data-ref="_ZN3xla3cpu9IrEmitter19EmitFastConcatenateEPNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIS3_EEPSs">EmitFastConcatenate</a>(<a class="local col1 ref" href="#631concatenate" title='concatenate' data-ref="631concatenate">concatenate</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;xla::HloInstruction *&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIPN3xla14HloInstructionEEC1ERKS5_"></a><a class="local col2 ref" href="#632operands" title='operands' data-ref="632operands">operands</a>, &amp;<a class="local col3 ref" href="#633failure_reason" title='failure_reason' data-ref="633failure_reason">failure_reason</a>));</td></tr>
<tr><th id="2466">2466</th><td>  <b>if</b> (<a class="local col4 ref" href="#2463" title='successful' data-ref="634successful">successful</a>) {</td></tr>
<tr><th id="2467">2467</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((1) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2467, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>1</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Emitted fast concatenate for "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col1 ref" href="#631concatenate" title='concatenate' data-ref="631concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2468">2468</th><td>    <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2469">2469</th><td>  }</td></tr>
<tr><th id="2470">2470</th><td></td></tr>
<tr><th id="2471">2471</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((1) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2471, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>1</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Could not emit fast concatenate for "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col1 ref" href="#631concatenate" title='concatenate' data-ref="631concatenate">concatenate</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>()</td></tr>
<tr><th id="2472">2472</th><td>          <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>": "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col3 ref" href="#633failure_reason" title='failure_reason' data-ref="633failure_reason">failure_reason</a>;</td></tr>
<tr><th id="2473">2473</th><td></td></tr>
<tr><th id="2474">2474</th><td>  <b>return</b> <a class="virtual member" href="#_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</a>(<a class="local col1 ref" href="#631concatenate" title='concatenate' data-ref="631concatenate">concatenate</a>);</td></tr>
<tr><th id="2475">2475</th><td>}</td></tr>
<tr><th id="2476">2476</th><td></td></tr>
<tr><th id="2477">2477</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter17HandleConditionalEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::HandleConditional' data-ref="_ZN3xla3cpu9IrEmitter17HandleConditionalEPNS_14HloInstructionE">HandleConditional</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="635conditional" title='conditional' data-type='xla::HloInstruction *' data-ref="635conditional">conditional</dfn>) {</td></tr>
<tr><th id="2478">2478</th><td>  <em>auto</em> <dfn class="local col6 decl" id="636pred" title='pred' data-type='const xla::HloInstruction *' data-ref="636pred">pred</dfn> = <a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>0</var>);</td></tr>
<tr><th id="2479">2479</th><td>  <em>auto</em> <dfn class="local col7 decl" id="637true_arg" title='true_arg' data-type='const xla::HloInstruction *' data-ref="637true_arg">true_arg</dfn> = <a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>1</var>);</td></tr>
<tr><th id="2480">2480</th><td>  <em>auto</em> <dfn class="local col8 decl" id="638false_arg" title='false_arg' data-type='const xla::HloInstruction *' data-ref="638false_arg">false_arg</dfn> = <a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction7operandEx" title='xla::HloInstruction::operand' data-ref="_ZNK3xla14HloInstruction7operandEx">operand</a>(<var>2</var>);</td></tr>
<tr><th id="2481">2481</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(ShapeUtil::IsScalar(pred-&gt;shape()) &amp;&amp; pred-&gt;shape().element_type() == PRED), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2482, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;ShapeUtil::IsScalar(pred-&gt;shape()) &amp;&amp; pred-&gt;shape().element_type() == PRED&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE" title='xla::ShapeUtil::IsScalar' data-ref="_ZN3xla9ShapeUtil8IsScalarERKNS_5ShapeE">IsScalar</a>(<a class="local col6 ref" href="#636pred" title='pred' data-ref="636pred">pred</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()) &amp;&amp;</td></tr>
<tr><th id="2482">2482</th><td>               <a class="local col6 ref" href="#636pred" title='pred' data-ref="636pred">pred</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>() == <span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>)</td></tr>
<tr><th id="2483">2483</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"Predicate on a Conditional must be bool; got: "</q></td></tr>
<tr><th id="2484">2484</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col6 ref" href="#636pred" title='pred' data-ref="636pred">pred</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2485">2485</th><td></td></tr>
<tr><th id="2486">2486</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col9 decl" id="639true_computation" title='true_computation' data-type='xla::HloComputation *' data-ref="639true_computation">true_computation</dfn> = <a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction16true_computationEv" title='xla::HloInstruction::true_computation' data-ref="_ZNK3xla14HloInstruction16true_computationEv">true_computation</a>();</td></tr>
<tr><th id="2487">2487</th><td>  <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col0 decl" id="640false_computation" title='false_computation' data-type='xla::HloComputation *' data-ref="640false_computation">false_computation</dfn> = <a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction17false_computationEv" title='xla::HloInstruction::false_computation' data-ref="_ZNK3xla14HloInstruction17false_computationEv">false_computation</a>();</td></tr>
<tr><th id="2488">2488</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(ShapeUtil::Equal(conditional-&gt;shape(), true_computation-&gt;root_instruction()-&gt;shape())), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2489, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;ShapeUtil::Equal(conditional-&gt;shape(), true_computation-&gt;root_instruction()-&gt;shape())&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil5EqualERKNS_5ShapeES3_" title='xla::ShapeUtil::Equal' data-ref="_ZN3xla9ShapeUtil5EqualERKNS_5ShapeES3_">Equal</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="2489">2489</th><td>                                <a class="local col9 ref" href="#639true_computation" title='true_computation' data-ref="639true_computation">true_computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()))</td></tr>
<tr><th id="2490">2490</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"Shape of conditional should be same as the shape of the true "</q></td></tr>
<tr><th id="2491">2491</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"computation; got: "</q> <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())</td></tr>
<tr><th id="2492">2492</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>" and "</q></td></tr>
<tr><th id="2493">2493</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col9 ref" href="#639true_computation" title='true_computation' data-ref="639true_computation">true_computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2494">2494</th><td></td></tr>
<tr><th id="2495">2495</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(ShapeUtil::Equal(conditional-&gt;shape(), false_computation-&gt;root_instruction()-&gt;shape())), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2496, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;ShapeUtil::Equal(conditional-&gt;shape(), false_computation-&gt;root_instruction()-&gt;shape())&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil5EqualERKNS_5ShapeES3_" title='xla::ShapeUtil::Equal' data-ref="_ZN3xla9ShapeUtil5EqualERKNS_5ShapeES3_">Equal</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(),</td></tr>
<tr><th id="2496">2496</th><td>                                <a class="local col0 ref" href="#640false_computation" title='false_computation' data-ref="640false_computation">false_computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()))</td></tr>
<tr><th id="2497">2497</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"Shape of conditional should be same as the shape of the false "</q></td></tr>
<tr><th id="2498">2498</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>"computation; got: "</q> <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>())</td></tr>
<tr><th id="2499">2499</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <q>" and "</q></td></tr>
<tr><th id="2500">2500</th><td>      <a class="ref" href="../../status_macros.h.html#_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_" title='xla::status_macros::MakeErrorStream::MakeErrorStreamWithOutput::operator&lt;&lt;' data-ref="_ZN3xla13status_macros15MakeErrorStream25MakeErrorStreamWithOutputlsERKT_">&lt;&lt;</a> <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE" title='xla::ShapeUtil::HumanString' data-ref="_ZN3xla9ShapeUtil11HumanStringERKNS_5ShapeE">HumanString</a>(<a class="local col0 ref" href="#640false_computation" title='false_computation' data-ref="640false_computation">false_computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2501">2501</th><td></td></tr>
<tr><th id="2502">2502</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col1 decl" id="641true_function" title='true_function' data-type='llvm::Function *' data-ref="641true_function">true_function</dfn> =</td></tr>
<tr><th id="2503">2503</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col9 ref" href="#639true_computation" title='true_computation' data-ref="639true_computation">true_computation</a>);</td></tr>
<tr><th id="2504">2504</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="642false_function" title='false_function' data-type='llvm::Function *' data-ref="642false_function">false_function</dfn> =</td></tr>
<tr><th id="2505">2505</th><td>      <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col0 ref" href="#640false_computation" title='false_computation' data-ref="640false_computation">false_computation</a>);</td></tr>
<tr><th id="2506">2506</th><td></td></tr>
<tr><th id="2507">2507</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(conditional)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>));</td></tr>
<tr><th id="2508">2508</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="643conditional_result" title='conditional_result' data-type='llvm::Value *' data-ref="643conditional_result">conditional_result</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>);</td></tr>
<tr><th id="2509">2509</th><td></td></tr>
<tr><th id="2510">2510</th><td>  <i>// Generating:</i></td></tr>
<tr><th id="2511">2511</th><td><i>  //   if (pred)</i></td></tr>
<tr><th id="2512">2512</th><td><i>  //     cond_result = true_computation(true_operand)</i></td></tr>
<tr><th id="2513">2513</th><td><i>  //   else</i></td></tr>
<tr><th id="2514">2514</th><td><i>  //     cond_result = false_computation(false_operand)</i></td></tr>
<tr><th id="2515">2515</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col4 decl" id="644pred_value" title='pred_value' data-type='llvm::LoadInst *' data-ref="644pred_value">pred_value</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueEPKc">CreateLoad</span>(</td></tr>
<tr><th id="2516">2516</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col6 ref" href="#636pred" title='pred' data-ref="636pred">pred</a>).<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>(), <q>"load_predicate_value"</q>);</td></tr>
<tr><th id="2517">2517</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="645pred_cond" title='pred_cond' data-type='llvm::Value *' data-ref="645pred_cond">pred_cond</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateICmpNE' data-ref="_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpNE</span>(</td></tr>
<tr><th id="2518">2518</th><td>      <a class="local col4 ref" href="#644pred_value" title='pred_value' data-ref="644pred_value">pred_value</a>,</td></tr>
<tr><th id="2519">2519</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>::<span class='ref' title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</span>(<span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<span class='enum' title='xla::PrimitiveType::PRED' data-ref="xla::PrimitiveType::PRED">PRED</span>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>), <var>0</var>),</td></tr>
<tr><th id="2520">2520</th><td>      <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></span><q>"boolean_predicate"</q>);</td></tr>
<tr><th id="2521">2521</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData" title='xla::llvm_ir::LlvmIfData' data-ref="xla::llvm_ir::LlvmIfData">LlvmIfData</a> <dfn class="local col6 decl" id="646if_data" title='if_data' data-type='llvm_ir::LlvmIfData' data-ref="646if_data">if_data</dfn> =</td></tr>
<tr><th id="2522">2522</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb" title='xla::llvm_ir::EmitIfThenElse' data-ref="_ZN3xla7llvm_ir14EmitIfThenElseEPN4llvm5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEb">EmitIfThenElse</a>(<a class="local col5 ref" href="#645pred_cond" title='pred_cond' data-ref="645pred_cond">pred_cond</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"conditional"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2523">2523</th><td></td></tr>
<tr><th id="2524">2524</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col6 ref" href="#646if_data" title='if_data' data-ref="646if_data">if_data</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::true_block" title='xla::llvm_ir::LlvmIfData::true_block' data-ref="xla::llvm_ir::LlvmIfData::true_block">true_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2525">2525</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</a>(<a class="local col1 ref" href="#641true_function" title='true_function' data-ref="641true_function">true_function</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col7 ref" href="#637true_arg" title='true_arg' data-ref="637true_arg">true_arg</a>)},</td></tr>
<tr><th id="2526">2526</th><td>                            <a class="local col3 ref" href="#643conditional_result" title='conditional_result' data-ref="643conditional_result">conditional_result</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"_true"</q>));</td></tr>
<tr><th id="2527">2527</th><td></td></tr>
<tr><th id="2528">2528</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col6 ref" href="#646if_data" title='if_data' data-ref="646if_data">if_data</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::false_block" title='xla::llvm_ir::LlvmIfData::false_block' data-ref="xla::llvm_ir::LlvmIfData::false_block">false_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2529">2529</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</a>(<a class="local col2 ref" href="#642false_function" title='false_function' data-ref="642false_function">false_function</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ESt16initializer_listIT_E"></a>{<a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col8 ref" href="#638false_arg" title='false_arg' data-ref="638false_arg">false_arg</a>)},</td></tr>
<tr><th id="2530">2530</th><td>                            <a class="local col3 ref" href="#643conditional_result" title='conditional_result' data-ref="643conditional_result">conditional_result</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col5 ref" href="#635conditional" title='conditional' data-ref="635conditional">conditional</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"_false"</q>));</td></tr>
<tr><th id="2531">2531</th><td></td></tr>
<tr><th id="2532">2532</th><td>  <a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::SetToFirstInsertPoint' data-ref="_ZN3xla7llvm_ir21SetToFirstInsertPointEPN4llvm10BasicBlockEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">SetToFirstInsertPoint</a>(<a class="local col6 ref" href="#646if_data" title='if_data' data-ref="646if_data">if_data</a>.<a class="ref" href="../llvm_ir/llvm_util.h.html#xla::llvm_ir::LlvmIfData::after_block" title='xla::llvm_ir::LlvmIfData::after_block' data-ref="xla::llvm_ir::LlvmIfData::after_block">after_block</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2533">2533</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2534">2534</th><td>}</td></tr>
<tr><th id="2535">2535</th><td></td></tr>
<tr><th id="2536">2536</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter11FinishVisitEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::FinishVisit' data-ref="_ZN3xla3cpu9IrEmitter11FinishVisitEPNS_14HloInstructionE">FinishVisit</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="647root" title='root' data-type='xla::HloInstruction *' data-ref="647root">root</dfn>) {</td></tr>
<tr><th id="2537">2537</th><td>  <i>// When this method is called, we should have already emitted an IR value for</i></td></tr>
<tr><th id="2538">2538</th><td><i>  // the root (return) op. The IR value holds the address of the buffer holding</i></td></tr>
<tr><th id="2539">2539</th><td><i>  // the value. If the root is a constant or parameter, we perform a memcpy from</i></td></tr>
<tr><th id="2540">2540</th><td><i>  // this buffer to the retval buffer of the computation. Otherwise, there's</i></td></tr>
<tr><th id="2541">2541</th><td><i>  // nothing to do since the result was already written directly into the output</i></td></tr>
<tr><th id="2542">2542</th><td><i>  // buffer.</i></td></tr>
<tr><th id="2543">2543</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2543, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"FinishVisit root: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col7 ref" href="#647root" title='root' data-ref="647root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2544">2544</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="648root_value" title='root_value' data-type='llvm::Value *' data-ref="648root_value">root_value</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col7 ref" href="#647root" title='root' data-ref="647root">root</a>);</td></tr>
<tr><th id="2545">2545</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2545, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"  value: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir12DumpToStringERKT_" title='xla::llvm_ir::DumpToString' data-ref="_ZN3xla7llvm_ir12DumpToStringERKT_">DumpToString</a>(*<a class="local col8 ref" href="#648root_value" title='root_value' data-ref="648root_value">root_value</a>);</td></tr>
<tr><th id="2546">2546</th><td></td></tr>
<tr><th id="2547">2547</th><td>  <em>auto</em> <dfn class="local col9 decl" id="649record_complete_computation" title='record_complete_computation' data-type='(lambda at /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc:2547:38)' data-ref="649record_complete_computation">record_complete_computation</dfn> = [&amp;](<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="650prof_counter" title='prof_counter' data-type='llvm::Value *' data-ref="650prof_counter">prof_counter</dfn>) {</td></tr>
<tr><th id="2548">2548</th><td>    <b>if</b> (<a class="local col0 ref" href="#650prof_counter" title='prof_counter' data-ref="650prof_counter">prof_counter</a>) {</td></tr>
<tr><th id="2549">2549</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::profiling_state_" title='xla::cpu::IrEmitter::profiling_state_' data-ref="xla::cpu::IrEmitter::profiling_state_">profiling_state_</a>.<a class="ref" href="#_ZN3xla3cpu9IrEmitter14ProfilingState25RecordCompleteComputationEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueE" title='xla::cpu::IrEmitter::ProfilingState::RecordCompleteComputation' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState25RecordCompleteComputationEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueE">RecordCompleteComputation</a>(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="local col0 ref" href="#650prof_counter" title='prof_counter' data-ref="650prof_counter">prof_counter</a>);</td></tr>
<tr><th id="2550">2550</th><td>    }</td></tr>
<tr><th id="2551">2551</th><td>  };</td></tr>
<tr><th id="2552">2552</th><td></td></tr>
<tr><th id="2553">2553</th><td>  <i>// For the parallel cpu backend, we record the total for each embedded</i></td></tr>
<tr><th id="2554">2554</th><td><i>  // computation callee with its caller kCall HLO.</i></td></tr>
<tr><th id="2555">2555</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::parallel_cpu_backend_" title='xla::cpu::IrEmitter::parallel_cpu_backend_' data-ref="xla::cpu::IrEmitter::parallel_cpu_backend_">parallel_cpu_backend_</a> &amp;&amp; <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a>) {</td></tr>
<tr><th id="2556">2556</th><td>    <em>auto</em>* <dfn class="local col1 decl" id="651computation" title='computation' data-type='xla::HloComputation *' data-ref="651computation">computation</dfn> = <a class="local col7 ref" href="#647root" title='root' data-ref="647root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZN3xla14HloInstruction6parentEv" title='xla::HloInstruction::parent' data-ref="_ZN3xla14HloInstruction6parentEv">parent</a>();</td></tr>
<tr><th id="2557">2557</th><td>    <em>auto</em>* <dfn class="local col2 decl" id="652entry_computation" title='entry_computation' data-type='xla::HloComputation *' data-ref="652entry_computation">entry_computation</dfn> = <a class="local col1 ref" href="#651computation" title='computation' data-ref="651computation">computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZN3xla14HloComputation6parentEv" title='xla::HloComputation::parent' data-ref="_ZN3xla14HloComputation6parentEv">parent</a>()-&gt;<a class="ref" href="../hlo_module.h.html#_ZN3xla9HloModule17entry_computationEv" title='xla::HloModule::entry_computation' data-ref="_ZN3xla9HloModule17entry_computationEv">entry_computation</a>();</td></tr>
<tr><th id="2558">2558</th><td>    <b>if</b> (<a class="local col1 ref" href="#651computation" title='computation' data-ref="651computation">computation</a> != <a class="local col2 ref" href="#652entry_computation" title='entry_computation' data-ref="652entry_computation">entry_computation</a>) {</td></tr>
<tr><th id="2559">2559</th><td>      <b>for</b> (<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="653instruction" title='instruction' data-type='xla::HloInstruction *' data-ref="653instruction">instruction</dfn> : <a class="local col2 ref" href="#652entry_computation" title='entry_computation' data-ref="652entry_computation">entry_computation</a>-&gt;<a class="ref" href="../hlo_computation.h.html#_ZN3xla14HloComputation12instructionsEv" title='xla::HloComputation::instructions' data-ref="_ZN3xla14HloComputation12instructionsEv">instructions</a>()) {</td></tr>
<tr><th id="2560">2560</th><td>        <b>if</b> (<a class="local col3 ref" href="#653instruction" title='instruction' data-ref="653instruction">instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>() == <a class="type" href="../hlo_opcode.h.html#xla::HloOpcode" title='xla::HloOpcode' data-ref="xla::HloOpcode">HloOpcode</a>::<a class="enum" href="../hlo_opcode.h.html#135" title='xla::HloOpcode::kCall' data-ref="xla::HloOpcode::kCall">kCall</a> &amp;&amp;</td></tr>
<tr><th id="2561">2561</th><td>            <a class="local col3 ref" href="#653instruction" title='instruction' data-ref="653instruction">instruction</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8to_applyEv" title='xla::HloInstruction::to_apply' data-ref="_ZNK3xla14HloInstruction8to_applyEv">to_apply</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>() == <a class="local col7 ref" href="#647root" title='root' data-ref="647root">root</a>) {</td></tr>
<tr><th id="2562">2562</th><td>          <a class="local col9 ref" href="#649record_complete_computation" title='record_complete_computation' data-ref="649record_complete_computation">record_complete_computation</a>(<a class="member" href="ir_emitter.h.html#_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetProfileCounterFor' data-ref="_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloInstructionE">GetProfileCounterFor</a>(*<a class="local col3 ref" href="#653instruction" title='instruction' data-ref="653instruction">instruction</a>));</td></tr>
<tr><th id="2563">2563</th><td>          <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2564">2564</th><td>        }</td></tr>
<tr><th id="2565">2565</th><td>      }</td></tr>
<tr><th id="2566">2566</th><td>    }</td></tr>
<tr><th id="2567">2567</th><td>  }</td></tr>
<tr><th id="2568">2568</th><td></td></tr>
<tr><th id="2569">2569</th><td>  <i>// For the entry computation this increment is cumulative of embedded</i></td></tr>
<tr><th id="2570">2570</th><td><i>  // computations since it includes cycles spent in computations invoked by</i></td></tr>
<tr><th id="2571">2571</th><td><i>  // While, Call etc.</i></td></tr>
<tr><th id="2572">2572</th><td>  <a class="local col9 ref" href="#649record_complete_computation" title='record_complete_computation' data-ref="649record_complete_computation">record_complete_computation</a>(<a class="member" href="ir_emitter.h.html#_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloComputationE" title='xla::cpu::IrEmitter::GetProfileCounterFor' data-ref="_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloComputationE">GetProfileCounterFor</a>(*<a class="local col7 ref" href="#647root" title='root' data-ref="647root">root</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZN3xla14HloInstruction6parentEv" title='xla::HloInstruction::parent' data-ref="_ZN3xla14HloInstruction6parentEv">parent</a>()));</td></tr>
<tr><th id="2573">2573</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2574">2574</th><td>}</td></tr>
<tr><th id="2575">2575</th><td></td></tr>
<tr><th id="2576">2576</th><td><b>template</b> &lt;<b>typename</b> T&gt;</td></tr>
<tr><th id="2577">2577</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter23GetProfileCounterCommonERKT_RKSt13unordered_mapIPS3_xSt4hashIS6_ESt8equal_toIS6_ESaISt4pairIKS6_xEEE" title='xla::cpu::IrEmitter::GetProfileCounterCommon' data-ref="_ZN3xla3cpu9IrEmitter23GetProfileCounterCommonERKT_RKSt13unordered_mapIPS3_xSt4hashIS6_ESt8equal_toIS6_ESaISt4pairIKS6_xEEE">GetProfileCounterCommon</dfn>(</td></tr>
<tr><th id="2578">2578</th><td>    <em>const</em> T&amp; <dfn class="local col4 decl" id="654hlo" title='hlo' data-type='const T &amp;' data-ref="654hlo">hlo</dfn>,</td></tr>
<tr><th id="2579">2579</th><td>    <em>const</em> <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/unordered_map.h.html#std::unordered_map" title='std::unordered_map' data-ref="std::unordered_map">unordered_map</a>&lt;<em>const</em> T*, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a>&gt;&amp; <dfn class="local col5 decl" id="655profile_index_map" title='profile_index_map' data-type='const std::unordered_map&lt;const T *, int64&gt; &amp;' data-ref="655profile_index_map">profile_index_map</dfn>) {</td></tr>
<tr><th id="2580">2580</th><td>  <em>auto</em> <dfn class="local col6 decl" id="656it" title='it' data-type='auto' data-ref="656it">it</dfn> = <a class="local col5 ref" href="#655profile_index_map" title='profile_index_map' data-ref="655profile_index_map">profile_index_map</a>.find(&amp;<a class="local col4 ref" href="#654hlo" title='hlo' data-ref="654hlo">hlo</a>);</td></tr>
<tr><th id="2581">2581</th><td>  <b>if</b> (<a class="local col6 ref" href="#656it" title='it' data-ref="656it">it</a> == <a class="local col5 ref" href="#655profile_index_map" title='profile_index_map' data-ref="655profile_index_map">profile_index_map</a>.end()) {</td></tr>
<tr><th id="2582">2582</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2583">2583</th><td>  }</td></tr>
<tr><th id="2584">2584</th><td></td></tr>
<tr><th id="2585">2585</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col7 decl" id="657prof_counter_idx" title='prof_counter_idx' data-type='int64' data-ref="657prof_counter_idx">prof_counter_idx</dfn> = <a class="local col6 ref" href="#656it" title='it' data-ref="656it">it</a>-&gt;second;</td></tr>
<tr><th id="2586">2586</th><td>  <a class="typedef" href="../../../../../../include/c++/5/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <dfn class="local col8 decl" id="658counter_name" title='counter_name' data-type='string' data-ref="658counter_name">counter_name</dfn> = IrName(<q>"prof_counter"</q>, <a class="local col4 ref" href="#654hlo" title='hlo' data-ref="654hlo">hlo</a>.name());</td></tr>
<tr><th id="2587">2587</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_5ValueES2_RKNS_5TwineE">CreateGEP</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv" title='xla::cpu::IrEmitter::GetProfileCountersArgument' data-ref="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv">GetProfileCountersArgument</a>(),</td></tr>
<tr><th id="2588">2588</th><td>                               <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#657prof_counter_idx" title='prof_counter_idx' data-ref="657prof_counter_idx">prof_counter_idx</a>),</td></tr>
<tr><th id="2589">2589</th><td>                               <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="local col8 ref" href="#658counter_name" title='counter_name' data-ref="658counter_name">counter_name</a>));</td></tr>
<tr><th id="2590">2590</th><td>}</td></tr>
<tr><th id="2591">2591</th><td></td></tr>
<tr><th id="2592">2592</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_" title='xla::cpu::IrEmitter::ProfilingState::UpdateProfileCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_">UpdateProfileCounter</dfn>(</td></tr>
<tr><th id="2593">2593</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col9 decl" id="659ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="659ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="660prof_counter" title='prof_counter' data-type='llvm::Value *' data-ref="660prof_counter">prof_counter</dfn>,</td></tr>
<tr><th id="2594">2594</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="661cycle_end" title='cycle_end' data-type='llvm::Value *' data-ref="661cycle_end">cycle_end</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col2 decl" id="662cycle_start" title='cycle_start' data-type='llvm::Value *' data-ref="662cycle_start">cycle_start</dfn>) {</td></tr>
<tr><th id="2595">2595</th><td>  <em>auto</em>* <dfn class="local col3 decl" id="663cycle_diff" title='cycle_diff' data-type='llvm::Value *' data-ref="663cycle_diff">cycle_diff</dfn> = <a class="local col9 ref" href="#659ir_builder" title='ir_builder' data-ref="659ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateSub' data-ref="_ZN4llvm9IRBuilder9CreateSubEPNS_5ValueES2_RKNS_5TwineEbb">CreateSub</span>(<a class="local col1 ref" href="#661cycle_end" title='cycle_end' data-ref="661cycle_end">cycle_end</a>, <a class="local col2 ref" href="#662cycle_start" title='cycle_start' data-ref="662cycle_start">cycle_start</a>);</td></tr>
<tr><th id="2596">2596</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col4 decl" id="664old_cycle_count" title='old_cycle_count' data-type='llvm::LoadInst *' data-ref="664old_cycle_count">old_cycle_count</dfn> =</td></tr>
<tr><th id="2597">2597</th><td>      <a class="local col9 ref" href="#659ir_builder" title='ir_builder' data-ref="659ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueEPKc">CreateLoad</span>(<a class="local col0 ref" href="#660prof_counter" title='prof_counter' data-ref="660prof_counter">prof_counter</a>, <q>"old_cycle_count"</q>);</td></tr>
<tr><th id="2598">2598</th><td>  <em>auto</em>* <dfn class="local col5 decl" id="665new_cycle_count" title='new_cycle_count' data-type='llvm::Value *' data-ref="665new_cycle_count">new_cycle_count</dfn> =</td></tr>
<tr><th id="2599">2599</th><td>      <a class="local col9 ref" href="#659ir_builder" title='ir_builder' data-ref="659ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateAdd' data-ref="_ZN4llvm9IRBuilder9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb">CreateAdd</span>(<a class="local col3 ref" href="#663cycle_diff" title='cycle_diff' data-ref="663cycle_diff">cycle_diff</a>, <a class="local col4 ref" href="#664old_cycle_count" title='old_cycle_count' data-ref="664old_cycle_count">old_cycle_count</a>, <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></span><q>"new_cycle_count"</q>);</td></tr>
<tr><th id="2600">2600</th><td>  <a class="local col9 ref" href="#659ir_builder" title='ir_builder' data-ref="659ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col5 ref" href="#665new_cycle_count" title='new_cycle_count' data-ref="665new_cycle_count">new_cycle_count</a>, <a class="local col0 ref" href="#660prof_counter" title='prof_counter' data-ref="660prof_counter">prof_counter</a>);</td></tr>
<tr><th id="2601">2601</th><td>}</td></tr>
<tr><th id="2602">2602</th><td></td></tr>
<tr><th id="2603">2603</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE" title='xla::cpu::IrEmitter::ProfilingState::ReadCycleCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE">ReadCycleCounter</dfn>(</td></tr>
<tr><th id="2604">2604</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col6 decl" id="666ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="666ir_builder">ir_builder</dfn>) {</td></tr>
<tr><th id="2605">2605</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Module' data-ref="llvm::Module">Module</span>* <dfn class="local col7 decl" id="667module" title='module' data-type='llvm::Module *' data-ref="667module">module</dfn> = <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilderBase::GetInsertBlock' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertBlockEv">GetInsertBlock</span>()-&gt;<span class='ref' title='llvm::BasicBlock::getModule' data-ref="_ZN4llvm10BasicBlock9getModuleEv">getModule</span>();</td></tr>
<tr><th id="2606">2606</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::use_rdtscp_" title='xla::cpu::IrEmitter::ProfilingState::use_rdtscp_' data-ref="xla::cpu::IrEmitter::ProfilingState::use_rdtscp_">use_rdtscp_</a>) {</td></tr>
<tr><th id="2607">2607</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col8 decl" id="668func_llvm_readcyclecounter" title='func_llvm_readcyclecounter' data-type='llvm::Function *' data-ref="668func_llvm_readcyclecounter">func_llvm_readcyclecounter</dfn> =</td></tr>
<tr><th id="2608">2608</th><td>        <span class="namespace">llvm::Intrinsic::</span><span class='ref' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleENS0_2IDENS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="local col7 ref" href="#667module" title='module' data-ref="667module">module</a>,</td></tr>
<tr><th id="2609">2609</th><td>                                        <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::readcyclecounter' data-ref="llvm::Intrinsic::ID::readcyclecounter">readcyclecounter</span>);</td></tr>
<tr><th id="2610">2610</th><td>    <b>return</b> <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_5ValueENS_8ArrayRefIS2_EERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col8 ref" href="#668func_llvm_readcyclecounter" title='func_llvm_readcyclecounter' data-ref="668func_llvm_readcyclecounter">func_llvm_readcyclecounter</a>);</td></tr>
<tr><th id="2611">2611</th><td>  }</td></tr>
<tr><th id="2612">2612</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col9 decl" id="669func_llvm_x86_rdtscp" title='func_llvm_x86_rdtscp' data-type='llvm::Function *' data-ref="669func_llvm_x86_rdtscp">func_llvm_x86_rdtscp</dfn> =</td></tr>
<tr><th id="2613">2613</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='ref' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleENS0_2IDENS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="local col7 ref" href="#667module" title='module' data-ref="667module">module</a>, <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::x86_rdtscp' data-ref="llvm::Intrinsic::ID::x86_rdtscp">x86_rdtscp</span>);</td></tr>
<tr><th id="2614">2614</th><td>  <b>if</b> (!<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_" title='xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_' data-ref="xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_">aux_i8ptr_</a>) {</td></tr>
<tr><th id="2615">2615</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</span>* <dfn class="local col0 decl" id="670rdtscp_aux" title='rdtscp_aux' data-type='llvm::AllocaInst *' data-ref="670rdtscp_aux">rdtscp_aux</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="2616">2616</th><td>        <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilderBase::getInt32Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt32TyEv">getInt32Ty</span>(), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"rdtscp_aux"</q>, <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>);</td></tr>
<tr><th id="2617">2617</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_" title='xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_' data-ref="xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_">aux_i8ptr_</a> =</td></tr>
<tr><th id="2618">2618</th><td>        <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col0 ref" href="#670rdtscp_aux" title='rdtscp_aux' data-ref="670rdtscp_aux">rdtscp_aux</a>, <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilderBase::getInt8PtrTy' data-ref="_ZN4llvm13IRBuilderBase12getInt8PtrTyEj">getInt8PtrTy</span>());</td></tr>
<tr><th id="2619">2619</th><td>  }</td></tr>
<tr><th id="2620">2620</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>* <dfn class="local col1 decl" id="671alloca_size" title='alloca_size' data-type='llvm::ConstantInt *' data-ref="671alloca_size">alloca_size</dfn> = <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<var>4</var>);</td></tr>
<tr><th id="2621">2621</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="672func_llvm_lifetime_start" title='func_llvm_lifetime_start' data-type='llvm::Function *' data-ref="672func_llvm_lifetime_start">func_llvm_lifetime_start</dfn> =</td></tr>
<tr><th id="2622">2622</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='ref' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleENS0_2IDENS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="local col7 ref" href="#667module" title='module' data-ref="667module">module</a>, <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::lifetime_start' data-ref="llvm::Intrinsic::ID::lifetime_start">lifetime_start</span>);</td></tr>
<tr><th id="2623">2623</th><td>  <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col2 ref" href="#672func_llvm_lifetime_start" title='func_llvm_lifetime_start' data-ref="672func_llvm_lifetime_start">func_llvm_lifetime_start</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col1 ref" href="#671alloca_size" title='alloca_size' data-ref="671alloca_size">alloca_size</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_" title='xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_' data-ref="xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_">aux_i8ptr_</a>});</td></tr>
<tr><th id="2624">2624</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="673rdtscp_call" title='rdtscp_call' data-type='llvm::Value *' data-ref="673rdtscp_call">rdtscp_call</dfn> =</td></tr>
<tr><th id="2625">2625</th><td>      <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col9 ref" href="#669func_llvm_x86_rdtscp" title='func_llvm_x86_rdtscp' data-ref="669func_llvm_x86_rdtscp">func_llvm_x86_rdtscp</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></span><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_" title='xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_' data-ref="xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_">aux_i8ptr_</a>);</td></tr>
<tr><th id="2626">2626</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col4 decl" id="674func_llvm_lifetime_end" title='func_llvm_lifetime_end' data-type='llvm::Function *' data-ref="674func_llvm_lifetime_end">func_llvm_lifetime_end</dfn> =</td></tr>
<tr><th id="2627">2627</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='ref' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleENS0_2IDENS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="local col7 ref" href="#667module" title='module' data-ref="667module">module</a>, <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::ID::lifetime_end' data-ref="llvm::Intrinsic::ID::lifetime_end">lifetime_end</span>);</td></tr>
<tr><th id="2628">2628</th><td>  <a class="local col6 ref" href="#666ir_builder" title='ir_builder' data-ref="666ir_builder">ir_builder</a>-&gt;<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<a class="local col4 ref" href="#674func_llvm_lifetime_end" title='func_llvm_lifetime_end' data-ref="674func_llvm_lifetime_end">func_llvm_lifetime_end</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<a class="local col1 ref" href="#671alloca_size" title='alloca_size' data-ref="671alloca_size">alloca_size</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_" title='xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_' data-ref="xla::cpu::IrEmitter::ProfilingState::aux_i8ptr_">aux_i8ptr_</a>});</td></tr>
<tr><th id="2629">2629</th><td>  <b>return</b> <a class="local col3 ref" href="#673rdtscp_call" title='rdtscp_call' data-ref="673rdtscp_call">rdtscp_call</a>;</td></tr>
<tr><th id="2630">2630</th><td>}</td></tr>
<tr><th id="2631">2631</th><td></td></tr>
<tr><th id="2632">2632</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleStartEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::ProfilingState::RecordCycleStart' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleStartEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionE">RecordCycleStart</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col5 decl" id="675ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="675ir_builder">ir_builder</dfn>,</td></tr>
<tr><th id="2633">2633</th><td>                                                 <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col6 decl" id="676hlo" title='hlo' data-type='xla::HloInstruction *' data-ref="676hlo">hlo</dfn>) {</td></tr>
<tr><th id="2634">2634</th><td>  <em>auto</em>* <dfn class="local col7 decl" id="677cycle_start" title='cycle_start' data-type='llvm::Value *' data-ref="677cycle_start">cycle_start</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE" title='xla::cpu::IrEmitter::ProfilingState::ReadCycleCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE">ReadCycleCounter</a>(<a class="local col5 ref" href="#675ir_builder" title='ir_builder' data-ref="675ir_builder">ir_builder</a>);</td></tr>
<tr><th id="2635">2635</th><td>  <a class="local col7 ref" href="#677cycle_start" title='cycle_start' data-ref="677cycle_start">cycle_start</a>-&gt;<span class='ref' title='llvm::Value::setName' data-ref="_ZN4llvm5Value7setNameERKNS_5TwineE">setName</span>(<span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col6 ref" href="#676hlo" title='hlo' data-ref="676hlo">hlo</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"cycle_start"</q>)));</td></tr>
<tr><th id="2636">2636</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::cycle_starts_" title='xla::cpu::IrEmitter::ProfilingState::cycle_starts_' data-ref="xla::cpu::IrEmitter::ProfilingState::cycle_starts_">cycle_starts_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col6 ref" href="#676hlo" title='hlo' data-ref="676hlo">hlo</a>]</a> = <a class="local col7 ref" href="#677cycle_start" title='cycle_start' data-ref="677cycle_start">cycle_start</a>;</td></tr>
<tr><th id="2637">2637</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_" title='xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_' data-ref="xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_">first_read_cycle_start_</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="2638">2638</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_" title='xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_' data-ref="xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_">first_read_cycle_start_</a> = <a class="local col7 ref" href="#677cycle_start" title='cycle_start' data-ref="677cycle_start">cycle_start</a>;</td></tr>
<tr><th id="2639">2639</th><td>  }</td></tr>
<tr><th id="2640">2640</th><td>}</td></tr>
<tr><th id="2641">2641</th><td></td></tr>
<tr><th id="2642">2642</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleDeltaEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionEPNS3_5ValueE" title='xla::cpu::IrEmitter::ProfilingState::RecordCycleDelta' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleDeltaEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionEPNS3_5ValueE">RecordCycleDelta</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col8 decl" id="678ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="678ir_builder">ir_builder</dfn>,</td></tr>
<tr><th id="2643">2643</th><td>                                                 <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col9 decl" id="679hlo" title='hlo' data-type='xla::HloInstruction *' data-ref="679hlo">hlo</dfn>,</td></tr>
<tr><th id="2644">2644</th><td>                                                 <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col0 decl" id="680prof_counter" title='prof_counter' data-type='llvm::Value *' data-ref="680prof_counter">prof_counter</dfn>) {</td></tr>
<tr><th id="2645">2645</th><td>  <em>auto</em>* <dfn class="local col1 decl" id="681cycle_end" title='cycle_end' data-type='llvm::Value *' data-ref="681cycle_end">cycle_end</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE" title='xla::cpu::IrEmitter::ProfilingState::ReadCycleCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16ReadCycleCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEE">ReadCycleCounter</a>(<a class="local col8 ref" href="#678ir_builder" title='ir_builder' data-ref="678ir_builder">ir_builder</a>);</td></tr>
<tr><th id="2646">2646</th><td>  <a class="local col1 ref" href="#681cycle_end" title='cycle_end' data-ref="681cycle_end">cycle_end</a>-&gt;<span class='ref' title='llvm::Value::setName' data-ref="_ZN4llvm5Value7setNameERKNS_5TwineE">setName</span>(<span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col9 ref" href="#679hlo" title='hlo' data-ref="679hlo">hlo</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"cycle_end"</q>)));</td></tr>
<tr><th id="2647">2647</th><td>  <em>auto</em>* <dfn class="local col2 decl" id="682cycle_start" title='cycle_start' data-type='llvm::Value *' data-ref="682cycle_start">cycle_start</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::cycle_starts_" title='xla::cpu::IrEmitter::ProfilingState::cycle_starts_' data-ref="xla::cpu::IrEmitter::ProfilingState::cycle_starts_">cycle_starts_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col9 ref" href="#679hlo" title='hlo' data-ref="679hlo">hlo</a>]</a>;</td></tr>
<tr><th id="2648">2648</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_" title='xla::cpu::IrEmitter::ProfilingState::UpdateProfileCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_">UpdateProfileCounter</a>(<a class="local col8 ref" href="#678ir_builder" title='ir_builder' data-ref="678ir_builder">ir_builder</a>, <a class="local col0 ref" href="#680prof_counter" title='prof_counter' data-ref="680prof_counter">prof_counter</a>, <a class="local col1 ref" href="#681cycle_end" title='cycle_end' data-ref="681cycle_end">cycle_end</a>, <a class="local col2 ref" href="#682cycle_start" title='cycle_start' data-ref="682cycle_start">cycle_start</a>);</td></tr>
<tr><th id="2649">2649</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_" title='xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_' data-ref="xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_">last_read_cycle_end_</a> = <a class="local col1 ref" href="#681cycle_end" title='cycle_end' data-ref="681cycle_end">cycle_end</a>;</td></tr>
<tr><th id="2650">2650</th><td>}</td></tr>
<tr><th id="2651">2651</th><td></td></tr>
<tr><th id="2652">2652</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState" title='xla::cpu::IrEmitter::ProfilingState' data-ref="xla::cpu::IrEmitter::ProfilingState">ProfilingState</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14ProfilingState25RecordCompleteComputationEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueE" title='xla::cpu::IrEmitter::ProfilingState::RecordCompleteComputation' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState25RecordCompleteComputationEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueE">RecordCompleteComputation</dfn>(</td></tr>
<tr><th id="2653">2653</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</span>&lt;&gt;* <dfn class="local col3 decl" id="683ir_builder" title='ir_builder' data-type='llvm::IRBuilder&lt;&gt; *' data-ref="683ir_builder">ir_builder</dfn>, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="684prof_counter" title='prof_counter' data-type='llvm::Value *' data-ref="684prof_counter">prof_counter</dfn>) {</td></tr>
<tr><th id="2654">2654</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_" title='xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_' data-ref="xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_">last_read_cycle_end_</a> &amp;&amp; <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_" title='xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_' data-ref="xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_">first_read_cycle_start_</a>) {</td></tr>
<tr><th id="2655">2655</th><td>    <a class="member" href="#_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_" title='xla::cpu::IrEmitter::ProfilingState::UpdateProfileCounter' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState20UpdateProfileCounterEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS3_5ValueESA_SA_">UpdateProfileCounter</a>(<a class="local col3 ref" href="#683ir_builder" title='ir_builder' data-ref="683ir_builder">ir_builder</a>, <a class="local col4 ref" href="#684prof_counter" title='prof_counter' data-ref="684prof_counter">prof_counter</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_" title='xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_' data-ref="xla::cpu::IrEmitter::ProfilingState::last_read_cycle_end_">last_read_cycle_end_</a>,</td></tr>
<tr><th id="2656">2656</th><td>                         <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_" title='xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_' data-ref="xla::cpu::IrEmitter::ProfilingState::first_read_cycle_start_">first_read_cycle_start_</a>);</td></tr>
<tr><th id="2657">2657</th><td>  }</td></tr>
<tr><th id="2658">2658</th><td>}</td></tr>
<tr><th id="2659">2659</th><td></td></tr>
<tr><th id="2660">2660</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter10PreprocessEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::Preprocess' data-ref="_ZN3xla3cpu9IrEmitter10PreprocessEPNS_14HloInstructionE">Preprocess</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="685hlo" title='hlo' data-type='xla::HloInstruction *' data-ref="685hlo">hlo</dfn>) {</td></tr>
<tr><th id="2661">2661</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((3) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2661, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>3</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"Visiting: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col5 ref" href="#685hlo" title='hlo' data-ref="685hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2662">2662</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::instruction_to_profile_idx_" title='xla::cpu::IrEmitter::instruction_to_profile_idx_' data-ref="xla::cpu::IrEmitter::instruction_to_profile_idx_">instruction_to_profile_idx_</a>.<a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNKSt13unordered_map5countERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashE1001767" title='std::unordered_map::count' data-ref="_ZNKSt13unordered_map5countERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashE1001767">count</a>(<a class="local col5 ref" href="#685hlo" title='hlo' data-ref="685hlo">hlo</a>)) {</td></tr>
<tr><th id="2663">2663</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::profiling_state_" title='xla::cpu::IrEmitter::profiling_state_' data-ref="xla::cpu::IrEmitter::profiling_state_">profiling_state_</a>.<a class="ref" href="#_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleStartEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::ProfilingState::RecordCycleStart' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleStartEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionE">RecordCycleStart</a>(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="local col5 ref" href="#685hlo" title='hlo' data-ref="685hlo">hlo</a>);</td></tr>
<tr><th id="2664">2664</th><td>  }</td></tr>
<tr><th id="2665">2665</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2666">2666</th><td>}</td></tr>
<tr><th id="2667">2667</th><td></td></tr>
<tr><th id="2668">2668</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter11PostprocessEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::Postprocess' data-ref="_ZN3xla3cpu9IrEmitter11PostprocessEPNS_14HloInstructionE">Postprocess</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col6 decl" id="686hlo" title='hlo' data-type='xla::HloInstruction *' data-ref="686hlo">hlo</dfn>) {</td></tr>
<tr><th id="2669">2669</th><td>  <b>if</b> (<em>auto</em>* <dfn class="local col7 decl" id="687prof_counter" title='prof_counter' data-type='llvm::Value *' data-ref="687prof_counter"><a class="local col7 ref" href="#687prof_counter" title='prof_counter' data-ref="687prof_counter">prof_counter</a></dfn> = <a class="member" href="ir_emitter.h.html#_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetProfileCounterFor' data-ref="_ZN3xla3cpu9IrEmitter20GetProfileCounterForERKNS_14HloInstructionE">GetProfileCounterFor</a>(*<a class="local col6 ref" href="#686hlo" title='hlo' data-ref="686hlo">hlo</a>)) {</td></tr>
<tr><th id="2670">2670</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::profiling_state_" title='xla::cpu::IrEmitter::profiling_state_' data-ref="xla::cpu::IrEmitter::profiling_state_">profiling_state_</a>.<a class="ref" href="#_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleDeltaEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionEPNS3_5ValueE" title='xla::cpu::IrEmitter::ProfilingState::RecordCycleDelta' data-ref="_ZN3xla3cpu9IrEmitter14ProfilingState16RecordCycleDeltaEPN4llvm9IRBuilderINS3_14ConstantFolderENS3_24IRBuilderDefaultInserterEEEPNS_14HloInstructionEPNS3_5ValueE">RecordCycleDelta</a>(&amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="local col6 ref" href="#686hlo" title='hlo' data-ref="686hlo">hlo</a>, <a class="local col7 ref" href="#687prof_counter" title='prof_counter' data-ref="687prof_counter">prof_counter</a>);</td></tr>
<tr><th id="2671">2671</th><td>  }</td></tr>
<tr><th id="2672">2672</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2673">2673</th><td>}</td></tr>
<tr><th id="2674">2674</th><td></td></tr>
<tr><th id="2675">2675</th><td><span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col8 decl" id="688hlo" title='hlo' data-type='const xla::HloInstruction *' data-ref="688hlo">hlo</dfn>) {</td></tr>
<tr><th id="2676">2676</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col9 decl" id="689value_for_op" title='value_for_op' data-type='llvm::Value *' data-ref="689value_for_op">value_for_op</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(<a class="local col8 ref" href="#688hlo" title='hlo' data-ref="688hlo">hlo</a>);</td></tr>
<tr><th id="2677">2677</th><td></td></tr>
<tr><th id="2678">2678</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col0 decl" id="690array" title='array' data-type='llvm_ir::IrArray' data-ref="690array">array</dfn><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EPN4llvm5ValueERKNS_5ShapeE" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EPN4llvm5ValueERKNS_5ShapeE">(</a><a class="local col9 ref" href="#689value_for_op" title='value_for_op' data-ref="689value_for_op">value_for_op</a>, <a class="local col8 ref" href="#688hlo" title='hlo' data-ref="688hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2679">2679</th><td>  <a class="member" href="ir_emitter.h.html#_ZN3xla3cpu9IrEmitter31AddAliasingInformationToIrArrayERKNS_14HloInstructionEPNS_7llvm_ir7IrArrayE" title='xla::cpu::IrEmitter::AddAliasingInformationToIrArray' data-ref="_ZN3xla3cpu9IrEmitter31AddAliasingInformationToIrArrayERKNS_14HloInstructionEPNS_7llvm_ir7IrArrayE">AddAliasingInformationToIrArray</a>(*<a class="local col8 ref" href="#688hlo" title='hlo' data-ref="688hlo">hlo</a>, &amp;<a class="local col0 ref" href="#690array" title='array' data-ref="690array">array</a>);</td></tr>
<tr><th id="2680">2680</th><td>  <b>return</b> <a class="local col0 ref" href="#690array" title='array' data-ref="690array">array</a>;</td></tr>
<tr><th id="2681">2681</th><td>}</td></tr>
<tr><th id="2682">2682</th><td></td></tr>
<tr><th id="2683">2683</th><td><span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&gt; <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArraysForOperandsOf' data-ref="_ZN3xla3cpu9IrEmitter24GetIrArraysForOperandsOfEPKNS_14HloInstructionE">GetIrArraysForOperandsOf</dfn>(</td></tr>
<tr><th id="2684">2684</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col1 decl" id="691hlo" title='hlo' data-type='const xla::HloInstruction *' data-ref="691hlo">hlo</dfn>) {</td></tr>
<tr><th id="2685">2685</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col2 decl" id="692arrays" title='arrays' data-type='std::vector&lt;llvm_ir::IrArray&gt;' data-ref="692arrays">arrays</dfn>;</td></tr>
<tr><th id="2686">2686</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt9transformT_S_T0_T1_" title='std::transform' data-ref="_ZSt9transformT_S_T0_T1_">transform</a>(</td></tr>
<tr><th id="2687">2687</th><td>      <a class="local col1 ref" href="#691hlo" title='hlo' data-ref="691hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>().<a class="ref" href="../../../../core/lib/gtl/inlined_vector.h.html#_ZNK10tensorflow3gtl13InlinedVector5beginEv" title='tensorflow::gtl::InlinedVector::begin' data-ref="_ZNK10tensorflow3gtl13InlinedVector5beginEv">begin</a>(), <a class="local col1 ref" href="#691hlo" title='hlo' data-ref="691hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>().<a class="ref" href="../../../../core/lib/gtl/inlined_vector.h.html#_ZNK10tensorflow3gtl13InlinedVector3endEv" title='tensorflow::gtl::InlinedVector::end' data-ref="_ZNK10tensorflow3gtl13InlinedVector3endEv">end</a>(),</td></tr>
<tr><th id="2688">2688</th><td>      <span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_iterator.h.html#_ZSt13back_inserterRT_" title='std::back_inserter' data-ref="_ZSt13back_inserterRT_">back_inserter</a>(<span class='refarg'><a class="local col2 ref" href="#692arrays" title='arrays' data-ref="692arrays">arrays</a></span>),</td></tr>
<tr><th id="2689">2689</th><td>      [&amp;](<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col3 decl" id="693operand" title='operand' data-type='const xla::HloInstruction *' data-ref="693operand">operand</dfn>) { <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col3 ref" href="#693operand" title='operand' data-ref="693operand">operand</a>); });</td></tr>
<tr><th id="2690">2690</th><td>  <b>return</b> <a class="local col2 ref" href="#692arrays" title='arrays' data-ref="692arrays">arrays</a>;</td></tr>
<tr><th id="2691">2691</th><td>}</td></tr>
<tr><th id="2692">2692</th><td></td></tr>
<tr><th id="2693">2693</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="694hlo" title='hlo' data-type='const xla::HloInstruction *' data-ref="694hlo">hlo</dfn>) {</td></tr>
<tr><th id="2694">2694</th><td>  <em>auto</em> <dfn class="local col5 decl" id="695it" title='it' data-type='std::__detail::_Node_iterator&lt;std::pair&lt;const xla::HloInstruction *const, llvm::Value *&gt;, false, false&gt;' data-ref="695it">it</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a>.<a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_map4findERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS12423071" title='std::unordered_map::find' data-ref="_ZNSt13unordered_map4findERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS12423071">find</a>(<a class="local col4 ref" href="#694hlo" title='hlo' data-ref="694hlo">hlo</a>);</td></tr>
<tr><th id="2695">2695</th><td>  <b>if</b> (<a class="local col5 ref" href="#695it" title='it' data-ref="695it">it</a> <a class="ref" href="../../../../../../include/c++/5/bits/hashtable_policy.h.html#_ZNSt8__detaileqERKNS_19_Node_iterator_baseIT_XT0_EEES4_" title='std::__detail::operator==' data-ref="_ZNSt8__detaileqERKNS_19_Node_iterator_baseIT_XT0_EEES4_">==</a> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a>.<a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_map3endEv" title='std::unordered_map::end' data-ref="_ZNSt13unordered_map3endEv">end</a>()) {</td></tr>
<tr><th id="2696">2696</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#77" title="::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2696)" data-ref="_M/LOG">LOG</a>(FATAL) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"could not find emitted value for: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col4 ref" href="#694hlo" title='hlo' data-ref="694hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2697">2697</th><td>  }</td></tr>
<tr><th id="2698">2698</th><td>  <b>return</b> <a class="local col5 ref" href="#695it" title='it' data-ref="695it">it</a><a class="ref" href="../../../../../../include/c++/5/bits/hashtable_policy.h.html#_ZNKSt8__detail14_Node_iteratorptEv" title='std::__detail::_Node_iterator::operator-&gt;' data-ref="_ZNKSt8__detail14_Node_iteratorptEv">-&gt;</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;const xla::HloInstruction *const, llvm::Value *&gt;::second' data-ref="std::pair::second">second</a>;</td></tr>
<tr><th id="2699">2699</th><td>}</td></tr>
<tr><th id="2700">2700</th><td></td></tr>
<tr><th id="2701">2701</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</dfn>(<em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col6 decl" id="696shape" title='shape' data-type='const xla::Shape &amp;' data-ref="696shape">shape</dfn>) {</td></tr>
<tr><th id="2702">2702</th><td>  <b>return</b> <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir13ShapeToIrTypeERKNS_5ShapeEPN4llvm6ModuleE" title='xla::llvm_ir::ShapeToIrType' data-ref="_ZN3xla7llvm_ir13ShapeToIrTypeERKNS_5ShapeEPN4llvm6ModuleE">ShapeToIrType</a>(<a class="local col6 ref" href="#696shape" title='shape' data-ref="696shape">shape</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="2703">2703</th><td>}</td></tr>
<tr><th id="2704">2704</th><td></td></tr>
<tr><th id="2705">2705</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv" title='xla::cpu::IrEmitter::GetProfileCountersArgument' data-ref="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv">GetProfileCountersArgument</dfn>() {</td></tr>
<tr><th id="2706">2706</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction20profile_counters_argEv" title='xla::cpu::IrFunction::profile_counters_arg' data-ref="_ZN3xla3cpu10IrFunction20profile_counters_argEv">profile_counters_arg</a>();</td></tr>
<tr><th id="2707">2707</th><td>}</td></tr>
<tr><th id="2708">2708</th><td></td></tr>
<tr><th id="2709">2709</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv" title='xla::cpu::IrEmitter::GetTempBuffersArgument' data-ref="_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv">GetTempBuffersArgument</dfn>() {</td></tr>
<tr><th id="2710">2710</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction16temp_buffers_argEv" title='xla::cpu::IrFunction::temp_buffers_arg' data-ref="_ZN3xla3cpu10IrFunction16temp_buffers_argEv">temp_buffers_arg</a>();</td></tr>
<tr><th id="2711">2711</th><td>}</td></tr>
<tr><th id="2712">2712</th><td></td></tr>
<tr><th id="2713">2713</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</dfn>() {</td></tr>
<tr><th id="2714">2714</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction20exec_run_options_argEv" title='xla::cpu::IrFunction::exec_run_options_arg' data-ref="_ZN3xla3cpu10IrFunction20exec_run_options_argEv">exec_run_options_arg</a>();</td></tr>
<tr><th id="2715">2715</th><td>}</td></tr>
<tr><th id="2716">2716</th><td></td></tr>
<tr><th id="2717">2717</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE" title='xla::cpu::IrEmitter::EmitTempBufferPointer' data-ref="_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE">EmitTempBufferPointer</dfn>(</td></tr>
<tr><th id="2718">2718</th><td>    <em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a>&amp; <dfn class="local col7 decl" id="697slice" title='slice' data-type='const BufferAllocation::Slice &amp;' data-ref="697slice">slice</dfn>, <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col8 decl" id="698target_shape" title='target_shape' data-type='const xla::Shape &amp;' data-ref="698target_shape">target_shape</dfn>) {</td></tr>
<tr><th id="2719">2719</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type">Type</span>* <dfn class="local col9 decl" id="699element_type" title='element_type' data-type='llvm::Type *' data-ref="699element_type">element_type</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col8 ref" href="#698target_shape" title='target_shape' data-ref="698target_shape">target_shape</a>);</td></tr>
<tr><th id="2720">2720</th><td>  <i>// The alignment and number of bytes within the temporary buffer is determined</i></td></tr>
<tr><th id="2721">2721</th><td><i>  // by the maximal shape as determined by buffer assignment.</i></td></tr>
<tr><th id="2722">2722</th><td>  <em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>&amp; <dfn class="local col0 decl" id="700allocation" title='allocation' data-type='const xla::BufferAllocation &amp;' data-ref="700allocation">allocation</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment13GetAllocationEx" title='xla::BufferAssignment::GetAllocation' data-ref="_ZNK3xla16BufferAssignment13GetAllocationEx">GetAllocation</a>(<a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice5indexEv" title='xla::BufferAllocation::Slice::index' data-ref="_ZNK3xla16BufferAllocation5Slice5indexEv">index</a>());</td></tr>
<tr><th id="2723">2723</th><td>  <b>if</b> (<a class="local col0 ref" href="#700allocation" title='allocation' data-ref="700allocation">allocation</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation15is_thread_localEv" title='xla::BufferAllocation::is_thread_local' data-ref="_ZNK3xla16BufferAllocation15is_thread_localEv">is_thread_local</a>()) {</td></tr>
<tr><th id="2724">2724</th><td>    <i>// Thread-local allocations should only be assigned a single buffer.</i></td></tr>
<tr><th id="2725">2725</th><td>    <em>const</em> <em>auto</em>&amp; <dfn class="local col1 decl" id="701assigned_buffers" title='assigned_buffers' data-type='const tensorflow::gtl::FlatMap&lt;const xla::LogicalBuffer *, xla::BufferAllocation::OffsetSize, tensorflow::hash&lt;const xla::LogicalBuffer *&gt;, std::equal_to&lt;const xla::LogicalBuffer *&gt; &gt; &amp;' data-ref="701assigned_buffers">assigned_buffers</dfn> = <a class="local col0 ref" href="#700allocation" title='allocation' data-ref="700allocation">allocation</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation16assigned_buffersEv" title='xla::BufferAllocation::assigned_buffers' data-ref="_ZNK3xla16BufferAllocation16assigned_buffersEv">assigned_buffers</a>();</td></tr>
<tr><th id="2726">2726</th><td>    <a class="macro" href="../../../../core/platform/default/logging.h.html#251" title="while (::tensorflow::internal::CheckOpString _result = ::tensorflow::internal::Check_EQImpl( ::tensorflow::internal::GetReferenceableValue(1), ::tensorflow::internal::GetReferenceableValue(assigned_buffers.size()), &quot;1&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;assigned_buffers.size()&quot;)) ::tensorflow::internal::LogMessageFatal(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2726) &lt;&lt; *(_result.str_)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>1</var>, <a class="local col1 ref" href="#701assigned_buffers" title='assigned_buffers' data-ref="701assigned_buffers">assigned_buffers</a>.<a class="ref" href="../../../../core/lib/gtl/flatmap.h.html#_ZNK10tensorflow3gtl7FlatMap4sizeEv" title='tensorflow::gtl::FlatMap::size' data-ref="_ZNK10tensorflow3gtl7FlatMap4sizeEv">size</a>());</td></tr>
<tr><th id="2727">2727</th><td>    <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col2 decl" id="702shape" title='shape' data-type='const xla::Shape &amp;' data-ref="702shape">shape</dfn> = <a class="local col1 ref" href="#701assigned_buffers" title='assigned_buffers' data-ref="701assigned_buffers">assigned_buffers</a>.<a class="ref" href="../../../../core/lib/gtl/flatmap.h.html#_ZNK10tensorflow3gtl7FlatMap5beginEv" title='tensorflow::gtl::FlatMap::begin' data-ref="_ZNK10tensorflow3gtl7FlatMap5beginEv">begin</a>()<a class="ref" href="../../../../core/lib/gtl/flatmap.h.html#_ZNK10tensorflow3gtl7FlatMap14const_iteratorptEv" title='tensorflow::gtl::FlatMap::const_iterator::operator-&gt;' data-ref="_ZNK10tensorflow3gtl7FlatMap14const_iteratorptEv">-&gt;</a><a class="ref" href="../../../../core/lib/gtl/flatmap.h.html#tensorflow::gtl::FlatMap::ValueType::first" title='tensorflow::gtl::FlatMap&lt;const xla::LogicalBuffer *, xla::BufferAllocation::OffsetSize, tensorflow::hash&lt;const xla::LogicalBuffer *&gt;, std::equal_to&lt;const xla::LogicalBuffer *&gt; &gt;::ValueType::first' data-ref="tensorflow::gtl::FlatMap::ValueType::first">first</a>-&gt;<a class="ref" href="../logical_buffer.h.html#_ZNK3xla13LogicalBuffer5shapeEv" title='xla::LogicalBuffer::shape' data-ref="_ZNK3xla13LogicalBuffer5shapeEv">shape</a>();</td></tr>
<tr><th id="2728">2728</th><td></td></tr>
<tr><th id="2729">2729</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</span>*&amp; <dfn class="local col3 decl" id="703tempbuf_address" title='tempbuf_address' data-type='llvm::AllocaInst *&amp;' data-ref="703tempbuf_address">tempbuf_address</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::thread_local_buffers_" title='xla::cpu::IrEmitter::thread_local_buffers_' data-ref="xla::cpu::IrEmitter::thread_local_buffers_">thread_local_buffers_</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_map.h.html#_ZNSt3mapixEOT_" title='std::map::operator[]' data-ref="_ZNSt3mapixEOT_">[<a class="ref" href="../../../../../../include/c++/5/bits/stl_pair.h.html#_ZNSt4pairC1EOT_RKT0_" title='std::pair::pair&lt;_T1, _T2&gt;' data-ref="_ZNSt4pairC1EOT_RKT0_">{</a></a></td></tr>
<tr><th id="2730">2730</th><td><a class="ref" href="../../../../../../include/c++/5/bits/stl_map.h.html#_ZNSt3mapixEOT_" title='std::map::operator[]' data-ref="_ZNSt3mapixEOT_">        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::GetInsertBlock' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertBlockEv">GetInsertBlock</span>()-&gt;<span class='ref' title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</span>(), <a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>}]</a>;</td></tr>
<tr><th id="2731">2731</th><td>    <b>if</b> (<a class="local col3 ref" href="#703tempbuf_address" title='tempbuf_address' data-ref="703tempbuf_address">tempbuf_address</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="2732">2732</th><td>      <a class="local col3 ref" href="#703tempbuf_address" title='tempbuf_address' data-ref="703tempbuf_address">tempbuf_address</a> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="2733">2733</th><td>          <a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col2 ref" href="#702shape" title='shape' data-ref="702shape">shape</a>),</td></tr>
<tr><th id="2734">2734</th><td>          <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_" title='tensorflow::strings::StrCat' data-ref="_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_">StrCat</a>(<a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1EPKc" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1EPKc"></a><q>"thread_local"</q>, <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1ERKSs" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1ERKSs"></a><a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice8ToStringEv" title='xla::BufferAllocation::Slice::ToString' data-ref="_ZNK3xla16BufferAllocation5Slice8ToStringEv">ToString</a>()),</td></tr>
<tr><th id="2735">2735</th><td>          &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col8 ref" href="#698target_shape" title='target_shape' data-ref="698target_shape">target_shape</a>));</td></tr>
<tr><th id="2736">2736</th><td>    }</td></tr>
<tr><th id="2737">2737</th><td>    <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col3 ref" href="#703tempbuf_address" title='tempbuf_address' data-ref="703tempbuf_address">tempbuf_address</a>,</td></tr>
<tr><th id="2738">2738</th><td>                                     <a class="local col9 ref" href="#699element_type" title='element_type' data-ref="699element_type">element_type</a>-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>());</td></tr>
<tr><th id="2739">2739</th><td>  }</td></tr>
<tr><th id="2740">2740</th><td></td></tr>
<tr><th id="2741">2741</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="704tempbuf_address_ptr" title='tempbuf_address_ptr' data-type='llvm::Value *' data-ref="704tempbuf_address_ptr">tempbuf_address_ptr</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21EmitBufferIndexingGEPEPN4llvm5ValueExPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE" title='xla::llvm_ir::EmitBufferIndexingGEP' data-ref="_ZN3xla7llvm_ir21EmitBufferIndexingGEPEPN4llvm5ValueExPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEE">EmitBufferIndexingGEP</a>(</td></tr>
<tr><th id="2742">2742</th><td>      <a class="member" href="#_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv" title='xla::cpu::IrEmitter::GetTempBuffersArgument' data-ref="_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv">GetTempBuffersArgument</a>(), <a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice5indexEv" title='xla::BufferAllocation::Slice::index' data-ref="_ZNK3xla16BufferAllocation5Slice5indexEv">index</a>(), &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2743">2743</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</span>* <dfn class="local col5 decl" id="705tempbuf_address_base" title='tempbuf_address_base' data-type='llvm::LoadInst *' data-ref="705tempbuf_address_base">tempbuf_address_base</dfn> =</td></tr>
<tr><th id="2744">2744</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(<a class="local col4 ref" href="#704tempbuf_address_ptr" title='tempbuf_address_ptr' data-ref="704tempbuf_address_ptr">tempbuf_address_ptr</a>);</td></tr>
<tr><th id="2745">2745</th><td>  <b>if</b> (<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::is_top_level_computation_" title='xla::cpu::IrEmitter::is_top_level_computation_' data-ref="xla::cpu::IrEmitter::is_top_level_computation_">is_top_level_computation_</a> &amp;&amp;</td></tr>
<tr><th id="2746">2746</th><td>      <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>.<a class="ref" href="../hlo_module_config.h.html#_ZNK3xla15HloModuleConfig13debug_optionsEv" title='xla::HloModuleConfig::debug_options' data-ref="_ZNK3xla15HloModuleConfig13debug_optionsEv">debug_options</a>()</td></tr>
<tr><th id="2747">2747</th><td>          .<span class='ref' title='xla::DebugOptions::xla_llvm_enable_invariant_load_metadata' data-ref="_ZNK3xla12DebugOptions39xla_llvm_enable_invariant_load_metadataEv">xla_llvm_enable_invariant_load_metadata</span>()) {</td></tr>
<tr><th id="2748">2748</th><td>    <i>// In the entry computation the parameter slots in the %params argument are</i></td></tr>
<tr><th id="2749">2749</th><td><i>    // invariant through program execution.  In computations that are called</i></td></tr>
<tr><th id="2750">2750</th><td><i>    // from the entry computation (via kWhile, kCall and kConditional) the</i></td></tr>
<tr><th id="2751">2751</th><td><i>    // parameter slots are *not* invariant since they're written to by their</i></td></tr>
<tr><th id="2752">2752</th><td><i>    // callers.</i></td></tr>
<tr><th id="2753">2753</th><td>    <a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>-&gt;<span class='ref' title='llvm::Instruction::setMetadata' data-ref="_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE">setMetadata</span>(</td></tr>
<tr><th id="2754">2754</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</span>::<span class='enum' title='llvm::LLVMContext::MD_invariant_load' data-ref="llvm::LLVMContext::MD_invariant_load">MD_invariant_load</span>,</td></tr>
<tr><th id="2755">2755</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::MDNode' data-ref="llvm::MDNode">MDNode</span>::<span class='ref' title='llvm::MDNode::get' data-ref="_ZN4llvm6MDNode3getERNS_11LLVMContextENS_8ArrayRefIPNS_8MetadataEEE">get</span>(<span class='refarg'><a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>-&gt;<span class='ref' title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</span>()</span>, <i>/*MDs=*/</i><span class='ref' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1Ev">{</span>}));</td></tr>
<tr><th id="2756">2756</th><td>  }</td></tr>
<tr><th id="2757">2757</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstEx" title='xla::cpu::IrEmitter::AttachAlignmentMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter30AttachAlignmentMetadataForLoadEPN4llvm8LoadInstEx">AttachAlignmentMetadataForLoad</a>(<a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>, <a class="local col0 ref" href="#700allocation" title='allocation' data-ref="700allocation">allocation</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation4sizeEv" title='xla::BufferAllocation::size' data-ref="_ZNK3xla16BufferAllocation4sizeEv">size</a>());</td></tr>
<tr><th id="2758">2758</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx" title='xla::cpu::IrEmitter::AttachDereferenceableMetadataForLoad' data-ref="_ZN3xla3cpu9IrEmitter36AttachDereferenceableMetadataForLoadEPN4llvm8LoadInstEx">AttachDereferenceableMetadataForLoad</a>(<a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>, <a class="local col0 ref" href="#700allocation" title='allocation' data-ref="700allocation">allocation</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation4sizeEv" title='xla::BufferAllocation::size' data-ref="_ZNK3xla16BufferAllocation4sizeEv">size</a>());</td></tr>
<tr><th id="2759">2759</th><td></td></tr>
<tr><th id="2760">2760</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col6 decl" id="706tempbuf_address_untyped" title='tempbuf_address_untyped' data-type='llvm::Value *' data-ref="706tempbuf_address_untyped">tempbuf_address_untyped</dfn> = <a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>;</td></tr>
<tr><th id="2761">2761</th><td>  <b>if</b> (<a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice6offsetEv" title='xla::BufferAllocation::Slice::offset' data-ref="_ZNK3xla16BufferAllocation5Slice6offsetEv">offset</a>() &gt; <var>0</var>) {</td></tr>
<tr><th id="2762">2762</th><td>    <i>// Adjust the address to account for the slice offset.</i></td></tr>
<tr><th id="2763">2763</th><td>    <a class="local col6 ref" href="#706tempbuf_address_untyped" title='tempbuf_address_untyped' data-ref="706tempbuf_address_untyped">tempbuf_address_untyped</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_5ValueENS_8ArrayRefIS2_EERKNS_5TwineE">CreateInBoundsGEP</span>(</td></tr>
<tr><th id="2764">2764</th><td>        <a class="local col5 ref" href="#705tempbuf_address_base" title='tempbuf_address_base' data-ref="705tempbuf_address_base">tempbuf_address_base</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></span><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64' data-ref="_ZN4llvm13IRBuilderBase8getInt64Em">getInt64</span>(<a class="local col7 ref" href="#697slice" title='slice' data-ref="697slice">slice</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAllocation5Slice6offsetEv" title='xla::BufferAllocation::Slice::offset' data-ref="_ZNK3xla16BufferAllocation5Slice6offsetEv">offset</a>()));</td></tr>
<tr><th id="2765">2765</th><td>  }</td></tr>
<tr><th id="2766">2766</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col6 ref" href="#706tempbuf_address_untyped" title='tempbuf_address_untyped' data-ref="706tempbuf_address_untyped">tempbuf_address_untyped</a>,</td></tr>
<tr><th id="2767">2767</th><td>                                   <a class="local col9 ref" href="#699element_type" title='element_type' data-ref="699element_type">element_type</a>-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>());</td></tr>
<tr><th id="2768">2768</th><td>}</td></tr>
<tr><th id="2769">2769</th><td></td></tr>
<tr><th id="2770">2770</th><td><i>// Emits a function call returning a single array element.  Allocates space</i></td></tr>
<tr><th id="2771">2771</th><td><i>// for a single element_type value, and loads it after call.</i></td></tr>
<tr><th id="2772">2772</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</dfn>(</td></tr>
<tr><th id="2773">2773</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col7 decl" id="707function" title='function' data-type='llvm::Function *' data-ref="707function">function</dfn>, <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col8 decl" id="708return_shape" title='return_shape' data-type='const xla::Shape &amp;' data-ref="708return_shape">return_shape</dfn>,</td></tr>
<tr><th id="2774">2774</th><td>    <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col9 decl" id="709parameter_addresses" title='parameter_addresses' data-type='gtl::ArraySlice&lt;llvm::Value *&gt;' data-ref="709parameter_addresses">parameter_addresses</dfn>,</td></tr>
<tr><th id="2775">2775</th><td>    <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col0 decl" id="710name" title='name' data-type='tensorflow::StringPiece' data-ref="710name">name</dfn>) {</td></tr>
<tr><th id="2776">2776</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="711return_value_buffer" title='return_value_buffer' data-type='llvm::Value *' data-ref="711return_value_buffer">return_value_buffer</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitArrayFunctionCallEPN4llvm8FunctionERKNS_5ShapeExN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter21EmitArrayFunctionCallEPN4llvm8FunctionERKNS_5ShapeExN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitArrayFunctionCall</a>(</td></tr>
<tr><th id="2777">2777</th><td>      <a class="local col7 ref" href="#707function" title='function' data-ref="707function">function</a>, <a class="local col8 ref" href="#708return_shape" title='return_shape' data-ref="708return_shape">return_shape</a>, <var>1</var>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;llvm::Value *&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEC1ERKS5_"></a><a class="local col9 ref" href="#709parameter_addresses" title='parameter_addresses' data-ref="709parameter_addresses">parameter_addresses</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#38" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKS0_"></a><a class="local col0 ref" href="#710name" title='name' data-ref="710name">name</a>);</td></tr>
<tr><th id="2778">2778</th><td>  <b>return</b> <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_5ValueERKNS_5TwineE">CreateLoad</span>(</td></tr>
<tr><th id="2779">2779</th><td>      <a class="local col1 ref" href="#711return_value_buffer" title='return_value_buffer' data-ref="711return_value_buffer">return_value_buffer</a>,</td></tr>
<tr><th id="2780">2780</th><td>      <span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_" title='tensorflow::strings::StrCat' data-ref="_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_">StrCat</a>(<a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1ERKNS_11StringPieceE" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1ERKNS_11StringPieceE"></a><a class="local col0 ref" href="#710name" title='name' data-ref="710name">name</a>, <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1EPKc" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1EPKc"></a><q>"_return_value"</q>)));</td></tr>
<tr><th id="2781">2781</th><td>}</td></tr>
<tr><th id="2782">2782</th><td></td></tr>
<tr><th id="2783">2783</th><td><i>// Emits a core function call based on the following pseudo-code.</i></td></tr>
<tr><th id="2784">2784</th><td><i>//</i></td></tr>
<tr><th id="2785">2785</th><td><i>//   char** parameter_addresses_buffer =</i></td></tr>
<tr><th id="2786">2786</th><td><i>//       allocate buffer with a pointer for each parameter to the function</i></td></tr>
<tr><th id="2787">2787</th><td><i>//   for each parameter index, i.e. for i = 0, ..., #parameters:</i></td></tr>
<tr><th id="2788">2788</th><td><i>//     parameter_addresses_buffer[i] = parameter_addresses[i]</i></td></tr>
<tr><th id="2789">2789</th><td><i>//   call function(return_value_buffer,</i></td></tr>
<tr><th id="2790">2790</th><td><i>//                 parameter_addresses_buffer,</i></td></tr>
<tr><th id="2791">2791</th><td><i>//                 temps)</i></td></tr>
<tr><th id="2792">2792</th><td><i>//   return return_value_buffer  -- address of the return value.</i></td></tr>
<tr><th id="2793">2793</th><td><em>void</em> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</dfn>(</td></tr>
<tr><th id="2794">2794</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col2 decl" id="712function" title='function' data-type='llvm::Function *' data-ref="712function">function</dfn>, <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col3 decl" id="713parameter_addresses" title='parameter_addresses' data-type='gtl::ArraySlice&lt;llvm::Value *&gt;' data-ref="713parameter_addresses">parameter_addresses</dfn>,</td></tr>
<tr><th id="2795">2795</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col4 decl" id="714return_value_buffer" title='return_value_buffer' data-type='llvm::Value *' data-ref="714return_value_buffer">return_value_buffer</dfn>, <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col5 decl" id="715name" title='name' data-type='tensorflow::StringPiece' data-ref="715name">name</dfn>) {</td></tr>
<tr><th id="2796">2796</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallEPNS_8FunctionENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(</td></tr>
<tr><th id="2797">2797</th><td>      <a class="local col2 ref" href="#712function" title='function' data-ref="712function">function</a>, <span class='ref fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt6vectorIT_T_E"></span><a class="ref" href="ir_function.h.html#_ZN3xla3cpu29GetArrayFunctionCallArgumentsEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultIn4888316" title='xla::cpu::GetArrayFunctionCallArguments' data-ref="_ZN3xla3cpu29GetArrayFunctionCallArgumentsEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBuilderDefaultIn4888316">GetArrayFunctionCallArguments</a>(</td></tr>
<tr><th id="2798">2798</th><td>                    <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;llvm::Value *&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEC1ERKS5_"></a><a class="local col3 ref" href="#713parameter_addresses" title='parameter_addresses' data-ref="713parameter_addresses">parameter_addresses</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#38" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKS0_"></a><a class="local col5 ref" href="#715name" title='name' data-ref="715name">name</a>,</td></tr>
<tr><th id="2799">2799</th><td>                    <i>/*return_value_buffer=*/</i><a class="local col4 ref" href="#714return_value_buffer" title='return_value_buffer' data-ref="714return_value_buffer">return_value_buffer</a>,</td></tr>
<tr><th id="2800">2800</th><td>                    <i>/*exec_run_options_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv" title='xla::cpu::IrEmitter::GetExecutableRunOptionsArgument' data-ref="_ZN3xla3cpu9IrEmitter31GetExecutableRunOptionsArgumentEv">GetExecutableRunOptionsArgument</a>(),</td></tr>
<tr><th id="2801">2801</th><td>                    <i>/*temp_buffers_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv" title='xla::cpu::IrEmitter::GetTempBuffersArgument' data-ref="_ZN3xla3cpu9IrEmitter22GetTempBuffersArgumentEv">GetTempBuffersArgument</a>(),</td></tr>
<tr><th id="2802">2802</th><td>                    <i>/*profile_counters_arg=*/</i><a class="member" href="#_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv" title='xla::cpu::IrEmitter::GetProfileCountersArgument' data-ref="_ZN3xla3cpu9IrEmitter26GetProfileCountersArgumentEv">GetProfileCountersArgument</a>()));</td></tr>
<tr><th id="2803">2803</th><td>}</td></tr>
<tr><th id="2804">2804</th><td></td></tr>
<tr><th id="2805">2805</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter21EmitArrayFunctionCallEPN4llvm8FunctionERKNS_5ShapeExN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter21EmitArrayFunctionCallEPN4llvm8FunctionERKNS_5ShapeExN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitArrayFunctionCall</dfn>(</td></tr>
<tr><th id="2806">2806</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col6 decl" id="716function" title='function' data-type='llvm::Function *' data-ref="716function">function</dfn>, <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col7 decl" id="717return_shape" title='return_shape' data-type='const xla::Shape &amp;' data-ref="717return_shape">return_shape</dfn>, <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="718element_count" title='element_count' data-type='int64' data-ref="718element_count">element_count</dfn>,</td></tr>
<tr><th id="2807">2807</th><td>    <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <dfn class="local col9 decl" id="719parameter_addresses" title='parameter_addresses' data-type='gtl::ArraySlice&lt;llvm::Value *&gt;' data-ref="719parameter_addresses">parameter_addresses</dfn>,</td></tr>
<tr><th id="2808">2808</th><td>    <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col0 decl" id="720name" title='name' data-type='tensorflow::StringPiece' data-ref="720name">name</dfn>) {</td></tr>
<tr><th id="2809">2809</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="721elements" title='elements' data-type='llvm::Value *' data-ref="721elements">elements</dfn> =</td></tr>
<tr><th id="2810">2810</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</span>::<span class='ref' title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</span>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::getInt64Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt64TyEv">getInt64Ty</span>(), <a class="local col8 ref" href="#718element_count" title='element_count' data-ref="718element_count">element_count</a>);</td></tr>
<tr><th id="2811">2811</th><td>  <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col2 decl" id="722return_type" title='return_type' data-type='xla::PrimitiveType' data-ref="722return_type">return_type</dfn> = <a class="local col7 ref" href="#717return_shape" title='return_shape' data-ref="717return_shape">return_shape</a>.<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="2812">2812</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col3 decl" id="723return_value_buffer" title='return_value_buffer' data-type='llvm::Value *' data-ref="723return_value_buffer">return_value_buffer</dfn> =</td></tr>
<tr><th id="2813">2813</th><td>      <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675" title='xla::llvm_ir::EmitAllocaAtFunctionEntryWithCount' data-ref="_ZN3xla7llvm_ir34EmitAllocaAtFunctionEntryWithCountEPN4llvm4TypeEPNS1_5ValueEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRB2567675">EmitAllocaAtFunctionEntryWithCount</a>(</td></tr>
<tr><th id="2814">2814</th><td>          <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE" title='xla::llvm_ir::PrimitiveTypeToIrType' data-ref="_ZN3xla7llvm_ir21PrimitiveTypeToIrTypeENS_13PrimitiveTypeEPN4llvm6ModuleE">PrimitiveTypeToIrType</a>(<a class="local col2 ref" href="#722return_type" title='return_type' data-ref="722return_type">return_type</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>), <a class="local col1 ref" href="#721elements" title='elements' data-ref="721elements">elements</a>,</td></tr>
<tr><th id="2815">2815</th><td>          <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><span class="namespace">tensorflow::strings::</span><a class="ref" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_" title='tensorflow::strings::StrCat' data-ref="_ZN10tensorflow7strings6StrCatERKNS0_8AlphaNumES3_">StrCat</a>(<a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1ERKNS_11StringPieceE" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1ERKNS_11StringPieceE"></a><a class="local col0 ref" href="#720name" title='name' data-ref="720name">name</a>, <a class="ref fake" href="../../../../core/lib/strings/strcat.h.html#_ZN10tensorflow7strings8AlphaNumC1EPKc" title='tensorflow::strings::AlphaNum::AlphaNum' data-ref="_ZN10tensorflow7strings8AlphaNumC1EPKc"></a><q>"_return_value_address"</q>),</td></tr>
<tr><th id="2816">2816</th><td>          &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="#_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE" title='xla::cpu::IrEmitter::MinimumAlignmentForPrimitiveType' data-ref="_ZN3xla3cpu9IrEmitter32MinimumAlignmentForPrimitiveTypeENS_13PrimitiveTypeE">MinimumAlignmentForPrimitiveType</a>(<a class="local col2 ref" href="#722return_type" title='return_type' data-ref="722return_type">return_type</a>));</td></tr>
<tr><th id="2817">2817</th><td>  <a class="member" href="#_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE" title='xla::cpu::IrEmitter::EmitArrayFunctionCallInto' data-ref="_ZN3xla3cpu9IrEmitter25EmitArrayFunctionCallIntoEPN4llvm8FunctionEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEES9_NS5_11StringPieceE">EmitArrayFunctionCallInto</a>(<a class="local col6 ref" href="#716function" title='function' data-ref="716function">function</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#108" title='tensorflow::gtl::ArraySlice&lt;llvm::Value *&gt;::ArraySlice' data-ref="_ZN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEC1ERKS5_"></a><a class="local col9 ref" href="#719parameter_addresses" title='parameter_addresses' data-ref="719parameter_addresses">parameter_addresses</a>, <a class="local col3 ref" href="#723return_value_buffer" title='return_value_buffer' data-ref="723return_value_buffer">return_value_buffer</a>,</td></tr>
<tr><th id="2818">2818</th><td>                            <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#38" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKS0_"></a><a class="local col0 ref" href="#720name" title='name' data-ref="720name">name</a>);</td></tr>
<tr><th id="2819">2819</th><td>  <b>return</b> <a class="local col3 ref" href="#723return_value_buffer" title='return_value_buffer' data-ref="723return_value_buffer">return_value_buffer</a>;</td></tr>
<tr><th id="2820">2820</th><td>}</td></tr>
<tr><th id="2821">2821</th><td></td></tr>
<tr><th id="2822">2822</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col4 decl" id="724op" title='op' data-type='const xla::HloInstruction *' data-ref="724op">op</dfn>) {</td></tr>
<tr><th id="2823">2823</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col5 decl" id="725addr" title='addr' data-type='llvm::Value *' data-ref="725addr">addr</dfn>;</td></tr>
<tr><th id="2824">2824</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col6 decl" id="726target_shape" title='target_shape' data-type='const xla::Shape &amp;' data-ref="726target_shape">target_shape</dfn> = <a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2825">2825</th><td>  <b>if</b> (<a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a> == <a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6parentEv" title='xla::HloInstruction::parent' data-ref="_ZNK3xla14HloInstruction6parentEv">parent</a>()-&gt;<a class="ref" href="../hlo_computation.h.html#_ZNK3xla14HloComputation16root_instructionEv" title='xla::HloComputation::root_instruction' data-ref="_ZNK3xla14HloComputation16root_instructionEv">root_instruction</a>()) {</td></tr>
<tr><th id="2826">2826</th><td>    <i>// For the root node, we write directly to the output buffer of the</i></td></tr>
<tr><th id="2827">2827</th><td><i>    // function.</i></td></tr>
<tr><th id="2828">2828</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Argument' data-ref="llvm::Argument">Argument</span>* <dfn class="local col7 decl" id="727retval" title='retval' data-type='llvm::Argument *' data-ref="727retval">retval</dfn> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction10result_argEv" title='xla::cpu::IrFunction::result_arg' data-ref="_ZN3xla3cpu10IrFunction10result_argEv">result_arg</a>();</td></tr>
<tr><th id="2829">2829</th><td>    <b>if</b> (!<a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil5IsNilERKNS_5ShapeE" title='xla::ShapeUtil::IsNil' data-ref="_ZN3xla9ShapeUtil5IsNilERKNS_5ShapeE">IsNil</a>(<a class="local col6 ref" href="#726target_shape" title='target_shape' data-ref="726target_shape">target_shape</a>)) {</td></tr>
<tr><th id="2830">2830</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::AttrBuilder' data-ref="llvm::AttrBuilder">AttrBuilder</span> <span class='ref fake' title='llvm::AttrBuilder::AttrBuilder' data-ref="_ZN4llvm11AttrBuilderC1Ev"></span><dfn class="local col8 decl" id="728attr_builder" title='attr_builder' data-type='llvm::AttrBuilder' data-ref="728attr_builder">attr_builder</dfn>;</td></tr>
<tr><th id="2831">2831</th><td>      <a class="local col8 ref" href="#728attr_builder" title='attr_builder' data-ref="728attr_builder">attr_builder</a>.<span class='ref' title='llvm::AttrBuilder::addAlignmentAttr' data-ref="_ZN4llvm11AttrBuilder16addAlignmentAttrEj">addAlignmentAttr</span>(<a class="member" href="#_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE" title='xla::cpu::IrEmitter::MinimumAlignmentForShape' data-ref="_ZN3xla3cpu9IrEmitter24MinimumAlignmentForShapeERKNS_5ShapeE">MinimumAlignmentForShape</a>(<a class="local col6 ref" href="#726target_shape" title='target_shape' data-ref="726target_shape">target_shape</a>));</td></tr>
<tr><th id="2832">2832</th><td>      <a class="local col8 ref" href="#728attr_builder" title='attr_builder' data-ref="728attr_builder">attr_builder</a>.<span class='ref' title='llvm::AttrBuilder::addDereferenceableAttr' data-ref="_ZN4llvm11AttrBuilder22addDereferenceableAttrEm">addDereferenceableAttr</span>(<a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col6 ref" href="#726target_shape" title='target_shape' data-ref="726target_shape">target_shape</a>));</td></tr>
<tr><th id="2833">2833</th><td>      <a class="local col7 ref" href="#727retval" title='retval' data-ref="727retval">retval</a>-&gt;<span class='ref' title='llvm::Argument::addAttrs' data-ref="_ZN4llvm8Argument8addAttrsERNS_11AttrBuilderE">addAttrs</span>(<span class='refarg'><a class="local col8 ref" href="#728attr_builder" title='attr_builder' data-ref="728attr_builder">attr_builder</a></span>);</td></tr>
<tr><th id="2834">2834</th><td>    }</td></tr>
<tr><th id="2835">2835</th><td>    <a class="local col5 ref" href="#725addr" title='addr' data-ref="725addr">addr</a> = <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</span>(<a class="local col7 ref" href="#727retval" title='retval' data-ref="727retval">retval</a>,</td></tr>
<tr><th id="2836">2836</th><td>                                     <a class="member" href="#_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE" title='xla::cpu::IrEmitter::IrShapeType' data-ref="_ZN3xla3cpu9IrEmitter11IrShapeTypeERKNS_5ShapeE">IrShapeType</a>(<a class="local col6 ref" href="#726target_shape" title='target_shape' data-ref="726target_shape">target_shape</a>)-&gt;<span class='ref' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>());</td></tr>
<tr><th id="2837">2837</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2838">2838</th><td>    <i>// For other nodes, we need the temporary buffer allocated for this node to</i></td></tr>
<tr><th id="2839">2839</th><td><i>    // write the result into.</i></td></tr>
<tr><th id="2840">2840</th><td>    <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value13 = (assignment_.GetUniqueTopLevelSlice(op)); if ((__builtin_expect(!_status_or_value13.ok(), 0))) { return _status_or_value13.status(); } const BufferAllocation::Slice slice = std::move(_status_or_value13.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(<em>const</em> <a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a> <dfn class="local col9 decl" id="729slice" title='slice' data-type='const BufferAllocation::Slice' data-ref="729slice">slice</dfn>,</td></tr>
<tr><th id="2841">2841</th><td>                        <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment22GetUniqueTopLevelSliceEPKNS_14HloInstructionE" title='xla::BufferAssignment::GetUniqueTopLevelSlice' data-ref="_ZNK3xla16BufferAssignment22GetUniqueTopLevelSliceEPKNS_14HloInstructionE">GetUniqueTopLevelSlice</a>(<a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a>));</td></tr>
<tr><th id="2842">2842</th><td>    <a class="local col5 ref" href="#725addr" title='addr' data-ref="725addr">addr</a> = <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE" title='xla::cpu::IrEmitter::EmitTempBufferPointer' data-ref="_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE">EmitTempBufferPointer</a>(<a class="local col9 ref" href="#2840" title='slice' data-ref="729slice">slice</a>, <a class="local col6 ref" href="#726target_shape" title='target_shape' data-ref="726target_shape">target_shape</a>);</td></tr>
<tr><th id="2843">2843</th><td>  }</td></tr>
<tr><th id="2844">2844</th><td>  <a class="local col5 ref" href="#725addr" title='addr' data-ref="725addr">addr</a>-&gt;<span class='ref' title='llvm::Value::setName' data-ref="_ZN4llvm5Value7setNameERKNS_5TwineE">setName</span>(<span class='ref fake' title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE" title='xla::llvm_ir::AsStringRef' data-ref="_ZN3xla7llvm_ir11AsStringRefEN10tensorflow11StringPieceE">AsStringRef</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a>)));</td></tr>
<tr><th id="2845">2845</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_value_" title='xla::cpu::IrEmitter::emitted_value_' data-ref="xla::cpu::IrEmitter::emitted_value_">emitted_value_</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_27272062" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_27272062">[<a class="local col4 ref" href="#724op" title='op' data-ref="724op">op</a>]</a> = <a class="local col5 ref" href="#725addr" title='addr' data-ref="725addr">addr</a>;</td></tr>
<tr><th id="2846">2846</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2847">2847</th><td>}</td></tr>
<tr><th id="2848">2848</th><td></td></tr>
<tr><th id="2849">2849</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</dfn>(</td></tr>
<tr><th id="2850">2850</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col0 decl" id="730target_op" title='target_op' data-type='xla::HloInstruction *' data-ref="730target_op">target_op</dfn>,</td></tr>
<tr><th id="2851">2851</th><td>    <em>const</em> <span class="namespace">llvm_ir::</span><a class="typedef" href="../llvm_ir/loop_emitter.h.html#xla::llvm_ir::ElementGenerator" title='xla::llvm_ir::ElementGenerator' data-type='std::function&lt;StatusOr&lt;llvm::Value *&gt; (const IrArray::Index &amp;)&gt;' data-ref="xla::llvm_ir::ElementGenerator">ElementGenerator</a>&amp; <dfn class="local col1 decl" id="731element_generator" title='element_generator' data-type='const llvm_ir::ElementGenerator &amp;' data-ref="731element_generator">element_generator</dfn>) {</td></tr>
<tr><th id="2852">2852</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(<a class="local col0 ref" href="#730target_op" title='target_op' data-ref="730target_op">target_op</a>, <i>/*desc=*/</i><a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>""</q>, <a class="local col1 ref" href="#731element_generator" title='element_generator' data-ref="731element_generator">element_generator</a>);</td></tr>
<tr><th id="2853">2853</th><td>}</td></tr>
<tr><th id="2854">2854</th><td></td></tr>
<tr><th id="2855">2855</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionEN10tensorflow11StringPieceERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</dfn>(</td></tr>
<tr><th id="2856">2856</th><td>    <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col2 decl" id="732target_op" title='target_op' data-type='xla::HloInstruction *' data-ref="732target_op">target_op</dfn>, <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col3 decl" id="733desc" title='desc' data-type='tensorflow::StringPiece' data-ref="733desc">desc</dfn>,</td></tr>
<tr><th id="2857">2857</th><td>    <em>const</em> <span class="namespace">llvm_ir::</span><a class="typedef" href="../llvm_ir/loop_emitter.h.html#xla::llvm_ir::ElementGenerator" title='xla::llvm_ir::ElementGenerator' data-type='std::function&lt;StatusOr&lt;llvm::Value *&gt; (const IrArray::Index &amp;)&gt;' data-ref="xla::llvm_ir::ElementGenerator">ElementGenerator</a>&amp; <dfn class="local col4 decl" id="734element_generator" title='element_generator' data-type='const llvm_ir::ElementGenerator &amp;' data-ref="734element_generator">element_generator</dfn>) {</td></tr>
<tr><th id="2858">2858</th><td>  <a class="macro" href="../../../../core/platform/default/logging.h.html#89" title="if ((__builtin_expect(((2) &lt;= ::tensorflow::internal::LogMessage::MinVLogLevel()), 0))) ::tensorflow::internal::LogMessage(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2858, tensorflow::INFO)" data-ref="_M/VLOG">VLOG</a>(<var>2</var>) <a class="ref" href="../../../../../../include/c++/5/ostream.html#_ZStlsOSt13basic_ostreamIT_T0_ERKT1_" title='std::operator&lt;&lt;' data-ref="_ZStlsOSt13basic_ostreamIT_T0_ERKT1_">&lt;&lt;</a> <q>"EmitTargetElementLoop: "</q> <a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8ToStringEv" title='xla::HloInstruction::ToString' data-ref="_ZNK3xla14HloInstruction8ToStringEv">ToString</a>();</td></tr>
<tr><th id="2859">2859</th><td></td></tr>
<tr><th id="2860">2860</th><td>  <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col5 decl" id="735target_shape" title='target_shape' data-type='const xla::Shape &amp;' data-ref="735target_shape">target_shape</dfn> = <a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>();</td></tr>
<tr><th id="2861">2861</th><td>  <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (EmitTargetAddressForOp(target_op)); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="member" href="#_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::EmitTargetAddressForOp' data-ref="_ZN3xla3cpu9IrEmitter22EmitTargetAddressForOpEPKNS_14HloInstructionE">EmitTargetAddressForOp</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>));</td></tr>
<tr><th id="2862">2862</th><td>  <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a> <dfn class="local col6 decl" id="736target_array" title='target_array' data-type='llvm_ir::IrArray' data-ref="736target_array">target_array</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>);</td></tr>
<tr><th id="2863">2863</th><td></td></tr>
<tr><th id="2864">2864</th><td>  <b>if</b> (<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction19IsMultiOutputFusionEv" title='xla::HloInstruction::IsMultiOutputFusion' data-ref="_ZNK3xla14HloInstruction19IsMultiOutputFusionEv">IsMultiOutputFusion</a>()) {</td></tr>
<tr><th id="2865">2865</th><td>    <i>// For multiple outputs fusion, we need to emit each operand and the root.</i></td></tr>
<tr><th id="2866">2866</th><td>    <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(num_dynamic_loop_bounds_ == 0), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2866, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;num_dynamic_loop_bounds_ == 0&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::num_dynamic_loop_bounds_" title='xla::cpu::IrEmitter::num_dynamic_loop_bounds_' data-ref="xla::cpu::IrEmitter::num_dynamic_loop_bounds_">num_dynamic_loop_bounds_</a> == <var>0</var>);</td></tr>
<tr><th id="2867">2867</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col7 decl" id="737output_arrays" title='output_arrays' data-type='std::vector&lt;llvm_ir::IrArray&gt;' data-ref="737output_arrays">output_arrays</dfn>;</td></tr>
<tr><th id="2868">2868</th><td>    <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col8 decl" id="738i" title='i' data-type='int64' data-ref="738i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#738i" title='i' data-ref="738i">i</a> &lt; <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil17TupleElementCountERKNS_5ShapeE" title='xla::ShapeUtil::TupleElementCount' data-ref="_ZN3xla9ShapeUtil17TupleElementCountERKNS_5ShapeE">TupleElementCount</a>(<a class="local col5 ref" href="#735target_shape" title='target_shape' data-ref="735target_shape">target_shape</a>); ++<a class="local col8 ref" href="#738i" title='i' data-ref="738i">i</a>) {</td></tr>
<tr><th id="2869">2869</th><td>      <a class="macro" href="../../status_macros.h.html#199" title="auto _status_or_value15 = (assignment_.GetUniqueSlice(target_op, {i})); if ((__builtin_expect(!_status_or_value15.ok(), 0))) { return _status_or_value15.status(); } BufferAllocation::Slice slice = std::move(_status_or_value15.ValueOrDie())" data-ref="_M/TF_ASSIGN_OR_RETURN">TF_ASSIGN_OR_RETURN</a>(<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation" title='xla::BufferAllocation' data-ref="xla::BufferAllocation">BufferAllocation</a>::<a class="type" href="../buffer_assignment.h.html#xla::BufferAllocation::Slice" title='xla::BufferAllocation::Slice' data-ref="xla::BufferAllocation::Slice">Slice</a> <dfn class="local col9 decl" id="739slice" title='slice' data-type='BufferAllocation::Slice' data-ref="739slice">slice</dfn>,</td></tr>
<tr><th id="2870">2870</th><td>                          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::assignment_" title='xla::cpu::IrEmitter::assignment_' data-ref="xla::cpu::IrEmitter::assignment_">assignment_</a>.<a class="ref" href="../buffer_assignment.h.html#_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE" title='xla::BufferAssignment::GetUniqueSlice' data-ref="_ZNK3xla16BufferAssignment14GetUniqueSliceEPKNS_14HloInstructionERKNS_10ShapeIndexE">GetUniqueSlice</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>, <a class="ref fake" href="../../shape_util.h.html#_ZN3xla10ShapeIndexC1ESt16initializer_listIxE" title='xla::ShapeIndex::ShapeIndex' data-ref="_ZN3xla10ShapeIndexC1ESt16initializer_listIxE"></a>{<a class="local col8 ref" href="#738i" title='i' data-ref="738i">i</a>}));</td></tr>
<tr><th id="2871">2871</th><td>      <em>const</em> <span class='type' title='xla::Shape' data-ref="xla::Shape">Shape</span>&amp; <dfn class="local col0 decl" id="740element_shape" title='element_shape' data-type='const xla::Shape &amp;' data-ref="740element_shape">element_shape</dfn> = <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil11GetSubshapeERKNS_5ShapeENS_14ShapeIndexViewE" title='xla::ShapeUtil::GetSubshape' data-ref="_ZN3xla9ShapeUtil11GetSubshapeERKNS_5ShapeENS_14ShapeIndexViewE">GetSubshape</a>(<a class="local col5 ref" href="#735target_shape" title='target_shape' data-ref="735target_shape">target_shape</a>, <a class="ref fake" href="../../shape_util.h.html#_ZN3xla14ShapeIndexViewC1ESt16initializer_listIxE" title='xla::ShapeIndexView::ShapeIndexView' data-ref="_ZN3xla14ShapeIndexViewC1ESt16initializer_listIxE"></a>{<a class="local col8 ref" href="#738i" title='i' data-ref="738i">i</a>});</td></tr>
<tr><th id="2872">2872</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col1 decl" id="741op_target_address" title='op_target_address' data-type='llvm::Value *' data-ref="741op_target_address">op_target_address</dfn> =</td></tr>
<tr><th id="2873">2873</th><td>          <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE" title='xla::cpu::IrEmitter::EmitTempBufferPointer' data-ref="_ZN3xla3cpu9IrEmitter21EmitTempBufferPointerERKNS_16BufferAllocation5SliceERKNS_5ShapeE">EmitTempBufferPointer</a>(<a class="local col9 ref" href="#2869" title='slice' data-ref="739slice">slice</a>, <a class="local col0 ref" href="#740element_shape" title='element_shape' data-ref="740element_shape">element_shape</a>);</td></tr>
<tr><th id="2874">2874</th><td>      <a class="local col7 ref" href="#737output_arrays" title='output_arrays' data-ref="737output_arrays">output_arrays</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(</td></tr>
<tr><th id="2875">2875</th><td>          <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a><a class="ref" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1EPN4llvm5ValueERKNS_5ShapeE" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1EPN4llvm5ValueERKNS_5ShapeE">(</a><a class="local col1 ref" href="#741op_target_address" title='op_target_address' data-ref="741op_target_address">op_target_address</a>, <a class="local col0 ref" href="#740element_shape" title='element_shape' data-ref="740element_shape">element_shape</a>));</td></tr>
<tr><th id="2876">2876</th><td>    }</td></tr>
<tr><th id="2877">2877</th><td>    <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (llvm_ir::LoopEmitter(element_generator, output_arrays, &amp;ir_builder_) .EmitLoop(IrName(target_op))); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(</td></tr>
<tr><th id="2878">2878</th><td>        llvm_ir::<a class="type" href="../llvm_ir/loop_emitter.h.html#xla::llvm_ir::LoopEmitter" title='xla::llvm_ir::LoopEmitter' data-ref="xla::llvm_ir::LoopEmitter">LoopEmitter</a><a class="ref" href="../llvm_ir/loop_emitter.h.html#_ZN3xla7llvm_ir11LoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS0_7IrArray5IndexEEEN10tensorflow3gtl10ArraySliceIS8_EEPNS4_9IRBuilderIN3855615" title='xla::llvm_ir::LoopEmitter::LoopEmitter' data-ref="_ZN3xla7llvm_ir11LoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS0_7IrArray5IndexEEEN10tensorflow3gtl10ArraySliceIS8_EEPNS4_9IRBuilderIN3855615">(</a><a class="local col4 ref" href="#734element_generator" title='element_generator' data-ref="734element_generator">element_generator</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col7 ref" href="#737output_arrays" title='output_arrays' data-ref="737output_arrays">output_arrays</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>)</td></tr>
<tr><th id="2879">2879</th><td>            .<a class="ref" href="../llvm_ir/loop_emitter.h.html#_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE" title='xla::llvm_ir::LoopEmitter::EmitLoop' data-ref="_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE">EmitLoop</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>)));</td></tr>
<tr><th id="2880">2880</th><td></td></tr>
<tr><th id="2881">2881</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col2 decl" id="742tuple_operand_ptrs" title='tuple_operand_ptrs' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="742tuple_operand_ptrs">tuple_operand_ptrs</dfn>;</td></tr>
<tr><th id="2882">2882</th><td>    <b>for</b> (<a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col3 decl" id="743i" title='i' data-type='int64' data-ref="743i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#743i" title='i' data-ref="743i">i</a> &lt; <a class="local col7 ref" href="#737output_arrays" title='output_arrays' data-ref="737output_arrays">output_arrays</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>(); ++<a class="local col3 ref" href="#743i" title='i' data-ref="743i">i</a>) {</td></tr>
<tr><th id="2883">2883</th><td>      <a class="local col2 ref" href="#742tuple_operand_ptrs" title='tuple_operand_ptrs' data-ref="742tuple_operand_ptrs">tuple_operand_ptrs</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="local col7 ref" href="#737output_arrays" title='output_arrays' data-ref="737output_arrays">output_arrays</a><a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm">[<a class="local col3 ref" href="#743i" title='i' data-ref="743i">i</a>]</a>.<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv" title='xla::llvm_ir::IrArray::GetBasePointer' data-ref="_ZNK3xla7llvm_ir7IrArray14GetBasePointerEv">GetBasePointer</a>());</td></tr>
<tr><th id="2884">2884</th><td>    }</td></tr>
<tr><th id="2885">2885</th><td>    <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/tuple_ops.h.html#_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE" title='xla::llvm_ir::EmitTuple' data-ref="_ZN3xla7llvm_ir9EmitTupleENS0_7IrArrayEN10tensorflow3gtl10ArraySliceIPN4llvm5ValueEEEPNS5_9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEPNS5_6ModuleE">EmitTuple</a>(<a class="ref fake" href="../llvm_ir/ir_array.h.html#_ZN3xla7llvm_ir7IrArrayC1ERKS1_" title='xla::llvm_ir::IrArray::IrArray' data-ref="_ZN3xla7llvm_ir7IrArrayC1ERKS1_"></a><a class="local col6 ref" href="#736target_array" title='target_array' data-ref="736target_array">target_array</a>, <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col2 ref" href="#742tuple_operand_ptrs" title='tuple_operand_ptrs' data-ref="742tuple_operand_ptrs">tuple_operand_ptrs</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="2886">2886</th><td></td></tr>
<tr><th id="2887">2887</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2888">2888</th><td>    <b>if</b> (<a class="member" href="ir_emitter.h.html#_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE" title='xla::cpu::IrEmitter::ShouldEmitParallelLoopFor' data-ref="_ZNK3xla3cpu9IrEmitter25ShouldEmitParallelLoopForERKNS_14HloInstructionE">ShouldEmitParallelLoopFor</a>(*<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>)) {</td></tr>
<tr><th id="2889">2889</th><td>      <i>// Emit code to read dynamic loop bounds from compute function argument.</i></td></tr>
<tr><th id="2890">2890</th><td>      <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_pair.h.html#std::pair" title='std::pair' data-ref="std::pair">pair</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*, <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;&gt; <dfn class="local col4 decl" id="744dynamic_loop_bounds" title='dynamic_loop_bounds' data-type='std::vector&lt;std::pair&lt;llvm::Value *, llvm::Value *&gt; &gt;' data-ref="744dynamic_loop_bounds">dynamic_loop_bounds</dfn> =</td></tr>
<tr><th id="2891">2891</th><td>          <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::compute_function_" title='xla::cpu::IrEmitter::compute_function_' data-ref="xla::cpu::IrEmitter::compute_function_">compute_function_</a><a class="ref" href="../../../../../../include/c++/5/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref" href="ir_function.h.html#_ZN3xla3cpu10IrFunction20GetDynamicLoopBoundsEv" title='xla::cpu::IrFunction::GetDynamicLoopBounds' data-ref="_ZN3xla3cpu10IrFunction20GetDynamicLoopBoundsEv">GetDynamicLoopBounds</a>();</td></tr>
<tr><th id="2892">2892</th><td>      <i>// Emit parallel loop with dynamic loop bounds for most-major dimensions.</i></td></tr>
<tr><th id="2893">2893</th><td>      <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (ParallelLoopEmitter(element_generator, target_array, &amp;dynamic_loop_bounds, &amp;ir_builder_) .EmitLoop(IrName(target_op))); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(<a class="type" href="parallel_loop_emitter.h.html#xla::cpu::ParallelLoopEmitter" title='xla::cpu::ParallelLoopEmitter' data-ref="xla::cpu::ParallelLoopEmitter">ParallelLoopEmitter</a><a class="ref" href="parallel_loop_emitter.h.html#_ZN3xla3cpu19ParallelLoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEERKS9_PKSt6vectorISt4pairIS6_S6_ESaISL_EEP4257267" title='xla::cpu::ParallelLoopEmitter::ParallelLoopEmitter' data-ref="_ZN3xla3cpu19ParallelLoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEERKS9_PKSt6vectorISt4pairIS6_S6_ESaISL_EEP4257267">(</a><a class="local col4 ref" href="#734element_generator" title='element_generator' data-ref="734element_generator">element_generator</a>, <a class="local col6 ref" href="#736target_array" title='target_array' data-ref="736target_array">target_array</a>,</td></tr>
<tr><th id="2894">2894</th><td>                                             &amp;<a class="local col4 ref" href="#744dynamic_loop_bounds" title='dynamic_loop_bounds' data-ref="744dynamic_loop_bounds">dynamic_loop_bounds</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>)</td></tr>
<tr><th id="2895">2895</th><td>                             .<a class="ref" href="../llvm_ir/loop_emitter.h.html#_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE" title='xla::llvm_ir::LoopEmitter::EmitLoop' data-ref="_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE">EmitLoop</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>)));</td></tr>
<tr><th id="2896">2896</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2897">2897</th><td>      <a class="macro" href="../../../../core/lib/core/errors.h.html#69" title="do { const ::tensorflow::Status _status = (llvm_ir::LoopEmitter(element_generator, target_array, &amp;ir_builder_) .EmitLoop(IrName(target_op))); if ((__builtin_expect(!_status.ok(), 0))) return _status; } while (0)" data-ref="_M/TF_RETURN_IF_ERROR">TF_RETURN_IF_ERROR</a>(</td></tr>
<tr><th id="2898">2898</th><td>          llvm_ir::<a class="type" href="../llvm_ir/loop_emitter.h.html#xla::llvm_ir::LoopEmitter" title='xla::llvm_ir::LoopEmitter' data-ref="xla::llvm_ir::LoopEmitter">LoopEmitter</a><a class="ref" href="../llvm_ir/loop_emitter.h.html#_ZN3xla7llvm_ir11LoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS0_7IrArray5IndexEEERKS8_PNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBu12728267" title='xla::llvm_ir::LoopEmitter::LoopEmitter' data-ref="_ZN3xla7llvm_ir11LoopEmitterC1ERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS0_7IrArray5IndexEEERKS8_PNS4_9IRBuilderINS4_14ConstantFolderENS4_24IRBu12728267">(</a><a class="local col4 ref" href="#734element_generator" title='element_generator' data-ref="734element_generator">element_generator</a>, <a class="local col6 ref" href="#736target_array" title='target_array' data-ref="736target_array">target_array</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>)</td></tr>
<tr><th id="2899">2899</th><td>              .<a class="ref" href="../llvm_ir/loop_emitter.h.html#_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE" title='xla::llvm_ir::LoopEmitter::EmitLoop' data-ref="_ZN3xla7llvm_ir11LoopEmitter8EmitLoopEN10tensorflow11StringPieceE">EmitLoop</a>(<a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1ERKSs" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKSs"></a><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrName' data-ref="_ZN3xla7llvm_ir6IrNameEPKNS_14HloInstructionEN10tensorflow11StringPieceE">IrName</a>(<a class="local col2 ref" href="#732target_op" title='target_op' data-ref="732target_op">target_op</a>)));</td></tr>
<tr><th id="2900">2900</th><td>    }</td></tr>
<tr><th id="2901">2901</th><td>  }</td></tr>
<tr><th id="2902">2902</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2903">2903</th><td>}</td></tr>
<tr><th id="2904">2904</th><td></td></tr>
<tr><th id="2905">2905</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_" title='xla::cpu::IrEmitter::EmitMemcpy' data-ref="_ZN3xla3cpu9IrEmitter10EmitMemcpyERKNS_14HloInstructionES4_">EmitMemcpy</dfn>(<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>&amp; <dfn class="local col5 decl" id="745source" title='source' data-type='const xla::HloInstruction &amp;' data-ref="745source">source</dfn>,</td></tr>
<tr><th id="2906">2906</th><td>                             <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>&amp; <dfn class="local col6 decl" id="746destination" title='destination' data-type='const xla::HloInstruction &amp;' data-ref="746destination">destination</dfn>) {</td></tr>
<tr><th id="2907">2907</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="747source_value" title='source_value' data-type='llvm::Value *' data-ref="747source_value">source_value</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(&amp;<a class="local col5 ref" href="#745source" title='source' data-ref="745source">source</a>);</td></tr>
<tr><th id="2908">2908</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col8 decl" id="748destination_value" title='destination_value' data-type='llvm::Value *' data-ref="748destination_value">destination_value</dfn> = <a class="member" href="#_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetEmittedValueFor' data-ref="_ZN3xla3cpu9IrEmitter18GetEmittedValueForEPKNS_14HloInstructionE">GetEmittedValueFor</a>(&amp;<a class="local col6 ref" href="#746destination" title='destination' data-ref="746destination">destination</a>);</td></tr>
<tr><th id="2909">2909</th><td>  <a class="typedef" href="../../../../core/platform/default/integral_types.h.html#tensorflow::int64" title='tensorflow::int64' data-type='long long' data-ref="tensorflow::int64">int64</a> <dfn class="local col9 decl" id="749source_size" title='source_size' data-type='int64' data-ref="749source_size">source_size</dfn> = <a class="member" href="#_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE" title='xla::cpu::IrEmitter::ByteSizeOf' data-ref="_ZNK3xla3cpu9IrEmitter10ByteSizeOfERKNS_5ShapeE">ByteSizeOf</a>(<a class="local col5 ref" href="#745source" title='source' data-ref="745source">source</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>());</td></tr>
<tr><th id="2910">2910</th><td>  <i>// TODO(b/63762267): Be more aggressive about specifying alignment.</i></td></tr>
<tr><th id="2911">2911</th><td>  <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilderBase::CreateMemCpy' data-ref="_ZN4llvm13IRBuilderBase12CreateMemCpyEPNS_5ValueEjS2_jmbPNS_6MDNodeES4_S4_S4_">CreateMemCpy</span>(<a class="local col8 ref" href="#748destination_value" title='destination_value' data-ref="748destination_value">destination_value</a>, <i>/*DstAlign=*/</i><var>1</var>, <a class="local col7 ref" href="#747source_value" title='source_value' data-ref="747source_value">source_value</a>,</td></tr>
<tr><th id="2912">2912</th><td>                           <i>/*SrcAlign=*/</i><var>1</var>, <a class="local col9 ref" href="#749source_size" title='source_size' data-ref="749source_size">source_size</a>);</td></tr>
<tr><th id="2913">2913</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2914">2914</th><td>}</td></tr>
<tr><th id="2915">2915</th><td></td></tr>
<tr><th id="2916">2916</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE" title='xla::cpu::IrEmitter::ElementTypesSameAndSupported' data-ref="_ZN3xla3cpu9IrEmitter28ElementTypesSameAndSupportedERKNS_14HloInstructionEN10tensorflow3gtl10ArraySliceIPS3_EENS7_INS_13PrimitiveTypeEEE">ElementTypesSameAndSupported</dfn>(</td></tr>
<tr><th id="2917">2917</th><td>    <em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>&amp; <dfn class="local col0 decl" id="750instruction" title='instruction' data-type='const xla::HloInstruction &amp;' data-ref="750instruction">instruction</dfn>,</td></tr>
<tr><th id="2918">2918</th><td>    <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>*&gt; <dfn class="local col1 decl" id="751operands" title='operands' data-type='gtl::ArraySlice&lt;const HloInstruction *&gt;' data-ref="751operands">operands</dfn>,</td></tr>
<tr><th id="2919">2919</th><td>    <span class="namespace">gtl::</span><a class="type" href="../../../../core/lib/gtl/array_slice.h.html#tensorflow::gtl::ArraySlice" title='tensorflow::gtl::ArraySlice' data-ref="tensorflow::gtl::ArraySlice">ArraySlice</a>&lt;<span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span>&gt; <dfn class="local col2 decl" id="752supported_types" title='supported_types' data-type='gtl::ArraySlice&lt;PrimitiveType&gt;' data-ref="752supported_types">supported_types</dfn>) {</td></tr>
<tr><th id="2920">2920</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col3 decl" id="753operand" title='operand' data-type='const xla::HloInstruction *' data-ref="753operand">operand</dfn> : <a class="local col1 ref" href="#751operands" title='operands' data-ref="751operands">operands</a>) {</td></tr>
<tr><th id="2921">2921</th><td>    <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(ShapeUtil::SameElementType(operands[0]-&gt;shape(), operand-&gt;shape())), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2922, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;ShapeUtil::SameElementType(operands[0]-&gt;shape(), operand-&gt;shape())&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(</td></tr>
<tr><th id="2922">2922</th><td>        <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil15SameElementTypeERKNS_5ShapeES3_" title='xla::ShapeUtil::SameElementType' data-ref="_ZN3xla9ShapeUtil15SameElementTypeERKNS_5ShapeES3_">SameElementType</a>(<a class="local col1 ref" href="#751operands" title='operands' data-ref="751operands">operands</a>[<var>0</var>]-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>(), <a class="local col3 ref" href="#753operand" title='operand' data-ref="753operand">operand</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>()));</td></tr>
<tr><th id="2923">2923</th><td>  }</td></tr>
<tr><th id="2924">2924</th><td></td></tr>
<tr><th id="2925">2925</th><td>  <a class="macro" href="../../status_macros.h.html#179" title="while ((__builtin_expect(!(!operands.empty()), 0))) return xla::status_macros::MakeErrorStream(&quot;/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/tensorflow/compiler/xla/service/cpu/ir_emitter.cc&quot;, 2925, tensorflow::error::INTERNAL) .with_log_stack_trace() .add_ret_check_failure(&quot;!operands.empty()&quot;)" data-ref="_M/TF_RET_CHECK">TF_RET_CHECK</a>(!<a class="local col1 ref" href="#751operands" title='operands' data-ref="751operands">operands</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice5emptyEv" title='tensorflow::gtl::ArraySlice::empty' data-ref="_ZNK10tensorflow3gtl10ArraySlice5emptyEv">empty</a>());</td></tr>
<tr><th id="2926">2926</th><td>  <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col4 decl" id="754primitive_type" title='primitive_type' data-type='xla::PrimitiveType' data-ref="754primitive_type">primitive_type</dfn> = <a class="local col1 ref" href="#751operands" title='operands' data-ref="751operands">operands</a><a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySliceixENS0_20array_slice_internal14ArraySliceImplIT_E9size_typeE" title='tensorflow::gtl::ArraySlice::operator[]' data-ref="_ZNK10tensorflow3gtl10ArraySliceixENS0_20array_slice_internal14ArraySliceImplIT_E9size_typeE">[<var>0</var>]</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction5shapeEv" title='xla::HloInstruction::shape' data-ref="_ZNK3xla14HloInstruction5shapeEv">shape</a>().<span class='ref' title='xla::Shape::element_type' data-ref="_ZNK3xla5Shape12element_typeEv">element_type</span>();</td></tr>
<tr><th id="2927">2927</th><td>  <b>if</b> (<span class="namespace">std::</span><a class="ref" href="../../../../../../include/c++/5/bits/stl_algo.h.html#_ZSt4findT_S_RKT0_" title='std::find' data-ref="_ZSt4findT_S_RKT0_">find</a>(<a class="local col2 ref" href="#752supported_types" title='supported_types' data-ref="752supported_types">supported_types</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice5beginEv" title='tensorflow::gtl::ArraySlice::begin' data-ref="_ZNK10tensorflow3gtl10ArraySlice5beginEv">begin</a>(), <a class="local col2 ref" href="#752supported_types" title='supported_types' data-ref="752supported_types">supported_types</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>(),</td></tr>
<tr><th id="2928">2928</th><td>                <a class="local col4 ref" href="#754primitive_type" title='primitive_type' data-ref="754primitive_type">primitive_type</a>) == <a class="local col2 ref" href="#752supported_types" title='supported_types' data-ref="752supported_types">supported_types</a>.<a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZNK10tensorflow3gtl10ArraySlice3endEv" title='tensorflow::gtl::ArraySlice::end' data-ref="_ZNK10tensorflow3gtl10ArraySlice3endEv">end</a>()) {</td></tr>
<tr><th id="2929">2929</th><td>    <b>return</b> <a class="ref" href="../../util.h.html#_ZN3xla13UnimplementedEPKcz" title='xla::Unimplemented' data-ref="_ZN3xla13UnimplementedEPKcz">Unimplemented</a>(<q>"unsupported operand type %s in op %s"</q>,</td></tr>
<tr><th id="2930">2930</th><td>                         <span class='ref' title='xla::PrimitiveType_Name' data-ref="_ZN3xla18PrimitiveType_NameENS_13PrimitiveTypeE">PrimitiveType_Name</span>(<a class="local col4 ref" href="#754primitive_type" title='primitive_type' data-ref="754primitive_type">primitive_type</a>).<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>(),</td></tr>
<tr><th id="2931">2931</th><td>                         <a class="ref" href="../hlo_opcode.h.html#_ZN3xla15HloOpcodeStringENS_9HloOpcodeE" title='xla::HloOpcodeString' data-ref="_ZN3xla15HloOpcodeStringENS_9HloOpcodeE">HloOpcodeString</a>(<a class="local col0 ref" href="#750instruction" title='instruction' data-ref="750instruction">instruction</a>.<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction6opcodeEv" title='xla::HloInstruction::opcode' data-ref="_ZNK3xla14HloInstruction6opcodeEv">opcode</a>()).<a class="ref" href="../../../../../../include/c++/5/bits/basic_string.h.html#_ZNKSt12basic_string5c_strEv" title='std::basic_string::c_str' data-ref="_ZNKSt12basic_string5c_strEv">c_str</a>());</td></tr>
<tr><th id="2932">2932</th><td>  }</td></tr>
<tr><th id="2933">2933</th><td>  <b>return</b> <a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a>::<a class="ref" href="../../../../core/lib/core/status.h.html#_ZN10tensorflow6Status2OKEv" title='tensorflow::Status::OK' data-ref="_ZN10tensorflow6Status2OKEv">OK</a>();</td></tr>
<tr><th id="2934">2934</th><td>}</td></tr>
<tr><th id="2935">2935</th><td></td></tr>
<tr><th id="2936">2936</th><td><a class="type" href="../../../../core/lib/core/status.h.html#tensorflow::Status" title='tensorflow::Status' data-ref="tensorflow::Status">Status</a> <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="virtual decl def" id="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE" title='xla::cpu::IrEmitter::DefaultAction' data-ref="_ZN3xla3cpu9IrEmitter13DefaultActionEPNS_14HloInstructionE">DefaultAction</dfn>(<a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col5 decl" id="755hlo" title='hlo' data-type='xla::HloInstruction *' data-ref="755hlo">hlo</dfn>) {</td></tr>
<tr><th id="2937">2937</th><td>  <a class="type" href="../elemental_ir_emitter.h.html#xla::ElementalIrEmitter" title='xla::ElementalIrEmitter' data-ref="xla::ElementalIrEmitter">ElementalIrEmitter</a>::<a class="typedef" href="../elemental_ir_emitter.h.html#xla::ElementalIrEmitter::HloToElementGeneratorMap" title='xla::ElementalIrEmitter::HloToElementGeneratorMap' data-type='std::unordered_map&lt;const HloInstruction *, llvm_ir::ElementGenerator&gt;' data-ref="xla::ElementalIrEmitter::HloToElementGeneratorMap">HloToElementGeneratorMap</a> <a class="ref fake" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapC1Ev" title='std::unordered_map::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;' data-ref="_ZNSt13unordered_mapC1Ev"></a><dfn class="local col6 decl" id="756operand_to_generator" title='operand_to_generator' data-type='ElementalIrEmitter::HloToElementGeneratorMap' data-ref="756operand_to_generator">operand_to_generator</dfn>;</td></tr>
<tr><th id="2938">2938</th><td>  <b>for</b> (<em>const</em> <a class="type" href="../hlo_instruction.h.html#xla::HloInstruction" title='xla::HloInstruction' data-ref="xla::HloInstruction">HloInstruction</a>* <dfn class="local col7 decl" id="757operand" title='operand' data-type='const xla::HloInstruction *' data-ref="757operand">operand</dfn> : <a class="local col5 ref" href="#755hlo" title='hlo' data-ref="755hlo">hlo</a>-&gt;<a class="ref" href="../hlo_instruction.h.html#_ZNK3xla14HloInstruction8operandsEv" title='xla::HloInstruction::operands' data-ref="_ZNK3xla14HloInstruction8operandsEv">operands</a>()) {</td></tr>
<tr><th id="2939">2939</th><td>    <a class="local col6 ref" href="#756operand_to_generator" title='operand_to_generator' data-ref="756operand_to_generator">operand_to_generator</a><a class="ref" href="../../../../../../include/c++/5/bits/unordered_map.h.html#_ZNSt13unordered_mapixERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_27272062" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_27272062">[<a class="local col7 ref" href="#757operand" title='operand' data-ref="757operand">operand</a>]</a> <a class="ref" href="../../../../../../include/c++/5/functional.html#_ZNSt8functionIFT_DpT0_EEaSEOT_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator=' data-ref="_ZNSt8functionIFT_DpT0_EEaSEOT_">=</a> [=](<em>const</em> <span class="namespace">llvm_ir::</span><a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray" title='xla::llvm_ir::IrArray' data-ref="xla::llvm_ir::IrArray">IrArray</a>::<a class="type" href="../llvm_ir/ir_array.h.html#xla::llvm_ir::IrArray::Index" title='xla::llvm_ir::IrArray::Index' data-ref="xla::llvm_ir::IrArray::Index">Index</a>&amp; <dfn class="local col8 decl" id="758index" title='index' data-type='const llvm_ir::IrArray::Index &amp;' data-ref="758index">index</dfn>) {</td></tr>
<tr><th id="2940">2940</th><td>      <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE" title='xla::cpu::IrEmitter::GetIrArrayFor' data-ref="_ZN3xla3cpu9IrEmitter13GetIrArrayForEPKNS_14HloInstructionE">GetIrArrayFor</a>(<a class="local col7 ref" href="#757operand" title='operand' data-ref="757operand">operand</a>).<a class="ref" href="../llvm_ir/ir_array.h.html#_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE" title='xla::llvm_ir::IrArray::EmitReadArrayElement' data-ref="_ZNK3xla7llvm_ir7IrArray20EmitReadArrayElementERKNS1_5IndexEPN4llvm9IRBuilderINS5_14ConstantFolderENS5_24IRBuilderDefaultInserterEEEN10tensorflow11StringPieceE">EmitReadArrayElement</a>(<a class="local col8 ref" href="#758index" title='index' data-ref="758index">index</a>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2941">2941</th><td>    };</td></tr>
<tr><th id="2942">2942</th><td>  }</td></tr>
<tr><th id="2943">2943</th><td>  <a class="type" href="elemental_ir_emitter.h.html#xla::cpu::CpuElementalIrEmitter" title='xla::cpu::CpuElementalIrEmitter' data-ref="xla::cpu::CpuElementalIrEmitter">CpuElementalIrEmitter</a> <dfn class="local col9 decl" id="759elemental_emitter" title='elemental_emitter' data-type='xla::cpu::CpuElementalIrEmitter' data-ref="759elemental_emitter">elemental_emitter</dfn><a class="ref" href="elemental_ir_emitter.h.html#_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE" title='xla::cpu::CpuElementalIrEmitter::CpuElementalIrEmitter' data-ref="_ZN3xla3cpu21CpuElementalIrEmitterC1ERKNS_15HloModuleConfigEPNS0_9IrEmitterEPN4llvm6ModuleE">(</a><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::hlo_module_config_" title='xla::cpu::IrEmitter::hlo_module_config_' data-ref="xla::cpu::IrEmitter::hlo_module_config_">hlo_module_config_</a>, <b>this</b>, <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::module_" title='xla::cpu::IrEmitter::module_' data-ref="xla::cpu::IrEmitter::module_">module_</a>);</td></tr>
<tr><th id="2944">2944</th><td>  <b>return</b> <a class="member" href="#_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE" title='xla::cpu::IrEmitter::EmitTargetElementLoop' data-ref="_ZN3xla3cpu9IrEmitter21EmitTargetElementLoopEPNS_14HloInstructionERKSt8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_7llvm_ir7IrArray5IndexEEE">EmitTargetElementLoop</a>(</td></tr>
<tr><th id="2945">2945</th><td>      <a class="local col5 ref" href="#755hlo" title='hlo' data-ref="755hlo">hlo</a>, <a class="local col9 ref" href="#759elemental_emitter" title='elemental_emitter' data-ref="759elemental_emitter">elemental_emitter</a>.<a class="virtual ref" href="elemental_ir_emitter.h.html#_ZNK3xla3cpu21CpuElementalIrEmitter20MakeElementGeneratorEPKNS_14HloInstructionERKSt13unordered_mapIS4_St8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_2030935" title='xla::cpu::CpuElementalIrEmitter::MakeElementGenerator' data-ref="_ZNK3xla3cpu21CpuElementalIrEmitter20MakeElementGeneratorEPKNS_14HloInstructionERKSt13unordered_mapIS4_St8functionIFNS_8StatusOrIPN4llvm5ValueEEERKNS_2030935">MakeElementGenerator</a>(<a class="local col5 ref" href="#755hlo" title='hlo' data-ref="755hlo">hlo</a>, <a class="local col6 ref" href="#756operand_to_generator" title='operand_to_generator' data-ref="756operand_to_generator">operand_to_generator</a>));</td></tr>
<tr><th id="2946">2946</th><td>}</td></tr>
<tr><th id="2947">2947</th><td></td></tr>
<tr><th id="2948">2948</th><td><a class="type" href="../../statusor.h.html#xla::StatusOr" title='xla::StatusOr' data-ref="xla::StatusOr">StatusOr</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="type" href="ir_emitter.h.html#xla::cpu::IrEmitter" title='xla::cpu::IrEmitter' data-ref="xla::cpu::IrEmitter">IrEmitter</a>::<dfn class="decl def" id="_ZN3xla3cpu9IrEmitter14EmitScalarCallENS_13PrimitiveTypeEPNS_14HloComputationERKSt6vectorIPN4llvm5ValueESaIS8_EEN10tensorflow11StringPieceE" title='xla::cpu::IrEmitter::EmitScalarCall' data-ref="_ZN3xla3cpu9IrEmitter14EmitScalarCallENS_13PrimitiveTypeEPNS_14HloComputationERKSt6vectorIPN4llvm5ValueESaIS8_EEN10tensorflow11StringPieceE">EmitScalarCall</dfn>(</td></tr>
<tr><th id="2949">2949</th><td>    <span class='type' title='xla::PrimitiveType' data-ref="xla::PrimitiveType">PrimitiveType</span> <dfn class="local col0 decl" id="760return_type" title='return_type' data-type='xla::PrimitiveType' data-ref="760return_type">return_type</dfn>, <a class="type" href="../hlo_computation.h.html#xla::HloComputation" title='xla::HloComputation' data-ref="xla::HloComputation">HloComputation</a>* <dfn class="local col1 decl" id="761computation" title='computation' data-type='xla::HloComputation *' data-ref="761computation">computation</dfn>,</td></tr>
<tr><th id="2950">2950</th><td>    <em>const</em> <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt;&amp; <dfn class="local col2 decl" id="762arguments" title='arguments' data-type='const std::vector&lt;llvm::Value *&gt; &amp;' data-ref="762arguments">arguments</dfn>, <span class="namespace">tensorflow::</span><a class="type" href="../../../../core/lib/core/stringpiece.h.html#tensorflow::StringPiece" title='tensorflow::StringPiece' data-ref="tensorflow::StringPiece">StringPiece</a> <dfn class="local col3 decl" id="763name" title='name' data-type='tensorflow::StringPiece' data-ref="763name">name</dfn>) {</td></tr>
<tr><th id="2951">2951</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function">Function</span>* <dfn class="local col4 decl" id="764llvm_function" title='llvm_function' data-type='llvm::Function *' data-ref="764llvm_function">llvm_function</dfn> = <a class="ref" href="../../map_util.h.html#_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE" title='xla::FindOrDie' data-ref="_ZN3xla9FindOrDieERT_RKNS0_10value_type10first_typeE">FindOrDie</a>(<span class='refarg'><a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::emitted_functions_" title='xla::cpu::IrEmitter::emitted_functions_' data-ref="xla::cpu::IrEmitter::emitted_functions_">emitted_functions_</a></span>, <a class="local col1 ref" href="#761computation" title='computation' data-ref="761computation">computation</a>);</td></tr>
<tr><th id="2952">2952</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>*&gt; <a class="ref fake" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col5 decl" id="765argument_addrs" title='argument_addrs' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="765argument_addrs">argument_addrs</dfn>;</td></tr>
<tr><th id="2953">2953</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col6 decl" id="766argument" title='argument' data-type='llvm::Value *' data-ref="766argument">argument</dfn> : <a class="local col2 ref" href="#762arguments" title='arguments' data-ref="762arguments">arguments</a>) {</td></tr>
<tr><th id="2954">2954</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value">Value</span>* <dfn class="local col7 decl" id="767argument_addr" title='argument_addr' data-type='llvm::Value *' data-ref="767argument_addr">argument_addr</dfn> = <span class="namespace">llvm_ir::</span><a class="ref" href="../llvm_ir/llvm_util.h.html#_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi" title='xla::llvm_ir::EmitAllocaAtFunctionEntry' data-ref="_ZN3xla7llvm_ir25EmitAllocaAtFunctionEntryEPN4llvm4TypeEN10tensorflow11StringPieceEPNS1_9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEi">EmitAllocaAtFunctionEntry</a>(</td></tr>
<tr><th id="2955">2955</th><td>        <a class="local col6 ref" href="#766argument" title='argument' data-ref="766argument">argument</a>-&gt;<span class='ref' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</span>(), <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#_ZN10tensorflow11StringPieceC1EPKc" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1EPKc"></a><q>"arg_addr"</q>, &amp;<a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>);</td></tr>
<tr><th id="2956">2956</th><td>    <a class="member" href="ir_emitter.h.html#xla::cpu::IrEmitter::ir_builder_" title='xla::cpu::IrEmitter::ir_builder_' data-ref="xla::cpu::IrEmitter::ir_builder_">ir_builder_</a>.<span class='ref' title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</span>(<a class="local col6 ref" href="#766argument" title='argument' data-ref="766argument">argument</a>, <a class="local col7 ref" href="#767argument_addr" title='argument_addr' data-ref="767argument_addr">argument_addr</a>);</td></tr>
<tr><th id="2957">2957</th><td>    <a class="local col5 ref" href="#765argument_addrs" title='argument_addrs' data-ref="765argument_addrs">argument_addrs</a>.<a class="ref" href="../../../../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col7 ref" href="#767argument_addr" title='argument_addr' data-ref="767argument_addr">argument_addr</a>);</td></tr>
<tr><th id="2958">2958</th><td>  }</td></tr>
<tr><th id="2959">2959</th><td>  <b>return</b> <a class="ref fake" href="../../statusor.h.html#_ZN3xla8StatusOrC1EOT_" title='xla::StatusOr::StatusOr&lt;T&gt;' data-ref="_ZN3xla8StatusOrC1EOT_"></a><a class="member" href="#_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE" title='xla::cpu::IrEmitter::EmitElementFunctionCall' data-ref="_ZN3xla3cpu9IrEmitter23EmitElementFunctionCallEPN4llvm8FunctionERKNS_5ShapeEN10tensorflow3gtl10ArraySliceIPNS2_5ValueEEENS8_11StringPieceE">EmitElementFunctionCall</a>(<a class="local col4 ref" href="#764llvm_function" title='llvm_function' data-ref="764llvm_function">llvm_function</a>,</td></tr>
<tr><th id="2960">2960</th><td>                                 <a class="type" href="../../shape_util.h.html#xla::ShapeUtil" title='xla::ShapeUtil' data-ref="xla::ShapeUtil">ShapeUtil</a>::<a class="ref" href="../../shape_util.h.html#_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE" title='xla::ShapeUtil::MakeShape' data-ref="_ZN3xla9ShapeUtil9MakeShapeENS_13PrimitiveTypeEN10tensorflow3gtl10ArraySliceIxEE">MakeShape</a>(<a class="local col0 ref" href="#760return_type" title='return_type' data-ref="760return_type">return_type</a>, <a class="ref" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1Ev" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1Ev">{</a>}),</td></tr>
<tr><th id="2961">2961</th><td>                                 <a class="ref fake" href="../../../../core/lib/gtl/array_slice.h.html#_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE" title='tensorflow::gtl::ArraySlice::ArraySlice&lt;T&gt;' data-ref="_ZN10tensorflow3gtl10ArraySliceC1ERKSt6vectorIT_SaIS3_EE"></a><a class="local col5 ref" href="#765argument_addrs" title='argument_addrs' data-ref="765argument_addrs">argument_addrs</a>, <a class="ref fake" href="../../../../core/lib/core/stringpiece.h.html#38" title='tensorflow::StringPiece::StringPiece' data-ref="_ZN10tensorflow11StringPieceC1ERKS0_"></a><a class="local col3 ref" href="#763name" title='name' data-ref="763name">name</a>);</td></tr>
<tr><th id="2962">2962</th><td>}</td></tr>
<tr><th id="2963">2963</th><td>}  <i>// namespace cpu</i></td></tr>
<tr><th id="2964">2964</th><td>}  <i>// namespace xla</i></td></tr>
<tr><th id="2965">2965</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2018-Aug-09</em> from project tensorflow revision <em>v1.8</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
